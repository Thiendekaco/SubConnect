"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_sub_connect=("undefined"!=typeof self?self:this).webpackChunk_subwallet_sub_connect||[]).push([[3475],{53475:(e,n,t)=>{t.d(n,{$0:()=>ie,$t:()=>fn,AW:()=>I,Au:()=>D,Bv:()=>Ce,Bw:()=>he,D:()=>se,D6:()=>Ge,DQ:()=>g,Dd:()=>en,E0:()=>be,EJ:()=>an,EN:()=>G,Gg:()=>On,Gq:()=>me,H1:()=>le,HI:()=>K,Hh:()=>Ne,IP:()=>fe,Ih:()=>Qe,JT:()=>dn,KC:()=>ae,L5:()=>xe,Ll:()=>H,M:()=>Ke,M_:()=>We,O6:()=>wn,ON:()=>bn,PM:()=>cn,Q0:()=>un,Q8:()=>q,UG:()=>ee,WG:()=>M,X_:()=>oe,Ym:()=>k,Z2:()=>sn,Z4:()=>ye,Z7:()=>He,_H:()=>Ie,al:()=>mn,b$:()=>ne,bW:()=>ve,cO:()=>Se,cw:()=>h,eG:()=>Oe,fc:()=>Le,gn:()=>ge,gp:()=>Me,gu:()=>O,h1:()=>Xe,hF:()=>de,hH:()=>ln,he:()=>De,iP:()=>Ee,in:()=>on,jU:()=>te,jd:()=>A,jv:()=>ze,m$:()=>C,n:()=>rn,nf:()=>pn,o8:()=>Fe,p8:()=>yn,pe:()=>B,qt:()=>qe,rF:()=>gn,rV:()=>U,rj:()=>L,sI:()=>En,uV:()=>N,uw:()=>Nn,vB:()=>V,xW:()=>Ye});var r=t(42934),o=t(71133),s=t(81293),c=t(49013),i=t(60550),u=t(74013),a=t(54924),f=t(10666),l=t(4997),d=t(51726),p=t(34126),y=t(39766),m=t(34406);const E=":";function g(e){const[n,t]=e.split(E);return{namespace:n,reference:t}}function h(e){const[n,t,r]=e.split(E);return{namespace:n,reference:t,address:r}}function b(e){const{namespace:n,reference:t}=h(e);return function(e){const{namespace:n,reference:t}=e;return[n,t].join(E)}({namespace:n,reference:t})}function O(e,n=[]){const t=[];return Object.keys(e).forEach((r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...o.accounts)})),t}function N(e,n=[]){const t=[];return Object.keys(e).forEach((r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...function(e){return function(e,n){const t=[];return e.forEach((e=>{const r=n(e);t.includes(r)||t.push(r)})),t}(e,b)}(o.accounts))})),t}function v(e,n){return e.includes(":")?[e]:n.chains||[]}const w="base10",I="base16",S="base64pad",_="utf8",P=0,U=1,T=0,j=1,R=12,$=32;function D(){const e=i.Au();return{privateKey:(0,u.BB)(e.secretKey,I),publicKey:(0,u.BB)(e.publicKey,I)}}function A(){const e=(0,s.randomBytes)($);return(0,u.BB)(e,I)}function C(e,n){const t=i.gi((0,u.mL)(e,I),(0,u.mL)(n,I),!0),r=new o.t(c.mE,t).expand($);return(0,u.BB)(r,I)}function k(e){const n=(0,c.vp)((0,u.mL)(e,I));return(0,u.BB)(n,I)}function L(e){const n=(0,c.vp)((0,u.mL)(e,_));return(0,u.BB)(n,I)}function M(e){return Number((0,u.BB)(e,w))}function K(e){const n=function(e){return(0,u.mL)(`${e}`,w)}(typeof e.type<"u"?e.type:P);if(M(n)===U&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof e.senderPublicKey<"u"?(0,u.mL)(e.senderPublicKey,I):void 0,o=typeof e.iv<"u"?(0,u.mL)(e.iv,I):(0,s.randomBytes)(R);return function(e){if(M(e.type)===U){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,u.BB)((0,u.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),S)}return(0,u.BB)((0,u.zo)([e.type,e.iv,e.sealed]),S)}({type:n,sealed:new r.OK((0,u.mL)(e.symKey,I)).seal(o,(0,u.mL)(e.message,_)),iv:o,senderPublicKey:t})}function B(e){const n=new r.OK((0,u.mL)(e.symKey,I)),{sealed:t,iv:o}=V(e.encoded),s=n.open(o,t);if(null===s)throw new Error("Failed to decrypt");return(0,u.BB)(s,_)}function V(e){const n=(0,u.mL)(e,S),t=n.slice(T,j),r=j;if(M(t)===U){const e=r+$,o=e+R,s=n.slice(r,e),c=n.slice(e,o);return{type:t,sealed:n.slice(o),iv:c,senderPublicKey:s}}const o=r+R,s=n.slice(r,o);return{type:t,sealed:n.slice(o),iv:s}}function H(e,n){const t=V(e);return G({type:M(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?(0,u.BB)(t.senderPublicKey,I):void 0,receiverPublicKey:n?.receiverPublicKey})}function G(e){const n=e?.type||P;if(n===U){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:n,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function q(e){return e.type===U&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var x=Object.defineProperty,F=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,Q=(e,n,t)=>n in e?x(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Z=(e,n)=>{for(var t in n||(n={}))W.call(n,t)&&Q(e,t,n[t]);if(F)for(var t of F(n))J.call(n,t)&&Q(e,t,n[t]);return e};const z="ReactNative",Y={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},X="js";function ee(){return typeof m<"u"&&typeof m.versions<"u"&&typeof m.versions.node<"u"}function ne(){return!(0,l.getDocument)()&&!!(0,l.getNavigator)()&&navigator.product===z}function te(){return!ee()&&!!(0,l.getNavigator)()&&!!(0,l.getDocument)()}function re(){return ne()?Y.reactNative:ee()?Y.node:te()?Y.browser:Y.unknown}function oe(){var e;try{return ne()&&typeof t.g<"u"&&typeof(null==t.g?void 0:t.g.Application)<"u"?null==(e=t.g.Application)?void 0:e.applicationId:void 0}catch{return}}function se(){return(0,d.D)()||{name:"",description:"",url:"",icons:[""]}}function ce(e,n,r){const o=function(){if(re()===Y.reactNative&&typeof t.g<"u"&&typeof(null==t.g?void 0:t.g.Platform)<"u"){const{OS:e,Version:n}=t.g.Platform;return[e,n].join("-")}const e=(0,a.qY)();if(null===e)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[n,e.name,e.version].join("-"):[n,e.version].join("-")}(),s=function(){var e;const n=re();return n===Y.browser?[n,(null==(e=(0,l.getLocation)())?void 0:e.host)||"unknown"].join(":"):n}();return[[e,n].join("-"),[X,r].join("-"),o,s].join("/")}function ie({protocol:e,version:n,relayUrl:t,sdkVersion:r,auth:o,projectId:s,useOnCloseEvent:c,bundleId:i}){const u=t.split("?"),a={auth:o,ua:ce(e,n,r),projectId:s,useOnCloseEvent:c||void 0,origin:i||void 0},f=function(e,n){let t=p.parse(e);return t=Z(Z({},t),n),p.stringify(t)}(u[1]||"",a);return u[0]+"?"+f}function ue(e,n){return e.filter((e=>n.includes(e))).length===e.length}function ae(e){return Object.fromEntries(e.entries())}function fe(e){return new Map(Object.entries(e))}function le(e=f.FIVE_MINUTES,n){const t=(0,f.toMiliseconds)(e||f.FIVE_MINUTES);let r,o,s;return{resolve:e=>{s&&r&&(clearTimeout(s),r(e))},reject:e=>{s&&o&&(clearTimeout(s),o(e))},done:()=>new Promise(((e,c)=>{s=setTimeout((()=>{c(new Error(n))}),t),r=e,o=c}))}}function de(e,n,t){return new Promise((async(r,o)=>{const s=setTimeout((()=>o(new Error(t))),n);try{r(await e)}catch(e){o(e)}clearTimeout(s)}))}function pe(e,n){if("string"==typeof n&&n.startsWith(`${e}:`))return n;if("topic"===e.toLowerCase()){if("string"!=typeof n)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${n}`}if("id"===e.toLowerCase()){if("number"!=typeof n)throw new Error('Value must be "number" for expirer target type: id');return`id:${n}`}throw new Error(`Unknown expirer target type: ${e}`)}function ye(e){return pe("topic",e)}function me(e){return pe("id",e)}function Ee(e){const[n,t]=e.split(":"),r={id:void 0,topic:void 0};if("topic"===n&&"string"==typeof t)r.topic=t;else{if("id"!==n||!Number.isInteger(Number(t)))throw new Error(`Invalid target, expected id:number or topic:string, got ${n}:${t}`);r.id=Number(t)}return r}function ge(e,n){return(0,f.fromMiliseconds)((n||Date.now())+(0,f.toMiliseconds)(e))}function he(e){return Date.now()>=(0,f.toMiliseconds)(e)}function be(e,n){return`${e}${n?`:${n}`:""}`}function Oe(e=[],n=[]){return[...new Set([...e,...n])]}async function Ne({id:e,topic:n,wcDeepLink:r}){try{if(!r)return;const o="string"==typeof r?JSON.parse(r):r;let s=o?.href;if("string"!=typeof s)return;s.endsWith("/")&&(s=s.slice(0,-1));const c=`${s}/wc?requestId=${e}&sessionTopic=${n}`,i=re();i===Y.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):i===Y.reactNative&&typeof(null==t.g?void 0:t.g.Linking)<"u"&&await t.g.Linking.openURL(c)}catch(e){console.error(e)}}async function ve(e,n){try{return await e.getItem(n)||(te()?localStorage.getItem(n):void 0)}catch(e){console.error(e)}}const we="irn";function Ie(e){return e?.relay||{protocol:we}}function Se(e){const n=y.RELAY_JSONRPC[e];if(typeof n>"u")throw new Error(`Relay Protocol not supported: ${e}`);return n}var _e=Object.defineProperty,Pe=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,je=(e,n,t)=>n in e?_e(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Re=(e,n)=>{for(var t in n||(n={}))Ue.call(n,t)&&je(e,t,n[t]);if(Pe)for(var t of Pe(n))Te.call(n,t)&&je(e,t,n[t]);return e};function $e(e,n="-"){const t={},r="relay"+n;return Object.keys(e).forEach((n=>{if(n.startsWith(r)){const o=n.replace(r,""),s=e[n];t[o]=s}})),t}function De(e){const n=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),t=-1!==e.indexOf("?")?e.indexOf("?"):void 0,r=e.substring(0,n),o=e.substring(n+1,t).split("@"),s=typeof t<"u"?e.substring(t):"",c=p.parse(s);return{protocol:r,topic:Ae(o[0]),version:parseInt(o[1],10),symKey:c.symKey,relay:$e(c)}}function Ae(e){return e.startsWith("//")?e.substring(2):e}function Ce(e){return`${e.protocol}:${e.topic}@${e.version}?`+p.stringify(Re({symKey:e.symKey},function(e,n="-"){const t={};return Object.keys(e).forEach((r=>{const o="relay"+n+r;e[r]&&(t[o]=e[r])})),t}(e.relay)))}function ke(e){const n=[];return e.forEach((e=>{const[t,r]=e.split(":");n.push(`${t}:${r}`)})),n}function Le(e,n){const t=on(e,n);if(t)throw new Error(t.message);const r={};for(const[n,t]of Object.entries(e))r[n]={methods:t.methods,events:t.events,chains:t.accounts.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))};return r}function Me(e){return e.includes(":")}function Ke(e){return Me(e)?e.split(":")[0]:e}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const Be={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ve={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function He(e,n){const{message:t,code:r}=Ve[e];return{message:n?`${t} ${n}`:t,code:r}}function Ge(e,n){const{message:t,code:r}=Be[e];return{message:n?`${t} ${n}`:t,code:r}}function qe(e,n){return!!Array.isArray(e)&&(!(typeof n<"u"&&e.length)||e.every(n))}function xe(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Fe(e){return typeof e>"u"}function We(e,n){return!(!n||!Fe(e))||"string"==typeof e&&!!e.trim().length}function Je(e,n){return!(!n||!Fe(e))||"number"==typeof e&&!isNaN(e)}function Qe(e,n){const{requiredNamespaces:t}=n,r=Object.keys(e.namespaces),o=Object.keys(t);let s=!0;return!!ue(o,r)&&(r.forEach((n=>{const{accounts:r,methods:o,events:c}=e.namespaces[n],i=ke(r),u=t[n];ue(v(n,u),i)&&ue(u.methods,o)&&ue(u.events,c)||(s=!1)})),s)}function Ze(e){return!(!We(e,!1)||!e.includes(":"))&&2===e.split(":").length}function ze(e){if(We(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function Ye(e){var n;return null==(n=e?.proposer)?void 0:n.publicKey}function Xe(e){return e?.topic}function en(e,n){let t=null;return We(e?.publicKey,!1)||(t=He("MISSING_OR_INVALID",`${n} controller public key should be a string`)),t}function nn(e){let n=!0;return qe(e)?e.length&&(n=e.every((e=>We(e,!1)))):n=!1,n}function tn(e,n){let t=null;return Object.values(e).forEach((e=>{if(t)return;const r=function(e,n){let t=null;return nn(e?.methods)?nn(e?.events)||(t=Ge("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):t=Ge("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),t}(e,`${n}, namespace`);r&&(t=r)})),t}function rn(e,n,t){let r=null;if(e&&xe(e)){const o=tn(e,n);o&&(r=o);const s=function(e,n,t){let r=null;return Object.entries(e).forEach((([e,o])=>{if(r)return;const s=function(e,n,t){let r=null;return qe(n)&&n.length?n.forEach((e=>{r||Ze(e)||(r=Ge("UNSUPPORTED_CHAINS",`${t}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):Ze(e)||(r=Ge("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}(e,v(e,o),`${n} ${t}`);s&&(r=s)})),r}(e,n,t);s&&(r=s)}else r=He("MISSING_OR_INVALID",`${n}, ${t} should be an object with data`);return r}function on(e,n){let t=null;if(e&&xe(e)){const r=tn(e,n);r&&(t=r);const o=function(e,n){let t=null;return Object.values(e).forEach((e=>{if(t)return;const r=function(e,n){let t=null;return qe(e)?e.forEach((e=>{t||function(e){if(We(e,!1)&&e.includes(":")){const n=e.split(":");if(3===n.length){const e=n[0]+":"+n[1];return!!n[2]&&Ze(e)}}return!1}(e)||(t=Ge("UNSUPPORTED_ACCOUNTS",`${n}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):t=Ge("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}(e?.accounts,`${n} namespace`);r&&(t=r)})),t}(e,n);o&&(t=o)}else t=He("MISSING_OR_INVALID",`${n}, namespaces should be an object with data`);return t}function sn(e){return We(e.protocol,!0)}function cn(e,n){let t=!1;return n&&!e?t=!0:e&&qe(e)&&e.length&&e.forEach((e=>{t=sn(e)})),t}function un(e){return"number"==typeof e}function an(e){return typeof e<"u"&&null!==typeof e}function fn(e){return!!(e&&"object"==typeof e&&e.code&&Je(e.code,!1)&&e.message&&We(e.message,!1))}function ln(e){return!(Fe(e)||!We(e.method,!1))}function dn(e){return!(Fe(e)||Fe(e.result)&&Fe(e.error)||!Je(e.id,!1)||!We(e.jsonrpc,!1))}function pn(e){return!(Fe(e)||!We(e.name,!1))}function yn(e,n){return!(!Ze(n)||!function(e){const n=[];return Object.values(e).forEach((e=>{n.push(...ke(e.accounts))})),n}(e).includes(n))}function mn(e,n,t){return!!We(t,!1)&&function(e,n){const t=[];return Object.values(e).forEach((e=>{ke(e.accounts).includes(n)&&t.push(...e.methods)})),t}(e,n).includes(t)}function En(e,n,t){return!!We(t,!1)&&function(e,n){const t=[];return Object.values(e).forEach((e=>{ke(e.accounts).includes(n)&&t.push(...e.events)})),t}(e,n).includes(t)}function gn(e,n,t){let r=null;const o=function(e){const n={};return Object.keys(e).forEach((t=>{var r;t.includes(":")?n[t]=e[t]:null==(r=e[t].chains)||r.forEach((r=>{n[r]={methods:e[t].methods,events:e[t].events}}))})),n}(e),s=function(e){const n={};return Object.keys(e).forEach((t=>{if(t.includes(":"))n[t]=e[t];else{const r=ke(e[t].accounts);r?.forEach((r=>{n[r]={accounts:e[t].accounts.filter((e=>e.includes(`${r}:`))),methods:e[t].methods,events:e[t].events}}))}})),n}(n),c=Object.keys(o),i=Object.keys(s),u=hn(Object.keys(e)),a=hn(Object.keys(n)),f=u.filter((e=>!a.includes(e)));return f.length&&(r=He("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${f.toString()}\n      Received: ${Object.keys(n).toString()}`)),ue(c,i)||(r=He("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.\n      Required: ${c.toString()}\n      Approved: ${i.toString()}`)),Object.keys(n).forEach((e=>{if(!e.includes(":")||r)return;const o=ke(n[e].accounts);o.includes(e)||(r=He("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${o.toString()}`))})),c.forEach((e=>{r||(ue(o[e].methods,s[e].methods)?ue(o[e].events,s[e].events)||(r=He("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${e}`)):r=He("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${e}`))})),r}function hn(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function bn(e,n){return Je(e,!1)&&e<=n.max&&e>=n.min}function On(){const e=re();return new Promise((n=>{switch(e){case Y.browser:n(te()&&navigator?.onLine);break;case Y.reactNative:n(async function(){if(ne()&&typeof t.g<"u"&&null!=t.g&&t.g.NetInfo){const e=await(null==t.g?void 0:t.g.NetInfo.fetch());return e?.isConnected}return!0}());break;case Y.node:default:n(!0)}}))}function Nn(e){switch(re()){case Y.browser:!function(e){!ne()&&te()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case Y.reactNative:!function(e){ne()&&typeof t.g<"u"&&null!=t.g&&t.g.NetInfo&&t.g?.NetInfo.addEventListener((n=>e(n?.isConnected)))}(e);case Y.node:}}const vn={};class wn{static get(e){return vn[e]}static set(e,n){vn[e]=n}static delete(e){delete vn[e]}}}}]);