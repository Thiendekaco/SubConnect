/*! For license information please see 5438.584e3b547302a223a131.js.LICENSE.txt */
(("undefined"!=typeof self?self:this).webpackChunk_subwallet_sub_connect=("undefined"!=typeof self?self:this).webpackChunk_subwallet_sub_connect||[]).push([[5438],{751:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.NavigateToDashboard=t.WebUSBCouldNotPair=t.WebHIDCouldNotPair=t.WebUSBCouldNotInitialize=t.WebHIDCouldNotInitialize=t.WebUSBNotAvailable=t.WebHIDNotAvailable=t.FirmwareUpdateRequired=t.WrongApp=t.SelectApp=t.ConflictingApp=t.PopupClosedError=t.DeviceLocked=t.DisconnectedDeviceDuringOperation=t.DeviceDisconnected=t.ActionCancelled=t.HDWalletError=t.HDWalletErrorType=void 0,function(e){e.ActionCancelled="ActionCancelled",e.DeviceDisconnected="DeviceDisconnected",e.DisconnectedDeviceDuringOperation="DisconnectedDeviceDuringOperation",e.DeviceLocked="DeviceLocked",e.PopupClosedError="PopupClosedError",e.ConflictingApp="ConflictingApp",e.SelectApp="SelectApp",e.WrongApp="WrongApp",e.FirmwareUpdateRequired="FirmwareUpdateRequired",e.WebHIDNotAvailable="WebHIDNotAvailable",e.WebHIDCouldNotInitialize="WebHIDCouldNotInitialize",e.WebHIDCouldNotPair="WebHIDCouldNotPair",e.WebUSBNotAvailable="WebUSBNotAvailable",e.WebUSBCouldNotInitialize="WebUSBCouldNotInitialize",e.WebUSBCouldNotPair="WebUSBCouldNotPair",e.NavigateToDashboard="NavigateToDashboard"}(r||(t.HDWalletErrorType=r={}));class n extends Error{constructor(e,t){super(e),this.name=t,this.type=t,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}}t.HDWalletError=n,t.ActionCancelled=class extends n{constructor(){super("Action cancelled",r.ActionCancelled)}},t.DeviceDisconnected=class extends n{constructor(){super("Device disconnected",r.DeviceDisconnected)}},t.DisconnectedDeviceDuringOperation=class extends n{constructor(){super("Ledger device disconnected during operation",r.DisconnectedDeviceDuringOperation)}},t.DeviceLocked=class extends n{constructor(){super("Device locked",r.DeviceLocked)}},t.PopupClosedError=class extends n{constructor(){super("TrezorConnect popup closed",r.PopupClosedError)}},t.ConflictingApp=class extends n{constructor(e){super(`Conflicting Application: Another wallet is trying to connect with your ${e}.`,r.ConflictingApp),this.model=e}},t.SelectApp=class extends n{constructor(e,t){super(`Please open the ${t} app on your ${e}.`,r.SelectApp)}},t.WrongApp=class extends n{constructor(e,t){super(`Wrong app open. Please open the ${t} app on your ${e} and try again.`,r.WrongApp)}},t.FirmwareUpdateRequired=class extends n{constructor(e,t){super(`Firmware ${t} or later is required to use your ${e} with this client. Please update your device.`,r.FirmwareUpdateRequired)}},t.WebHIDNotAvailable=class extends n{constructor(){super("WebHID is not available in this browser. We recommend trying Chrome.",r.WebHIDNotAvailable)}},t.WebUSBNotAvailable=class extends n{constructor(){super("WebUSB is not available in this browser. We recommend trying Chrome.",r.WebUSBNotAvailable)}},t.WebHIDCouldNotInitialize=class extends n{constructor(e,t){super(`Could not initialize ${e}: ${t}`,r.WebHIDCouldNotInitialize)}},t.WebUSBCouldNotInitialize=class extends n{constructor(e,t){super(`Could not initialize ${e}: ${t}`,r.WebUSBCouldNotInitialize)}},t.WebHIDCouldNotPair=class extends n{constructor(e,t){super(`Could not pair ${e}: ${t}`,r.WebHIDCouldNotPair)}},t.WebUSBCouldNotPair=class extends n{constructor(e,t){super(`Could not pair ${e}: ${t}`,r.WebUSBCouldNotPair)}},t.NavigateToDashboard=class extends n{constructor(e){super(`Please navigate to the dashboard of your ${e}.`,r.NavigateToDashboard)}}},1674:(e,t,r)=>{"use strict";r.d(t,{F:()=>i,m:()=>o});var n=r(32984);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return 0===e.length?n.D:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}},2014:(e,t,r)=>{"use strict";r.d(t,{ee:()=>l,yU:()=>c});var n=r(61220),i=r(3672),o=r(81065),s=r(90189),a=r(60852),u=r(2683);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),(0,i.c)(e,void 0).lift(new l(r))}var l=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.resultSelector))},e}(),h=function(e){function t(t,r,n){void 0===n&&(n=Object.create(null));var i=e.call(this,t)||this;return i.resultSelector=r,i.iterators=[],i.active=0,i.resultSelector="function"==typeof r?r:void 0,i}return n.C6(t,e),t.prototype._next=function(e){var t=this.iterators;(0,o.c)(e)?t.push(new d(e)):"function"==typeof e[a.lJ]?t.push(new f(e[a.lJ]())):t.push(new p(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];n.stillUnsubscribed?this.destination.add(n.subscribe()):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++)if("function"==typeof(s=e[n]).hasValue&&!s.hasValue())return;var i=!1,o=[];for(n=0;n<t;n++){var s,a=(s=e[n]).next();if(s.hasCompleted()&&(i=!0),a.done)return void r.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.v),f=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),d=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[a.lJ]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),p=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.parent=r,i.observable=n,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return n.C6(t,e),t.prototype[a.lJ]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return(0,u.tS)(this.observable,new u.zA(this))},t}(u.gn)},2683:(e,t,r)=>{"use strict";r.d(t,{gn:()=>u,tS:()=>c,zA:()=>a});var n=r(61220),i=r(90189),o=r(86323),s=r(47722),a=function(e){function t(t){var r=e.call(this)||this;return r.parent=t,r}return n.C6(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(i.v),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.C6(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(i.v);function c(e,t){if(!t.closed){if(e instanceof o.c)return e.subscribe(t);var r;try{r=(0,s.i)(e)(t)}catch(e){t.error(e)}return r}}},2795:(e,t,r)=>{"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(87543)),n(r(86528))},3176:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(27294));t.makeChecker=function(e){return function(t){let r;if(e.includes(t.key[0])&&(r=t.key.slice(1),33!==r.length&&65!==r.length||![2,3,4].includes(r[0])))throw new Error("Format Error: invalid pubkey in key 0x"+i.toHex(t.key));return r}}},3490:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var n=r(61220),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.C6(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(r(90189).v)},3672:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(86323),i=r(24852),o=r(91057);function s(e,t){return t?(0,o.V)(e,t):new n.c((0,i.v)(e))}},3976:(e,t,r)=>{"use strict";r.d(t,{QE:()=>s,YZ:()=>u});var n=r(61220),i=r(90189),o=r(19376);function s(e,t){return void 0===t&&(t=0),function(r){return r.lift(new a(e,t))}}var a=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))},e}(),u=function(e){function t(t,r,n){void 0===n&&(n=0);var i=e.call(this,t)||this;return i.scheduler=r,i.delay=n,i}return n.C6(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new c(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o.E.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o.E.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(o.E.createComplete()),this.unsubscribe()},t}(i.v),c=function(){return function(e,t){this.notification=e,this.destination=t}}()},4439:(e,t,r)=>{"use strict";r.d(t,{ZS:()=>h,zV:()=>l});var n=r(61220),i=r(42637),o=r(81065),s=r(3490),a=r(41117),u=r(3672),c={};function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=void 0,n=void 0;return(0,i.m)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&(0,o.c)(e[0])&&(e=e[0]),(0,u.c)(e,n).lift(new h(r))}var h=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.resultSelector))},e}(),f=function(e){function t(t,r){var n=e.call(this,t)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return n.C6(t,e),t.prototype._next=function(e){this.values.push(c),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add((0,a.F)(this,n,void 0,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r){var n=this.values,i=n[r],o=this.toRespond?i===c?--this.toRespond:this.toRespond:0;n[r]=t,0===o&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.E)},4679:(e,t,r)=>{"use strict";r.d(t,{T:()=>o});var n=r(61220),i=r(90189);function o(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new s(e,t))}}var s=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}(),a=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return n.C6(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.v)},5061:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(7170)),s=n(r(27294));t.decode=function(e){if(e.key[0]!==i.OutputTypes.TAP_TREE||1!==e.key.length)throw new Error("Decode Error: could not decode tapTree with key 0x"+s.toHex(e.key));let t=0;const r=[];for(;t<e.value.length;){const n=e.value[t++],i=e.value[t++],{numberValue:s,bytes:a}=o.decode(e.value,t);t+=a,r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+s)}),t+=s}return{leaves:r}},t.encode=function(e){const t=Uint8Array.from([i.OutputTypes.TAP_TREE]),r=[].concat(...e.leaves.map(e=>[Uint8Array.of(e.depth,e.leafVersion),o.encode(BigInt(e.script.length)).buffer,e.script]));return{key:t,value:s.concat(r)}},t.expected="{ leaves: [{ depth: number; leafVersion: number, script: Uint8Array; }] }",t.check=function(e){return Array.isArray(e.leaves)&&e.leaves.every(e=>e.depth>=0&&e.depth<=128&&(254&e.leafVersion)===e.leafVersion&&e.script instanceof Uint8Array)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapTree}},5477:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));t.decode=function(e){if(e.key[0]!==i.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+o.toHex(e.key));return e.value},t.encode=function(e){return{key:new Uint8Array([i.InputTypes.NON_WITNESS_UTXO]),value:e}},t.expected="Uint8Array",t.check=function(e){return e instanceof Uint8Array},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo}},6065:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(80169).Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function u(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function c(e,t,r,i){for(var o=0,s=0,a=Math.min(e.length,r),u=t;u<a;u++){var c=e.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&s<i,"Invalid character"),o+=s}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,l=r;l<a;l+=n)u=c(e,l,l+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){l(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=f;d++){var p=c-d|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),r=0!==o||s!==this.length-1?f[6-u.length]+u+r:u+r}for(0!==o&&(r=o.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=d[e],l=p[e];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var g=h.modrn(l).toString(e);r=(h=h.idivn(l)).isZero()?g+r:f[c-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===o?(r<e.length&&(e[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===o?(r>=0&&(e[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,i,o,s=e.words,a=t.words,u=r.words,c=0,l=0|s[0],h=8191&l,f=l>>>13,d=0|s[1],p=8191&d,g=d>>>13,m=0|s[2],y=8191&m,b=m>>>13,v=0|s[3],w=8191&v,E=v>>>13,A=0|s[4],S=8191&A,_=A>>>13,I=0|s[5],N=8191&I,k=I>>>13,P=0|s[6],T=8191&P,R=P>>>13,O=0|s[7],C=8191&O,x=O>>>13,U=0|s[8],M=8191&U,L=U>>>13,B=0|s[9],D=8191&B,F=B>>>13,j=0|a[0],G=8191&j,W=j>>>13,H=0|a[1],K=8191&H,z=H>>>13,V=0|a[2],q=8191&V,J=V>>>13,X=0|a[3],Y=8191&X,Q=X>>>13,$=0|a[4],Z=8191&$,ee=$>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,fe=le>>>13,de=0|a[9],pe=8191&de,ge=de>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(c+(n=Math.imul(h,G))|0)+((8191&(i=(i=Math.imul(h,W))+Math.imul(f,G)|0))<<13)|0;c=((o=Math.imul(f,W))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,G),i=(i=Math.imul(p,W))+Math.imul(g,G)|0,o=Math.imul(g,W);var ye=(c+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,z)|0)+Math.imul(f,K)|0))<<13)|0;c=((o=o+Math.imul(f,z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,G),i=(i=Math.imul(y,W))+Math.imul(b,G)|0,o=Math.imul(b,W),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(g,K)|0,o=o+Math.imul(g,z)|0;var be=(c+(n=n+Math.imul(h,q)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,q)|0))<<13)|0;c=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,G),i=(i=Math.imul(w,W))+Math.imul(E,G)|0,o=Math.imul(E,W),n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,z)|0)+Math.imul(b,K)|0,o=o+Math.imul(b,z)|0,n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,J)|0;var ve=(c+(n=n+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,Q)|0)+Math.imul(f,Y)|0))<<13)|0;c=((o=o+Math.imul(f,Q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(S,G),i=(i=Math.imul(S,W))+Math.imul(_,G)|0,o=Math.imul(_,W),n=n+Math.imul(w,K)|0,i=(i=i+Math.imul(w,z)|0)+Math.imul(E,K)|0,o=o+Math.imul(E,z)|0,n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(b,q)|0,o=o+Math.imul(b,J)|0,n=n+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,Q)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,Q)|0;var we=(c+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,Z)|0))<<13)|0;c=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,W))+Math.imul(k,G)|0,o=Math.imul(k,W),n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,z)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,z)|0,n=n+Math.imul(w,q)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,J)|0,n=n+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,Q)|0)+Math.imul(b,Y)|0,o=o+Math.imul(b,Q)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Z)|0,o=o+Math.imul(g,ee)|0;var Ee=(c+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(f,re)|0))<<13)|0;c=((o=o+Math.imul(f,ne)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(T,G),i=(i=Math.imul(T,W))+Math.imul(R,G)|0,o=Math.imul(R,W),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,z)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,z)|0,n=n+Math.imul(S,q)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(w,Y)|0,i=(i=i+Math.imul(w,Q)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,Q)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(g,re)|0,o=o+Math.imul(g,ne)|0;var Ae=(c+(n=n+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(f,oe)|0))<<13)|0;c=((o=o+Math.imul(f,se)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(C,G),i=(i=Math.imul(C,W))+Math.imul(x,G)|0,o=Math.imul(x,W),n=n+Math.imul(T,K)|0,i=(i=i+Math.imul(T,z)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,z)|0,n=n+Math.imul(N,q)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(S,Y)|0,i=(i=i+Math.imul(S,Q)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,Q)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,se)|0;var Se=(c+(n=n+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((o=o+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(M,G),i=(i=Math.imul(M,W))+Math.imul(L,G)|0,o=Math.imul(L,W),n=n+Math.imul(C,K)|0,i=(i=i+Math.imul(C,z)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,z)|0,n=n+Math.imul(T,q)|0,i=(i=i+Math.imul(T,J)|0)+Math.imul(R,q)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,Q)|0)+Math.imul(k,Y)|0,o=o+Math.imul(k,Q)|0,n=n+Math.imul(S,Z)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(E,re)|0,o=o+Math.imul(E,ne)|0,n=n+Math.imul(y,oe)|0,i=(i=i+Math.imul(y,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(g,ue)|0,o=o+Math.imul(g,ce)|0;var _e=(c+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(D,G),i=(i=Math.imul(D,W))+Math.imul(F,G)|0,o=Math.imul(F,W),n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,z)|0)+Math.imul(L,K)|0,o=o+Math.imul(L,z)|0,n=n+Math.imul(C,q)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(x,q)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,Q)|0)+Math.imul(R,Y)|0,o=o+Math.imul(R,Q)|0,n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,ee)|0,n=n+Math.imul(S,re)|0,i=(i=i+Math.imul(S,ne)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,n=n+Math.imul(y,ue)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(b,ue)|0,o=o+Math.imul(b,ce)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(g,he)|0,o=o+Math.imul(g,fe)|0;var Ie=(c+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ge)|0)+Math.imul(f,pe)|0))<<13)|0;c=((o=o+Math.imul(f,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,z))+Math.imul(F,K)|0,o=Math.imul(F,z),n=n+Math.imul(M,q)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(C,Y)|0,i=(i=i+Math.imul(C,Q)|0)+Math.imul(x,Y)|0,o=o+Math.imul(x,Q)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(N,re)|0,i=(i=i+Math.imul(N,ne)|0)+Math.imul(k,re)|0,o=o+Math.imul(k,ne)|0,n=n+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,n=n+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,n=n+Math.imul(y,he)|0,i=(i=i+Math.imul(y,fe)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,fe)|0;var Ne=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;c=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(D,q),i=(i=Math.imul(D,J))+Math.imul(F,q)|0,o=Math.imul(F,J),n=n+Math.imul(M,Y)|0,i=(i=i+Math.imul(M,Q)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,Q)|0,n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,se)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,se)|0,n=n+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,n=n+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var ke=(c+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(b,pe)|0))<<13)|0;c=((o=o+Math.imul(b,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(D,Y),i=(i=Math.imul(D,Q))+Math.imul(F,Y)|0,o=Math.imul(F,Q),n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,ee)|0,n=n+Math.imul(C,re)|0,i=(i=i+Math.imul(C,ne)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ne)|0,n=n+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,n=n+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(k,ue)|0,o=o+Math.imul(k,ce)|0,n=n+Math.imul(S,he)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,fe)|0;var Pe=(c+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ge)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,ee))+Math.imul(F,Z)|0,o=Math.imul(F,ee),n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(L,re)|0,o=o+Math.imul(L,ne)|0,n=n+Math.imul(C,oe)|0,i=(i=i+Math.imul(C,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,n=n+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,n=n+Math.imul(N,he)|0,i=(i=i+Math.imul(N,fe)|0)+Math.imul(k,he)|0,o=o+Math.imul(k,fe)|0;var Te=(c+(n=n+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,ge)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(D,re),i=(i=Math.imul(D,ne))+Math.imul(F,re)|0,o=Math.imul(F,ne),n=n+Math.imul(M,oe)|0,i=(i=i+Math.imul(M,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,n=n+Math.imul(C,ue)|0,i=(i=i+Math.imul(C,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,n=n+Math.imul(T,he)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,fe)|0;var Re=(c+(n=n+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,ge)|0)+Math.imul(k,pe)|0))<<13)|0;c=((o=o+Math.imul(k,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(D,oe),i=(i=Math.imul(D,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),n=n+Math.imul(M,ue)|0,i=(i=i+Math.imul(M,ce)|0)+Math.imul(L,ue)|0,o=o+Math.imul(L,ce)|0,n=n+Math.imul(C,he)|0,i=(i=i+Math.imul(C,fe)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,fe)|0;var Oe=(c+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,ge)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(D,ue),i=(i=Math.imul(D,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),n=n+Math.imul(M,he)|0,i=(i=i+Math.imul(M,fe)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,fe)|0;var Ce=(c+(n=n+Math.imul(C,pe)|0)|0)+((8191&(i=(i=i+Math.imul(C,ge)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(D,he),i=(i=Math.imul(D,fe))+Math.imul(F,he)|0,o=Math.imul(F,fe);var xe=(c+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,ge)|0)+Math.imul(L,pe)|0))<<13)|0;c=((o=o+Math.imul(L,ge)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863;var Ue=(c+(n=Math.imul(D,pe))|0)+((8191&(i=(i=Math.imul(D,ge))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,ge))+(i>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,u[0]=me,u[1]=ye,u[2]=be,u[3]=ve,u[4]=we,u[5]=Ee,u[6]=Ae,u[7]=Se,u[8]=_e,u[9]=Ie,u[10]=Ne,u[11]=ke,u[12]=Pe,u[13]=Te,u[14]=Re,u[15]=Oe,u[16]=Ce,u[17]=xe,u[18]=Ue,0!==c&&(u[19]=c,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function b(e,t,r){return y(e,t,r)}function v(e,t){this.x=e,this.y=t}Math.imul||(m=g),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?g(this,e,t):r<1024?y(this,e,t):b(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},v.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},v.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},v.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,f=c,d=0;d<s;d++){var p=r[l+d],g=n[l+d],m=r[l+d+s],y=n[l+d+s],b=h*m-f*y;y=h*y+f*m,m=b,r[l+d]=p+m,n[l+d]=g+y,r[l+d+s]=p-m,n[l+d+s]=g-y,d!==a&&(b=u*h-c*f,f=u*f+c*h,h=b)}},v.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},v.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},v.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},v.prototype.convert13b=function(e,t,r,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)r[s]=0;n(0===o),n(!(-8192&o))},v.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},v.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var d=0;d<n;d++){var p=a[d]*l[d]-u[d]*h[d];u[d]=a[d]*h[d]+u[d]*l[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),b(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,s=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=s>>>26,this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<r;this.words[t]=u|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=r;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},o.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,s=e.length+r;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!=(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,u=n.length-i.length;if("mod"!==t){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=n.clone()._ishlnsubmul(i,1,u);0===l.negative&&(n=l,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;0===(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,g=1;0===(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),s.isub(u)):(r.isub(t),a.isub(i),u.isub(s))}return{a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0===(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,f=1;0===(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(a)):(r.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return!(1&this.words[0])},o.prototype.isOdd=function(){return!(1&~this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new N(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function E(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function I(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function N(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){N.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},E.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},E.prototype.split=function(e,t){e.iushrn(this.n,0,t)},E.prototype.imulK=function(e){return e.imul(this.k)},i(A,E),A.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},A.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(S,E),i(_,E),i(I,E),I.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new A;else if("p224"===e)t=new S;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new I}return w[e]=t,t},N.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},N.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},N.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},N.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},N.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},N.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},N.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},N.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},N.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},N.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},N.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},N.prototype.isqr=function(e){return this.imul(e,e.clone())},N.prototype.sqr=function(e){return this.mul(e,e)},N.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),f=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=s;0!==d.cmp(a);){for(var g=d,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<p);var y=this.pow(h,new o(1).iushln(p-m-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=m}return f},N.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},N.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var h=c>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}u=26}return i},N.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},N.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new k(e)},i(k,N),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},6069:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_TAPTREE_DEPTH=t.LEAF_VERSION_TAPSCRIPT=void 0,t.rootHashFromPath=function(e,t){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);const r=(e.length-33)/32;let n=t;for(let t=0;t<r;t++){const r=e.slice(33+32*t,65+32*t);n=l.compare(n,r)<0?p(n,r):p(r,n)}return n},t.toHashTree=function e(t){if((0,c.isTapleaf)(t))return{hash:f(t)};const r=[e(t[0]),e(t[1])];r.sort((e,t)=>l.compare(e.hash,t.hash));const[n,i]=r;return{hash:p(n.hash,i.hash),left:n,right:i}},t.findScriptPath=function e(t,r){if(h(t)){const n=e(t.left,r);if(void 0!==n)return[...n,t.right.hash];const i=e(t.right,r);if(void 0!==i)return[...i,t.left.hash]}else if(0===l.compare(t.hash,r))return[]},t.tapleafHash=f,t.tapTweakHash=d,t.tweakKey=function(e,t){if(!(e instanceof Uint8Array))return null;if(32!==e.length)return null;if(t&&32!==t.length)return null;const r=d(e,t),n=(0,s.getEccLib)().xOnlyPointAddTweak(e,r);return n&&null!==n.xOnlyPubkey?{parity:n.parity,x:Uint8Array.from(n.xOnlyPubkey)}:null};const s=r(87659),a=o(r(43807)),u=r(60817),c=r(22343),l=o(r(27294));t.LEAF_VERSION_TAPSCRIPT=192,t.MAX_TAPTREE_DEPTH=128;const h=e=>"left"in e&&"right"in e;function f(e){const r=e.version||t.LEAF_VERSION_TAPSCRIPT;return a.taggedHash("TapLeaf",l.concat([Uint8Array.from([r]),g(e.output)]))}function d(e,t){return a.taggedHash("TapTweak",l.concat(t?[e,t]:[e]))}function p(e,t){return a.taggedHash("TapBranch",l.concat([e,t]))}function g(e){const t=u.varuint.encodingLength(e.length),r=new Uint8Array(t);return u.varuint.encode(e.length,r),l.concat([r,e])}},7170:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function(e,t,r){u(e),void 0===r&&(r=0),void 0===t&&(t=new Uint8Array(c(e)));let n=0;return e<253?(t.set([Number(e)],r),n=1):e<=65535?(t.set([253],r),s.writeUInt16(t,r+1,Number(e),"LE"),n=3):e<=4294967295?(t.set([254],r),s.writeUInt32(t,r+1,Number(e),"LE"),n=5):(t.set([255],r),s.writeUInt64(t,r+1,BigInt(e),"LE"),n=9),{buffer:t,bytes:n}},t.decode=function(e,t){void 0===t&&(t=0);const r=e.at(t);if(void 0===r)throw new Error("buffer too small");if(r<253)return{numberValue:r,bigintValue:BigInt(r),bytes:1};if(253===r){const r=s.readUInt16(e,t+1,"LE");return{numberValue:r,bigintValue:BigInt(r),bytes:3}}if(254===r){const r=s.readUInt32(e,t+1,"LE");return{numberValue:r,bigintValue:BigInt(r),bytes:5}}{const r=s.readUInt64(e,t+1,"LE");return{numberValue:r<=Number.MAX_SAFE_INTEGER?Number(r):null,bigintValue:r,bytes:9}}},t.encodingLength=c;const s=o(r(44274)),a=e=>{if(e<0||e>0xffffffffffffffffn)throw new RangeError("value out of range")};function u(e){"number"==typeof e?function(e){if(e<0||e>Number.MAX_SAFE_INTEGER||e%1!=0)throw new RangeError("value out of range")}(e):a(e)}function c(e){return u(e),e<253?1:e<=65535?3:e<=4294967295?5:9}},7543:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));t.decode=function(e){if(e.key[0]!==i.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+o.toHex(e.key));return e.value},t.encode=function(e){return{key:new Uint8Array([i.InputTypes.FINAL_SCRIPTSIG]),value:e}},t.expected="Uint8Array",t.check=function(e){return e instanceof Uint8Array},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}},9268:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.toXOnly=void 0,t.tapScriptFinalizer=function(e,t,r){const n=function(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);const n=(e.tapLeafScript||[]).sort((e,t)=>e.controlBlock.length-t.controlBlock.length).find(t=>function(e,t,r){const n=(0,c.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||0===h.compare(n,r))&&void 0!==t.find(e=>0===h.compare(e.leafHash,n))}(t,e.tapScriptSig,r));if(!n)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return n}(t,e,r);try{const e=function(e,t){const r=(0,c.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter(e=>0===h.compare(e.leafHash,r)).map(e=>function(e,t){return Object.assign({positionInScript:(0,u.pubkeyPositionInScript)(t.pubkey,e)},t)}(t.script,e)).sort((e,t)=>t.positionInScript-e.positionInScript).map(e=>e.signature)}(t,n),r=e.concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,u.witnessStackToScriptWitness)(r)}}catch(t){throw new Error(`Can not finalize taproot input #${e}: ${t}`)}},t.serializeTaprootSignature=function(e,t){const r=t?Uint8Array.from([t]):Uint8Array.from([]);return h.concat([e,r])},t.isTaprootInput=d,t.isTaprootOutput=p,t.checkTaprootInputFields=function(e,t,r){(function(e,t,r){const n=d(e)&&w(t),i=w(e)&&d(t),o=e===t&&d(t)&&w(t);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)})(e,t,r),function(e,t,r){if(t.tapMerkleRoot){const n=(t.tapLeafScript||[]).every(e=>v(e,t.tapMerkleRoot)),i=(e.tapLeafScript||[]).every(e=>v(e,t.tapMerkleRoot));if(!n||!i)throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot&&!(t.tapLeafScript||[]).every(t=>v(t,e.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}(e,t,r)},t.checkTaprootOutputFields=function(e,t,r){(function(e,t,r){const n=p(e)&&w(t),i=w(e)&&p(t),o=e===t&&p(t)&&w(t);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)})(e,t,r),function(e,t){if(!t.tapTree&&!t.tapInternalKey)return;const r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){const{script:t}=e,i=function(e,t){const r=t&&g(t.leaves),{output:n}=(0,l.p2tr)({internalPubkey:e,scriptTree:r});return n}(r,n);if(t&&0!==h.compare(i,t))throw new Error("Error adding output. Script or address mismatch.")}}(e,t)},t.tweakInternalPubKey=function(e,t){const r=t.tapInternalKey,n=r&&(0,c.tweakKey)(r,t.tapMerkleRoot);if(!n)throw new Error(`Cannot tweak tap internal key for input #${e}. Public key: ${r&&h.toHex(r)}`);return n.x},t.tapTreeToList=function(e){if(!(0,s.isTaptree)(e))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return y(e)},t.tapTreeFromList=g,t.checkTaprootInputForSigs=function(e,t){return function(e){const t=[];if(e.tapKeySig&&t.push(e.tapKeySig),e.tapScriptSig&&t.push(...e.tapScriptSig.map(e=>e.signature)),!t.length){const r=function(e){if(!e)return;const t=e.slice(2);return 64===t.length||65===t.length?t:void 0}(e.finalScriptWitness);r&&t.push(r)}return t}(e).some(e=>(0,f.signatureBlocksAction)(e,m,t))};const s=r(22343),a=r(62060),u=r(97356),c=r(6069),l=r(95160),h=o(r(27294)),f=r(97356);function d(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,u.isP2TR)(e.witnessUtxo.script))}function p(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,u.isP2TR)(t))}function g(e=[]){return 1===e.length&&0===e[0].depth?{output:e[0].script,version:e[0].leafVersion}:function(e){let t;for(const r of e)if(t=b(r,t),!t)throw new Error("No room left to insert tapleaf in tree");return t}(e)}function m(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||a.Transaction.SIGHASH_DEFAULT}}function y(e,t=[],r=0){if(r>c.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return e?(0,s.isTapleaf)(e)?(t.push({depth:r,leafVersion:e.version||c.LEAF_VERSION_TAPSCRIPT,script:e.output}),t):(e[0]&&y(e[0],t,r+1),e[1]&&y(e[1],t,r+1),t):[]}function b(e,t,r=0){if(r>c.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(e.depth===r)return t?void 0:{output:e.script,version:e.leafVersion};if((0,s.isTapleaf)(t))return;const n=b(e,t&&t[0],r+1);if(n)return[n,t&&t[1]];const i=b(e,t&&t[1],r+1);return i?[t&&t[0],i]:void 0}function v(e,t){if(!t)return!0;const r=(0,c.tapleafHash)({output:e.script,version:e.leafVersion}),n=(0,c.rootHashFromPath)(e.controlBlock,r);return 0===h.compare(n,t)}function w(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}t.toXOnly=e=>32===e.length?e:e.slice(1,33)},12023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},13057:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(31509),t),i(r(62151),t),i(r(51131),t),i(r(20733),t),i(r(73110),t),i(r(40282),t),i(r(86572),t),i(r(98764),t),i(r(85257),t),i(r(751),t),i(r(84808),t),i(r(99676),t),i(r(94516),t),i(r(12023),t),i(r(36093),t),i(r(13963),t),i(r(89239),t),i(r(83125),t),i(r(96988),t),i(r(33612),t),i(r(36632),t)},13403:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(27294));t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e||1!==t.key.length)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+i.toHex(t.key));if(32!==t.value.length)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return t.value},encode:function(t){return{key:Uint8Array.from([e]),value:t}},check:function(e){return e instanceof Uint8Array&&32===e.length},expected:"Uint8Array",canAdd:function(e,t){return!!e&&!!t&&void 0===e.tapInternalKey}}}},13826:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var n=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=function(){return Date.now()},e}()},13963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.terraDescribePath=function(e){const t={verbose:(0,n.addressNListToBIP32)(e),coin:"Terra",isKnown:!1};if(5!=e.length)return t;if(2147483692!=e[0])return t;if(e[1]!=2147483648+(0,n.slip44ByCoin)("Terra"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(0!==e[3]||0!==e[4])return t;const r=2147483647&e[2];return{verbose:`Terra Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Terra",isKnown:!0,isPrefork:!1}};const n=r(33612)},15722:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.fastMerkleRoot=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");let r=e.length;const n=e.concat();for(;r>1;){let e=0;for(let i=0;i<r;i+=2,++e){const o=n[i],a=i+1===r?o:n[i+1],u=s.concat([o,a]);n[e]=t(u)}r=e}return n[0]};const s=o(r(27294))},15812:(e,t,r)=>{"use strict";r.d(t,{of:()=>s});var n=r(42637),i=r(3672),o=r(91057);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return(0,n.m)(r)?(e.pop(),(0,o.V)(e,r)):(0,i.c)(e)}},15850:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});var n=r(61220),i=r(46907),o=r(81678),s=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return n.C6(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.P;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i.B7)},15909:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(7170)),o=n(r(27294));function s(e){const t=e.key.length,r=e.value.length,n=i.encodingLength(t),o=i.encodingLength(r),s=new Uint8Array(n+t+o+r);return i.encode(t,s,0),s.set(e.key,n),i.encode(r,s,n+t),s.set(e.value,n+t+o),s}t.range=e=>[...Array(e).keys()],t.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},t.keyValsToBuffer=function(e){const t=e.map(s);return t.push(Uint8Array.from([0])),o.concat(t)},t.keyValToBuffer=s},18455:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));t.decode=function(e){if(e.key[0]!==i.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+o.toHex(e.key));if((e.key.length-2)%32!=0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+o.toHex(e.key));const t=e.value[e.value.length-1];if((254&e.key[1])!==t)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+o.toHex(e.key));const r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}},t.encode=function(e){const t=Uint8Array.from([i.InputTypes.TAP_LEAF_SCRIPT]),r=Uint8Array.from([e.leafVersion]);return{key:o.concat([t,e.controlBlock]),value:o.concat([e.script,r])}},t.expected="{ controlBlock: Uint8Array; leafVersion: number, script: Uint8Array; }",t.check=function(e){return e.controlBlock instanceof Uint8Array&&(e.controlBlock.length-1)%32==0&&(254&e.controlBlock[0])===e.leafVersion&&e.script instanceof Uint8Array},t.canAddToArray=function(e,t,r){const n=o.toHex(t.controlBlock);return!r.has(n)&&(r.add(n),0===e.filter(e=>0===o.compare(e.controlBlock,t.controlBlock)).length)}},19376:(e,t,r)=>{"use strict";r.d(t,{E:()=>a,I:()=>n});var n,i=r(53200),o=r(15812),s=r(39815);n||(n={});var a=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return(0,s.$)(this.error);case"C":return(0,i.I)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},19537:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));t.decode=function(e){if(e.key[0]!==i.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+o.toHex(e.key));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+o.toHex(e.key));return{pubkey:e.key.slice(1),signature:e.value}},t.encode=function(e){const t=new Uint8Array([i.InputTypes.PARTIAL_SIG]);return{key:o.concat([t,e.pubkey]),value:e.signature}},t.expected="{ pubkey: Uint8Array; signature: Uint8Array; }",t.check=function(e){return e.pubkey instanceof Uint8Array&&e.signature instanceof Uint8Array&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&function(e){if(!(e instanceof Uint8Array)||e.length<9)return!1;if(48!==e[0])return!1;if(e.length!==e[1]+3)return!1;if(2!==e[2])return!1;const t=e[3];if(t>33||t<1)return!1;if(2!==e[3+t+1])return!1;const r=e[3+t+2];return!(r>33||r<1)&&e.length===3+t+2+r+2}(e.signature)},t.canAddToArray=function(e,t,r){const n=o.toHex(t.pubkey);return!r.has(n)&&(r.add(n),0===e.filter(e=>0===o.compare(e.pubkey,t.pubkey)).length)}},19574:(e,t,r)=>{"use strict";function n(e){setTimeout(function(){throw e},0)}r.d(t,{T:()=>n})},20344:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bech32m=t.bech32=void 0;const r="qpzry9x8gf2tvdw0s3jn54khce6mua7l",n={};for(let e=0;e<32;e++){const t=r.charAt(e);n[t]=e}function i(e){const t=e>>25;return(33554431&e)<<5^996825010&-(1&t)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function o(e){let t=1;for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=i(t)^n>>5}t=i(t);for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);t=i(t)^31&n}return t}function s(e,t,r,n){let i=0,o=0;const s=(1<<r)-1,a=[];for(let n=0;n<e.length;++n)for(i=i<<t|e[n],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function a(e){return s(e,8,5,!0)}function u(e){const t=s(e,5,8,!1);if(Array.isArray(t))return t}function c(e){const t=s(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function l(e){let t;function s(e,r){if(r=r||90,e.length<8)return e+" too short";if(e.length>r)return"Exceeds length limit";const s=e.toLowerCase(),a=e.toUpperCase();if(e!==s&&e!==a)return"Mixed-case string "+e;const u=(e=s).lastIndexOf("1");if(-1===u)return"No separator character for "+e;if(0===u)return"Missing prefix for "+e;const c=e.slice(0,u),l=e.slice(u+1);if(l.length<6)return"Data too short";let h=o(c);if("string"==typeof h)return h;const f=[];for(let e=0;e<l.length;++e){const t=l.charAt(e),r=n[t];if(void 0===r)return"Unknown character "+t;h=i(h)^r,e+6>=l.length||f.push(r)}return h!==t?"Invalid checksum for "+e:{prefix:c,words:f}}return t="bech32"===e?1:734539939,{decodeUnsafe:function(e,t){const r=s(e,t);if("object"==typeof r)return r},decode:function(e,t){const r=s(e,t);if("object"==typeof r)return r;throw new Error(r)},encode:function(e,n,s){if(s=s||90,e.length+7+n.length>s)throw new TypeError("Exceeds length limit");let a=o(e=e.toLowerCase());if("string"==typeof a)throw new Error(a);let u=e+"1";for(let e=0;e<n.length;++e){const t=n[e];if(t>>5)throw new Error("Non 5-bit word");a=i(a)^t,u+=r.charAt(t)}for(let e=0;e<6;++e)a=i(a);a^=t;for(let e=0;e<6;++e)u+=r.charAt(a>>5*(5-e)&31);return u},toWords:a,fromWordsUnsafe:u,fromWords:c}}t.bech32=l("bech32"),t.bech32m=l("bech32m")},20733:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cosmosDescribePath=function(e){const t={verbose:(0,n.addressNListToBIP32)(e),coin:"Atom",isKnown:!1};if(5!=e.length)return t;if(2147483692!=e[0])return t;if(e[1]!=2147483648+(0,n.slip44ByCoin)("Atom"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(0!==e[3]||0!==e[4])return t;const r=2147483647&e[2];return{verbose:`Cosmos Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Atom",isKnown:!0,isPrefork:!1}};const n=r(33612)},21505:(e,t,r)=>{"use strict";r.d(t,{E:()=>i,b:()=>o});var n=r(80658),i=new(r(45672).q)(n.R),o=i},22231:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var n=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},22343:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NullablePartial=t.SatoshiSchema=t.UInt53Schema=t.UInt32Schema=t.UInt8Schema=t.HexSchema=t.BufferSchema=t.Hash256bitSchema=t.Hash160bitSchema=t.Buffer256bitSchema=t.TAPLEAF_VERSION_MASK=t.NBufferSchemaFactory=void 0,t.stacksEqual=function(e,t){return e.length===t.length&&e.every((e,r)=>0===s.compare(e,t[r]))},t.isPoint=function(e){if(!(e instanceof Uint8Array))return!1;if(e.length<33)return!1;const t=e[0],r=e.slice(1,33);if(0===s.compare(u,r))return!1;if(s.compare(r,c)>=0)return!1;if((2===t||3===t)&&33===e.length)return!0;const n=e.slice(33);return 0!==s.compare(u,n)&&!(s.compare(n,c)>=0)&&4===t&&65===e.length},t.isTapleaf=l,t.isTaptree=function e(t){return Array.isArray(t)?2===t.length&&t.every(t=>e(t)):l(t)};const s=o(r(27294)),a=o(r(86466)),u=new Uint8Array(32),c=s.fromHex("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f");function l(e){return!(!e||!("output"in e))&&e.output instanceof Uint8Array&&(void 0===e.version||(e.version&t.TAPLEAF_VERSION_MASK)===e.version)}t.NBufferSchemaFactory=e=>a.pipe(a.instance(Uint8Array),a.length(e)),t.TAPLEAF_VERSION_MASK=254,t.Buffer256bitSchema=(0,t.NBufferSchemaFactory)(32),t.Hash160bitSchema=(0,t.NBufferSchemaFactory)(20),t.Hash256bitSchema=(0,t.NBufferSchemaFactory)(32),t.BufferSchema=a.instance(Uint8Array),t.HexSchema=a.pipe(a.string(),a.regex(/^([0-9a-f]{2})+$/i)),t.UInt8Schema=a.pipe(a.number(),a.integer(),a.minValue(0),a.maxValue(255)),t.UInt32Schema=a.pipe(a.number(),a.integer(),a.minValue(0),a.maxValue(4294967295)),t.UInt53Schema=a.pipe(a.number(),a.integer(),a.minValue(0),a.maxValue(9007199254740991)),t.SatoshiSchema=a.pipe(a.bigint(),a.minValue(0n),a.maxValue(0x7fffffffffffffffn)),t.NullablePartial=e=>a.object(Object.entries(e).reduce((e,t)=>({...e,[t[0]]:a.nullish(t[1])}),{}))},23494:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(7170)),o=n(r(27294)),s=n(r(74387)),a=e=>32===e.length;t.makeConverter=function(e){const t=s.makeConverter(e,a);return{decode:function(e){const{numberValue:r,bytes:n}=i.decode(e.value),o=t.decode({key:e.key,value:e.value.slice(n+32*Number(r))}),s=new Array(Number(r));for(let t=0,i=n;t<r;t++,i+=32)s[t]=e.value.slice(i,i+32);return{...o,leafHashes:s}},encode:function(e){const r=t.encode(e),n=i.encodingLength(e.leafHashes.length),s=new Uint8Array(n);i.encode(e.leafHashes.length,s);const a=o.concat([s,...e.leafHashes,r.value]);return{...r,value:a}},check:function(e){return Array.isArray(e.leafHashes)&&e.leafHashes.every(e=>e instanceof Uint8Array&&32===e.length)&&t.check(e)},expected:"{ masterFingerprint: Uint8Array; pubkey: Uint8Array; path: string; leafHashes: Uint8Array[]; }",canAddToArray:t.canAddToArray}}},23842:(e,t,r)=>{"use strict";function n(e){return"function"==typeof e}r.d(t,{T:()=>n})},24788:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var n=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},24852:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});var n=function(e){return function(t){for(var r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.complete()}}},24864:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=function(e,t){if(!(e.address||e.output||e.pubkey||e.internalPubkey||e.witness&&e.witness.length>1))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),g.parse(g.partial(g.object({address:g.string(),input:(0,u.NBufferSchemaFactory)(0),network:g.object({}),output:(0,u.NBufferSchemaFactory)(34),internalPubkey:(0,u.NBufferSchemaFactory)(32),hash:(0,u.NBufferSchemaFactory)(32),pubkey:(0,u.NBufferSchemaFactory)(32),signature:g.union([(0,u.NBufferSchemaFactory)(64),(0,u.NBufferSchemaFactory)(65)]),witness:g.array(u.BufferSchema),scriptTree:g.custom(u.isTaptree,"Taptree is not of type isTaptree"),redeem:g.partial(g.object({output:u.BufferSchema,redeemVersion:g.number(),witness:g.array(u.BufferSchema)})),redeemVersion:g.number()})),e);const r=h.value(()=>(0,d.fromBech32)(e.address)),n=h.value(()=>{if(e.witness&&e.witness.length)return e.witness.length>=2&&e.witness[e.witness.length-1][0]===b?e.witness.slice(0,-1):e.witness.slice()}),i=h.value(()=>e.scriptTree?(0,l.toHashTree)(e.scriptTree):e.hash?{hash:e.hash}:void 0),o=e.network||s.bitcoin,v={name:"p2tr",network:o};if(h.prop(v,"address",()=>{if(!v.pubkey)return;const e=f.bech32m.toWords(v.pubkey);return e.unshift(y),f.bech32m.encode(o.bech32,e)}),h.prop(v,"hash",()=>{const e=i();if(e)return e.hash;const t=n();if(t&&t.length>1){const e=t[t.length-1],r=e[0]&u.TAPLEAF_VERSION_MASK,n=t[t.length-2],i=(0,l.tapleafHash)({output:n,version:r});return(0,l.rootHashFromPath)(e,i)}return null}),h.prop(v,"output",()=>{if(v.pubkey)return a.compile([m.OP_1,v.pubkey])}),h.prop(v,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&void 0!==e.redeem.redeemVersion&&null!==e.redeem.redeemVersion?e.redeem.redeemVersion:l.LEAF_VERSION_TAPSCRIPT),h.prop(v,"redeem",()=>{const e=n();if(e&&!(e.length<2))return{output:e[e.length-2],witness:e.slice(0,-2),redeemVersion:e[e.length-1][0]&u.TAPLEAF_VERSION_MASK}}),h.prop(v,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return r().data;if(v.internalPubkey){const e=(0,l.tweakKey)(v.internalPubkey,v.hash);if(e)return e.x}}),h.prop(v,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;const t=n();return t&&t.length>1?t[t.length-1].slice(1,33):void 0}),h.prop(v,"signature",()=>{if(e.signature)return e.signature;const t=n();return t&&1===t.length?t[0]:void 0}),h.prop(v,"witness",()=>{if(e.witness)return e.witness;const t=i();if(t&&e.redeem&&e.redeem.output&&e.internalPubkey){const r=(0,l.tapleafHash)({output:e.redeem.output,version:v.redeemVersion}),n=(0,l.findScriptPath)(t,r);if(!n)return;const i=(0,l.tweakKey)(e.internalPubkey,t.hash);if(!i)return;const o=p.concat([Uint8Array.from([v.redeemVersion|i.parity]),e.internalPubkey].concat(n));return[e.redeem.output,o]}return e.signature?[e.signature]:void 0}),t.validate){let t=Uint8Array.from([]);if(e.address){if(o&&o.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==y)throw new TypeError("Invalid address version");if(32!==r().data.length)throw new TypeError("Invalid address data");t=r().data}if(e.pubkey){if(t.length>0&&0!==p.compare(t,e.pubkey))throw new TypeError("Pubkey mismatch");t=e.pubkey}if(e.output){if(34!==e.output.length||e.output[0]!==m.OP_1||32!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&0!==p.compare(t,e.output.slice(2)))throw new TypeError("Pubkey mismatch");t=e.output.slice(2)}if(e.internalPubkey){const r=(0,l.tweakKey)(e.internalPubkey,v.hash);if(t.length>0&&0!==p.compare(t,r.x))throw new TypeError("Pubkey mismatch");t=r.x}if(t&&t.length&&!(0,c.getEccLib)().isXOnlyPoint(t))throw new TypeError("Invalid pubkey for p2tr");const s=i();if(e.hash&&s&&0!==p.compare(e.hash,s.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&s){const t=(0,l.tapleafHash)({output:e.redeem.output,version:v.redeemVersion});if(!(0,l.findScriptPath)(s,t))throw new TypeError("Redeem script not in tree")}const h=n();if(e.redeem&&v.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==v.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(0===a.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");if(v.redeem.output&&0!==p.compare(e.redeem.output,v.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&v.redeem.witness&&!(0,u.stacksEqual)(e.redeem.witness,v.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(h&&h.length)if(1===h.length){if(e.signature&&0!==p.compare(e.signature,h[0]))throw new TypeError("Signature mismatch")}else{const r=h[h.length-1];if(r.length<33)throw new TypeError(`The control-block length is too small. Got ${r.length}, expected min 33.`);if((r.length-33)%32!=0)throw new TypeError(`The control-block length of ${r.length} is incorrect!`);const n=(r.length-33)/32;if(n>128)throw new TypeError(`The script path is too long. Got ${n}, expected max 128.`);const i=r.slice(1,33);if(e.internalPubkey&&0!==p.compare(e.internalPubkey,i))throw new TypeError("Internal pubkey mismatch");if(!(0,c.getEccLib)().isXOnlyPoint(i))throw new TypeError("Invalid internalPubkey for p2tr witness");const o=r[0]&u.TAPLEAF_VERSION_MASK,s=h[h.length-2],a=(0,l.tapleafHash)({output:s,version:o}),f=(0,l.rootHashFromPath)(r,a),d=(0,l.tweakKey)(i,f);if(!d)throw new TypeError("Invalid outputKey for p2tr witness");if(t.length&&0!==p.compare(t,d.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(d.parity!==(1&r[0]))throw new Error("Incorrect parity")}}return Object.assign(v,e)};const s=r(81281),a=o(r(52421)),u=r(22343),c=r(87659),l=r(6069),h=o(r(33410)),f=r(20344),d=r(28020),p=o(r(27294)),g=o(r(86466)),m=a.OPS,y=1,b=80},26224:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVERSE_OPS=t.OPS=void 0;const r={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};t.OPS=r;const n={};t.REVERSE_OPS=n;for(const e of Object.keys(r))n[r[e]]=e},26641:(e,t,r)=>{"use strict";r.d(t,{v:()=>s});var n=r(86323),i=r(80125),o=r(53200);function s(e){return new n.c(function(t){var r;try{r=e()}catch(e){return void t.error(e)}return(r?(0,i.H)(r):(0,o.I)()).subscribe(t)})}},27294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{compare:()=>g,concat:()=>l,fromBase64:()=>p,fromHex:()=>f,fromUtf8:()=>c,readInt16:()=>T,readInt32:()=>R,readInt64:()=>O,readInt8:()=>P,readUInt16:()=>E,readUInt32:()=>A,readUInt64:()=>S,readUInt8:()=>w,toBase64:()=>d,toHex:()=>h,toUtf8:()=>u,writeInt16:()=>I,writeInt32:()=>N,writeInt64:()=>k,writeInt8:()=>_,writeUInt16:()=>y,writeUInt32:()=>b,writeUInt64:()=>v,writeUInt8:()=>m});const n="0123456789abcdefABCDEF",i=n.split("").map(e=>e.codePointAt(0)),o=Array(256).fill(!0).map((e,t)=>{const r=String.fromCodePoint(t),i=n.indexOf(r);return i<0?void 0:i<16?i:i-6}),s=new TextEncoder,a=new TextDecoder;function u(e){return a.decode(e)}function c(e){return s.encode(e)}function l(e){const t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}function h(e){const t=e||new Uint8Array;return t.length>512?function(e){const t=new Uint8Array(2*e.length);for(let r=0;r<e.length;++r)t[2*r]=i[e[r]>>4],t[2*r+1]=i[15&e[r]];return a.decode(t)}(t):function(e){let t="";for(let r=0;r<e.length;++r)t+=n[o[i[e[r]>>4]]],t+=n[o[i[15&e[r]]]];return t}(t)}function f(e){const t=s.encode(e||""),r=new Uint8Array(Math.floor(t.length/2));let n;for(n=0;n<r.length;n++){const e=o[t[2*n]],i=o[t[2*n+1]];if(void 0===e||void 0===i)break;r[n]=e<<4|i}return n===r.length?r:r.slice(0,n)}function d(e){return btoa(String.fromCharCode(...e))}function p(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function g(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return e.length===t.length?0:e.length>t.length?1:-1}function m(e,t,r){if(t+1>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>255)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 255. Received ${r}`);return e[t]=r,t+1}function y(e,t,r,n){if(t+2>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>65535)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 65535. Received ${r}`);return"LE"===n?(e[t]=255&r,e[t+1]=r>>8&255):(e[t]=r>>8&255,e[t+1]=255&r),t+2}function b(e,t,r,n){if(t+4>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>4294967295)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 4294967295. Received ${r}`);return"LE"===n?(e[t]=255&r,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255):(e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r),t+4}function v(e,t,r,n){if(t+8>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>0xffffffffffffffffn)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 18446744073709551615. Received ${r}`);return"LE"===n?(e[t]=Number(0xffn&r),e[t+1]=Number(r>>8n&0xffn),e[t+2]=Number(r>>16n&0xffn),e[t+3]=Number(r>>24n&0xffn),e[t+4]=Number(r>>32n&0xffn),e[t+5]=Number(r>>40n&0xffn),e[t+6]=Number(r>>48n&0xffn),e[t+7]=Number(r>>56n&0xffn)):(e[t]=Number(r>>56n&0xffn),e[t+1]=Number(r>>48n&0xffn),e[t+2]=Number(r>>40n&0xffn),e[t+3]=Number(r>>32n&0xffn),e[t+4]=Number(r>>24n&0xffn),e[t+5]=Number(r>>16n&0xffn),e[t+6]=Number(r>>8n&0xffn),e[t+7]=Number(0xffn&r)),t+8}function w(e,t){if(t+1>e.length)throw new Error("Offset is outside the bounds of Uint8Array");return e[t]}function E(e,t,r){if(t+2>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0;return r=(r<<8)+e[t+1],r=(r<<8)+e[t],r}{let r=0;return r=(r<<8)+e[t],r=(r<<8)+e[t+1],r}}function A(e,t,r){if(t+4>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0;return r=(r<<8)+e[t+3]>>>0,r=(r<<8)+e[t+2]>>>0,r=(r<<8)+e[t+1]>>>0,r=(r<<8)+e[t]>>>0,r}{let r=0;return r=(r<<8)+e[t]>>>0,r=(r<<8)+e[t+1]>>>0,r=(r<<8)+e[t+2]>>>0,r=(r<<8)+e[t+3]>>>0,r}}function S(e,t,r){if(t+8>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0n;return r=(r<<8n)+BigInt(e[t+7]),r=(r<<8n)+BigInt(e[t+6]),r=(r<<8n)+BigInt(e[t+5]),r=(r<<8n)+BigInt(e[t+4]),r=(r<<8n)+BigInt(e[t+3]),r=(r<<8n)+BigInt(e[t+2]),r=(r<<8n)+BigInt(e[t+1]),r=(r<<8n)+BigInt(e[t]),r}{let r=0n;return r=(r<<8n)+BigInt(e[t]),r=(r<<8n)+BigInt(e[t+1]),r=(r<<8n)+BigInt(e[t+2]),r=(r<<8n)+BigInt(e[t+3]),r=(r<<8n)+BigInt(e[t+4]),r=(r<<8n)+BigInt(e[t+5]),r=(r<<8n)+BigInt(e[t+6]),r=(r<<8n)+BigInt(e[t+7]),r}}function _(e,t,r){if(t+1>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>127||r<-128)throw new Error(`The value of "value" is out of range. It must be >= -128 and <= 127. Received ${r}`);return e[t]=r,t+1}function I(e,t,r,n){if(t+2>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>32767||r<-32768)throw new Error(`The value of "value" is out of range. It must be >= -32768 and <= 32767. Received ${r}`);return"LE"===(n=n.toUpperCase())?(e[t]=255&r,e[t+1]=r>>8&255):(e[t]=r>>8&255,e[t+1]=255&r),t+2}function N(e,t,r,n){if(t+4>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>2147483647||r<-2147483648)throw new Error(`The value of "value" is out of range. It must be >= -2147483648 and <= 2147483647. Received ${r}`);return"LE"===(n=n.toUpperCase())?(e[t]=255&r,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255):(e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r),t+4}function k(e,t,r,n){if(t+8>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>0x7fffffffffffffffn||r<-0x8000000000000000n)throw new Error(`The value of "value" is out of range. It must be >= -9223372036854775808 and <= 9223372036854775807. Received ${r}`);return"LE"===(n=n.toUpperCase())?(e[t]=Number(0xffn&r),e[t+1]=Number(r>>8n&0xffn),e[t+2]=Number(r>>16n&0xffn),e[t+3]=Number(r>>24n&0xffn),e[t+4]=Number(r>>32n&0xffn),e[t+5]=Number(r>>40n&0xffn),e[t+6]=Number(r>>48n&0xffn),e[t+7]=Number(r>>56n&0xffn)):(e[t]=Number(r>>56n&0xffn),e[t+1]=Number(r>>48n&0xffn),e[t+2]=Number(r>>40n&0xffn),e[t+3]=Number(r>>32n&0xffn),e[t+4]=Number(r>>24n&0xffn),e[t+5]=Number(r>>16n&0xffn),e[t+6]=Number(r>>8n&0xffn),e[t+7]=Number(0xffn&r)),t+8}function P(e,t){if(t+1>e.length)throw new Error("Offset is outside the bounds of Uint8Array");const r=e[t];return r<=127?r:r-256}function T(e,t,r){if(t+2>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){const r=e[t]+(e[t+1]<<8);return e[t+1]<=127?r:r-65536}{const r=(e[t]<<8)+e[t+1];return e[t]<=127?r:r-65536}}function R(e,t,r){if(t+4>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){const r=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24>>>0);return e[t+3]<=127?r:r-4294967296}{const r=(e[t]<<24>>>0)+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];return e[t]<=127?r:r-4294967296}}function O(e,t,r){if(t+8>e.length)throw new Error("Offset is outside the bounds of Uint8Array");let n=0n;if("LE"===(r=r.toUpperCase()))return n=(n<<8n)+BigInt(e[t+7]),n=(n<<8n)+BigInt(e[t+6]),n=(n<<8n)+BigInt(e[t+5]),n=(n<<8n)+BigInt(e[t+4]),n=(n<<8n)+BigInt(e[t+3]),n=(n<<8n)+BigInt(e[t+2]),n=(n<<8n)+BigInt(e[t+1]),n=(n<<8n)+BigInt(e[t]),e[t+7]<=127?n:n-0x10000000000000000n;{let r=0n;return r=(r<<8n)+BigInt(e[t]),r=(r<<8n)+BigInt(e[t+1]),r=(r<<8n)+BigInt(e[t+2]),r=(r<<8n)+BigInt(e[t+3]),r=(r<<8n)+BigInt(e[t+4]),r=(r<<8n)+BigInt(e[t+5]),r=(r<<8n)+BigInt(e[t+6]),r=(r<<8n)+BigInt(e[t+7]),e[t]<=127?r:r-0x10000000000000000n}}},28020:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase58Check=E,t.fromBech32=A,t.toBase58Check=function(e,t){p.parse(p.tuple([l.Hash160bitSchema,l.UInt8Schema]),[e,t]);const r=new Uint8Array(21);return d.writeUInt8(r,0,t),r.set(e,1),f.default.encode(r)},t.toBech32=S,t.fromOutputScript=function(e,t){t=t||a.bitcoin;try{return u.p2pkh({output:e,network:t}).address}catch(e){}try{return u.p2sh({output:e,network:t}).address}catch(e){}try{return u.p2wpkh({output:e,network:t}).address}catch(e){}try{return u.p2wsh({output:e,network:t}).address}catch(e){}try{return u.p2tr({output:e,network:t}).address}catch(e){}try{return function(e,t){const r=e.slice(2);if(r.length<m||r.length>g)throw new TypeError("Invalid program length for segwit address");const n=e[0]-v;if(n<b||n>y)throw new TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw new TypeError("Invalid script for segwit address");return console.warn(w),S(r,n,t.bech32)}(e,t)}catch(e){}throw new Error(c.toASM(e)+" has no matching Address")},t.toOutputScript=function(e,t){let r,n;t=t||a.bitcoin;try{r=E(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return u.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return u.p2sh({hash:r.hash}).output}else{try{n=A(e)}catch(e){}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===n.version){if(20===n.data.length)return u.p2wpkh({hash:n.data}).output;if(32===n.data.length)return u.p2wsh({hash:n.data}).output}else if(1===n.version){if(32===n.data.length)return u.p2tr({pubkey:n.data}).output}else if(n.version>=b&&n.version<=y&&n.data.length>=m&&n.data.length<=g)return console.warn(w),c.compile([n.version+v,n.data])}}throw new Error(e+" has no matching Script")};const a=o(r(81281)),u=o(r(95160)),c=o(r(52421)),l=r(22343),h=r(20344),f=s(r(44496)),d=o(r(27294)),p=o(r(86466)),g=40,m=2,y=16,b=2,v=80,w="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function E(e){const t=f.default.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:d.readUInt8(t,0),hash:t.slice(1)}}function A(e){let t,r;try{t=h.bech32.decode(e)}catch(e){}if(t){if(r=t.words[0],0!==r)throw new TypeError(e+" uses wrong encoding")}else if(t=h.bech32m.decode(e),r=t.words[0],0===r)throw new TypeError(e+" uses wrong encoding");const n=h.bech32.fromWords(t.words.slice(1));return{version:r,prefix:t.prefix,data:Uint8Array.from(n)}}function S(e,t,r){const n=h.bech32.toWords(e);return n.unshift(t),0===t?h.bech32.encode(r,n):h.bech32m.encode(r,n)}},28081:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Psbt=void 0;const s=r(44874),a=o(r(7170)),u=r(44874),c=r(28020),l=r(60817),h=r(81281),f=o(r(95160)),d=r(6069),p=o(r(52421)),g=r(62060),m=r(9268),y=r(97356),b=o(r(27294)),v=g.Transaction.SIGHASH_ALL|g.Transaction.SIGHASH_BITCOINCASHBIP143,w=[g.Transaction.SIGHASH_ALL,v],E={network:h.bitcoin,maximumFeeRate:5e3,forkCoin:"none"};class A{data;static fromBase64(e,t={}){const r=b.fromBase64(e);return this.fromBuffer(r,t)}static fromHex(e,t={}){const r=b.fromHex(e);return this.fromBuffer(r,t)}static fromBuffer(e,t={}){const r=s.Psbt.fromBuffer(e,S),n=new A(t,r);var i,o;return i=n.__CACHE.__TX,o=n.__CACHE,i.ins.forEach(e=>{C(o,e)}),n}__CACHE;opts;constructor(e={},t=new s.Psbt(new _)){this.data=t,this.opts=Object.assign({},E,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const r=(e,t,r,n)=>Object.defineProperty(e,t,{enumerable:r,writable:n});r(this,"__CACHE",!1,!0),r(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map(e=>({hash:(0,l.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(e=>{let t;try{t=(0,c.fromOutputScript)(e.script,this.opts.network)}catch(e){}return{script:(0,l.cloneBuffer)(e.script),value:e.value,address:t}})}combine(...e){return this.data.combine(...e.map(e=>e.data)),this}clone(){const e=A.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){T(e),this.opts.maximumFeeRate=e}setVersion(e){T(e),R(this.data.inputs,"setVersion");const t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){T(e),R(this.data.inputs,"setLocktime");const t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){T(t),R(this.data.inputs,"setInputSequence");const r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach(e=>this.addInput(e)),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,m.checkTaprootInputFields)(e,e,"addInput"),R(this.data.inputs,"addInput"),e.witnessScript&&Z(e.witnessScript);const t=this.__CACHE;this.data.addInput(e),C(t,t.__TX.ins[t.__TX.ins.length-1]);const r=this.data.inputs.length-1,n=this.data.inputs[r];return n.nonWitnessUtxo&&V(this.__CACHE,n,r),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach(e=>this.addOutput(e)),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");R(this.data.inputs,"addOutput");const{address:t}=e;if("string"==typeof t){const{network:r}=this.opts,n=(0,c.toOutputScript)(t,r);e=Object.assign({},e,{script:n})}(0,m.checkTaprootOutputFields)(e,e,"addOutput");const r=this.__CACHE;return this.data.addOutput(e),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(k))throw new Error("Not finalized");const t=this.__CACHE;if(e||function(e,t,r){const n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;const r=t.__TX.clone();return q(this.data.inputs,r,t,!0),r}getFeeRate(){return L("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return L("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,u.checkForInput)(this.data.inputs,0),te(this.data.inputs.length).forEach(e=>this.finalizeInput(e)),this}finalizeInput(e,t){const r=(0,u.checkForInput)(this.data.inputs,e);return(0,m.isTaprootInput)(r)?this._finalizeTaprootInput(e,r,void 0,t):this._finalizeInput(e,r,t)}finalizeTaprootInput(e,t,r=m.tapScriptFinalizer){const n=(0,u.checkForInput)(this.data.inputs,e);if((0,m.isTaprootInput)(n))return this._finalizeTaprootInput(e,n,t,r);throw new Error(`Cannot finalize input #${e}. Not Taproot.`)}_finalizeInput(e,t,r=B){const{script:n,isP2SH:i,isP2WSH:o,isSegwit:s}=function(e,t,r){const n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){const o=J(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||(0,y.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}(e,t,this.__CACHE);if(!n)throw new Error(`No script found for input #${e}`);!function(e){if(!e.sighashType||!e.partialSig)return;const{partialSig:t,sighashType:r}=e;t.forEach(e=>{const{hashType:t}=p.signature.decode(e.signature);if((255&r)!==t)throw new Error("Signature sighash does not match input sighash type")})}(t);const{finalScriptSig:a,finalScriptWitness:u}=r(e,t,n,s,i,o);if(a&&this.data.updateInput(e,{finalScriptSig:a}),u&&this.data.updateInput(e,{finalScriptWitness:u}),!a&&!u)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,t,r,n=m.tapScriptFinalizer){if(!t.witnessUtxo)throw new Error(`Cannot finalize input #${e}. Missing withness utxo.`);if(t.tapKeySig){const r=f.p2tr({output:t.witnessUtxo.script,signature:t.tapKeySig}),n=(0,y.witnessStackToScriptWitness)(r.witness);this.data.updateInput(e,{finalScriptWitness:n})}else{const{finalScriptWitness:i}=n(e,t,r);this.data.updateInput(e,{finalScriptWitness:i})}return this.data.clearFinalizedInput(e),this}getInputType(e){const t=(0,u.checkForInput)(this.data.inputs,e),r=$(X(e,t,this.__CACHE),e,"input",t.redeemScript||function(e){if(!e)return;const t=p.decompile(e);if(!t)return;const r=t[t.length-1];var n;if(r instanceof Uint8Array&&!Q(r)&&(n=r,!p.isCanonicalScriptSignature(n))&&p.decompile(r))return r}(t.finalScriptSig),t.witnessScript||function(e){if(!e)return;const t=z(e),r=t[t.length-1];return!Q(r)&&p.decompile(r)?r:void 0}(t.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+ee(r.meaningfulScript)}inputHasPubkey(e,t){return function(e,t,r,n){const i=X(r,t,n),{meaningfulScript:o}=$(i,r,"input",t.redeemScript,t.witnessScript);return(0,y.pubkeyInScript)(e,o)}(t,(0,u.checkForInput)(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){const r=(0,u.checkForInput)(this.data.inputs,e),n=P(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}outputHasPubkey(e,t){return function(e,t,r,n){const i=n.__TX.outs[r].script,{meaningfulScript:o}=$(i,r,"output",t.redeemScript,t.witnessScript);return(0,y.pubkeyInScript)(e,o)}(t,(0,u.checkForOutput)(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){const r=(0,u.checkForOutput)(this.data.outputs,e),n=P(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}validateSignaturesOfAllInputs(e){return(0,u.checkForInput)(this.data.inputs,0),te(this.data.inputs.length).map(t=>this.validateSignaturesOfInput(t,e)).reduce((e,t)=>!0===t&&e,!0)}validateSignaturesOfInput(e,t,r){const n=this.data.inputs[e];return(0,m.isTaprootInput)(n)?this.validateSignaturesOfTaprootInput(e,t,r):this._validateSignaturesOfInput(e,t,r)}_validateSignaturesOfInput(e,t,r){const n=this.data.inputs[e],i=(n||{}).partialSig;if(!n||!i||i.length<1)throw new Error("No signatures to validate");if("function"!=typeof t)throw new Error("Need validator function to validate signatures");const o=r?i.filter(e=>0===b.compare(e.pubkey,r)):i;if(o.length<1)throw new Error("No signatures for this pubkey");const s=[];let a,u,c;for(const r of o){const i=p.signature.decode(r.signature),{hash:o,script:l}=c!==i.hashType?F(e,Object.assign({},n,{sighashType:i.hashType}),this.__CACHE,!0,this.opts.forkCoin):{hash:a,script:u};c=i.hashType,a=o,u=l,O(r.pubkey,l,"verify"),s.push(t(r.pubkey,o,i.signature))}return s.every(e=>!0===e)}validateSignaturesOfTaprootInput(e,t,r){const n=this.data.inputs[e],i=(n||{}).tapKeySig,o=(n||{}).tapScriptSig;if(!n&&!i&&(!o||o.length))throw new Error("No signatures to validate");if("function"!=typeof t)throw new Error("Need validator function to validate signatures");const s=(r=r&&(0,m.toXOnly)(r))?W(e,n,this.data.inputs,r,this.__CACHE):function(e,t,r,n){const i=[];if(t.tapInternalKey){const r=j(e,t,n);r&&i.push(r)}if(t.tapScriptSig){const e=t.tapScriptSig.map(e=>e.pubkey);i.push(...e)}return i.map(i=>W(e,t,r,i,n)).flat()}(e,n,this.data.inputs,this.__CACHE);if(!s.length)throw new Error("No signatures for this pubkey");const a=s.find(e=>!e.leafHash);let u=0;if(i&&a){if(!t(a.pubkey,a.hash,G(i)))return!1;u++}if(o)for(const e of o){const r=s.find(t=>0===b.compare(t.pubkey,e.pubkey));if(r){if(!t(e.pubkey,r.hash,G(e.signature)))return!1;u++}}return u>0}signAllInputsHD(e,t){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const r=[];for(const n of te(this.data.inputs.length))try{this.signInputHD(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,t){return new Promise((r,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(new Error("Need HDSigner to sign input"));const i=[],o=[];for(const r of te(this.data.inputs.length))o.push(this.signInputHDAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(o).then(()=>{if(i.every(e=>!1===e))return n(new Error("No inputs were signed"));r()})})}signInputHD(e,t,r){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return K(e,this.data.inputs,t).forEach(t=>this.signInput(e,t,r)),this}signInputHDAsync(e,t,r){return new Promise((n,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));const o=K(e,this.data.inputs,t).map(t=>this.signInputAsync(e,t,r));return Promise.all(o).then(()=>{n()}).catch(i)})}signAllInputs(e,t){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const r=[];for(const n of te(this.data.inputs.length))try{this.signInput(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,t){return new Promise((r,n)=>{if(!e||!e.publicKey)return n(new Error("Need Signer to sign input"));const i=[],o=[];for(const[r]of this.data.inputs.entries())o.push(this.signInputAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(o).then(()=>{if(i.every(e=>!1===e))return n(new Error("No inputs were signed"));r()})})}signInput(e,t,r){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const n=(0,u.checkForInput)(this.data.inputs,e);return(0,m.isTaprootInput)(n)?this._signTaprootInput(e,n,t,void 0,r):this._signInput(e,t,r)}signTaprootInput(e,t,r,n){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const i=(0,u.checkForInput)(this.data.inputs,e);if((0,m.isTaprootInput)(i))return this._signTaprootInput(e,i,t,r,n);throw new Error(`Input #${e} is not of type Taproot.`)}_signInput(e,t,r=w){const{hash:n,sighashType:i}=D(this.data.inputs,e,t.publicKey,this.__CACHE,r,this.opts.forkCoin),o=[{pubkey:t.publicKey,signature:p.signature.encode(t.sign(n),255&i)}];return this.data.updateInput(e,{partialSig:o}),this}_signTaprootInput(e,t,r,n,i=[g.Transaction.SIGHASH_DEFAULT]){const o=this.checkTaprootHashesForSig(e,t,r,n,i),s=o.filter(e=>!e.leafHash).map(e=>(0,m.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType))[0],a=o.filter(e=>!!e.leafHash).map(e=>({pubkey:(0,m.toXOnly)(r.publicKey),signature:(0,m.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType),leafHash:e.leafHash}));return s&&this.data.updateInput(e,{tapKeySig:s}),a.length&&this.data.updateInput(e,{tapScriptSig:a}),this}signInputAsync(e,t,r){return Promise.resolve().then(()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const n=(0,u.checkForInput)(this.data.inputs,e);return(0,m.isTaprootInput)(n)?this._signTaprootInputAsync(e,n,t,void 0,r):this._signInputAsync(e,t,r)})}signTaprootInputAsync(e,t,r,n){return Promise.resolve().then(()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const i=(0,u.checkForInput)(this.data.inputs,e);if((0,m.isTaprootInput)(i))return this._signTaprootInputAsync(e,i,t,r,n);throw new Error(`Input #${e} is not of type Taproot.`)})}_signInputAsync(e,t,r=w){const{hash:n,sighashType:i}=D(this.data.inputs,e,t.publicKey,this.__CACHE,r,this.opts.forkCoin);return Promise.resolve(t.sign(n)).then(r=>{const n=[{pubkey:t.publicKey,signature:p.signature.encode(r,255&i)}];this.data.updateInput(e,{partialSig:n})})}async _signTaprootInputAsync(e,t,r,n,i=[g.Transaction.SIGHASH_DEFAULT]){const o=this.checkTaprootHashesForSig(e,t,r,n,i),s=[],a=o.filter(e=>!e.leafHash)[0];if(a){const e=Promise.resolve(r.signSchnorr(a.hash)).then(e=>({tapKeySig:(0,m.serializeTaprootSignature)(e,t.sighashType)}));s.push(e)}const u=o.filter(e=>!!e.leafHash);if(u.length){const e=u.map(e=>Promise.resolve(r.signSchnorr(e.hash)).then(n=>({tapScriptSig:[{pubkey:(0,m.toXOnly)(r.publicKey),signature:(0,m.serializeTaprootSignature)(n,t.sighashType),leafHash:e.leafHash}]})));s.push(...e)}return Promise.all(s).then(t=>{t.forEach(t=>this.data.updateInput(e,t))})}checkTaprootHashesForSig(e,t,r,n,i){if("function"!=typeof r.signSchnorr)throw new Error(`Need Schnorr Signer to sign taproot input #${e}.`);const o=W(e,t,this.data.inputs,r.publicKey,this.__CACHE,n,i);if(!o||!o.length)throw new Error(`Can not sign for input #${e} with the key ${b.toHex(r.publicKey)}`);return o}toBuffer(){return I(this.__CACHE),this.data.toBuffer()}toHex(){return I(this.__CACHE),this.data.toHex()}toBase64(){return I(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&Z(t.witnessScript),(0,m.checkTaprootInputFields)(this.data.inputs[e],t,"updateInput"),this.data.updateInput(e,t),t.nonWitnessUtxo&&V(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){const r=this.data.outputs[e];return(0,m.checkTaprootOutputFields)(r,t,"updateOutput"),this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}t.Psbt=A;const S=e=>new _(e);class _{tx;constructor(e=Uint8Array.from([2,0,0,0,0,0,0,0,0,0])){this.tx=g.Transaction.fromBuffer(e),function(e){if(!e.ins.every(e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!(e.hash instanceof Uint8Array)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");const t="string"==typeof e.hash?(0,l.reverseBuffer)(b.fromHex(e.hash)):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!(e.script instanceof Uint8Array)||"bigint"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function I(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function N(e,t,r){if(!t)return!1;let n;if(n=r?r.map(e=>{const r=function(e){if(65===e.length){const t=1&e[64],r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}(e);return t.find(e=>0===b.compare(e.pubkey,r))}).filter(e=>!!e):t,n.length>e)throw new Error("Too many signatures");return n.length===e}function k(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function P(e){return t=>!b.compare(e.fingerprint,t.masterFingerprint)&&!b.compare(e.derivePath(t.path).publicKey,t.pubkey)}function T(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function R(e,t){e.forEach(e=>{if((0,m.isTaprootInput)(e)?(0,m.checkTaprootInputForSigs)(e,t):(0,y.checkInputForSig)(e,t))throw new Error("Can not modify transaction, signatures exist.")})}function O(e,t,r){if(!(0,y.pubkeyInScript)(e,t))throw new Error(`Can not ${r} for this input with the key ${b.toHex(e)}`)}function C(e,t){const r=b.toHex((0,l.reverseBuffer)(Uint8Array.from(t.hash)))+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function x(e,t){return(r,n,i,o)=>{const s=e({redeem:{output:i}}).output;if(b.compare(n,s))throw new Error(`${t} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}const U=x(f.p2sh,"Redeem script"),M=x(f.p2wsh,"Witness script");function L(e,t,r,n){if(!r.every(k))throw new Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;let i,o=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),q(r,i,n,o),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function B(e,t,r,n,i,o){const s=ee(r);if(!function(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return N(1,e.partialSig);case"multisig":const r=f.p2ms({output:t});return N(r.m,e.partialSig,r.pubkeys);default:return!1}}(t,r,s))throw new Error(`Can not finalize input #${e}`);return function(e,t,r,n,i,o){let s,a;const u=function(e,t,r){let n;switch(t){case"multisig":const t=function(e,t){return f.p2ms({output:e}).pubkeys.map(e=>(t.filter(t=>0===b.compare(t.pubkey,e))[0]||{}).signature).filter(e=>!!e)}(e,r);n=f.p2ms({output:e,signatures:t});break;case"pubkey":n=f.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=f.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=f.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}(e,t,r),c=o?f.p2wsh({redeem:u}):null,l=i?f.p2sh({redeem:c||u}):null;return n?(a=c?(0,y.witnessStackToScriptWitness)(c.witness):(0,y.witnessStackToScriptWitness)(u.witness),l&&(s=l.input)):s=l?l.input:u.input,{finalScriptSig:s,finalScriptWitness:a}}(r,s,t.partialSig,n,i,o)}function D(e,t,r,n,i,o){const s=(0,u.checkForInput)(e,t),{hash:a,sighashType:c,script:l}=F(t,s,n,!1,o,i);return O(r,l,"sign"),{hash:a,sighashType:c}}function F(e,t,r,n,i,o){const s=r.__TX,a=t.sighashType||function(e){switch(e){case"bch":return v;case"none":return g.Transaction.SIGHASH_ALL}}(i);let u,c;H(a,o);const l=(a&g.Transaction.SIGHASH_BITCOINCASHBIP143)>0;if(t.nonWitnessUtxo){const n=J(r,t,e),i=s.ins[e].hash,o=n.getHash();if(0!==b.compare(i,o))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);const a=s.ins[e].index;c=n.outs[a]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");c=t.witnessUtxo}const{meaningfulScript:h,type:d}=$(c.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(d)>=0)u=s.hashForWitnessV0(e,h,c.value,a);else if((0,y.isP2WPKH)(h)){const t=f.p2pkh({hash:h.slice(2)}).output;u=s.hashForWitnessV0(e,t,c.value,a)}else{if(!l&&void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${b.toHex(h)}`);n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecessor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),u=l?s.hashForWitnessV0(e,h,c.value,a):s.hashForSignature(e,h,a)}return{script:h,sighashType:a,hash:u}}function j(e,t,r){const{script:n}=Y(e,t,r);return(0,y.isP2TR)(n)?n.subarray(2,34):null}function G(e){return 64===e.length?e:e.subarray(0,64)}function W(e,t,r,n,i,o,s){const a=i.__TX,u=t.sighashType||g.Transaction.SIGHASH_DEFAULT;H(u,s);const c=r.map((e,t)=>Y(t,e,i)),l=c.map(e=>e.script),h=c.map(e=>e.value),f=[];if(t.tapInternalKey&&!o){const r=j(e,t,i)||Uint8Array.from([]);if(0===b.compare((0,m.toXOnly)(n),r)){const t=a.hashForWitnessV1(e,l,h,u);f.push({pubkey:n,hash:t})}}const p=(t.tapLeafScript||[]).filter(e=>(0,y.pubkeyInScript)(n,e.script)).map(e=>{const t=(0,d.tapleafHash)({output:e.script,version:e.leafVersion});return Object.assign({hash:t},e)}).filter(e=>!o||0===b.compare(o,e.hash)).map(t=>{const r=a.hashForWitnessV1(e,l,h,u,t.hash);return{pubkey:n,hash:r,leafHash:t.hash}});return f.concat(p)}function H(e,t){if(t&&t.indexOf(e)<0){const t=function(e){let t=e&g.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(e&g.Transaction.SIGHASH_BITCOINCASHBIP143&&(t+="SIGHASH_BITCOINCASHBIP143 | FORKID_BCH | "),31&e){case g.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case g.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case g.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(e);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${t}`)}}function K(e,t,r){const n=(0,u.checkForInput)(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const i=n.bip32Derivation.map(e=>0===b.compare(e.masterFingerprint,r.fingerprint)?e:void 0).filter(e=>!!e);if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(e=>{const t=r.derivePath(e.path);if(0!==b.compare(e.pubkey,t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t})}function z(e){let t=0;function r(){const r=a.decode(e,t);return t+=a.encodingLength(r.bigintValue),r.numberValue}function n(){return n=r(),t+=n,e.slice(t-n,t);var n}return function(){const e=r(),t=[];for(let r=0;r<e;r++)t.push(n());return t}()}function V(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;const n=g.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;const i=e,o=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){const e=i.__NON_WITNESS_UTXO_BUF_CACHE[o],t=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(void 0!==e)return e;{const e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e}})}function q(e,t,r,n){let i=0n;e.forEach((e,o)=>{if(n&&e.finalScriptSig&&(t.ins[o].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[o].witness=z(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){const n=J(r,e,o),s=t.ins[o].index,a=n.outs[s];i+=a.value}});const o=t.outs.reduce((e,t)=>e+t.value,0n),s=i-o;if(s<0)throw new Error("Outputs are spending more than Inputs");const a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(Number(s/BigInt(a)))}function J(e,t,r){const n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||V(e,t,r),n[r]}function X(e,t,r){const{script:n}=Y(e,t,r);return n}function Y(e,t,r){if(void 0!==t.witnessUtxo)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(void 0!==t.nonWitnessUtxo){const n=J(r,t,e).outs[r.__TX.ins[e].index];return{script:n.script,value:n.value}}throw new Error("Can't find pubkey in input without Utxo data")}function Q(e){return 33===e.length&&p.isCanonicalPubKey(e)}function $(e,t,r,n,i){const o=(0,y.isP2SHScript)(e),s=o&&n&&(0,y.isP2WSHScript)(n),a=(0,y.isP2WSHScript)(e);if(o&&void 0===n)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let u;return s?(u=i,U(t,e,n,r),M(t,n,i,r),Z(u)):a?(u=i,M(t,e,i,r),Z(u)):o?(u=n,U(t,e,n,r)):u=e,{meaningfulScript:u,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}function Z(e){if((0,y.isP2WPKH)(e)||(0,y.isP2SHScript)(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function ee(e){return(0,y.isP2WPKH)(e)?"witnesspubkeyhash":(0,y.isP2PKH)(e)?"pubkeyhash":(0,y.isP2MS)(e)?"multisig":(0,y.isP2PK)(e)?"pubkey":"nonstandard"}function te(e){return[...Array(e).keys()]}},29024:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(86323),i=r(33862),o=r(22231),s=r(91057),a=r(60852),u=r(70565),c=r(74070);function l(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.s]}(e))return function(e,t){return new n.c(function(r){var n=new i.y;return n.add(t.schedule(function(){var i=e[o.s]();n.add(i.subscribe({next:function(e){n.add(t.schedule(function(){return r.next(e)}))},error:function(e){n.add(t.schedule(function(){return r.error(e)}))},complete:function(){n.add(t.schedule(function(){return r.complete()}))}}))})),n})}(e,t);if((0,u.y)(e))return function(e,t){return new n.c(function(r){var n=new i.y;return n.add(t.schedule(function(){return e.then(function(e){n.add(t.schedule(function(){r.next(e),n.add(t.schedule(function(){return r.complete()}))}))},function(e){n.add(t.schedule(function(){return r.error(e)}))})})),n})}(e,t);if((0,c.X)(e))return(0,s.V)(e,t);if(function(e){return e&&"function"==typeof e[a.lJ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new n.c(function(r){var n,o=new i.y;return o.add(function(){n&&"function"==typeof n.return&&n.return()}),o.add(t.schedule(function(){n=e[a.lJ](),o.add(t.schedule(function(){if(!r.closed){var e,t;try{var i=n.next();e=i.value,t=i.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}}))})),o})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}},29841:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var n=r(58701),i=r(19574),o={closed:!0,next:function(e){},error:function(e){if(n.$.useDeprecatedSynchronousErrorHandling)throw e;(0,i.T)(e)},complete:function(){}}},31509:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arkeoDescribePath=function(e){const t={verbose:(0,n.addressNListToBIP32)(e),coin:"Arkeo",isKnown:!1};if(5!=e.length)return t;if(2147483692!=e[0])return t;if(e[1]!=2147483648+(0,n.slip44ByCoin)("Arkeo"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(0!==e[3]||0!==e[4])return t;const r=2147483647&e[2];return{verbose:`Arkeo Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Arkeo",isKnown:!0,isPrefork:!1}};const n=r(33612)},31860:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){const n=e.charAt(r),i=n.charCodeAt(0);if(255!==t[i])throw new TypeError(n+" is ambiguous");t[i]=r}const r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function s(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let o=0,s=0,a=0;for(;e[o]===n;)s++,o++;const u=(e.length-o)*i+1>>>0,c=new Uint8Array(u);for(;o<e.length;){const n=e.charCodeAt(o);if(n>255)return;let i=t[n];if(255===i)return;let s=0;for(let e=u-1;(0!==i||s<a)&&-1!==e;e--,s++)i+=r*c[e]>>>0,c[e]=i%256>>>0,i=i/256>>>0;if(0!==i)throw new Error("Non-zero carry");a=s,o++}let l=u-a;for(;l!==u&&0===c[l];)l++;const h=new Uint8Array(s+(u-l));let f=s;for(;l!==u;)h[f++]=c[l++];return h}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,s=0,a=0;const u=t.length;for(;a!==u&&0===t[a];)a++,i++;const c=(u-a)*o+1>>>0,l=new Uint8Array(c);for(;a!==u;){let e=t[a],n=0;for(let t=c-1;(0!==e||n<s)&&-1!==t;t--,n++)e+=256*l[t]>>>0,l[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");s=n,a++}let h=c-s;for(;h!==c&&0===l[h];)h++;let f=n.repeat(i);for(;h<c;++h)f+=e.charAt(l[h]);return f},decodeUnsafe:s,decode:function(e){const t=s(e);if(t)return t;throw new Error("Non-base"+r+" character")}}}},32763:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=Uint8Array.from(t),n=e(r),o=r.length+4,s=new Uint8Array(o);return s.set(r,0),s.set(n.subarray(0,4),r.length),i.default.encode(s)},decode:function(e){var r=t(i.default.decode(e));if(null==r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=i.default.decodeUnsafe(e);if(null!=r)return t(r)}}};var i=n(r(56362))},32984:(e,t,r)=>{"use strict";function n(e){return e}r.d(t,{D:()=>n})},33410:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){let t;return()=>(void 0!==t||(t=e()),t)}},33465:(e,t,r)=>{"use strict";r.d(t,{h:()=>a});var n=r(86323),i=r(42637),o=r(84590),s=r(3672);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Number.POSITIVE_INFINITY,a=null,u=e[e.length-1];return(0,i.m)(u)?(a=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof u&&(r=e.pop()),null===a&&1===e.length&&e[0]instanceof n.c?e[0]:(0,o.U)(r)((0,s.c)(e,a))}},33498:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));t.decode=function(e){if(e.key[0]!==i.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+o.toHex(e.key));return Number(o.readUInt32(e.value,0,"LE"))},t.encode=function(e){const t=Uint8Array.from([i.InputTypes.SIGHASH_TYPE]),r=new Uint8Array(4);return o.writeUInt32(r,0,e,"LE"),{key:t,value:r}},t.expected="number",t.check=function(e){return"number"==typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType}},33612:function(e,t,r){"use strict";var n=r(1048).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.slip44Table=t.fromHexString=t.isArray=t.LONG_TIMEOUT=t.DEFAULT_TIMEOUT=void 0,t.toHexString=function(e){return Array.prototype.map.call(e,e=>("00"+e.toString(16)).slice(-2)).join("")},t.arrayify=function(e){if(null===e)throw new Error("cannot convert null value to array");if("string"!=typeof e)throw new Error("can only convert hex strings");const t=e.match(/^(0x)?[0-9a-fA-F]*$/);if(!t)throw new Error("invalid hexadecimal string");if("0x"!==t[1])throw new Error("hex string must have 0x prefix");(e=e.substring(2)).length%2&&(e="0"+e);const r=[];for(let t=0;t<e.length;t+=2)r.push(parseInt(e.substr(t,2),16));return new Uint8Array(r)},t.bip32Like=l,t.bip32ToAddressNList=function(e){if(!l(e))throw new Error(`Not a bip32 path: '${e}'`);/^m\//i.test(e)&&(e=e.slice(2));const t=e.split("/");if(1===t.length&&""===t[0])return[];const r=new Array(t.length);for(let e=0;e<t.length;e++){const n=/(\d+)([hH']?)/.exec(t[e]);if(null===n)throw new Error("Invalid input");if(r[e]=parseInt(n[1],10),r[e]>=c)throw new Error("Invalid child index");if("h"===n[2]||"H"===n[2]||"'"===n[2])r[e]+=c;else if(0!==n[2].length)throw new Error("Invalid modifier")}return r},t.addressNListToBIP32=function(e){return`m/${e.map(e=>e>=c?e-c+"'":e).join("/")}`},t.addressNListToHardenedBIP32=function(e){return`m/${e.map(e=>e>=c?e-c+"'":`${e}'`).join("/")}`},t.takeFirstOfManyEvents=function(e,t){return a.merge(...t.map(t=>a.fromEvent(e,t))).pipe(u.first())},t.stripHexPrefix=h,t.stripHexPrefixAndLower=function(e){return h(e).toLowerCase()},t.base64toHEX=function(e){const t=atob(e);let r="";for(let e=0;e<t.length;e++){const n=t.charCodeAt(e).toString(16);r+=2==n.length?n:"0"+n}return"0x"+r.toUpperCase()},t.slip44ByCoin=function(e){return t.slip44Table[e]},t.satsFromStr=function(e){const t=e.indexOf("."),r=t>0?8-(e.length-t-1):8;return Number(e.replace(/\./g,""))*10**r},t.hardenedPath=function(e){return e.filter(e=>e>=2147483648)},t.relativePath=function(e){return e.filter(e=>e<2147483648)},t.ed25519Path=function(e){return e.map(e=>e<2147483648?e+2147483648:e)},t.toArrayBuffer=function(e){return e instanceof ArrayBuffer?e:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)},t.mustBeDefined=function(e){if(null==e)throw new Error("expected a value");return e},t.untouchable=function(e){const t=new Proxy({},new Proxy({},{get:(r,n)=>(r,i)=>{if("get"===n&&"valueOf"===i)return()=>t;throw new Error(`${String(n)}(${String(i)}): ${e}`)}}));return t},t.checkBufferConcat=d,t.compatibleBufferConcat=function(e){return d()?n.concat(e.map(e=>n.isBuffer(e)?e:n.from(e))):n.concat(e)},t.isIndexable=function(e){return null!==e&&["object","function"].includes(typeof e)},t.sortTxFields=function(e){const t=[],r=new WeakSet;if(p(e))for(t.push(e);t.length;){let e=t.pop();r.add(e),e=!Array.isArray(e)&&g(e);for(const n of Object.values(e))p(n)&&!r.has(n)&&t.push(n)}return e};const a=s(r(74077)),u=s(r(94017));t.DEFAULT_TIMEOUT=5e3,t.LONG_TIMEOUT=3e5,t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.fromHexString=e=>{const t=e.match(/.{1,2}/g)||[];return new Uint8Array(t.map(e=>parseInt(e,16)))};const c=2147483648;function l(e){return"m/"==e||/^m(((\/[0-9]+h)+|(\/[0-9]+H)+|(\/[0-9]+')*)((\/[0-9]+)*))$/.test(e)}function h(e){return e.replace("0x","")}let f;function d(){if(void 0===f)try{n.concat([new Uint8Array]),f=!1}catch(e){f=!0}return f}t.slip44Table=Object.freeze({Bitcoin:0,Testnet:1,BitcoinCash:145,BitcoinGold:156,Litecoin:2,Dash:5,DigiByte:20,Dogecoin:3,BitcoinSV:236,Atom:118,Osmo:118,Arkeo:118,Binance:714,Ripple:144,Eos:194,Thorchain:931,Rune:931,Mayachain:931,Cardano:1815,Secret:529,Terra:330,Kava:459,Solana:501,Ethereum:60,Avalanche:60,Optimism:60,BnbSmartChain:60,Polygon:60,Gnosis:60,Arbitrum:60,ArbitrumNova:60,Base:60});const p=e=>"object"==typeof e&&null!==e,g=e=>{const t=Object.entries(e).sort((e,t)=>((e,t)=>e>t?1:e<t?-1:0)(e[0],t[0]));for(const[r]of t)delete e[r];return Object.assign(e,Object.fromEntries(t))}},33862:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});var n=r(81065),i=r(45989),o=r(23842),s=r(24788),a=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this,a=r._parentOrParents,c=r._ctorUnsubscribe,l=r._unsubscribe,h=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof e)a.remove(this);else if(null!==a)for(var f=0;f<a.length;++f)a[f].remove(this);if((0,o.T)(l)){c&&(this._unsubscribe=void 0);try{l.call(this)}catch(e){t=e instanceof s.Z?u(e.errors):[e]}}if((0,n.c)(h)){f=-1;for(var d=h.length;++f<d;){var p=h[f];if((0,i.G)(p))try{p.unsubscribe()}catch(e){t=t||[],e instanceof s.Z?t=t.concat(u(e.errors)):t.push(e)}}}if(t)throw new s.Z(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof e){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function u(e){return e.reduce(function(e,t){return e.concat(t instanceof s.Z?t.errors:t)},[])}},34050:(e,t,r)=>{"use strict";r.d(t,{D:()=>n});var n=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},36093:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secretDescribePath=function(e){const t={verbose:(0,n.addressNListToBIP32)(e),coin:"Secret",isKnown:!1};if(5!=e.length)return t;if(2147483692!=e[0])return t;if(e[1]!=2147483648+(0,n.slip44ByCoin)("Secret"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(0!==e[3]||0!==e[4])return t;const r=2147483647&e[2];return{verbose:`Secret Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Secret",isKnown:!0,isPrefork:!1}};const n=r(33612)},36632:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.supportsBTC=function(e){return(0,i.default)(e)&&e._supportsBTC},t.infoBTC=function(e){return(0,i.default)(e)&&e._supportsBTCInfo},t.supportsETH=function(e){return(0,i.default)(e)&&e._supportsETH},t.infoETH=function(e){return(0,i.default)(e)&&e._supportsETHInfo},t.supportsCosmos=function(e){return(0,i.default)(e)&&e._supportsCosmos},t.supportsEthSwitchChain=function(e){return(0,i.default)(e)&&e._supportsEthSwitchChain},t.supportsAvalanche=function(e){return(0,i.default)(e)&&e._supportsAvalanche},t.supportsOptimism=function(e){return(0,i.default)(e)&&e._supportsOptimism},t.supportsBSC=function(e){return(0,i.default)(e)&&e._supportsBSC},t.supportsPolygon=function(e){return(0,i.default)(e)&&e._supportsPolygon},t.supportsGnosis=function(e){return(0,i.default)(e)&&e._supportsGnosis},t.supportsArbitrum=function(e){return(0,i.default)(e)&&e._supportsArbitrum},t.supportsArbitrumNova=function(e){return(0,i.default)(e)&&e._supportsArbitrumNova},t.supportsBase=function(e){return(0,i.default)(e)&&e._supportsBase},t.infoCosmos=function(e){return(0,i.default)(e)&&e._supportsCosmosInfo},t.supportsOsmosis=function(e){return(0,i.default)(e)&&e._supportsOsmosis},t.infoOsmosis=function(e){return(0,i.default)(e)&&e._supportsOsmosisInfo},t.supportsArkeo=function(e){return(0,i.default)(e)&&e._supportsArkeo},t.infoArkeo=function(e){return(0,i.default)(e)&&e._supportsArkeoInfo},t.supportsThorchain=function(e){return(0,i.default)(e)&&e._supportsThorchain},t.infoThorchain=function(e){return(0,i.default)(e)&&e._supportsThorchainInfo},t.supportsMayachain=function(e){return(0,i.default)(e)&&e._supportsMayachain},t.infoMayachain=function(e){return(0,i.default)(e)&&e._supportsMayachainInfo},t.supportsEos=function(e){return(0,i.default)(e)&&e._supportsEos},t.infoEos=function(e){return(0,i.default)(e)&&e._supportsEosInfo},t.supportsSecret=function(e){return(0,i.default)(e)&&e._supportsSecret},t.infoSecret=function(e){return(0,i.default)(e)&&e._supportsSecretInfo},t.supportsTerra=function(e){return(0,i.default)(e)&&e._supportsTerra},t.infoTerra=function(e){return(0,i.default)(e)&&e._supportsTerraInfo},t.supportsKava=function(e){return(0,i.default)(e)&&e._supportsKava},t.infoKava=function(e){return(0,i.default)(e)&&e._supportsKavaInfo},t.supportsRipple=function(e){return(0,i.default)(e)&&e._supportsRipple},t.infoRipple=function(e){return(0,i.default)(e)&&e._supportsRippleInfo},t.supportsBinance=function(e){return(0,i.default)(e)&&e._supportsBinance},t.infoBinance=function(e){return(0,i.default)(e)&&e._supportsBinanceInfo},t.supportsSolana=function(e){return(0,i.default)(e)&&e._supportsSolana},t.infoSolana=function(e){return(0,i.default)(e)&&e._supportsSolanaInfo},t.supportsDebugLink=function(e){return(0,i.default)(e)&&e._supportsDebugLink};const i=n(r(41580))},37894:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function r(e){return a.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===h.OP_0)}t=Object.assign({validate:!0},t||{}),l.parse(l.partial(l.object({network:l.object({}),m:l.number(),n:l.number(),output:u.BufferSchema,pubkeys:l.array(l.custom(u.isPoint),"Received invalid pubkey"),signatures:l.array(l.custom(r),"Expected signature to be of type isAcceptableSignature"),input:u.BufferSchema})),e);const n={network:e.network||s.bitcoin};let i=[],o=!1;function d(e){o||(o=!0,i=a.decompile(e),n.m=i[0]-f,n.n=i[i.length-2]-f,n.pubkeys=i.slice(1,-2))}if(c.prop(n,"output",()=>{if(e.m&&n.n&&e.pubkeys)return a.compile([].concat(f+e.m,e.pubkeys,f+n.n,h.OP_CHECKMULTISIG))}),c.prop(n,"m",()=>{if(n.output)return d(n.output),n.m}),c.prop(n,"n",()=>{if(n.pubkeys)return n.pubkeys.length}),c.prop(n,"pubkeys",()=>{if(e.output)return d(e.output),n.pubkeys}),c.prop(n,"signatures",()=>{if(e.input)return a.decompile(e.input).slice(1)}),c.prop(n,"input",()=>{if(e.signatures)return a.compile([h.OP_0].concat(e.signatures))}),c.prop(n,"witness",()=>{if(n.input)return[]}),c.prop(n,"name",()=>{if(n.m&&n.n)return`p2ms(${n.m} of ${n.n})`}),t.validate){if(e.output){if(d(e.output),l.parse(l.number(),i[0],{message:"Output is invalid"}),l.parse(l.number(),i[i.length-2],{message:"Output is invalid"}),i[i.length-1]!==h.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(n.m<=0||n.n>16||n.m>n.n||n.n!==i.length-3)throw new TypeError("Output is invalid");if(!n.pubkeys.every(e=>(0,u.isPoint)(e)))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==n.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==n.n)throw new TypeError("n mismatch");if(e.pubkeys&&!(0,u.stacksEqual)(e.pubkeys,n.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(n.n=e.pubkeys.length,n.n<n.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<n.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>n.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==h.OP_0)throw new TypeError("Input is invalid");if(0===n.signatures.length||!n.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!(0,u.stacksEqual)(e.signatures,n.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(n,e)};const s=r(81281),a=o(r(52421)),u=r(22343),c=o(r(33410)),l=o(r(86466)),h=a.OPS,f=h.OP_RESERVED},38339:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(27294));t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+i.toHex(t.key));return t.value},encode:function(t){return{key:Uint8Array.from([e]),value:t}},check:function(e){return e instanceof Uint8Array},expected:"Uint8Array",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}},39225:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var n=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}()},39815:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var n=r(86323);function i(e,t){return t?new n.c(function(r){return t.schedule(o,0,{error:e,subscriber:r})}):new n.c(function(t){return t.error(e)})}function o(e){var t=e.error;e.subscriber.error(t)}},40194:(e,t,r)=>{"use strict";r.d(t,{m:()=>l});var n=r(61220),i=r(46907),o=r(40901),s=r(33862),a=r(3976),u=r(81678),c=r(83182),l=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=n,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return n.C6(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var r=this._events;r.push(t),r.length>this._bufferSize&&r.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new h(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new u.P;if(this.isStopped||this.hasError?t=s.y.EMPTY:(this.observers.push(e),t=new c.Y(this,e)),i&&e.add(e=new a.YZ(e,i)),r)for(var l=0;l<o&&!e.closed;l++)e.next(n[l]);else for(l=0;l<o&&!e.closed;l++)e.next(n[l].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.g).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(e-n[o].time<r);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&n.splice(0,o),n},t}(i.B7),h=function(){return function(e,t){this.time=e,this.value=t}}()},40282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},40901:(e,t,r)=>{"use strict";r.d(t,{g:()=>s,T:()=>o});var n=r(61220),i=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return n.C6(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(r(80658).R),o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.C6(t,e),t}(r(45672).q))(i),s=o},41117:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});var n=r(61220),i=function(e){function t(t,r,n){var i=e.call(this)||this;return i.parent=t,i.outerValue=r,i.outerIndex=n,i.index=0,i}return n.C6(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(r(90189).v),o=r(47722),s=r(86323);function a(e,t,r,n,a){if(void 0===a&&(a=new i(e,r,n)),!a.closed)return t instanceof s.c?t.subscribe(a):(0,o.i)(t)(a)}},41580:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},41975:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(61220),i=r(90189);function o(e,t){return function(r){return r.lift(new s(e,t))}}var s=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.thisArg))},e}(),a=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.predicate=r,i.thisArg=n,i.count=0,i}return n.C6(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(i.v)},42223:(e,t,r)=>{"use strict";r.d(t,{$:()=>u,k:()=>f});var n=r(61220),i=r(90189),o=r(33862),s=r(86323),a=r(46907);function u(e,t,r,n){return function(i){return i.lift(new c(e,t,r,n))}}var c=function(){function e(e,t,r,n){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=n}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),l=function(e){function t(t,r,n,i,o){var s=e.call(this,t)||this;return s.keySelector=r,s.elementSelector=n,s.durationSelector=i,s.subjectSelector=o,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return n.C6(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var r=this.groups;r||(r=this.groups=new Map);var n,i=r.get(t);if(this.elementSelector)try{n=this.elementSelector(e)}catch(e){this.error(e)}else n=e;if(!i){i=this.subjectSelector?this.subjectSelector():new a.B7,r.set(t,i);var o=new f(t,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new f(t,i))}catch(e){return void this.error(e)}this.add(s.subscribe(new h(t,i,this)))}}i.closed||i.next(n)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach(function(t,r){t.error(e)}),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(i.v),h=function(e){function t(t,r,n){var i=e.call(this,r)||this;return i.key=t,i.group=r,i.parent=n,i}return n.C6(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(i.v),f=function(e){function t(t,r,n){var i=e.call(this)||this;return i.key=t,i.groupSubject=r,i.refCountSubscription=n,i}return n.C6(t,e),t.prototype._subscribe=function(e){var t=new o.y,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new d(r)),t.add(n.subscribe(e)),t},t}(s.c),d=function(e){function t(t){var r=e.call(this)||this;return r.parent=t,t.count++,r}return n.C6(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(o.y)},42637:(e,t,r)=>{"use strict";function n(e){return e&&"function"==typeof e.schedule}r.d(t,{m:()=>n})},43304:(e,t,r)=>{"use strict";r.d(t,{O4:()=>u});var n=r(61220),i=r(81065),o=r(3672),s=r(3490),a=r(41117);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!(0,i.c)(e[0]))return e[0];e=e[0]}return(0,o.c)(e,void 0).lift(new c)}var c=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}(),l=function(e){function t(t){var r=e.call(this,t)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return n.C6(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],i=(0,a.F)(this,n,void 0,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,r){if(!this.hasFirst){this.hasFirst=!0;for(var n=0;n<this.subscriptions.length;n++)if(n!==r){var i=this.subscriptions[n];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)},t}(s.E)},43807:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TAGGED_HASH_PREFIXES=t.TAGS=void 0,t.hash160=function(e){return(0,s.ripemd160)((0,a.sha256)(e))},t.hash256=function(e){return(0,a.sha256)((0,a.sha256)(e))},t.taggedHash=function(e,r){return(0,a.sha256)(u.concat([t.TAGGED_HASH_PREFIXES[e],r]))};const s=r(10071),a=r(79688),u=o(r(27294));t.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],t.TAGGED_HASH_PREFIXES={"BIP0340/challenge":Uint8Array.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":Uint8Array.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":Uint8Array.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:Uint8Array.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:Uint8Array.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:Uint8Array.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:Uint8Array.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":Uint8Array.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":Uint8Array.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])}},44106:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));t.decode=function(e){if(e.key[0]!==i.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+o.toHex(e.key));if(65!==e.key.length)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+o.toHex(e.key));if(64!==e.value.length&&65!==e.value.length)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+o.toHex(e.key));return{pubkey:e.key.slice(1,33),leafHash:e.key.slice(33),signature:e.value}},t.encode=function(e){const t=Uint8Array.from([i.InputTypes.TAP_SCRIPT_SIG]);return{key:o.concat([t,e.pubkey,e.leafHash]),value:e.signature}},t.expected="{ pubkey: Uint8Array; leafHash: Uint8Array; signature: Uint8Array; }",t.check=function(e){return e.pubkey instanceof Uint8Array&&e.leafHash instanceof Uint8Array&&e.signature instanceof Uint8Array&&32===e.pubkey.length&&32===e.leafHash.length&&(64===e.signature.length||65===e.signature.length)},t.canAddToArray=function(e,t,r){const n=o.toHex(t.pubkey)+o.toHex(t.leafHash);return!r.has(n)&&(r.add(n),0===e.filter(e=>0===o.compare(e.pubkey,t.pubkey)&&0===o.compare(e.leafHash,t.leafHash)).length)}},44274:(e,t,r)=>{"use strict";r.r(t),r.d(t,{compare:()=>g,concat:()=>l,fromBase64:()=>p,fromHex:()=>f,fromUtf8:()=>c,readUInt16:()=>E,readUInt32:()=>A,readUInt64:()=>S,readUInt8:()=>w,toBase64:()=>d,toHex:()=>h,toUtf8:()=>u,writeUInt16:()=>y,writeUInt32:()=>b,writeUInt64:()=>v,writeUInt8:()=>m});const n="0123456789abcdefABCDEF",i=n.split("").map(e=>e.codePointAt(0)),o=Array(256).fill(!0).map((e,t)=>{const r=String.fromCodePoint(t),i=n.indexOf(r);return i<0?void 0:i<16?i:i-6}),s=new TextEncoder,a=new TextDecoder;function u(e){return a.decode(e)}function c(e){return s.encode(e)}function l(e){const t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}function h(e){const t=e||new Uint8Array;return t.length>512?function(e){const t=new Uint8Array(2*e.length);for(let r=0;r<e.length;++r)t[2*r]=i[e[r]>>4],t[2*r+1]=i[15&e[r]];return a.decode(t)}(t):function(e){let t="";for(let r=0;r<e.length;++r)t+=n[o[i[e[r]>>4]]],t+=n[o[i[15&e[r]]]];return t}(t)}function f(e){const t=s.encode(e||""),r=new Uint8Array(Math.floor(t.length/2));let n;for(n=0;n<r.length;n++){const e=o[t[2*n]],i=o[t[2*n+1]];if(void 0===e||void 0===i)break;r[n]=e<<4|i}return n===r.length?r:r.slice(0,n)}function d(e){return btoa(String.fromCharCode(...e))}function p(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function g(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return e.length===t.length?0:e.length>t.length?1:-1}function m(e,t,r){if(t+1>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(r>255)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 255. Received ${r}`);e[t]=r}function y(e,t,r,n){if(t+2>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>65535)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 65535. Received ${r}`);"LE"===n?(e[t]=255&r,e[t+1]=r>>8&255):(e[t]=r>>8&255,e[t+1]=255&r)}function b(e,t,r,n){if(t+4>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>4294967295)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 4294967295. Received ${r}`);"LE"===n?(e[t]=255&r,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255):(e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r)}function v(e,t,r,n){if(t+8>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if(n=n.toUpperCase(),r>0xffffffffffffffffn)throw new Error(`The value of "value" is out of range. It must be >= 0 and <= 18446744073709551615. Received ${r}`);"LE"===n?(e[t]=Number(0xffn&r),e[t+1]=Number(r>>8n&0xffn),e[t+2]=Number(r>>16n&0xffn),e[t+3]=Number(r>>24n&0xffn),e[t+4]=Number(r>>32n&0xffn),e[t+5]=Number(r>>40n&0xffn),e[t+6]=Number(r>>48n&0xffn),e[t+7]=Number(r>>56n&0xffn)):(e[t]=Number(r>>56n&0xffn),e[t+1]=Number(r>>48n&0xffn),e[t+2]=Number(r>>40n&0xffn),e[t+3]=Number(r>>32n&0xffn),e[t+4]=Number(r>>24n&0xffn),e[t+5]=Number(r>>16n&0xffn),e[t+6]=Number(r>>8n&0xffn),e[t+7]=Number(0xffn&r))}function w(e,t){if(t+1>e.length)throw new Error("Offset is outside the bounds of Uint8Array");return e[t]}function E(e,t,r){if(t+2>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0;return r=(r<<8)+e[t+1],r=(r<<8)+e[t],r}{let r=0;return r=(r<<8)+e[t],r=(r<<8)+e[t+1],r}}function A(e,t,r){if(t+4>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0;return r=(r<<8)+e[t+3]>>>0,r=(r<<8)+e[t+2]>>>0,r=(r<<8)+e[t+1]>>>0,r=(r<<8)+e[t]>>>0,r}{let r=0;return r=(r<<8)+e[t]>>>0,r=(r<<8)+e[t+1]>>>0,r=(r<<8)+e[t+2]>>>0,r=(r<<8)+e[t+3]>>>0,r}}function S(e,t,r){if(t+8>e.length)throw new Error("Offset is outside the bounds of Uint8Array");if("LE"===(r=r.toUpperCase())){let r=0n;return r=(r<<8n)+BigInt(e[t+7]),r=(r<<8n)+BigInt(e[t+6]),r=(r<<8n)+BigInt(e[t+5]),r=(r<<8n)+BigInt(e[t+4]),r=(r<<8n)+BigInt(e[t+3]),r=(r<<8n)+BigInt(e[t+2]),r=(r<<8n)+BigInt(e[t+1]),r=(r<<8n)+BigInt(e[t]),r}{let r=0n;return r=(r<<8n)+BigInt(e[t]),r=(r<<8n)+BigInt(e[t+1]),r=(r<<8n)+BigInt(e[t+2]),r=(r<<8n)+BigInt(e[t+3]),r=(r<<8n)+BigInt(e[t+4]),r=(r<<8n)+BigInt(e[t+5]),r=(r<<8n)+BigInt(e[t+6]),r=(r<<8n)+BigInt(e[t+7]),r}}},44496:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(79688),o=n(r(32763));t.default=(0,o.default)(function(e){return(0,i.sha256)((0,i.sha256)(e))})},44841:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});var n=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},44874:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(81413),o=r(2795),s=r(77496),a=r(91326),u=n(r(27294));t.Psbt=class{constructor(e){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}static fromBase64(e,t){const r=u.fromBase64(e);return this.fromBuffer(r,t)}static fromHex(e,t){const r=u.fromHex(e);return this.fromBuffer(r,t)}static fromBuffer(e,t){const r=o.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}toBase64(){const e=this.toBuffer();return u.toBase64(e)}toHex(){const e=this.toBuffer();return u.toHex(e)}toBuffer(){return o.psbtToBuffer(this)}updateGlobal(e){return a.updateGlobal(e,this.globalMap),this}updateInput(e,t){const r=a.checkForInput(this.inputs,e);return a.updateInput(t,r),this}updateOutput(e,t){const r=a.checkForOutput(this.outputs,e);return a.updateOutput(t,r),this}addUnknownKeyValToGlobal(e){return a.checkHasKey(e,this.globalMap.unknownKeyVals,a.getEnumLength(s.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}addUnknownKeyValToInput(e,t){const r=a.checkForInput(this.inputs,e);return a.checkHasKey(t,r.unknownKeyVals,a.getEnumLength(s.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addUnknownKeyValToOutput(e,t){const r=a.checkForOutput(this.outputs,e);return a.checkHasKey(t,r.unknownKeyVals,a.getEnumLength(s.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addInput(e){this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});const t=e.unknownKeyVals||[],r=this.inputs.length-1;if(!Array.isArray(t))throw new Error("unknownKeyVals must be an Array");return t.forEach(e=>this.addUnknownKeyValToInput(r,e)),a.addInputAttributes(this.inputs,e),this}addOutput(e){this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});const t=e.unknownKeyVals||[],r=this.outputs.length-1;if(!Array.isArray(t))throw new Error("unknownKeyVals must be an Array");return t.forEach(e=>this.addUnknownKeyValToOutput(r,e)),a.addOutputAttributes(this.outputs,e),this}clearFinalizedInput(e){const t=a.checkForInput(this.inputs,e);a.inputCheckUncleanFinalized(e,t);for(const e of Object.keys(t))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(e)||delete t[e];return this}combine(...e){const t=i.combine([this].concat(e));return Object.assign(this,t),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};var c=r(91326);t.checkForInput=c.checkForInput,t.checkForOutput=c.checkForOutput},45672:(e,t,r)=>{"use strict";r.d(t,{q:()=>o});var n=r(61220),i=r(13826),o=function(e){function t(r,n){void 0===n&&(n=i._.now);var o=e.call(this,r,function(){return t.delegate&&t.delegate!==o?t.delegate.now():n()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return n.C6(t,e),t.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,n,i):e.prototype.schedule.call(this,r,n,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(i._)},45989:(e,t,r)=>{"use strict";function n(e){return null!==e&&"object"==typeof e}r.d(t,{G:()=>n})},46582:(e,t,r)=>{"use strict";function n(){}r.d(t,{l:()=>n})},46907:(e,t,r)=>{"use strict";r.d(t,{B7:()=>h,PJ:()=>l});var n=r(61220),i=r(86323),o=r(90189),s=r(33862),a=r(81678),u=r(83182),c=r(34050),l=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return n.C6(t,e),t}(o.v),h=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n.C6(t,e),t.prototype[c.D]=function(){return new l(this)},t.prototype.lift=function(e){var t=new f(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.P;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.P;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.P;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.P;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.P;return this.hasError?(e.error(this.thrownError),s.y.EMPTY):this.isStopped?(e.complete(),s.y.EMPTY):(this.observers.push(e),new u.Y(this,e))},t.prototype.asObservable=function(){var e=new i.c;return e.source=this,e},t.create=function(e,t){return new f(e,t)},t}(i.c),f=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return n.C6(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.y.EMPTY},t}(h)},47722:(e,t,r)=>{"use strict";r.d(t,{i:()=>l});var n=r(24852),i=r(19574),o=r(60852),s=r(22231),a=r(74070),u=r(70565),c=r(45989),l=function(e){if(e&&"function"==typeof e[s.s])return l=e,function(e){var t=l[s.s]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.X)(e))return(0,n.v)(e);if((0,u.y)(e))return r=e,function(e){return r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,i.T),e};if(e&&"function"==typeof e[o.lJ])return t=e,function(e){for(var r=t[o.lJ]();;){var n=void 0;try{n=r.next()}catch(t){return e.error(t),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof r.return&&e.add(function(){r.return&&r.return()}),e};var t,r,l,h=(0,c.G)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+h+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},48671:(e,t,r)=>{"use strict";r.d(t,{G:()=>n});var n=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}()},51131:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BTCOutputAddressType=t.BTCOutputScriptType=t.BTCInputScriptType=void 0,t.unknownUTXOPath=f,t.describeUTXOPath=function(e,t,r){const n=f(e,t,r);if(3!==e.length&&5!==e.length)return n;if((2147483648&e[0])>>>0!=2147483648)return n;const i=2147483647&e[0];if(![44,49,84].includes(i))return n;if(44===i&&r!==c.SpendAddress)return n;if(49===i&&r!==c.SpendP2SHWitness)return n;const o=3===e.length,s={[c.SpendAddress]:["Legacy"],[c.SpendP2SHWitness]:[],[c.SpendWitness]:["Segwit"],[c.Bech32]:["Segwit Native"]}[r];let a=!1;const l=(0,u.slip44ByCoin)(t);if(void 0===l)return n;if(e[1]!==2147483648+l)switch(t){case"BitcoinCash":case"BitcoinGold":if(e[1]===2147483648+(0,u.slip44ByCoin)("Bitcoin")){a=!0;break}return n;case"BitcoinSV":if(e[1]===2147483648+(0,u.slip44ByCoin)("Bitcoin")||e[1]===2147483648+(0,u.slip44ByCoin)("BitcoinCash")){a=!0;break}return n;default:return n}let h=a?["Prefork"]:[];switch(t){case"Bitcoin":case"Litecoin":case"BitcoinGold":case"Testnet":s&&(h=h.concat(s))}const d=h.length?` (${h.join(", ")})`:"",p=2147483647&e[2];if(o)return{coin:t,verbose:`${t} Account #${p}${d}`,accountIdx:p,wholeAccount:!0,isKnown:!0,scriptType:r,isPrefork:a};{const n=1===e[3]?"Change ":"",i=e[4];return{coin:t,verbose:`${t} Account #${p}, ${n}Address #${i}${d}`,accountIdx:p,addressIdx:i,wholeAccount:!1,isKnown:!0,isChange:1===e[3],scriptType:r,isPrefork:a}}},t.legacyAccount=function(e,t,r){return{coin:e,scriptType:c.SpendAddress,addressNList:[2147483692,2147483648+t,2147483648+r]}},t.segwitAccount=function(e,t,r){return{coin:e,scriptType:c.SpendP2SHWitness,addressNList:[2147483697,2147483648+t,2147483648+r]}},t.segwitNativeAccount=function(e,t,r){return{coin:e,scriptType:c.SpendWitness,addressNList:[2147483732,2147483648+t,2147483648+r]}},t.validateVoutOrdering=function(e,t){var r;if(s.address.fromOutputScript(t.outs[0].script)!=e.vaultAddress)return console.error("Vout:0 does not contain vault address."),!1;if(t.outs.length<3)return console.error("Not enough outputs found in transaction.",e),!1;const n=null===(r=s.script.decompile(t.outs[2].script))||void 0===r?void 0:r[0];return"OP_RETURN"!=Object.keys(s.script.OPS).find(e=>s.script.OPS[e]===n)?(console.error("OP_RETURN output not found for transaction."),!1):!t.outs[3]||(console.error("Illegal second op_return output found."),!1)};const s=o(r(56304)),a=o(r(73716)),u=r(33612);var c,l,h;function f(e,t,r){return{verbose:(0,u.addressNListToBIP32)(e),coin:t,scriptType:r,isKnown:!1}}a.assert(),function(e){e.CashAddr="cashaddr",e.Bech32="bech32",e.SpendAddress="p2pkh",e.SpendMultisig="p2sh",e.External="external",e.SpendWitness="p2wpkh",e.SpendP2SHWitness="p2sh-p2wpkh"}(c||(t.BTCInputScriptType=c={})),function(e){e.PayToAddress="p2pkh",e.PayToMultisig="p2sh",e.Bech32="bech32",e.PayToWitness="p2wpkh",e.PayToP2SHWitness="p2sh-p2wpkh"}(l||(t.BTCOutputScriptType=l={})),function(e){e.Spend="spend",e.Transfer="transfer",e.Change="change"}(h||(t.BTCOutputAddressType=h={}))},51657:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));t.decode=function(e){if(e.key[0]!==i.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+o.toHex(e.key));return e.value},t.encode=function(e){return{key:new Uint8Array([i.InputTypes.FINAL_SCRIPTWITNESS]),value:e}},t.expected="Uint8Array",t.check=function(e){return e instanceof Uint8Array},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}},51835:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e,t,r){t=t||4,r=void 0===r||r;const n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&!(127&e[n-1]||!(n<=1)&&128&e[n-2]))throw new Error("Non-minimally encoded script number");if(5===n){const t=s.readUInt32(e,0,"LE"),r=s.readUInt8(e,4);return 128&r?-(4294967296*(-129&r)+t):4294967296*r+t}let i=0;for(let t=0;t<n;++t)i|=e[t]<<8*t;return 128&e[n-1]?-(i&~(128<<8*(n-1))):i},t.encode=function(e){let t=Math.abs(e);const r=(o=t)>2147483647?5:o>8388607?4:o>32767?3:o>127?2:o>0?1:0,n=new Uint8Array(r),i=e<0;var o;for(let e=0;e<r;++e)s.writeUInt8(n,e,255&t),t>>=8;return 128&n[r-1]?s.writeUInt8(n,r-1,i?128:0):i&&(n[r-1]|=128),n};const s=o(r(27294))},52090:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),d.parse(d.partial(d.object({address:d.string(),hash:(0,c.NBufferSchemaFactory)(20),input:(0,c.NBufferSchemaFactory)(0),network:d.object({}),output:(0,c.NBufferSchemaFactory)(22),pubkey:d.custom(c.isPoint,"Not a valid pubkey"),signature:d.custom(u.isCanonicalScriptSignature),witness:d.array(c.BufferSchema)})),e);const r=l.value(()=>{const t=h.bech32.decode(e.address),r=t.words.shift(),n=h.bech32.fromWords(t.words);return{version:r,prefix:t.prefix,data:Uint8Array.from(n)}}),n=e.network||a.bitcoin,i={name:"p2wpkh",network:n};if(l.prop(i,"address",()=>{if(!i.hash)return;const e=h.bech32.toWords(i.hash);return e.unshift(0),h.bech32.encode(n.bech32,e)}),l.prop(i,"hash",()=>e.output?e.output.slice(2,22):e.address?r().data:e.pubkey||i.pubkey?s.hash160(e.pubkey||i.pubkey):void 0),l.prop(i,"output",()=>{if(i.hash)return u.compile([p.OP_0,i.hash])}),l.prop(i,"pubkey",()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0),l.prop(i,"signature",()=>{if(e.witness)return e.witness[0]}),l.prop(i,"input",()=>{if(i.witness)return g}),l.prop(i,"witness",()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]}),t.validate){let t=Uint8Array.from([]);if(e.address){if(n&&n.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(20!==r().data.length)throw new TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&0!==f.compare(t,e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==p.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&0!==f.compare(t,e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){const r=s.hash160(e.pubkey);if(t.length>0&&0!==f.compare(t,r))throw new TypeError("Hash mismatch");if(t=r,!(0,c.isPoint)(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!u.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,c.isPoint)(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&0!==f.compare(e.signature,e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&0!==f.compare(e.pubkey,e.witness[1]))throw new TypeError("Pubkey mismatch");const r=s.hash160(e.witness[1]);if(t.length>0&&0!==f.compare(t,r))throw new TypeError("Hash mismatch")}}return Object.assign(i,e)};const s=o(r(43807)),a=r(81281),u=o(r(52421)),c=r(22343),l=o(r(33410)),h=r(20344),f=o(r(27294)),d=o(r(86466)),p=u.OPS,g=new Uint8Array(0)},52164:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),d.parse((0,c.NullablePartial)({network:d.object({}),address:d.string(),hash:c.Buffer256bitSchema,output:(0,c.NBufferSchemaFactory)(34),redeem:(0,c.NullablePartial)({input:c.BufferSchema,network:d.object({}),output:c.BufferSchema,witness:d.array(c.BufferSchema)}),input:(0,c.NBufferSchemaFactory)(0),witness:d.array(c.BufferSchema)}),e);const r=l.value(()=>{const t=h.bech32.decode(e.address),r=t.words.shift(),n=h.bech32.fromWords(t.words);return{version:r,prefix:t.prefix,data:Uint8Array.from(n)}}),n=l.value(()=>u.decompile(e.redeem.input));let i=e.network;i||(i=e.redeem&&e.redeem.network||a.bitcoin);const o={network:i};if(l.prop(o,"address",()=>{if(!o.hash)return;const e=h.bech32.toWords(o.hash);return e.unshift(0),h.bech32.encode(i.bech32,e)}),l.prop(o,"hash",()=>e.output?e.output.slice(2):e.address?r().data:o.redeem&&o.redeem.output?(0,s.sha256)(o.redeem.output):void 0),l.prop(o,"output",()=>{if(o.hash)return u.compile([p.OP_0,o.hash])}),l.prop(o,"redeem",()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:g,witness:e.witness.slice(0,-1)}}),l.prop(o,"input",()=>{if(o.witness)return g}),l.prop(o,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=u.toStack(n());return o.redeem=Object.assign({witness:t},e.redeem),o.redeem.input=g,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),l.prop(o,"name",()=>{const e=["p2wsh"];return void 0!==o.redeem&&void 0!==o.redeem.name&&e.push(o.redeem.name),e.join("-")}),t.validate){let t=Uint8Array.from([]);if(e.address){if(r().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(32!==r().data.length)throw new TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&0!==f.compare(t,e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==p.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const r=e.output.slice(2);if(t.length>0&&0!==f.compare(t,r))throw new TypeError("Hash mismatch");t=r}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){const r=u.decompile(e.redeem.output);if(!r||r.length<1)throw new TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(u.countNonPushOnlyOPs(r)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const n=(0,s.sha256)(e.redeem.output);if(t.length>0&&0!==f.compare(t,n))throw new TypeError("Hash mismatch");t=n}if(e.redeem.input&&!u.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!(0,c.stacksEqual)(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(m)||e.redeem.output&&(u.decompile(e.redeem.output)||[]).some(m))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){const t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&0!==f.compare(e.redeem.output,t))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(m)||(u.decompile(t)||[]).some(m))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,e)};const s=r(79688),a=r(81281),u=o(r(52421)),c=r(22343),l=o(r(33410)),h=r(20344),f=o(r(27294)),d=o(r(86466)),p=u.OPS,g=new Uint8Array(0);function m(e){return!!(e instanceof Uint8Array&&65===e.length&&4===e[0]&&(0,c.isPoint)(e))}},52421:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.signature=t.number=t.OPS=void 0,t.isPushOnly=y,t.countNonPushOnlyOPs=function(e){return e.length-e.filter(m).length},t.compile=E,t.decompile=A,t.toASM=function(e){if(v(e)&&(e=A(e)),!e)throw new Error("Could not convert invalid chunks to ASM");return e.map(e=>{if(w(e)){const t=b(e);if(void 0===t)return f.toHex(e);e=t}return a.REVERSE_OPS[e]}).join(" ")},t.fromASM=function(e){return d.parse(d.string(),e),E(e.split(" ").map(e=>void 0!==a.OPS[e]?a.OPS[e]:(d.parse(h.HexSchema,e),f.fromHex(e))))},t.toStack=function(e){return e=A(e),d.parse(d.custom(y),e),e.map(e=>w(e)?e:e===a.OPS.OP_0?new Uint8Array(0):c.encode(e-p))},t.isCanonicalPubKey=function(e){return h.isPoint(e)},t.isDefinedHashType=S,t.isCanonicalScriptSignature=function(e){return e instanceof Uint8Array&&!!S(e[e.length-1])&&s.check(e.slice(0,-1))};const s=o(r(55441)),a=r(26224);Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return a.OPS}});const u=o(r(81511)),c=o(r(51835)),l=o(r(99206)),h=o(r(22343)),f=o(r(27294)),d=o(r(86466)),p=a.OPS.OP_RESERVED,g=d.array(d.union([d.instance(Uint8Array),d.number()]));function m(e){return d.is(h.BufferSchema,e)||function(e){return d.is(d.number(),e)&&(e===a.OPS.OP_0||e>=a.OPS.OP_1&&e<=a.OPS.OP_16||e===a.OPS.OP_1NEGATE)}(e)}function y(e){return d.is(d.pipe(d.any(),d.everyItem(m)),e)}function b(e){return 0===e.length?a.OPS.OP_0:1===e.length?e[0]>=1&&e[0]<=16?p+e[0]:129===e[0]?a.OPS.OP_1NEGATE:void 0:void 0}function v(e){return e instanceof Uint8Array}function w(e){return e instanceof Uint8Array}function E(e){if(v(e))return e;d.parse(g,e);const t=e.reduce((e,t)=>w(t)?1===t.length&&void 0!==b(t)?e+1:e+u.encodingLength(t.length)+t.length:e+1,0),r=new Uint8Array(t);let n=0;if(e.forEach(e=>{if(w(e)){const t=b(e);if(void 0!==t)return f.writeUInt8(r,n,t),void(n+=1);n+=u.encode(r,e.length,n),r.set(e,n),n+=e.length}else f.writeUInt8(r,n,e),n+=1}),n!==r.length)throw new Error("Could not decode chunks");return r}function A(e){if(t=e,d.is(g,t))return e;var t;d.parse(h.BufferSchema,e);const r=[];let n=0;for(;n<e.length;){const t=e[n];if(t>a.OPS.OP_0&&t<=a.OPS.OP_PUSHDATA4){const t=u.decode(e,n);if(null===t)return null;if(n+=t.size,n+t.number>e.length)return null;const i=e.slice(n,n+t.number);n+=t.number;const o=b(i);void 0!==o?r.push(o):r.push(i)}else r.push(t),n+=1}return r}function S(e){const t=-193&e;return t>0&&t<4}t.number=c,t.signature=l},53200:(e,t,r)=>{"use strict";r.d(t,{I:()=>o,w:()=>i});var n=r(86323),i=new n.c(function(e){return e.complete()});function o(e){return e?function(e){return new n.c(function(t){return e.schedule(function(){return t.complete()})})}(e):i}},54863:(e,t,r)=>{"use strict";r.d(t,{ZZ:()=>a,qI:()=>l});var n=r(61220),i=r(4679),o=r(80125),s=r(2683);function a(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof t?function(n){return n.pipe(a(function(r,n){return(0,o.H)(e(r,n)).pipe((0,i.T)(function(e,i){return t(r,e,n,i)}))},r))}:("number"==typeof t&&(r=t),function(t){return t.lift(new u(e,r))})}var u=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.concurrent))},e}(),c=function(e){function t(t,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return n.C6(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new s.zA(this),r=this.destination;r.add(t);var n=(0,s.tS)(e,t);n!==t&&r.add(n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(s.gn),l=a},55441:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.check=function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;const t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;const r=e[5+t];return!(0===r||6+t+r!==e.length||128&e[4]||t>1&&0===e[4]&&!(128&e[5])||128&e[t+6]||r>1&&0===e[t+6]&&!(128&e[t+7]))},t.decode=function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");const t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");const r=e[5+t];if(0===r)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},t.encode=function(e,t){const r=e.length,n=t.length;if(0===r)throw new Error("R length is zero");if(0===n)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(n>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");const i=new Uint8Array(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,i.set(e,4),i[4+r]=2,i[5+r]=t.length,i.set(t,6+r),i}},55511:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;const s=r(60817),a=o(r(43807)),u=r(15722),c=r(62060),l=o(r(86466)),h=o(r(27294)),f=new TypeError("Cannot compute merkle root for zero transactions"),d=new TypeError("Cannot compute witness commit for non-segwit block");class p{static fromBuffer(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");const t=new s.BufferReader(e),r=new p;if(r.version=t.readInt32(),r.prevHash=t.readSlice(32),r.merkleRoot=t.readSlice(32),r.timestamp=t.readUInt32(),r.bits=t.readUInt32(),r.nonce=t.readUInt32(),80===e.length)return r;const n=()=>{const e=c.Transaction.fromBuffer(t.buffer.slice(t.offset),!0);return t.offset+=e.byteLength(),e},i=t.readVarInt();r.transactions=[];for(let e=0;e<i;++e){const e=n();r.transactions.push(e)}const o=r.getWitnessCommit();return o&&(r.witnessCommit=o),r}static fromHex(e){return p.fromBuffer(h.fromHex(e))}static calculateTarget(e){const t=((4278190080&e)>>24)-3,r=8388607&e,n=new Uint8Array(32);return n[29-t]=r>>16&255,n[30-t]=r>>8&255,n[31-t]=255&r,n}static calculateMerkleRoot(e,t){if(l.parse(l.array(l.object({getHash:l.function()})),e),0===e.length)throw f;if(t&&!g(e))throw d;const r=e.map(e=>e.getHash(t)),n=(0,u.fastMerkleRoot)(r,a.hash256);return t?a.hash256(h.concat([n,e[0].ins[0].witness[0]])):n}version=1;prevHash=void 0;merkleRoot=void 0;timestamp=0;witnessCommit=void 0;bits=0;nonce=0;transactions=void 0;getWitnessCommit(){if(!g(this.transactions))return null;const e=this.transactions[0].outs.filter(e=>0===h.compare(e.script.slice(0,6),Uint8Array.from([106,36,170,33,169,237]))).map(e=>e.script.slice(6,38));if(0===e.length)return null;const t=e[e.length-1];return t instanceof Uint8Array&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof Uint8Array&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return(e=this.transactions)instanceof Array&&e.some(e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some(e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0));var e}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+s.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((e,r)=>e+r.byteLength(t),0)}getHash(){return a.hash256(this.toBuffer(!0))}getId(){return h.toHex((0,s.reverseBuffer)(this.getHash()))}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){const t=new Uint8Array(this.byteLength(e)),r=new s.BufferWriter(t);if(r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),e||!this.transactions)return t;const{bytes:n}=s.varuint.encode(this.transactions.length,t,r.offset);return r.offset+=n,this.transactions.forEach(e=>{const n=e.byteLength();e.toBuffer(t,r.offset),r.offset+=n}),t}toHex(e){return h.toHex(this.toBuffer(e))}checkTxRoots(){const e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit())}checkProofOfWork(){const e=(0,s.reverseBuffer)(this.getHash()),t=p.calculateTarget(this.bits);return h.compare(e,t)<=0}__checkMerkleRoot(){if(!this.transactions)throw f;const e=p.calculateMerkleRoot(this.transactions);return 0===h.compare(this.merkleRoot,e)}__checkWitnessCommit(){if(!this.transactions)throw f;if(!this.hasWitnessCommit())throw d;const e=p.calculateMerkleRoot(this.transactions,!0);return 0===h.compare(this.witnessCommit,e)}}function g(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=p},56115:(e,t,r)=>{"use strict";var n=r(1048).Buffer;t.k5=function(e){{const t=n.from(e);t.reverse();const r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},t.Bq=function(e,t){{const r=e.toString(16),i=n.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return i.reverse(),i}}},56304:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.initEccLib=t.Transaction=t.opcodes=t.Psbt=t.Block=t.script=t.payments=t.networks=t.crypto=t.address=void 0;const s=o(r(28020));t.address=s;const a=o(r(43807));t.crypto=a;const u=o(r(81281));t.networks=u;const c=o(r(95160));t.payments=c;const l=o(r(52421));t.script=l;var h=r(55511);Object.defineProperty(t,"Block",{enumerable:!0,get:function(){return h.Block}});var f=r(28081);Object.defineProperty(t,"Psbt",{enumerable:!0,get:function(){return f.Psbt}});var d=r(26224);Object.defineProperty(t,"opcodes",{enumerable:!0,get:function(){return d.OPS}});var p=r(62060);Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return p.Transaction}});var g=r(87659);Object.defineProperty(t,"initEccLib",{enumerable:!0,get:function(){return g.initEccLib}})},56362:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(31860));t.default=(0,i.default)("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},57239:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),p.parse(p.partial(p.object({network:p.object({}),address:p.string(),hash:l.Hash160bitSchema,output:(0,l.NBufferSchemaFactory)(25),pubkey:p.custom(l.isPoint),signature:p.custom(c.isCanonicalScriptSignature),input:l.BufferSchema})),e);const r=h.value(()=>{const t=f.default.decode(e.address);return{version:d.readUInt8(t,0),hash:t.slice(1)}}),n=h.value(()=>c.decompile(e.input)),i=e.network||u.bitcoin,o={name:"p2pkh",network:i};if(h.prop(o,"address",()=>{if(!o.hash)return;const e=new Uint8Array(21);return d.writeUInt8(e,0,i.pubKeyHash),e.set(o.hash,1),f.default.encode(e)}),h.prop(o,"hash",()=>e.output?e.output.slice(3,23):e.address?r().hash:e.pubkey||o.pubkey?a.hash160(e.pubkey||o.pubkey):void 0),h.prop(o,"output",()=>{if(o.hash)return c.compile([g.OP_DUP,g.OP_HASH160,o.hash,g.OP_EQUALVERIFY,g.OP_CHECKSIG])}),h.prop(o,"pubkey",()=>{if(e.input)return n()[1]}),h.prop(o,"signature",()=>{if(e.input)return n()[0]}),h.prop(o,"input",()=>{if(e.pubkey&&e.signature)return c.compile([e.signature,e.pubkey])}),h.prop(o,"witness",()=>{if(o.input)return[]}),t.validate){let t=Uint8Array.from([]);if(e.address){if(r().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==r().hash.length)throw new TypeError("Invalid address");t=r().hash}if(e.hash){if(t.length>0&&0!==d.compare(t,e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==g.OP_DUP||e.output[1]!==g.OP_HASH160||20!==e.output[2]||e.output[23]!==g.OP_EQUALVERIFY||e.output[24]!==g.OP_CHECKSIG)throw new TypeError("Output is invalid");const r=e.output.slice(3,23);if(t.length>0&&0!==d.compare(t,r))throw new TypeError("Hash mismatch");t=r}if(e.pubkey){const r=a.hash160(e.pubkey);if(t.length>0&&0!==d.compare(t,r))throw new TypeError("Hash mismatch");t=r}if(e.input){const r=n();if(2!==r.length)throw new TypeError("Input is invalid");if(!c.isCanonicalScriptSignature(r[0]))throw new TypeError("Input has invalid signature");if(!(0,l.isPoint)(r[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&0!==d.compare(e.signature,r[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&0!==d.compare(e.pubkey,r[1]))throw new TypeError("Pubkey mismatch");const i=a.hash160(r[1]);if(t.length>0&&0!==d.compare(t,i))throw new TypeError("Hash mismatch")}}return Object.assign(o,e)};const a=o(r(43807)),u=r(81281),c=o(r(52421)),l=r(22343),h=o(r(33410)),f=s(r(44496)),d=o(r(27294)),p=o(r(86466)),g=c.OPS},57572:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});var n=r(86323),i=r(21505),o=r(95263),s=r(42637);function a(e,t,r){void 0===e&&(e=0);var a=-1;return(0,o.k)(t)?a=Number(t)<1?1:Number(t):(0,s.m)(t)&&(r=t),(0,s.m)(r)||(r=i.b),new n.c(function(t){var n=(0,o.k)(e)?e:+e-r.now();return r.schedule(u,n,{index:0,period:a,subscriber:t})})}function u(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}}},57772:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));function s(e){return e instanceof Uint8Array&&32===e.length}t.decode=function(e){if(e.key[0]!==i.InputTypes.TAP_MERKLE_ROOT||1!==e.key.length)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+o.toHex(e.key));if(!s(e.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value},t.encode=function(e){return{key:Uint8Array.from([i.InputTypes.TAP_MERKLE_ROOT]),value:e}},t.expected="Uint8Array",t.check=s,t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapMerkleRoot}},58701:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var n=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,n=e},get useDeprecatedSynchronousErrorHandling(){return n}}},60817:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=t.BufferWriter=t.varuint=void 0,t.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},t.cloneBuffer=function(e){const t=new Uint8Array(e.length);return t.set(e),t};const s=o(r(22343)),a=o(r(7170));t.varuint=a;const u=o(r(86466)),c=o(r(27294));class l{buffer;offset;static withCapacity(e){return new l(new Uint8Array(e))}constructor(e,t=0){this.buffer=e,this.offset=t,u.parse(u.tuple([s.BufferSchema,s.UInt32Schema]),[e,t])}writeUInt8(e){this.offset=c.writeUInt8(this.buffer,this.offset,e)}writeInt32(e){this.offset=c.writeInt32(this.buffer,this.offset,e,"LE")}writeInt64(e){this.offset=c.writeInt64(this.buffer,this.offset,BigInt(e),"LE")}writeUInt32(e){this.offset=c.writeUInt32(this.buffer,this.offset,e,"LE")}writeUInt64(e){this.offset=c.writeUInt64(this.buffer,this.offset,BigInt(e),"LE")}writeVarInt(e){const{bytes:t}=a.encode(e,this.buffer,this.offset);this.offset+=t}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.buffer.set(e,this.offset),this.offset+=e.length}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach(e=>this.writeVarSlice(e))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}t.BufferWriter=l,t.BufferReader=class{buffer;offset;constructor(e,t=0){this.buffer=e,this.offset=t,u.parse(u.tuple([s.BufferSchema,s.UInt32Schema]),[e,t])}readUInt8(){const e=c.readUInt8(this.buffer,this.offset);return this.offset++,e}readInt32(){const e=c.readInt32(this.buffer,this.offset,"LE");return this.offset+=4,e}readUInt32(){const e=c.readUInt32(this.buffer,this.offset,"LE");return this.offset+=4,e}readInt64(){const e=c.readInt64(this.buffer,this.offset,"LE");return this.offset+=8,e}readVarInt(){const{bigintValue:e,bytes:t}=a.decode(this.buffer,this.offset);return this.offset+=t,e}readSlice(e){!function(e,t){if("number"!=typeof e&&"bigint"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0&&e<BigInt(0))throw new Error("specified a negative value for writing an unsigned value");if(e>t&&e>BigInt(t))throw new Error("RangeError: value out of range");if(Math.floor(Number(e))!==Number(e))throw new Error("value has a fractional component")}(e,9007199254740991);const t=Number(e);if(this.buffer.length<this.offset+t)throw new Error("Cannot read slice out of bounds");const r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}}},60852:(e,t,r)=>{"use strict";function n(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}r.d(t,{lJ:()=>i});var i=n()},61063:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});var n=r(61220),i=r(46907),o=r(33862),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return n.C6(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),o.y.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),o.y.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(i.B7)},61220:(e,t,r)=>{"use strict";r.d(t,{C6:()=>i});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}},61222:(e,t,r)=>{"use strict";r.d(t,{I:()=>l,$:()=>c});var n=r(61220),i=1,o=function(){return Promise.resolve()}(),s={};function a(e){return e in s&&(delete s[e],!0)}var u=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return n.C6(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=(u=t.flush.bind(t,null),c=i++,s[c]=!0,o.then(function(){return a(c)&&u()}),c)));var u,c},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(a(r),t.scheduled=void 0)},t}(r(80658).R),c=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.C6(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(r(45672).q))(u),l=c},61994:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));function s(e){return e instanceof Uint8Array&&(64===e.length||65===e.length)}t.decode=function(e){if(e.key[0]!==i.InputTypes.TAP_KEY_SIG||1!==e.key.length)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+o.toHex(e.key));if(!s(e.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value},t.encode=function(e){return{key:Uint8Array.from([i.InputTypes.TAP_KEY_SIG]),value:e}},t.expected="Uint8Array",t.check=s,t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapKeySig}},62060:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;const s=r(60817),a=o(r(43807)),u=r(79688),c=o(r(52421)),l=r(52421),h=o(r(22343)),f=o(r(27294)),d=o(r(86466));function p(e){const t=e.length;return s.varuint.encodingLength(t)+t}const g=new Uint8Array(0),m=[],y=f.fromHex("0000000000000000000000000000000000000000000000000000000000000000"),b=f.fromHex("0000000000000000000000000000000000000000000000000000000000000001"),v=f.fromHex("ffffffffffffffff"),w={script:g,valueBuffer:v};class E{static DEFAULT_SEQUENCE=4294967295;static SIGHASH_DEFAULT=0;static SIGHASH_ALL=1;static SIGHASH_NONE=2;static SIGHASH_SINGLE=3;static SIGHASH_ANYONECANPAY=128;static SIGHASH_BITCOINCASHBIP143=64;static SIGHASH_OUTPUT_MASK=3;static SIGHASH_INPUT_MASK=128;static ADVANCED_TRANSACTION_MARKER=0;static ADVANCED_TRANSACTION_FLAG=1;static fromBuffer(e,t){const r=new s.BufferReader(e),n=new E;n.version=r.readInt32();const i=r.readUInt8(),o=r.readUInt8();let a=!1;i===E.ADVANCED_TRANSACTION_MARKER&&o===E.ADVANCED_TRANSACTION_FLAG?a=!0:r.offset-=2;const u=r.readVarInt();for(let e=0;e<u;++e)n.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:m});const c=r.readVarInt();for(let e=0;e<c;++e)n.outs.push({value:r.readInt64(),script:r.readVarSlice()});if(a){for(let e=0;e<u;++e)n.ins[e].witness=r.readVector();if(!n.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(n.locktime=r.readUInt32(),t)return n;if(r.offset!==e.length)throw new Error("Transaction has unexpected data");return n}static fromHex(e){return E.fromBuffer(f.fromHex(e),!1)}static isCoinbaseHash(e){d.parse(h.Hash256bitSchema,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}version=1;locktime=0;ins=[];outs=[];isCoinbase(){return 1===this.ins.length&&E.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return d.parse(d.tuple([h.Hash256bitSchema,h.UInt32Schema,d.nullable(d.optional(h.UInt32Schema)),d.nullable(d.optional(h.BufferSchema))]),[e,t,r,n]),null==r&&(r=E.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||g,sequence:r,witness:m})-1}addOutput(e,t){return d.parse(d.tuple([h.BufferSchema,h.SatoshiSchema]),[e,t]),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some(e=>0!==e.witness.length)}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){const t=e&&this.hasWitnesses();return(t?10:8)+s.varuint.encodingLength(this.ins.length)+s.varuint.encodingLength(this.outs.length)+this.ins.reduce((e,t)=>e+40+p(t.script),0)+this.outs.reduce((e,t)=>e+8+p(t.script),0)+(t?this.ins.reduce((e,t)=>e+function(e){const t=e.length;return s.varuint.encodingLength(t)+e.reduce((e,t)=>e+p(t),0)}(t.witness),0):0)}clone(){const e=new E;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness})),e.outs=this.outs.map(e=>({script:e.script,value:e.value})),e}hashForSignature(e,t,r){if(d.parse(d.tuple([h.UInt32Schema,h.BufferSchema,d.number()]),[e,t,r]),e>=this.ins.length)return b;const n=c.compile(c.decompile(t).filter(e=>e!==l.OPS.OP_CODESEPARATOR)),i=this.clone();if((31&r)===E.SIGHASH_NONE)i.outs=[],i.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)});else if((31&r)===E.SIGHASH_SINGLE){if(e>=this.outs.length)return b;i.outs.length=e+1;for(let t=0;t<e;t++)i.outs[t]=w;i.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)})}r&E.SIGHASH_ANYONECANPAY?(i.ins=[i.ins[e]],i.ins[0].script=n):(i.ins.forEach(e=>{e.script=g}),i.ins[e].script=n);const o=new Uint8Array(i.byteLength(!1)+4);return f.writeInt32(o,o.length-4,r,"LE"),i.__toBuffer(o,0,!1),a.hash256(o)}hashForWitnessV1(e,t,r,n,i,o){if(d.parse(d.tuple([h.UInt32Schema,d.array(h.BufferSchema),d.array(h.SatoshiSchema),h.UInt32Schema]),[e,t,r,n]),r.length!==this.ins.length||t.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const c=n===E.SIGHASH_DEFAULT?E.SIGHASH_ALL:n&E.SIGHASH_OUTPUT_MASK,l=(n&E.SIGHASH_INPUT_MASK)===E.SIGHASH_ANYONECANPAY,m=c===E.SIGHASH_NONE,y=c===E.SIGHASH_SINGLE;let b=g,v=g,w=g,A=g,S=g;if(!l){let e=s.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(t=>{e.writeSlice(t.hash),e.writeUInt32(t.index)}),b=(0,u.sha256)(e.end()),e=s.BufferWriter.withCapacity(8*this.ins.length),r.forEach(t=>e.writeInt64(t)),v=(0,u.sha256)(e.end()),e=s.BufferWriter.withCapacity(t.map(p).reduce((e,t)=>e+t)),t.forEach(t=>e.writeVarSlice(t)),w=(0,u.sha256)(e.end()),e=s.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(t=>e.writeUInt32(t.sequence)),A=(0,u.sha256)(e.end())}if(m||y){if(y&&e<this.outs.length){const t=this.outs[e],r=s.BufferWriter.withCapacity(8+p(t.script));r.writeInt64(t.value),r.writeVarSlice(t.script),S=(0,u.sha256)(r.end())}}else{if(!this.outs.length)throw new Error("Add outputs to the transaction before signing.");const e=this.outs.map(e=>8+p(e.script)).reduce((e,t)=>e+t),t=s.BufferWriter.withCapacity(e);this.outs.forEach(e=>{t.writeInt64(e.value),t.writeVarSlice(e.script)}),S=(0,u.sha256)(t.end())}const _=(i?2:0)+(o?1:0),I=174-(l?49:0)-(m?32:0)+(o?32:0)+(i?37:0),N=s.BufferWriter.withCapacity(I);if(N.writeUInt8(n),N.writeInt32(this.version),N.writeUInt32(this.locktime),N.writeSlice(b),N.writeSlice(v),N.writeSlice(w),N.writeSlice(A),m||y||N.writeSlice(S),N.writeUInt8(_),l){const n=this.ins[e];N.writeSlice(n.hash),N.writeUInt32(n.index),N.writeInt64(r[e]),N.writeVarSlice(t[e]),N.writeUInt32(n.sequence)}else N.writeUInt32(e);if(o){const e=s.BufferWriter.withCapacity(p(o));e.writeVarSlice(o),N.writeSlice((0,u.sha256)(e.end()))}return y&&N.writeSlice(S),i&&(N.writeSlice(i),N.writeUInt8(0),N.writeUInt32(4294967295)),a.taggedHash("TapSighash",f.concat([Uint8Array.from([0]),N.end()]))}hashForWitnessV0(e,t,r,n){d.parse(d.tuple([h.UInt32Schema,h.BufferSchema,h.SatoshiSchema,h.UInt32Schema]),[e,t,r,n]);let i,o=Uint8Array.from([]),u=y,c=y,l=y;if(n&E.SIGHASH_ANYONECANPAY||(o=new Uint8Array(36*this.ins.length),i=new s.BufferWriter(o,0),this.ins.forEach(e=>{i.writeSlice(e.hash),i.writeUInt32(e.index)}),c=a.hash256(o)),n&E.SIGHASH_ANYONECANPAY||(31&n)===E.SIGHASH_SINGLE||(31&n)===E.SIGHASH_NONE||(o=new Uint8Array(4*this.ins.length),i=new s.BufferWriter(o,0),this.ins.forEach(e=>{i.writeUInt32(e.sequence)}),l=a.hash256(o)),(31&n)!==E.SIGHASH_SINGLE&&(31&n)!==E.SIGHASH_NONE){const e=this.outs.reduce((e,t)=>e+8+p(t.script),0);o=new Uint8Array(e),i=new s.BufferWriter(o,0),this.outs.forEach(e=>{i.writeInt64(e.value),i.writeVarSlice(e.script)}),u=a.hash256(o)}else if((31&n)===E.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e];o=new Uint8Array(8+p(t.script)),i=new s.BufferWriter(o,0),i.writeInt64(t.value),i.writeVarSlice(t.script),u=a.hash256(o)}o=new Uint8Array(156+p(t)),i=new s.BufferWriter(o,0);const f=this.ins[e];return i.writeInt32(this.version),i.writeSlice(c),i.writeSlice(l),i.writeSlice(f.hash),i.writeUInt32(f.index),i.writeVarSlice(t),i.writeInt64(r),i.writeUInt32(f.sequence),i.writeSlice(u),i.writeUInt32(this.locktime),i.writeUInt32(n),a.hash256(o)}getHash(e){return e&&this.isCoinbase()?new Uint8Array(32):a.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return f.toHex((0,s.reverseBuffer)(this.getHash(!1)))}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return f.toHex(this.toBuffer(void 0,void 0))}setInputScript(e,t){d.parse(d.tuple([d.number(),h.BufferSchema]),[e,t]),this.ins[e].script=t}setWitness(e,t){d.parse(d.tuple([d.number(),d.array(h.BufferSchema)]),[e,t]),this.ins[e].witness=t}__toBuffer(e,t,r=!1){e||(e=new Uint8Array(this.byteLength(r)));const n=new s.BufferWriter(e,t||0);n.writeInt32(this.version);const i=r&&this.hasWitnesses();return i&&(n.writeUInt8(E.ADVANCED_TRANSACTION_MARKER),n.writeUInt8(E.ADVANCED_TRANSACTION_FLAG)),n.writeVarInt(this.ins.length),this.ins.forEach(e=>{n.writeSlice(e.hash),n.writeUInt32(e.index),n.writeVarSlice(e.script),n.writeUInt32(e.sequence)}),n.writeVarInt(this.outs.length),this.outs.forEach(e=>{void 0!==e.value?n.writeInt64(e.value):n.writeSlice(e.valueBuffer),n.writeVarSlice(e.script)}),i&&this.ins.forEach(e=>{n.writeVector(e.witness)}),n.writeUInt32(this.locktime),void 0!==t?e.slice(t,n.offset):e}}t.Transaction=E},62151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.binanceDescribePath=function(e){const t={verbose:(0,n.addressNListToBIP32)(e),coin:"Binance",isKnown:!1};if(5!=e.length)return t;if(2147483692!=e[0])return t;if(e[1]!=2147483648+(0,n.slip44ByCoin)("Binance"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(0!==e[3]||0!==e[4])return t;const r=2147483647&e[2];return{verbose:`Binance Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Binance",isKnown:!0,isPrefork:!1}};const n=r(33612)},62386:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(27294));t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+i.toHex(t.key));return t.value},encode:function(t){return{key:Uint8Array.from([e]),value:t}},check:function(e){return e instanceof Uint8Array},expected:"Uint8Array",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}},64433:(e,t,r)=>{"use strict";r.d(t,{B:()=>o});var n=r(61220),i=r(90189);function o(){return function(e){return e.lift(new s(e))}}var s=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new a(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),a=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return n.C6(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(i.v)},65469:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),h.parse(h.partial(h.object({network:h.object({}),output:u.BufferSchema,pubkey:h.custom(u.isPoint,"invalid pubkey"),signature:h.custom(a.isCanonicalScriptSignature,"Expected signature to be of type isCanonicalScriptSignature"),input:u.BufferSchema})),e);const r=c.value(()=>a.decompile(e.input)),n={name:"p2pk",network:e.network||s.bitcoin};if(c.prop(n,"output",()=>{if(e.pubkey)return a.compile([e.pubkey,f.OP_CHECKSIG])}),c.prop(n,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),c.prop(n,"signature",()=>{if(e.input)return r()[0]}),c.prop(n,"input",()=>{if(e.signature)return a.compile([e.signature])}),c.prop(n,"witness",()=>{if(n.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==f.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,u.isPoint)(n.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&0!==l.compare(e.pubkey,n.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&0!==l.compare(e.input,n.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!a.isCanonicalScriptSignature(n.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(n,e)};const s=r(81281),a=o(r(52421)),u=r(22343),c=o(r(33410)),l=o(r(27294)),h=o(r(86466)),f=a.OPS},70565:(e,t,r)=>{"use strict";function n(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}r.d(t,{y:()=>n})},71955:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BaseContract:()=>sn,BigNumber:()=>xn,Contract:()=>an,ContractFactory:()=>un,FixedNumber:()=>Jn,Signer:()=>di,VoidSigner:()=>pi,Wallet:()=>Lo,Wordlist:()=>vc,constants:()=>n,errors:()=>Hm,ethers:()=>u,getDefaultProvider:()=>$u,logger:()=>jS,providers:()=>i,utils:()=>a,version:()=>FS,wordlists:()=>Sc});var n={};r.r(n),r.d(n,{AddressZero:()=>Fo,EtherSymbol:()=>vs,HashZero:()=>bs,MaxInt256:()=>ys,MaxUint256:()=>gs,MinInt256:()=>ms,NegativeOne:()=>ls,One:()=>fs,Two:()=>ds,WeiPerEther:()=>ps,Zero:()=>hs});var i={};r.r(i),r.d(i,{AlchemyProvider:()=>au,AlchemyWebSocketProvider:()=>su,AnkrProvider:()=>hu,BaseProvider:()=>La,CloudflareProvider:()=>du,EtherscanProvider:()=>Eu,FallbackProvider:()=>Mu,Formatter:()=>ua,InfuraProvider:()=>ju,InfuraWebSocketProvider:()=>Fu,IpcProvider:()=>Lu,JsonRpcBatchProvider:()=>Gu,JsonRpcProvider:()=>Xa,JsonRpcSigner:()=>Va,NodesmithProvider:()=>Hu,PocketProvider:()=>Vu,Provider:()=>xt,Resolver:()=>xa,StaticJsonRpcProvider:()=>ru,UrlJsonRpcProvider:()=>nu,Web3Provider:()=>Yu,WebSocketProvider:()=>eu,getDefaultProvider:()=>$u,getNetwork:()=>ks,isCommunityResourcable:()=>ca,isCommunityResource:()=>la,showThrottleMessage:()=>fa});var o={};r.r(o),r.d(o,{decode:()=>Rh,encode:()=>Oh});var s={};r.r(s),r.d(s,{decode:()=>xb,encode:()=>Rb});var a={};r.r(a),r.d(a,{AbiCoder:()=>ml,ConstructorFragment:()=>ol,ErrorFragment:()=>ul,EventFragment:()=>tl,FormatTypes:()=>Yc,Fragment:()=>el,FunctionFragment:()=>sl,HDNode:()=>pm,Indexed:()=>Al,Interface:()=>Il,LogDescription:()=>vl,Logger:()=>zm,ParamType:()=>$c,RLP:()=>s,SigningKey:()=>Gv,SupportedAlgorithm:()=>sy,TransactionDescription:()=>wl,TransactionTypes:()=>wA,UnicodeNormalizationForm:()=>cw,Utf8ErrorFuncs:()=>fw,Utf8ErrorReason:()=>lw,_TypedDataEncoder:()=>dp,_fetchData:()=>LS,_toEscapedUtf8String:()=>mw,accessListify:()=>TA,arrayify:()=>ff,base58:()=>Jh,base64:()=>o,checkProperties:()=>tb,checkResultErrors:()=>Nc,commify:()=>QA,computeAddress:()=>IA,computeHmac:()=>hy,computePublicKey:()=>Hv,concat:()=>df,deepCopy:()=>sb,defaultAbiCoder:()=>yl,defaultPath:()=>dm,defineReadOnly:()=>$y,dnsEncode:()=>Pd,entropyToMnemonic:()=>ym,fetchJson:()=>BS,formatBytes32String:()=>Cw,formatEther:()=>eS,formatUnits:()=>$A,getAccountPath:()=>vm,getAddress:()=>hh,getContractAddress:()=>ph,getCreate2Address:()=>gh,getIcapAddress:()=>dh,getJsonWalletAddress:()=>wm,getStatic:()=>Zy,hashMessage:()=>Rd,hexConcat:()=>Ef,hexDataLength:()=>vf,hexDataSlice:()=>wf,hexStripZeros:()=>Sf,hexValue:()=>Af,hexZeroPad:()=>_f,hexlify:()=>bf,id:()=>Od,isAddress:()=>fh,isBytes:()=>hf,isBytesLike:()=>cf,isHexString:()=>mf,isValidMnemonic:()=>bm,isValidName:()=>Nd,joinSignature:()=>Nf,keccak256:()=>Mm,mnemonicToEntropy:()=>mm,mnemonicToSeed:()=>gm,namehash:()=>kd,nameprep:()=>Rw,parseBytes32String:()=>xw,parseEther:()=>tS,parseTransaction:()=>MA,parseUnits:()=>ZA,poll:()=>DS,randomBytes:()=>Dy,recoverAddress:()=>NA,recoverPublicKey:()=>Wv,resolveProperties:()=>eb,ripemd160:()=>uy,serializeTransaction:()=>xA,sha256:()=>cy,sha512:()=>ly,shallowCopy:()=>rb,shuffled:()=>Fy,solidityKeccak256:()=>vy,solidityPack:()=>by,soliditySha256:()=>wy,splitSignature:()=>If,stripZeros:()=>pf,toUtf8Bytes:()=>pw,toUtf8CodePoints:()=>vw,toUtf8String:()=>bw,verifyMessage:()=>Bo,verifyTypedData:()=>Do,zeroPad:()=>gf});var u={};r.r(u),r.d(u,{BaseContract:()=>sn,BigNumber:()=>xn,Contract:()=>an,ContractFactory:()=>un,FixedNumber:()=>Jn,Signer:()=>di,VoidSigner:()=>pi,Wallet:()=>Lo,Wordlist:()=>vc,constants:()=>n,errors:()=>Hm,getDefaultProvider:()=>$u,logger:()=>jS,providers:()=>i,utils:()=>a,version:()=>FS,wordlists:()=>Sc});var c=r(27587);const l=new c.Logger("bytes/5.8.0");function h(e){return!!e.toHexString}function f(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return f(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function d(e){return w(e)&&!(e.length%2)||g(e)}function p(e){return"number"==typeof e&&e==e&&e%1==0}function g(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!p(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!p(r)||r<0||r>=256)return!1}return!0}function m(e,t){if(t||(t={}),"number"==typeof e){l.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),f(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),h(e)&&(e=e.toHexString()),w(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":l.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return f(new Uint8Array(n))}return g(e)?f(new Uint8Array(e)):l.throwArgumentError("invalid arrayify value","value",e)}function y(e){const t=e.map(e=>m(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),f(n)}function b(e){let t=m(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function v(e,t){(e=m(e)).length>t&&l.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),f(r)}function w(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const E="0123456789abcdef";function A(e,t){if(t||(t={}),"number"==typeof e){l.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=E[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),h(e))return e.toHexString();if(w(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":l.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(g(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=E[(240&n)>>4]+E[15&n]}return t}return l.throwArgumentError("invalid hexlify value","value",e)}function S(e){if("string"!=typeof e)e=A(e);else if(!w(e)||e.length%2)return null;return(e.length-2)/2}function _(e,t,r){return"string"!=typeof e?e=A(e):(!w(e)||e.length%2)&&l.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function I(e){let t="0x";return e.forEach(e=>{t+=A(e).substring(2)}),t}function N(e){const t=function(e){"string"!=typeof e&&(e=A(e)),w(e)||l.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}(A(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function k(e,t){for("string"!=typeof e?e=A(e):w(e)||l.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&l.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function P(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(d(e)){let r=m(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=A(r.slice(0,32)),t.s=A(r.slice(32,64))):65===r.length?(t.r=A(r.slice(0,32)),t.s=A(r.slice(32,64)),t.v=r[64]):l.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:l.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=A(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=v(m(t._vs),32);t._vs=A(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&l.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=A(r);null==t.s?t.s=i:t.s!==i&&l.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?l.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&l.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&w(t.r)?t.r=k(t.r,32):l.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&w(t.s)?t.s=k(t.s,32):l.throwArgumentError("signature missing or invalid s","signature",e);const r=m(t.s);r[0]>=128&&l.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=A(r);t._vs&&(w(t._vs)||l.throwArgumentError("signature invalid _vs","signature",e),t._vs=k(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&l.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function T(e){return A(y([(e=P(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}var R=r(6065),O=r.n(R);const C="bignumber/5.8.0";var x=O().BN;const U=new c.Logger(C),M={},L=9007199254740991;let B=!1;class D{constructor(e,t){e!==M&&U.throwError("cannot call constructor directly; use BigNumber.from",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return j(G(this).fromTwos(e))}toTwos(e){return j(G(this).toTwos(e))}abs(){return"-"===this._hex[0]?D.from(this._hex.substring(1)):this}add(e){return j(G(this).add(G(e)))}sub(e){return j(G(this).sub(G(e)))}div(e){return D.from(e).isZero()&&W("division-by-zero","div"),j(G(this).div(G(e)))}mul(e){return j(G(this).mul(G(e)))}mod(e){const t=G(e);return t.isNeg()&&W("division-by-zero","mod"),j(G(this).umod(t))}pow(e){const t=G(e);return t.isNeg()&&W("negative-power","pow"),j(G(this).pow(t))}and(e){const t=G(e);return(this.isNegative()||t.isNeg())&&W("unbound-bitwise-result","and"),j(G(this).and(t))}or(e){const t=G(e);return(this.isNegative()||t.isNeg())&&W("unbound-bitwise-result","or"),j(G(this).or(t))}xor(e){const t=G(e);return(this.isNegative()||t.isNeg())&&W("unbound-bitwise-result","xor"),j(G(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&W("negative-width","mask"),j(G(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&W("negative-width","shl"),j(G(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&W("negative-width","shr"),j(G(this).shrn(e))}eq(e){return G(this).eq(G(e))}lt(e){return G(this).lt(G(e))}lte(e){return G(this).lte(G(e))}gt(e){return G(this).gt(G(e))}gte(e){return G(this).gte(G(e))}isNegative(){return"-"===this._hex[0]}isZero(){return G(this).isZero()}toNumber(){try{return G(this).toNumber()}catch(e){W("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return U.throwError("this platform does not support BigInt",c.Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?B||(B=!0,U.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?U.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",c.Logger.errors.UNEXPECTED_ARGUMENT,{}):U.throwError("BigNumber.toString does not accept parameters",c.Logger.errors.UNEXPECTED_ARGUMENT,{})),G(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof D)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new D(M,F(e)):e.match(/^-?[0-9]+$/)?new D(M,F(new x(e))):U.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&W("underflow","BigNumber.from",e),(e>=L||e<=-L)&&W("overflow","BigNumber.from",e),D.from(String(e));const t=e;if("bigint"==typeof t)return D.from(t.toString());if(g(t))return D.from(A(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return D.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(w(e)||"-"===e[0]&&w(e.substring(1))))return D.from(e)}return U.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function F(e){if("string"!=typeof e)return F(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&U.throwArgumentError("invalid hex","value",e),"0x00"===(e=F(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function j(e){return D.from(F(e))}function G(e){const t=D.from(e).toHexString();return"-"===t[0]?new x("-"+t.substring(3),16):new x(t.substring(2),16)}function W(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),U.throwError(e,c.Logger.errors.NUMERIC_FAULT,n)}const H=new c.Logger("properties/5.8.0");function K(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function z(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function V(e){return t=this,r=void 0,i=function*(){const t=Object.keys(e).map(t=>{const r=e[t];return Promise.resolve(r).then(e=>({key:t,value:e}))});return(yield Promise.all(t)).reduce((e,t)=>(e[t.key]=t.value,e),{})},new((n=void 0)||(n=Promise))(function(e,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(s,a)}u((i=i.apply(t,r||[])).next())});var t,r,n,i}function q(e,t){e&&"object"==typeof e||H.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(r=>{t[r]||H.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}function J(e){const t={};for(const r in e)t[r]=e[r];return t}const X={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Y(e){if(null==e||X[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!Y(n))return!1}return!0}return H.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Q(e){if(Y(e))return e;if(Array.isArray(e))return Object.freeze(e.map(e=>$(e)));if("object"==typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&K(t,r,$(n))}return t}return H.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function $(e){return Q(e)}class Z{constructor(e){for(const t in e)this[t]=$(e[t])}}const ee="abi/5.8.0",te=new c.Logger(ee);class re{constructor(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}_throwError(e,t){te.throwArgumentError(e,this.localName,t)}}class ne{constructor(e){K(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return I(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(y(e._data))}writeBytes(e){let t=m(e);const r=t.length%this.wordSize;return r&&(t=y([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=m(D.from(e));return t.length>this.wordSize&&te.throwError("value out-of-bounds",c.Logger.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=y([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class ie{constructor(e,t,r,n){K(this,"_data",m(e)),K(this,"wordSize",t||32),K(this,"_coerceFunc",r),K(this,"allowLoose",n),this._offset=0}get data(){return A(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):ie.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:te.throwError("data out-of-bounds",c.Logger.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new ie(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return D.from(this.readBytes(this.wordSize))}}var oe=r(30671),se=r.n(oe);function ae(e){return"0x"+se().keccak_256(m(e))}const ue=new c.Logger("rlp/5.8.0");function ce(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function le(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function he(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(he(e))}),t.length<=55)return t.unshift(192+t.length),t;const r=ce(t.length);return r.unshift(247+r.length),r.concat(t)}d(e)||ue.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(m(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=ce(t.length);return r.unshift(183+r.length),r.concat(t)}function fe(e){return A(he(e))}function de(e,t,r,n){const i=[];for(;r<t+1+n;){const o=pe(e,r);i.push(o.result),(r+=o.consumed)>t+1+n&&ue.throwError("child data too short",c.Logger.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function pe(e,t){if(0===e.length&&ue.throwError("data too short",c.Logger.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&ue.throwError("data short segment too short",c.Logger.errors.BUFFER_OVERRUN,{});const n=le(e,t+1,r);return t+1+r+n>e.length&&ue.throwError("data long segment too short",c.Logger.errors.BUFFER_OVERRUN,{}),de(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&ue.throwError("data array too short",c.Logger.errors.BUFFER_OVERRUN,{}),de(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&ue.throwError("data array too short",c.Logger.errors.BUFFER_OVERRUN,{});const n=le(e,t+1,r);return t+1+r+n>e.length&&ue.throwError("data array too short",c.Logger.errors.BUFFER_OVERRUN,{}),{consumed:1+r+n,result:A(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;return t+1+r>e.length&&ue.throwError("data too short",c.Logger.errors.BUFFER_OVERRUN,{}),{consumed:1+r,result:A(e.slice(t+1,t+1+r))}}return{consumed:1,result:A(e[t])}}function ge(e){const t=m(e),r=pe(t,0);return r.consumed!==t.length&&ue.throwArgumentError("invalid rlp data","data",e),r.result}const me=new c.Logger("address/5.8.0");function ye(e){w(e,20)||me.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=m(ae(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const be={};for(let e=0;e<10;e++)be[String(e)]=String(e);for(let e=0;e<26;e++)be[String.fromCharCode(65+e)]=String(10+e);const ve=Math.floor((we=9007199254740991,Math.log10?Math.log10(we):Math.log(we)/Math.LN10));var we;function Ee(e){let t=null;if("string"!=typeof e&&me.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=ye(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&me.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>be[e]).join("");for(;t.length>=ve;){let e=t.substring(0,ve);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e)&&me.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new x(r,36).toString(16);t.length<40;)t="0"+t;t=ye("0x"+t)}else me.throwArgumentError("invalid address","address",e);var r;return t}function Ae(e){let t=null;try{t=Ee(e.from)}catch(t){me.throwArgumentError("missing from address","transaction",e)}return Ee(_(ae(fe([t,b(m(D.from(e.nonce).toHexString()))])),12))}const Se=new c.Logger("strings/5.8.0");var _e,Ie;function Ne(e,t,r,n,i){if(e===Ie.BAD_PREFIX||e===Ie.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===Ie.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(_e||(_e={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Ie||(Ie={}));const ke=Object.freeze({error:function(e,t,r,n,i){return Se.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:Ne,replace:function(e,t,r,n,i){return e===Ie.OVERLONG?(n.push(i),0):(n.push(65533),Ne(e,t,r))}});function Pe(e,t){null==t&&(t=ke.error),e=m(e);const r=[];let n=0;for(;n<e.length;){const i=e[n++];if(!(i>>7)){r.push(i);continue}let o=null,s=null;if(192==(224&i))o=1,s=127;else if(224==(240&i))o=2,s=2047;else{if(240!=(248&i)){n+=t(128==(192&i)?Ie.UNEXPECTED_CONTINUE:Ie.BAD_PREFIX,n-1,e,r);continue}o=3,s=65535}if(n-1+o>=e.length){n+=t(Ie.OVERRUN,n-1,e,r);continue}let a=i&(1<<8-o-1)-1;for(let i=0;i<o;i++){let i=e[n];if(128!=(192&i)){n+=t(Ie.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=t(Ie.OUT_OF_RANGE,n-1-o,e,r,a):a>=55296&&a<=57343?n+=t(Ie.UTF16_SURROGATE,n-1-o,e,r,a):a<=s?n+=t(Ie.OVERLONG,n-1-o,e,r,a):r.push(a))}return r}function Te(e,t=_e.current){t!=_e.current&&(Se.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&n)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return m(r)}function Re(e,t){return Pe(e,t).map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}function Oe(e){return ae(Te(e))}class Ce extends re{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Ee(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return Ee(k(e.readValue().toHexString(),20))}}class xe extends re{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Ue=new c.Logger(ee);function Me(e,t,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map(t=>{const n=t.localName;return n||Ue.throwError("cannot encode object for signature with missing names",c.Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]&&Ue.throwError("cannot encode object for signature with duplicate names",c.Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]=!0,r[n]})}else Ue.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&Ue.throwArgumentError("types/value length mismatch","tuple",r);let i=new ne(e.wordSize),o=new ne(e.wordSize),s=[];t.forEach((e,t)=>{let r=n[t];if(e.dynamic){let t=o.length;e.encode(o,r);let n=i.writeUpdatableValue();s.push(e=>{n(e+t)})}else e.encode(i,r)}),s.forEach(e=>{e(i.length)});let a=e.appendWriter(i);return a+=e.appendWriter(o),a}function Le(e,t){let r=[],n=e.subReader(0);t.forEach(t=>{let i=null;if(t.dynamic){let r=e.readValue(),o=n.subReader(r.toNumber());try{i=t.decode(o)}catch(e){if(e.code===c.Logger.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(e.code===c.Logger.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}null!=i&&r.push(i)});const i=t.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});t.forEach((e,t)=>{let n=e.localName;if(!n||1!==i[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const o=r[t];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw o}}):r[n]=o});for(let e=0;e<r.length;e++){const t=r[e];t instanceof Error&&Object.defineProperty(r,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class Be extends re{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),Ue.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++)n.push(this.coder);return Me(e,n,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&Ue.throwError("insufficient data length",c.Logger.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let e=0;e<t;e++)r.push(new xe(this.coder));return e.coerce(this.name,Le(e,r))}}class De extends re{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Fe extends re{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=m(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class je extends Fe{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,A(super.decode(e)))}}class Ge extends re{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=m(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,A(e.readBytes(this.size)))}}class We extends re{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const He=D.from(-1),Ke=D.from(0),ze=D.from(1),Ve=D.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class qe extends re{constructor(e,t,r){const n=(t?"int":"uint")+8*e;super(n,n,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=D.from(t),n=Ve.mask(8*e.wordSize);if(this.signed){let e=n.mask(8*this.size-1);(r.gt(e)||r.lt(e.add(ze).mul(He)))&&this._throwError("value out-of-bounds",t)}else(r.lt(Ke)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class Je extends Fe{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Te(t))}decode(e){return Re(super.decode(e))}}class Xe extends re{constructor(e,t){let r=!1;const n=[];e.forEach(e=>{e.dynamic&&(r=!0),n.push(e.type)}),super("tuple","tuple("+n.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});const t=this.coders.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let i=r.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n]))}),Object.freeze(e)}encode(e,t){return Me(e,this.coders,t)}decode(e){return e.coerce(this.name,Le(e,this.coders))}}const Ye=new c.Logger(ee),Qe={};let $e={calldata:!0,memory:!0,storage:!0},Ze={calldata:!0,memory:!0};function et(e,t){if("bytes"===e||"string"===e){if($e[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&Ze[t])return!0;return($e[t]||"payable"===t)&&Ye.throwArgumentError("invalid modifier","name",t),!1}function tt(e,t){for(let r in t)K(e,r,t[r])}const rt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),nt=new RegExp(/^(.*)\[([0-9]*)\]$/);class it{constructor(e,t){e!==Qe&&Ye.throwError("use fromString",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),tt(this,t);let r=this.type.match(nt);tt(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:it.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=rt.sighash),rt[e]||Ye.throwArgumentError("invalid format type","format",e),e===rt.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==rt.sighash&&(t+=this.type),t+="("+this.components.map(t=>t.format(e)).join(e===rt.full?", ":",")+")"):t+=this.type,e!==rt.sighash&&(!0===this.indexed&&(t+=" indexed"),e===rt.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?it.fromString(e,t):it.fromObject(e)}static fromObject(e){return it.isParamType(e)?e:new it(Qe,{name:e.name||null,type:gt(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(it.fromObject):null})}static fromString(e,t){return r=function(e,t){let r=e;function n(t){Ye.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function i(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let o={type:"",name:"",state:{allowType:!0}},s=o;for(let r=0;r<e.length;r++){let o=e[r];switch(o){case"(":s.state.allowType&&""===s.type?s.type="tuple":s.state.allowParams||n(r),s.state.allowType=!1,s.type=gt(s.type),s.components=[i(s)],s=s.components[0];break;case")":delete s.state,"indexed"===s.name&&(t||n(r),s.indexed=!0,s.name=""),et(s.type,s.name)&&(s.name=""),s.type=gt(s.type);let e=s;s=s.parent,s||n(r),delete e.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,"indexed"===s.name&&(t||n(r),s.indexed=!0,s.name=""),et(s.type,s.name)&&(s.name=""),s.type=gt(s.type);let a=i(s.parent);s.parent.components.push(a),delete s.parent,s=a;break;case" ":s.state.allowType&&""!==s.type&&(s.type=gt(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&("indexed"===s.name?(t||n(r),s.indexed&&n(r),s.indexed=!0,s.name=""):et(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||n(r),s.type+=o,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||n(r),s.type+=o,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=o,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=o,delete s.state.allowArray):s.state.readArray?s.type+=o:n(r)}}return s.parent&&Ye.throwArgumentError("unexpected eof","param",e),delete o.state,"indexed"===s.name?(t||n(r.length-7),s.indexed&&n(r.length-7),s.indexed=!0,s.name=""):et(s.type,s.name)&&(s.name=""),o.type=gt(o.type),o}(e,!!t),it.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(null==e||!e._isParamType)}}function ot(e,t){return function(e){e=e.trim();let t=[],r="",n=0;for(let i=0;i<e.length;i++){let o=e[i];","===o&&0===n?(t.push(r),r=""):(r+=o,"("===o?n++:")"===o&&(n--,-1===n&&Ye.throwArgumentError("unbalanced parenthesis","value",e)))}return r&&t.push(r),t}(e).map(e=>it.fromString(e,t))}class st{constructor(e,t){e!==Qe&&Ye.throwError("use a static from method",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),tt(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return st.isFragment(e)?e:"string"==typeof e?st.fromString(e):st.fromObject(e)}static fromObject(e){if(st.isFragment(e))return e;switch(e.type){case"function":return ft.fromObject(e);case"event":return at.fromObject(e);case"constructor":return ht.fromObject(e);case"error":return pt.fromObject(e);case"fallback":case"receive":return null}return Ye.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?at.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?ft.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?ht.fromString(e.trim()):"error"===e.split(" ")[0]?pt.fromString(e.substring(5).trim()):Ye.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class at extends st{format(e){if(e||(e=rt.sighash),rt[e]||Ye.throwArgumentError("invalid format type","format",e),e===rt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t="";return e!==rt.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(t=>t.format(e)).join(e===rt.full?", ":",")+") ",e!==rt.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"==typeof e?at.fromString(e):at.fromObject(e)}static fromObject(e){if(at.isEventFragment(e))return e;"event"!==e.type&&Ye.throwArgumentError("invalid event object","value",e);const t={name:yt(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(it.fromObject):[],type:"event"};return new at(Qe,t)}static fromString(e){let t=e.match(bt);t||Ye.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(e=>{switch(e.trim()){case"anonymous":r=!0;break;case"":break;default:Ye.warn("unknown modifier: "+e)}}),at.fromObject({name:t[1].trim(),anonymous:r,inputs:ot(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function ut(e,t){t.gas=null;let r=e.split("@");return 1!==r.length?(r.length>2&&Ye.throwArgumentError("invalid human-readable ABI signature","value",e),r[1].match(/^[0-9]+$/)||Ye.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=D.from(r[1]),r[0]):e}function ct(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach(e=>{switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}})}function lt(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&Ye.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&Ye.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||Ye.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&Ye.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&Ye.throwArgumentError("unable to determine stateMutability","value",e),t}class ht extends st{format(e){if(e||(e=rt.sighash),rt[e]||Ye.throwArgumentError("invalid format type","format",e),e===rt.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});e===rt.sighash&&Ye.throwError("cannot format a constructor for sighash",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(t=>t.format(e)).join(e===rt.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"==typeof e?ht.fromString(e):ht.fromObject(e)}static fromObject(e){if(ht.isConstructorFragment(e))return e;"constructor"!==e.type&&Ye.throwArgumentError("invalid constructor object","value",e);let t=lt(e);t.constant&&Ye.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(it.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?D.from(e.gas):null};return new ht(Qe,r)}static fromString(e){let t={type:"constructor"},r=(e=ut(e,t)).match(bt);return r&&"constructor"===r[1].trim()||Ye.throwArgumentError("invalid constructor string","value",e),t.inputs=ot(r[2].trim(),!1),ct(r[3].trim(),t),ht.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class ft extends ht{format(e){if(e||(e=rt.sighash),rt[e]||Ye.throwArgumentError("invalid format type","format",e),e===rt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});let t="";return e!==rt.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(t=>t.format(e)).join(e===rt.full?", ":",")+") ",e!==rt.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(t=>t.format(e)).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"==typeof e?ft.fromString(e):ft.fromObject(e)}static fromObject(e){if(ft.isFunctionFragment(e))return e;"function"!==e.type&&Ye.throwArgumentError("invalid function object","value",e);let t=lt(e);const r={type:e.type,name:yt(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(it.fromObject):[],outputs:e.outputs?e.outputs.map(it.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?D.from(e.gas):null};return new ft(Qe,r)}static fromString(e){let t={type:"function"},r=(e=ut(e,t)).split(" returns ");r.length>2&&Ye.throwArgumentError("invalid function string","value",e);let n=r[0].match(bt);if(n||Ye.throwArgumentError("invalid function signature","value",e),t.name=n[1].trim(),t.name&&yt(t.name),t.inputs=ot(n[2],!1),ct(n[3].trim(),t),r.length>1){let n=r[1].match(bt);""==n[1].trim()&&""==n[3].trim()||Ye.throwArgumentError("unexpected tokens","value",e),t.outputs=ot(n[2],!1)}else t.outputs=[];return ft.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function dt(e){const t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||Ye.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class pt extends st{format(e){if(e||(e=rt.sighash),rt[e]||Ye.throwArgumentError("invalid format type","format",e),e===rt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t="";return e!==rt.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(t=>t.format(e)).join(e===rt.full?", ":",")+") ",t.trim()}static from(e){return"string"==typeof e?pt.fromString(e):pt.fromObject(e)}static fromObject(e){if(pt.isErrorFragment(e))return e;"error"!==e.type&&Ye.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:yt(e.name),inputs:e.inputs?e.inputs.map(it.fromObject):[]};return dt(new pt(Qe,t))}static fromString(e){let t={type:"error"},r=e.match(bt);return r||Ye.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&yt(t.name),t.inputs=ot(r[2],!1),dt(pt.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function gt(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const mt=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function yt(e){return e&&e.match(mt)||Ye.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}const bt=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),vt=new c.Logger(ee),wt=new RegExp(/^bytes([0-9]*)$/),Et=new RegExp(/^(u?int)([0-9]*)$/),At=new class{constructor(e){K(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Ce(e.name);case"bool":return new De(e.name);case"string":return new Je(e.name);case"bytes":return new je(e.name);case"array":return new Be(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Xe((e.components||[]).map(e=>this._getCoder(e)),e.name);case"":return new We(e.name)}let t=e.type.match(Et);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&vt.throwArgumentError("invalid "+t[1]+" bit length","param",e),new qe(r/8,"int"===t[1],e.name)}if(t=e.type.match(wt),t){let r=parseInt(t[1]);return(0===r||r>32)&&vt.throwArgumentError("invalid bytes length","param",e),new Ge(r,e.name)}return vt.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new ie(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new ne(this._getWordSize())}getDefaultValue(e){const t=e.map(e=>this._getCoder(it.from(e)));return new Xe(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&vt.throwError("types/values length mismatch",c.Logger.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(e=>this._getCoder(it.from(e))),n=new Xe(r,"_"),i=this._getWriter();return n.encode(i,t),i.data}decode(e,t,r){const n=e.map(e=>this._getCoder(it.from(e)));return new Xe(n,"_").decode(this._getReader(m(t),r))}},St=new c.Logger(ee);class _t extends Z{}class It extends Z{}class Nt extends Z{}class kt extends Z{static isIndexed(e){return!(!e||!e._isIndexed)}}const Pt={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Tt(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);return r.error=t,r}class Rt{constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,K(this,"fragments",t.map(e=>st.from(e)).filter(e=>null!=e)),K(this,"_abiCoder",z(new.target,"getAbiCoder")()),K(this,"functions",{}),K(this,"errors",{}),K(this,"events",{}),K(this,"structs",{}),this.fragments.forEach(e=>{let t=null;switch(e.type){case"constructor":return this.deploy?void St.warn("duplicate definition - constructor"):void K(this,"deploy",e);case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let r=e.format();t[r]?St.warn("duplicate definition - "+r):t[r]=e}),this.deploy||K(this,"deploy",ht.from({payable:!1,type:"constructor"})),K(this,"_isInterface",!0)}format(e){e||(e=rt.full),e===rt.sighash&&St.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(t=>t.format(e));return e===rt.json?JSON.stringify(t.map(e=>JSON.parse(e))):t}static getAbiCoder(){return At}static getAddress(e){return Ee(e)}static getSighash(e){return _(Oe(e.format()),0,4)}static getEventTopic(e){return Oe(e.format())}getFunction(e){if(w(e)){for(const t in this.functions)if(e===this.getSighash(t))return this.functions[t];St.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.functions).filter(e=>e.split("(")[0]===t);return 0===r.length?St.throwArgumentError("no matching function","name",t):r.length>1&&St.throwArgumentError("multiple matching functions","name",t),this.functions[r[0]]}const t=this.functions[ft.fromString(e).format()];return t||St.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(w(e)){const t=e.toLowerCase();for(const e in this.events)if(t===this.getEventTopic(e))return this.events[e];St.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.events).filter(e=>e.split("(")[0]===t);return 0===r.length?St.throwArgumentError("no matching event","name",t):r.length>1&&St.throwArgumentError("multiple matching events","name",t),this.events[r[0]]}const t=this.events[at.fromString(e).format()];return t||St.throwArgumentError("no matching event","signature",e),t}getError(e){if(w(e)){const t=z(this.constructor,"getSighash");for(const r in this.errors)if(e===t(this.errors[r]))return this.errors[r];St.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.errors).filter(e=>e.split("(")[0]===t);return 0===r.length?St.throwArgumentError("no matching error","name",t):r.length>1&&St.throwArgumentError("multiple matching errors","name",t),this.errors[r[0]]}const t=this.errors[ft.fromString(e).format()];return t||St.throwArgumentError("no matching error","signature",e),t}getSighash(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(e){throw t}}return z(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"==typeof e&&(e=this.getEvent(e)),z(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"==typeof e&&(e=this.getError(e));const r=m(t);return A(r.slice(0,4))!==this.getSighash(e)&&St.throwArgumentError(`data signature does not match error ${e.name}.`,"data",A(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return"string"==typeof e&&(e=this.getError(e)),A(y([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"==typeof e&&(e=this.getFunction(e));const r=m(t);return A(r.slice(0,4))!==this.getSighash(e)&&St.throwArgumentError(`data signature does not match function ${e.name}.`,"data",A(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return"string"==typeof e&&(e=this.getFunction(e)),A(y([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"==typeof e&&(e=this.getFunction(e));let r=m(t),n=null,i="",o=null,s=null,a=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(e){}break;case 4:{const e=A(r.slice(0,4)),t=Pt[e];if(t)o=this._abiCoder.decode(t.inputs,r.slice(4)),s=t.name,a=t.signature,t.reason&&(n=o[0]),"Error"===s?i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:"Panic"===s&&(i=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const t=this.getError(e);o=this._abiCoder.decode(t.inputs,r.slice(4)),s=t.name,a=t.format()}catch(e){}break}}return St.throwError("call revert exception"+i,c.Logger.errors.CALL_EXCEPTION,{method:e.format(),data:A(t),errorArgs:o,errorName:s,errorSignature:a,reason:n})}encodeFunctionResult(e,t){return"string"==typeof e&&(e=this.getFunction(e)),A(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&St.throwError("too many arguments for "+e.format(),c.Logger.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const n=(e,t)=>"string"===e.type?Oe(t):"bytes"===e.type?ae(A(t)):("bool"===e.type&&"boolean"==typeof t&&(t=t?"0x01":"0x00"),e.type.match(/^u?int/)&&(t=D.from(t).toHexString()),"address"===e.type&&this._abiCoder.encode(["address"],[t]),k(A(t),32));for(t.forEach((t,i)=>{let o=e.inputs[i];o.indexed?null==t?r.push(null):"array"===o.baseType||"tuple"===o.baseType?St.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,t):Array.isArray(t)?r.push(t.map(e=>n(o,e))):r.push(n(o,t)):null!=t&&St.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,t)});r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){"string"==typeof e&&(e=this.getEvent(e));const r=[],n=[],i=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&St.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((e,o)=>{const s=t[o];if(e.indexed)if("string"===e.type)r.push(Oe(s));else if("bytes"===e.type)r.push(ae(s));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([e.type],[s]))}else n.push(e),i.push(s)}),{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e&&(e=this.getEvent(e)),null!=r&&!e.anonymous){let t=this.getEventTopic(e);w(r[0],32)&&r[0].toLowerCase()===t||St.throwError("fragment/topic mismatch",c.Logger.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:r[0]}),r=r.slice(1)}let n=[],i=[],o=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(it.fromObject({type:"bytes32",name:e.name})),o.push(!0)):(n.push(e),o.push(!1)):(i.push(e),o.push(!1))});let s=null!=r?this._abiCoder.decode(n,y(r)):null,a=this._abiCoder.decode(i,t,!0),u=[],l=0,h=0;e.inputs.forEach((e,t)=>{if(e.indexed)if(null==s)u[t]=new kt({_isIndexed:!0,hash:null});else if(o[t])u[t]=new kt({_isIndexed:!0,hash:s[h++]});else try{u[t]=s[h++]}catch(e){u[t]=e}else try{u[t]=a[l++]}catch(e){u[t]=e}if(e.name&&null==u[e.name]){const r=u[t];r instanceof Error?Object.defineProperty(u,e.name,{enumerable:!0,get:()=>{throw Tt(`property ${JSON.stringify(e.name)}`,r)}}):u[e.name]=r}});for(let e=0;e<u.length;e++){const t=u[e];t instanceof Error&&Object.defineProperty(u,e,{enumerable:!0,get:()=>{throw Tt(`index ${e}`,t)}})}return Object.freeze(u)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new It({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:D.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new _t({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=A(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new Nt({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!(!e||!e._isInterface)}}const Ot=new c.Logger("abstract-provider/5.8.0");class Ct extends Z{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class xt{constructor(){Ot.checkAbstract(new.target,xt),K(this,"_isProvider",!0)}getFeeData(){return e=this,t=void 0,n=function*(){const{block:e,gasPrice:t}=yield V({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(e=>null)});let r=null,n=null,i=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,i=D.from("1500000000"),n=e.baseFeePerGas.mul(2).add(i)),{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:i,gasPrice:t}},new((r=void 0)||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())});var e,t,r,n}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}var Ut=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const Mt=new c.Logger("abstract-signer/5.8.0"),Lt=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Bt=[c.Logger.errors.INSUFFICIENT_FUNDS,c.Logger.errors.NONCE_EXPIRED,c.Logger.errors.REPLACEMENT_UNDERPRICED];class Dt{constructor(){Mt.checkAbstract(new.target,Dt),K(this,"_isSigner",!0)}getBalance(e){return Ut(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Ut(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Ut(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield V(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return Ut(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield V(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return Ut(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return Ut(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Ut(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Ut(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Ut(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const t in e)-1===Lt.indexOf(t)&&Mt.throwArgumentError("invalid transaction key: "+t,"transaction",e);const t=J(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&Mt.throwArgumentError("from address mismatch","transaction",e),t[0])),t}populateTransaction(e){return Ut(this,void 0,void 0,function*(){const t=yield V(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then(e=>Ut(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&Mt.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})),t.to.catch(e=>{}));const r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!r?0!==t.type&&1!==t.type||!r||Mt.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):Mt.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(r&&Mt.throwError("network does not support EIP-1559",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):Mt.throwError("failed to get consistent fee data",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch(e=>{if(Bt.indexOf(e.code)>=0)throw e;return Mt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",c.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})})),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(t=>(0!==t[1]&&t[0]!==t[1]&&Mt.throwArgumentError("chainId address mismatch","transaction",e),t[0])),yield V(t)})}_checkProvider(e){this.provider||Mt.throwError("missing provider",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}class Ft extends Dt{constructor(e,t){super(),K(this,"address",e),K(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Mt.throwError(e,c.Logger.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Ft(this.address,e)}}var jt=r(99499),Gt=r.n(jt);function Wt(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var Ht=Kt;function Kt(e,t){if(!e)throw new Error(t||"Assertion failed")}Kt.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var zt=Wt(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}}),Vt=Wt(function(e,t){var r=t;r.assert=Ht,r.toArray=zt.toArray,r.zero2=zt.zero2,r.toHex=zt.toHex,r.encode=zt.encode,r.getNAF=function(e,t,r){var n,i=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<i.length;n+=1)i[n]=0;var o=1<<t+1,s=e.clone();for(n=0;n<i.length;n++){var a,u=s.andln(o-1);s.isOdd()?(a=u>(o>>1)-1?(o>>1)-u:u,s.isubn(a)):a=0,i[n]=a,s.iushrn(1)}return i},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),s=1&u?3!=(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u:0,r[0].push(s),a=1&c?3!=(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c:0,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(O())(e,"hex","le")}}),qt=Vt.getNAF,Jt=Vt.getJSF,Xt=Vt.assert;function Yt(e,t){this.type=e,this.p=new(O())(t.p,16),this.red=t.prime?O().red(t.prime):O().mont(this.p),this.zero=new(O())(0).toRed(this.red),this.one=new(O())(1).toRed(this.red),this.two=new(O())(2).toRed(this.red),this.n=t.n&&new(O())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Qt=Yt;function $t(e,t){this.curve=e,this.type=t,this.precomputed=null}Yt.prototype.point=function(){throw new Error("Not implemented")},Yt.prototype.validate=function(){throw new Error("Not implemented")},Yt.prototype._fixedNafMul=function(e,t){Xt(e.precomputed);var r=e._getDoubles(),n=qt(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var u=o+r.step-1;u>=o;u--)s=(s<<1)+n[u];a.push(s)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=i;h>0;h--){for(o=0;o<a.length;o++)(s=a[o])===h?l=l.mixedAdd(r.points[o]):s===-h&&(l=l.mixedAdd(r.points[o].neg()));c=c.add(l)}return c.toP()},Yt.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=qt(t,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var u=0;a>=0&&0===o[a];a--)u++;if(a>=0&&u++,s=s.dblp(u),a<0)break;var c=o[a];Xt(0!==c),s="affine"===e.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===e.type?s.toP():s},Yt.prototype._wnafMulAdd=function(e,t,r,n,i){var o,s,a,u=this._wnafT1,c=this._wnafT2,l=this._wnafT3,h=0;for(o=0;o<n;o++){var f=(a=t[o])._getNAFPoints(e);u[o]=f.wnd,c[o]=f.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var g=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(g[1]=t[d].add(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].add(t[p].neg())):(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=Jt(r[d],r[p]);for(h=Math.max(y[0].length,h),l[d]=new Array(h),l[p]=new Array(h),s=0;s<h;s++){var b=0|y[0][s],v=0|y[1][s];l[d][s]=m[3*(b+1)+(v+1)],l[p][s]=0,c[d]=g}}else l[d]=qt(r[d],u[d],this._bitLength),l[p]=qt(r[p],u[p],this._bitLength),h=Math.max(l[d].length,h),h=Math.max(l[p].length,h)}var w=this.jpoint(null,null,null),E=this._wnafT4;for(o=h;o>=0;o--){for(var A=0;o>=0;){var S=!0;for(s=0;s<n;s++)E[s]=0|l[s][o],0!==E[s]&&(S=!1);if(!S)break;A++,o--}if(o>=0&&A++,w=w.dblp(A),o<0)break;for(s=0;s<n;s++){var _=E[s];0!==_&&(_>0?a=c[s][_-1>>1]:_<0&&(a=c[s][-_-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(o=0;o<n;o++)c[o]=null;return i?w:w.toP()},Yt.BasePoint=$t,$t.prototype.eq=function(){throw new Error("Not implemented")},$t.prototype.validate=function(){return this.curve.validate(this)},Yt.prototype.decodePoint=function(e,t){e=Vt.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?Xt(e[e.length-1]%2==0):7===e[0]&&Xt(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},$t.prototype.encodeCompressed=function(e){return this.encode(e,!0)},$t.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},$t.prototype.encode=function(e,t){return Vt.encode(this._encode(t),e)},$t.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},$t.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},$t.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},$t.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},$t.prototype._getBeta=function(){return null},$t.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var Zt=Wt(function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),er=Vt.assert;function tr(e){Qt.call(this,"short",e),this.a=new(O())(e.a,16).toRed(this.red),this.b=new(O())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Zt(tr,Qt);var rr=tr;function nr(e,t,r,n){Qt.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(O())(t,16),this.y=new(O())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function ir(e,t,r,n){Qt.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(O())(0)):(this.x=new(O())(t,16),this.y=new(O())(r,16),this.z=new(O())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}tr.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(O())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(O())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],er(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new(O())(e.a,16),b:new(O())(e.b,16)}}):this._getEndoBasis(r)}}},tr.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:O().mont(e),r=new(O())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(O())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},tr.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),d=new(O())(1),p=new(O())(0),g=new(O())(0),m=new(O())(1),y=0;0!==h.cmpn(0);){var b=f.div(h);u=f.sub(b.mul(h)),c=g.sub(b.mul(d));var v=m.sub(b.mul(p));if(!n&&u.cmp(l)<0)t=a.neg(),r=d,n=u.neg(),i=c;else if(n&&2===++y)break;a=u,f=h,h=u,g=d,d=c,m=p,p=v}o=u.neg(),s=c;var w=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},tr.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:u.add(c).neg()}},tr.prototype.pointFromX=function(e,t){(e=new(O())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},tr.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},tr.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[2*o]=a,n[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),l=0;l<2*o;l++)n[l]=null,i[l]=null;return c},Zt(nr,Qt.BasePoint),tr.prototype.point=function(e,t,r){return new nr(this,e,t,r)},tr.prototype.pointFromJSON=function(e,t){return nr.fromJSON(this,e,t)},nr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},nr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},nr.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},nr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},nr.prototype.isInfinity=function(){return this.inf},nr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},nr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},nr.prototype.getX=function(){return this.x.fromRed()},nr.prototype.getY=function(){return this.y.fromRed()},nr.prototype.mul=function(e){return e=new(O())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},nr.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},nr.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},nr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},nr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},nr.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},Zt(ir,Qt.BasePoint),tr.prototype.jpoint=function(e,t,r){return new ir(this,e,t,r)},ir.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},ir.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},ir.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),h=n.redMul(c),f=u.redSqr().redIAdd(l).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,d,p)},ir.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),l=r.redMul(u),h=a.redSqr().redIAdd(c).redISub(l).redISub(l),f=a.redMul(l.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(h,f,d)},ir.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(t=0;t<e;t++){var l=o.redSqr(),h=c.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=o.redMul(h),g=d.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=d.redMul(m);y=y.redIAdd(y).redISub(f);var b=c.redMul(a);t+1<e&&(u=u.redMul(f)),o=g,a=b,c=y}return this.curve.jpoint(o,c.redMul(i),a)},ir.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},ir.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},ir.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),g=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=d.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},ir.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(s),l=a.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(h).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},ir.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(a).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,f,d)},ir.prototype.mul=function(e,t){return e=new(O())(e,t),this.curve._wnafMul(this,e)},ir.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},ir.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},ir.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},ir.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var or=Wt(function(e,t){var r=t;r.base=Qt,r.short=rr,r.mont=null,r.edwards=null}),sr=Wt(function(e,t){var r,n=t,i=Vt.assert;function o(e){"short"===e.type?this.curve=new or.short(e):"edwards"===e.type?this.curve=new or.edwards(e):this.curve=new or.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Gt().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Gt().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Gt().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Gt().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Gt().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Gt().sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Gt().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Gt().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function ar(e){if(!(this instanceof ar))return new ar(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=zt.toArray(e.entropy,e.entropyEnc||"hex"),r=zt.toArray(e.nonce,e.nonceEnc||"hex"),n=zt.toArray(e.pers,e.persEnc||"hex");Ht(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var ur=ar;ar.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},ar.prototype._hmac=function(){return new(Gt().hmac)(this.hash,this.K)},ar.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},ar.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=zt.toArray(e,t),r=zt.toArray(r,n),Ht(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},ar.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=zt.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,zt.encode(o,t)};var cr=Vt.assert;function lr(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var hr=lr;lr.fromPublic=function(e,t,r){return t instanceof lr?t:new lr(e,{pub:t,pubEnc:r})},lr.fromPrivate=function(e,t,r){return t instanceof lr?t:new lr(e,{priv:t,privEnc:r})},lr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},lr.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},lr.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},lr.prototype._importPrivate=function(e,t){this.priv=new(O())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},lr.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?cr(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||cr(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},lr.prototype.derive=function(e){return e.validate()||cr(e.validate(),"public point not validated"),e.mul(this.priv).getX()},lr.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},lr.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},lr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var fr=Vt.assert;function dr(e,t){if(e instanceof dr)return e;this._importDER(e,t)||(fr(e.r&&e.s,"Signature without r or s"),this.r=new(O())(e.r,16),this.s=new(O())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var pr=dr;function gr(){this.place=0}function mr(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function yr(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function br(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}dr.prototype._importDER=function(e,t){e=Vt.toArray(e,t);var r=new gr;if(48!==e[r.place++])return!1;var n=mr(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=mr(e,r);if(!1===i)return!1;if(128&e[r.place])return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var s=mr(e,r);if(!1===s)return!1;if(e.length!==s+r.place)return!1;if(128&e[r.place])return!1;var a=e.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(O())(o),this.s=new(O())(a),this.recoveryParam=null,!0},dr.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=yr(t),r=yr(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];br(n,t.length),(n=n.concat(t)).push(2),br(n,r.length);var i=n.concat(r),o=[48];return br(o,i.length),o=o.concat(i),Vt.encode(o,e)};var vr=function(){throw new Error("unsupported")},wr=Vt.assert;function Er(e){if(!(this instanceof Er))return new Er(e);"string"==typeof e&&(wr(Object.prototype.hasOwnProperty.call(sr,e),"Unknown curve "+e),e=sr[e]),e instanceof sr.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Ar=Er;Er.prototype.keyPair=function(e){return new hr(this,e)},Er.prototype.keyFromPrivate=function(e,t){return hr.fromPrivate(this,e,t)},Er.prototype.keyFromPublic=function(e,t){return hr.fromPublic(this,e,t)},Er.prototype.genKeyPair=function(e){e||(e={});for(var t=new ur({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||vr(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(O())(2));;){var i=new(O())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Er.prototype._truncateToN=function(e,t,r){var n;if(O().isBN(e)||"number"==typeof e)n=(e=new(O())(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new(O())(e,16);else{var i=e.toString();n=i.length+1>>>1,e=new(O())(i,16)}"number"!=typeof r&&(r=8*n);var o=r-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Er.prototype.sign=function(e,t,r,n){if("object"==typeof r&&(n=r,r=null),n||(n={}),"string"!=typeof e&&"number"!=typeof e&&!O().isBN(e)){wr("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),wr(e.length>>>0===e.length);for(var i=0;i<e.length;i++)wr((255&e[i])===e[i])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,n.msgBitLength),wr(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),s=t.getPrivate().toArray("be",o),a=e.toArray("be",o);wr(new(O())(a).eq(e),"Can not sign message");for(var u=new ur({hash:this.hash,entropy:s,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new(O())(1)),l=0;;l++){var h=n.k?n.k(l):new(O())(u.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(c)>=0)){var f=this.g.mul(h);if(!f.isInfinity()){var d=f.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)){var g=h.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var m=(f.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0);return n.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),m^=1),new pr({r:p,s:g,recoveryParam:m})}}}}}},Er.prototype.verify=function(e,t,r,n,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,n);var o=(t=new pr(t,"hex")).r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,u=s.invm(this.n),c=u.mul(e).umod(this.n),l=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,r.getPublic(),l)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(c,r.getPublic(),l)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},Er.prototype.recoverPubKey=function(e,t,r,n){wr((3&r)===r,"The recovery param is more than two bits"),t=new pr(t,n);var i=this.n,o=new(O())(e),s=t.r,a=t.s,u=1&r,c=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");s=c?this.curve.pointFromX(s.add(this.curve.n),u):this.curve.pointFromX(s,u);var l=t.r.invm(i),h=i.sub(o).mul(l).umod(i),f=a.mul(l).umod(i);return this.g.mulAdd(h,s,f)},Er.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new pr(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Sr=Wt(function(e,t){var r=t;r.version="6.6.1",r.utils=Vt,r.rand=function(){throw new Error("unsupported")},r.curve=or,r.curves=sr,r.ec=Ar,r.eddsa=null}).ec;const _r=new c.Logger("signing-key/5.8.0");let Ir=null;function Nr(){return Ir||(Ir=new Sr("secp256k1")),Ir}class kr{constructor(e){K(this,"curve","secp256k1"),K(this,"privateKey",A(e)),32!==S(this.privateKey)&&_r.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Nr().keyFromPrivate(m(this.privateKey));K(this,"publicKey","0x"+t.getPublic(!1,"hex")),K(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),K(this,"_isSigningKey",!0)}_addPoint(e){const t=Nr().keyFromPublic(m(this.publicKey)),r=Nr().keyFromPublic(m(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=Nr().keyFromPrivate(m(this.privateKey)),r=m(e);32!==r.length&&_r.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return P({recoveryParam:n.recoveryParam,r:k("0x"+n.r.toString(16),32),s:k("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=Nr().keyFromPrivate(m(this.privateKey)),r=Nr().keyFromPublic(m(Pr(e)));return k("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function Pr(e,t){const r=m(e);if(32===r.length){const e=new kr(r);return t?"0x"+Nr().keyFromPrivate(r).getPublic(!0,"hex"):e.publicKey}return 33===r.length?t?A(r):"0x"+Nr().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+Nr().keyFromPublic(r).getPublic(!0,"hex"):A(r):_r.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Tr=new c.Logger("transactions/5.8.0");var Rr;function Or(e){return"0x"===e?null:Ee(e)}function Cr(e){return"0x"===e?Ke:D.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(Rr||(Rr={}));const xr=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Ur={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Mr(e){return Ee(_(ae(_(Pr(e),1)),12))}function Lr(e,t){return Mr(function(e,t){const r=P(t),n={r:m(r.r),s:m(r.s)};return"0x"+Nr().recoverPubKey(m(e),n,r.recoveryParam).encode("hex",!1)}(m(e),t))}function Br(e,t){const r=b(D.from(e).toHexString());return r.length>32&&Tr.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function Dr(e,t){return{address:Ee(e),storageKeys:(t||[]).map((t,r)=>(32!==S(t)&&Tr.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase()))}}function Fr(e){if(Array.isArray(e))return e.map((e,t)=>Array.isArray(e)?(e.length>2&&Tr.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),Dr(e[0],e[1])):Dr(e.address,e.storageKeys));const t=Object.keys(e).map(t=>{const r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return Dr(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}function jr(e){return Fr(e).map(e=>[e.address,e.storageKeys])}function Gr(e,t){if(null!=e.gasPrice){const t=D.from(e.gasPrice),r=D.from(e.maxFeePerGas||0);t.eq(r)||Tr.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[Br(e.chainId||0,"chainId"),Br(e.nonce||0,"nonce"),Br(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Br(e.maxFeePerGas||0,"maxFeePerGas"),Br(e.gasLimit||0,"gasLimit"),null!=e.to?Ee(e.to):"0x",Br(e.value||0,"value"),e.data||"0x",jr(e.accessList||[])];if(t){const e=P(t);r.push(Br(e.recoveryParam,"recoveryParam")),r.push(b(e.r)),r.push(b(e.s))}return I(["0x02",fe(r)])}function Wr(e,t){const r=[Br(e.chainId||0,"chainId"),Br(e.nonce||0,"nonce"),Br(e.gasPrice||0,"gasPrice"),Br(e.gasLimit||0,"gasLimit"),null!=e.to?Ee(e.to):"0x",Br(e.value||0,"value"),e.data||"0x",jr(e.accessList||[])];if(t){const e=P(t);r.push(Br(e.recoveryParam,"recoveryParam")),r.push(b(e.r)),r.push(b(e.s))}return I(["0x01",fe(r)])}function Hr(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&Tr.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){q(e,Ur);const r=[];xr.forEach(function(t){let n=e[t.name]||[];const i={};t.numeric&&(i.hexPad="left"),n=m(A(n,i)),t.length&&n.length!==t.length&&n.length>0&&Tr.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n),t.maxLength&&(n=b(n),n.length>t.maxLength&&Tr.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)),r.push(A(n))});let n=0;if(null!=e.chainId?(n=e.chainId,"number"!=typeof n&&Tr.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!d(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),0!==n&&(r.push(A(n)),r.push("0x"),r.push("0x")),!t)return fe(r);const i=P(t);let o=27+i.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),o+=2*n+8,i.v>28&&i.v!==o&&Tr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):i.v!==o&&Tr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push(A(o)),r.push(b(m(i.r))),r.push(b(m(i.s))),fe(r)}(e,t);switch(e.type){case 1:return Wr(e,t);case 2:return Gr(e,t)}return Tr.throwError(`unsupported transaction type: ${e.type}`,c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function Kr(e,t,r){try{const r=Cr(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(e){Tr.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=k(t[1],32),e.s=k(t[2],32);try{const t=ae(r(e));e.from=Lr(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}var zr=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const Vr=new c.Logger("contracts/5.7.0"),qr={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function Jr(e,t){return zr(this,void 0,void 0,function*(){const r=yield t;"string"!=typeof r&&Vr.throwArgumentError("invalid address or ENS name","name",r);try{return Ee(r)}catch(e){}e||Vr.throwError("a provider or signer is needed to resolve ENS names",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield e.resolveName(r);return null==n&&Vr.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function Xr(e,t,r){return zr(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((r,n)=>Xr(e,Array.isArray(t)?t[n]:t[r.name],r))):"address"===r.type?yield Jr(e,t):"tuple"===r.type?yield Xr(e,t,r.components):"array"===r.baseType?Array.isArray(t)?yield Promise.all(t.map(t=>Xr(e,t,r.arrayChildren))):Promise.reject(Vr.makeError("invalid value for array",c.Logger.errors.INVALID_ARGUMENT,{argument:"value",value:t})):t})}function Yr(e,t,r){return zr(this,void 0,void 0,function*(){let n={};r.length===t.inputs.length+1&&"object"==typeof r[r.length-1]&&(n=J(r.pop())),Vr.checkArgumentCount(r.length,t.inputs.length,"passed to contract"),e.signer?n.from?n.from=V({override:Jr(e.signer,n.from),signer:e.signer.getAddress()}).then(e=>zr(this,void 0,void 0,function*(){return Ee(e.signer)!==e.override&&Vr.throwError("Contract with a Signer cannot override from",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),e.override})):n.from=e.signer.getAddress():n.from&&(n.from=Jr(e.provider,n.from));const i=yield V({args:Xr(e.signer||e.provider,r,t.inputs),address:e.resolvedAddress,overrides:V(n)||{}}),o=e.interface.encodeFunctionData(t,i.args),s={data:o,to:i.address},a=i.overrides;if(null!=a.nonce&&(s.nonce=D.from(a.nonce).toNumber()),null!=a.gasLimit&&(s.gasLimit=D.from(a.gasLimit)),null!=a.gasPrice&&(s.gasPrice=D.from(a.gasPrice)),null!=a.maxFeePerGas&&(s.maxFeePerGas=D.from(a.maxFeePerGas)),null!=a.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=D.from(a.maxPriorityFeePerGas)),null!=a.from&&(s.from=a.from),null!=a.type&&(s.type=a.type),null!=a.accessList&&(s.accessList=Fr(a.accessList)),null==s.gasLimit&&null!=t.gas){let e=21e3;const r=m(o);for(let t=0;t<r.length;t++)e+=4,r[t]&&(e+=64);s.gasLimit=D.from(t.gas).add(e)}if(a.value){const e=D.from(a.value);e.isZero()||t.payable||Vr.throwError("non-payable method cannot override value",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),s.value=e}a.customData&&(s.customData=J(a.customData)),a.ccipReadEnabled&&(s.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const u=Object.keys(n).filter(e=>null!=n[e]);return u.length&&Vr.throwError(`cannot override ${u.map(e=>JSON.stringify(e)).join(",")}`,c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:u}),s})}function Qr(e,t){const r=t.wait.bind(t);t.wait=t=>r(t).then(t=>(t.events=t.logs.map(r=>{let n=$(r),i=null;try{i=e.interface.parseLog(r)}catch(e){}return i&&(n.args=i.args,n.decode=(t,r)=>e.interface.decodeEventLog(i.eventFragment,t,r),n.event=i.name,n.eventSignature=i.signature),n.removeListener=()=>e.provider,n.getBlock=()=>e.provider.getBlock(t.blockHash),n.getTransaction=()=>e.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>Promise.resolve(t),n}),t))}function $r(e,t,r){const n=e.signer||e.provider;return function(...i){return zr(this,void 0,void 0,function*(){let o;if(i.length===t.inputs.length+1&&"object"==typeof i[i.length-1]){const e=J(i.pop());null!=e.blockTag&&(o=yield e.blockTag),delete e.blockTag,i.push(e)}null!=e.deployTransaction&&(yield e._deployed(o));const s=yield Yr(e,t,i),a=yield n.call(s,o);try{let n=e.interface.decodeFunctionResult(t,a);return r&&1===t.outputs.length&&(n=n[0]),n}catch(t){throw t.code===c.Logger.errors.CALL_EXCEPTION&&(t.address=e.address,t.args=i,t.transaction=s),t}})}}function Zr(e,t,r){return t.constant?$r(e,t,r):function(e,t){return function(...r){return zr(this,void 0,void 0,function*(){e.signer||Vr.throwError("sending a transaction requires a signer",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=e.deployTransaction&&(yield e._deployed());const n=yield Yr(e,t,r),i=yield e.signer.sendTransaction(n);return Qr(e,i),i})}}(e,t)}function en(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):""):"*"}class tn{constructor(e,t){K(this,"tag",e),K(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>!(!t&&r.listener===e&&(t=!0,1)))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(t=>{const r=e.slice();return setTimeout(()=>{t.listener.apply(this,r)},0),!t.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class rn extends tn{constructor(){super("error",null)}}class nn extends tn{constructor(e,t,r,n){const i={address:e};let o=t.getEventTopic(r);n?(o!==n[0]&&Vr.throwArgumentError("topic mismatch","topics",n),i.topics=n.slice()):i.topics=[o],super(en(i),i),K(this,"address",e),K(this,"interface",t),K(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(e,t)=>this.interface.decodeEventLog(this.fragment,e,t);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=function(e){const t=[],r=function(e,n){if(Array.isArray(n))for(let i in n){const o=e.slice();o.push(i);try{r(o,n[i])}catch(e){t.push({path:o,error:e})}}};return r([],e),t}(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class on extends tn{constructor(e,t){super("*",{address:e}),K(this,"address",e),K(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(e,r)=>this.interface.decodeEventLog(t.eventFragment,e,r),e.args=t.args}catch(e){}}}class sn{constructor(e,t,r){K(this,"interface",z(new.target,"getInterface")(t)),null==r?(K(this,"provider",null),K(this,"signer",null)):Dt.isSigner(r)?(K(this,"provider",r.provider||null),K(this,"signer",r)):xt.isProvider(r)?(K(this,"provider",r),K(this,"signer",null)):Vr.throwArgumentError("invalid signer or provider","signerOrProvider",r),K(this,"callStatic",{}),K(this,"estimateGas",{}),K(this,"functions",{}),K(this,"populateTransaction",{}),K(this,"filters",{});{const e={};Object.keys(this.interface.events).forEach(t=>{const r=this.interface.events[t];K(this.filters,t,(...e)=>({address:this.address,topics:this.interface.encodeFilterTopics(r,e)})),e[r.name]||(e[r.name]=[]),e[r.name].push(t)}),Object.keys(e).forEach(t=>{const r=e[t];1===r.length?K(this.filters,t,this.filters[r[0]]):Vr.warn(`Duplicate definition of ${t} (${r.join(", ")})`)})}if(K(this,"_runningEvents",{}),K(this,"_wrappedEmits",{}),null==e&&Vr.throwArgumentError("invalid contract address or ENS name","addressOrName",e),K(this,"address",e),this.provider)K(this,"resolvedAddress",Jr(this.provider,e));else try{K(this,"resolvedAddress",Promise.resolve(Ee(e)))}catch(e){Vr.throwError("provider is required to use ENS name as contract address",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(e=>{});const n={},i={};Object.keys(this.interface.functions).forEach(e=>{const t=this.interface.functions[e];if(i[e])Vr.warn(`Duplicate ABI entry for ${JSON.stringify(e)}`);else{i[e]=!0;{const r=t.name;n[`%${r}`]||(n[`%${r}`]=[]),n[`%${r}`].push(e)}null==this[e]&&K(this,e,Zr(this,t,!0)),null==this.functions[e]&&K(this.functions,e,Zr(this,t,!1)),null==this.callStatic[e]&&K(this.callStatic,e,$r(this,t,!0)),null==this.populateTransaction[e]&&K(this.populateTransaction,e,function(e,t){return function(...r){return Yr(e,t,r)}}(this,t)),null==this.estimateGas[e]&&K(this.estimateGas,e,function(e,t){const r=e.signer||e.provider;return function(...n){return zr(this,void 0,void 0,function*(){r||Vr.throwError("estimate require a provider or signer",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield Yr(e,t,n);return yield r.estimateGas(i)})}}(this,t))}}),Object.keys(n).forEach(e=>{const t=n[e];if(t.length>1)return;e=e.substring(1);const r=t[0];try{null==this[e]&&K(this,e,this[r])}catch(e){}null==this.functions[e]&&K(this.functions,e,this.functions[r]),null==this.callStatic[e]&&K(this.callStatic,e,this.callStatic[r]),null==this.populateTransaction[e]&&K(this.populateTransaction,e,this.populateTransaction[r]),null==this.estimateGas[e]&&K(this.estimateGas,e,this.estimateGas[r])})}static getContractAddress(e){return Ae(e)}static getInterface(e){return Rt.isInterface(e)?e:new Rt(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(e=>("0x"===e&&Vr.throwError("contract not deployed",c.Logger.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Vr.throwError("sending a transactions require a signer",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=J(e||{});return["from","to"].forEach(function(e){null!=t[e]&&Vr.throwError("cannot override "+e,c.Logger.errors.UNSUPPORTED_OPERATION,{operation:e})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){"string"==typeof e&&(e=new Ft(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&K(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return kt.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if("string"==typeof e){if("error"===e)return this._normalizeRunningEvent(new rn);if("event"===e)return this._normalizeRunningEvent(new tn("event",null));if("*"===e)return this._normalizeRunningEvent(new on(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new nn(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const t=e.topics[0];if("string"!=typeof t)throw new Error("invalid topic");const r=this.interface.getEvent(t);return this._normalizeRunningEvent(new nn(this.address,this.interface,r,e.topics))}catch(e){}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new tn(en(t),t))}return this._normalizeRunningEvent(new on(this.address,this.interface))}_checkRunningEvents(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const n=$(t);return n.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},n.getBlock=()=>this.provider.getBlock(t.blockHash),n.getTransaction=()=>this.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(n),n}_addEventListener(e,t,r){if(this.provider||Vr.throwError("events require a provider or a signer with a provider",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const r=r=>{let n=this._wrapEvent(e,r,t);if(null==n.decodeError)try{const t=e.getEmit(n);this.emit(e.filter,...t)}catch(e){n.decodeError=e.error}null!=e.filter&&this.emit("event",n),null!=n.decodeError&&this.emit("error",n.decodeError,n)};this._wrappedEmits[e.tag]=r,null!=e.filter&&this.provider.on(e.filter,r)}}queryFilter(e,t,r){const n=this._getRunningEvent(e),i=J(n.filter);return"string"==typeof t&&w(t,32)?(null!=r&&Vr.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),i.blockHash=t):(i.fromBlock=null!=t?t:0,i.toBlock=null!=r?r:"latest"),this.provider.getLogs(i).then(e=>e.map(e=>this._wrapEvent(n,e,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),n=r.run(t)>0;return this._checkRunningEvents(r),n}listenerCount(e){return this.provider?null==e?Object.keys(this._runningEvents).reduce((e,t)=>e+this._runningEvents[t].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(null==e){const e=[];for(let t in this._runningEvents)this._runningEvents[t].listeners().forEach(t=>{e.push(t)});return e}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(null==e){for(const e in this._runningEvents){const t=this._runningEvents[e];t.removeAllListeners(),this._checkRunningEvents(t)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class an extends sn{}class un{constructor(e,t,r){let n=null;n="string"==typeof t?t:g(t)?A(t):t&&"string"==typeof t.object?t.object:"!","0x"!==n.substring(0,2)&&(n="0x"+n),(!w(n)||n.length%2)&&Vr.throwArgumentError("invalid bytecode","bytecode",t),r&&!Dt.isSigner(r)&&Vr.throwArgumentError("invalid signer","signer",r),K(this,"bytecode",n),K(this,"interface",z(new.target,"getInterface")(e)),K(this,"signer",r||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&"object"==typeof e[e.length-1]){t=J(e.pop());for(const e in t)if(!qr[e])throw new Error("unknown transaction override "+e)}return["data","from","to"].forEach(e=>{null!=t[e]&&Vr.throwError("cannot override "+e,c.Logger.errors.UNSUPPORTED_OPERATION,{operation:e})}),t.value&&(D.from(t.value).isZero()||this.interface.deploy.payable||Vr.throwError("non-payable constructor cannot override value",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value})),Vr.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=A(y([this.bytecode,this.interface.encodeDeploy(e)])),t}deploy(...e){return zr(this,void 0,void 0,function*(){let t={};e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),Vr.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const r=yield Xr(this.signer,e,this.interface.deploy.inputs);r.push(t);const n=this.getDeployTransaction(...r),i=yield this.signer.sendTransaction(n),o=z(this.constructor,"getContractAddress")(i),s=z(this.constructor,"getContract")(o,this.interface,this.signer);return Qr(s,i),K(s,"deployTransaction",i),s})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){null==e&&Vr.throwError("missing compiler output",c.Logger.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof e&&(e=JSON.parse(e));const r=e.abi;let n=null;return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(r,n,t)}static getInterface(e){return an.getInterface(e)}static getContractAddress(e){return Ae(e)}static getContract(e,t,r){return new an(e,t,r)}}let cn=!1,ln=!1;const hn={debug:1,default:2,info:2,warning:3,error:4,off:5};let fn=hn.default,dn=null;const pn=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var gn,mn;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(gn||(gn={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(mn||(mn={}));const yn="0123456789abcdef";class bn{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==hn[r]&&this.throwArgumentError("invalid log level name","logLevel",e),fn>hn[r]||console.log.apply(console,t)}debug(...e){this._log(bn.levels.DEBUG,e)}info(...e){this._log(bn.levels.INFO,e)}warn(...e){this._log(bn.levels.WARNING,e)}makeError(e,t,r){if(ln)return this.makeError("censored error",t,{});t||(t=bn.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=yn[t[e]>>4],r+=yn[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case mn.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case mn.CALL_EXCEPTION:case mn.INSUFFICIENT_FUNDS:case mn.MISSING_NEW:case mn.NONCE_EXPIRED:case mn.REPLACEMENT_UNDERPRICED:case mn.TRANSACTION_REPLACED:case mn.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,bn.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),pn&&this.throwError("platform missing String.prototype.normalize",bn.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:pn})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,bn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,bn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,bn.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,bn.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",bn.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",bn.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",bn.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return dn||(dn=new bn("logger/5.8.0")),dn}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",bn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),cn){if(!e)return;this.globalLogger().throwError("error censorship permanent",bn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}ln=!!e,cn=!!t}static setLogLevel(e){const t=hn[e.toLowerCase()];null!=t?fn=t:bn.globalLogger().warn("invalid log level - "+e)}static from(e){return new bn(e)}}bn.errors=mn,bn.levels=gn;const vn=new bn("bytes/5.8.0");function wn(e){return!!e.toHexString}function En(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return En(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function An(e){return"number"==typeof e&&e==e&&e%1==0}function Sn(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!An(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!An(r)||r<0||r>=256)return!1}return!0}function _n(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const In="0123456789abcdef";function Nn(e,t){if(t||(t={}),"number"==typeof e){vn.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=In[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),wn(e))return e.toHexString();if(_n(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":vn.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Sn(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=In[(240&n)>>4]+In[15&n]}return t}return vn.throwArgumentError("invalid hexlify value","value",e)}function kn(e,t){for("string"!=typeof e?e=Nn(e):_n(e)||vn.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&vn.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}const Pn="bignumber/5.7.0";var Tn=O().BN;const Rn=new bn(Pn),On={};let Cn=!1;class xn{constructor(e,t){e!==On&&Rn.throwError("cannot call constructor directly; use BigNumber.from",bn.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Mn(Ln(this).fromTwos(e))}toTwos(e){return Mn(Ln(this).toTwos(e))}abs(){return"-"===this._hex[0]?xn.from(this._hex.substring(1)):this}add(e){return Mn(Ln(this).add(Ln(e)))}sub(e){return Mn(Ln(this).sub(Ln(e)))}div(e){return xn.from(e).isZero()&&Bn("division-by-zero","div"),Mn(Ln(this).div(Ln(e)))}mul(e){return Mn(Ln(this).mul(Ln(e)))}mod(e){const t=Ln(e);return t.isNeg()&&Bn("division-by-zero","mod"),Mn(Ln(this).umod(t))}pow(e){const t=Ln(e);return t.isNeg()&&Bn("negative-power","pow"),Mn(Ln(this).pow(t))}and(e){const t=Ln(e);return(this.isNegative()||t.isNeg())&&Bn("unbound-bitwise-result","and"),Mn(Ln(this).and(t))}or(e){const t=Ln(e);return(this.isNegative()||t.isNeg())&&Bn("unbound-bitwise-result","or"),Mn(Ln(this).or(t))}xor(e){const t=Ln(e);return(this.isNegative()||t.isNeg())&&Bn("unbound-bitwise-result","xor"),Mn(Ln(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Bn("negative-width","mask"),Mn(Ln(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Bn("negative-width","shl"),Mn(Ln(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Bn("negative-width","shr"),Mn(Ln(this).shrn(e))}eq(e){return Ln(this).eq(Ln(e))}lt(e){return Ln(this).lt(Ln(e))}lte(e){return Ln(this).lte(Ln(e))}gt(e){return Ln(this).gt(Ln(e))}gte(e){return Ln(this).gte(Ln(e))}isNegative(){return"-"===this._hex[0]}isZero(){return Ln(this).isZero()}toNumber(){try{return Ln(this).toNumber()}catch(e){Bn("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return Rn.throwError("this platform does not support BigInt",bn.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?Cn||(Cn=!0,Rn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Rn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",bn.errors.UNEXPECTED_ARGUMENT,{}):Rn.throwError("BigNumber.toString does not accept parameters",bn.errors.UNEXPECTED_ARGUMENT,{})),Ln(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof xn)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new xn(On,Un(e)):e.match(/^-?[0-9]+$/)?new xn(On,Un(new Tn(e))):Rn.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&Bn("underflow","BigNumber.from",e),(e>=9007199254740991||e<=-9007199254740991)&&Bn("overflow","BigNumber.from",e),xn.from(String(e));const t=e;if("bigint"==typeof t)return xn.from(t.toString());if(Sn(t))return xn.from(Nn(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return xn.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(_n(e)||"-"===e[0]&&_n(e.substring(1))))return xn.from(e)}return Rn.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function Un(e){if("string"!=typeof e)return Un(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&Rn.throwArgumentError("invalid hex","value",e),"0x00"===(e=Un(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Mn(e){return xn.from(Un(e))}function Ln(e){const t=xn.from(e).toHexString();return"-"===t[0]?new Tn("-"+t.substring(3),16):new Tn(t.substring(2),16)}function Bn(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),Rn.throwError(e,bn.errors.NUMERIC_FAULT,n)}const Dn=new bn(Pn),Fn={},jn=xn.from(0),Gn=xn.from(-1);function Wn(e,t,r,n){const i={fault:t,operation:r};return void 0!==n&&(i.value=n),Dn.throwError(e,bn.errors.NUMERIC_FAULT,i)}let Hn="0";for(;Hn.length<256;)Hn+=Hn;function Kn(e){if("number"!=typeof e)try{e=xn.from(e).toNumber()}catch(e){}return"number"==typeof e&&e>=0&&e<=256&&!(e%1)?"1"+Hn.substring(0,e):Dn.throwArgumentError("invalid decimal size","decimals",e)}function zn(e,t){null==t&&(t=0);const r=Kn(t),n=(e=xn.from(e)).lt(jn);n&&(e=e.mul(Gn));let i=e.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=e.div(r).toString();return e=1===r.length?o:o+"."+i,n&&(e="-"+e),e}function Vn(e,t){null==t&&(t=0);const r=Kn(t);"string"==typeof e&&e.match(/^-?[0-9.]+$/)||Dn.throwArgumentError("invalid decimal value","value",e);const n="-"===e.substring(0,1);n&&(e=e.substring(1)),"."===e&&Dn.throwArgumentError("missing value","value",e);const i=e.split(".");i.length>2&&Dn.throwArgumentError("too many decimal points","value",e);let o=i[0],s=i[1];for(o||(o="0"),s||(s="0");"0"===s[s.length-1];)s=s.substring(0,s.length-1);for(s.length>r.length-1&&Wn("fractional component exceeds decimals","underflow","parseFixed"),""===s&&(s="0");s.length<r.length-1;)s+="0";const a=xn.from(o),u=xn.from(s);let c=a.mul(r).add(u);return n&&(c=c.mul(Gn)),c}class qn{constructor(e,t,r,n){e!==Fn&&Dn.throwError("cannot use FixedFormat constructor; use FixedFormat.from",bn.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=n,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(n),this._multiplier=Kn(n),Object.freeze(this)}static from(e){if(e instanceof qn)return e;"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,r=128,n=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||Dn.throwArgumentError("invalid fixed format","format",e),t="u"!==i[1],r=parseInt(i[2]),n=parseInt(i[3])}else if(e){const i=(t,r,n)=>null==e[t]?n:(typeof e[t]!==r&&Dn.throwArgumentError("invalid fixed format ("+t+" not "+r+")","format."+t,e[t]),e[t]);t=i("signed","boolean",t),r=i("width","number",r),n=i("decimals","number",n)}return r%8&&Dn.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),n>80&&Dn.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new qn(Fn,t,r,n)}}class Jn{constructor(e,t,r,n){e!==Fn&&Dn.throwError("cannot use FixedNumber constructor; use FixedNumber.from",bn.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Dn.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Vn(this._value,this.format.decimals),r=Vn(e._value,e.format.decimals);return Jn.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Vn(this._value,this.format.decimals),r=Vn(e._value,e.format.decimals);return Jn.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Vn(this._value,this.format.decimals),r=Vn(e._value,e.format.decimals);return Jn.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Vn(this._value,this.format.decimals),r=Vn(e._value,e.format.decimals);return Jn.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=Jn.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(Xn.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=Jn.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(Xn.toFormat(t.format))),t}round(e){null==e&&(e=0);const t=this.toString().split(".");if(1===t.length&&t.push("0"),(e<0||e>80||e%1)&&Dn.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const r=Jn.from("1"+Hn.substring(0,e),this.format),n=Yn.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(n).floor().divUnsafe(r)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(e){return null==e?this._hex:(e%8&&Dn.throwArgumentError("invalid byte width","width",e),kn(xn.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString(),e/8))}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Jn.fromString(this._value,e)}static fromValue(e,t,r){return null!=r||null==t||function(e){return null!=e&&(xn.isBigNumber(e)||"number"==typeof e&&e%1==0||"string"==typeof e&&!!e.match(/^-?[0-9]+$/)||_n(e)||"bigint"==typeof e||Sn(e))}(t)||(r=t,t=null),null==t&&(t=0),null==r&&(r="fixed"),Jn.fromString(zn(e,t),qn.from(r))}static fromString(e,t){null==t&&(t="fixed");const r=qn.from(t),n=Vn(e,r.decimals);!r.signed&&n.lt(jn)&&Wn("unsigned value cannot be negative","overflow","value",e);let i=null;r.signed?i=n.toTwos(r.width).toHexString():(i=n.toHexString(),i=kn(i,r.width/8));const o=zn(n,r.decimals);return new Jn(Fn,i,o,r)}static fromBytes(e,t){null==t&&(t="fixed");const r=qn.from(t);if(function(e,t){if(t||(t={}),"number"==typeof e){vn.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),En(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),wn(e)&&(e=e.toHexString()),_n(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":vn.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return En(new Uint8Array(n))}return Sn(e)?En(new Uint8Array(e)):vn.throwArgumentError("invalid arrayify value","value",e)}(e).length>r.width/8)throw new Error("overflow");let n=xn.from(e);r.signed&&(n=n.fromTwos(r.width));const i=n.toTwos((r.signed?0:1)+r.width).toHexString(),o=zn(n,r.decimals);return new Jn(Fn,i,o,r)}static from(e,t){if("string"==typeof e)return Jn.fromString(e,t);if(Sn(e))return Jn.fromBytes(e,t);try{return Jn.fromValue(e,0,t)}catch(e){if(e.code!==bn.errors.INVALID_ARGUMENT)throw e}return Dn.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!(!e||!e._isFixedNumber)}}const Xn=Jn.from(1),Yn=Jn.from("0.5");let Qn=!1,$n=!1;const Zn={debug:1,default:2,info:2,warning:3,error:4,off:5};let ei=Zn.default,ti=null;const ri=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var ni,ii;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(ni||(ni={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(ii||(ii={}));const oi="0123456789abcdef";class si{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Zn[r]&&this.throwArgumentError("invalid log level name","logLevel",e),ei>Zn[r]||console.log.apply(console,t)}debug(...e){this._log(si.levels.DEBUG,e)}info(...e){this._log(si.levels.INFO,e)}warn(...e){this._log(si.levels.WARNING,e)}makeError(e,t,r){if($n)return this.makeError("censored error",t,{});t||(t=si.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=oi[t[e]>>4],r+=oi[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case ii.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case ii.CALL_EXCEPTION:case ii.INSUFFICIENT_FUNDS:case ii.MISSING_NEW:case ii.NONCE_EXPIRED:case ii.REPLACEMENT_UNDERPRICED:case ii.TRANSACTION_REPLACED:case ii.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,si.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),ri&&this.throwError("platform missing String.prototype.normalize",si.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:ri})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,si.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,si.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,si.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,si.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",si.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",si.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",si.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return ti||(ti=new si("logger/5.8.0")),ti}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",si.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Qn){if(!e)return;this.globalLogger().throwError("error censorship permanent",si.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}$n=!!e,Qn=!!t}static setLogLevel(e){const t=Zn[e.toLowerCase()];null!=t?ei=t:si.globalLogger().warn("invalid log level - "+e)}static from(e){return new si(e)}}si.errors=ii,si.levels=ni;function ai(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function ui(e){return t=this,r=void 0,i=function*(){const t=Object.keys(e).map(t=>{const r=e[t];return Promise.resolve(r).then(e=>({key:t,value:e}))});return(yield Promise.all(t)).reduce((e,t)=>(e[t.key]=t.value,e),{})},new((n=void 0)||(n=Promise))(function(e,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(s,a)}u((i=i.apply(t,r||[])).next())});var t,r,n,i}new si("properties/5.8.0");var ci=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const li=new si("abstract-signer/5.7.0"),hi=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],fi=[si.errors.INSUFFICIENT_FUNDS,si.errors.NONCE_EXPIRED,si.errors.REPLACEMENT_UNDERPRICED];class di{constructor(){li.checkAbstract(new.target,di),ai(this,"_isSigner",!0)}getBalance(e){return ci(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return ci(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return ci(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield ui(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return ci(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield ui(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return ci(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return ci(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return ci(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return ci(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return ci(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const t in e)-1===hi.indexOf(t)&&li.throwArgumentError("invalid transaction key: "+t,"transaction",e);const t=function(e){const t={};for(const r in e)t[r]=e[r];return t}(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&li.throwArgumentError("from address mismatch","transaction",e),t[0])),t}populateTransaction(e){return ci(this,void 0,void 0,function*(){const t=yield ui(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then(e=>ci(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&li.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})),t.to.catch(e=>{}));const r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!r?0!==t.type&&1!==t.type||!r||li.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):li.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(r&&li.throwError("network does not support EIP-1559",si.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):li.throwError("failed to get consistent fee data",si.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch(e=>{if(fi.indexOf(e.code)>=0)throw e;return li.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",si.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})})),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(t=>(0!==t[1]&&t[0]!==t[1]&&li.throwArgumentError("chainId address mismatch","transaction",e),t[0])),yield ui(t)})}_checkProvider(e){this.provider||li.throwError("missing provider",si.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}class pi extends di{constructor(e,t){super(),ai(this,"address",e),ai(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{li.throwError(e,si.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new pi(this.address,e)}}const gi="Ethereum Signed Message:\n";function mi(e){return"string"==typeof e&&(e=Te(e)),ae(y([Te(gi),Te(String(e.length)),e]))}const yi="hash/5.8.0";const bi=new c.Logger(yi),vi=new Uint8Array(32);vi.fill(0);const wi=D.from(-1),Ei=D.from(0),Ai=D.from(1),Si=D.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),_i=k(Ai.toHexString(),32),Ii=k(Ei.toHexString(),32),Ni={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},ki=["name","version","chainId","verifyingContract","salt"];function Pi(e){return function(t){return"string"!=typeof t&&bi.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Ti={name:Pi("name"),version:Pi("version"),chainId:function(e){try{return D.from(e).toString()}catch(e){}return bi.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return Ee(e).toLowerCase()}catch(e){}return bi.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=m(e);if(32!==t.length)throw new Error("bad length");return A(t)}catch(e){}return bi.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function Ri(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=""===t[1],n=parseInt(t[2]||"256");(n%8!=0||n>256||t[2]&&t[2]!==String(n))&&bi.throwArgumentError("invalid numeric width","type",e);const i=Si.mask(r?n-1:n),o=r?i.add(Ai).mul(wi):Ei;return function(t){const r=D.from(t);return(r.lt(o)||r.gt(i))&&bi.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),k(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(0===r||r>32||t[1]!==String(r))&&bi.throwArgumentError("invalid bytes width","type",e),function(t){return m(t).length!==r&&bi.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){const t=m(e),r=t.length%32;return r?I([t,vi.slice(r)]):A(t)}(t)}}}switch(e){case"address":return function(e){return k(Ee(e),32)};case"bool":return function(e){return e?_i:Ii};case"bytes":return function(e){return ae(e)};case"string":return function(e){return Oe(e)}}return null}function Oi(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}class Ci{constructor(e){K(this,"types",Object.freeze($(e))),K(this,"_encoderCache",{}),K(this,"_types",{});const t={},r={},n={};Object.keys(e).forEach(e=>{t[e]={},r[e]=[],n[e]={}});for(const n in e){const i={};e[n].forEach(o=>{i[o.name]&&bi.throwArgumentError(`duplicate variable name ${JSON.stringify(o.name)} in ${JSON.stringify(n)}`,"types",e),i[o.name]=!0;const s=o.type.match(/^([^\x5b]*)(\x5b|$)/)[1];s===n&&bi.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",e),Ri(s)||(r[s]||bi.throwArgumentError(`unknown type ${JSON.stringify(s)}`,"types",e),r[s].push(n),t[n][s]=!0)})}const i=Object.keys(r).filter(e=>0===r[e].length);0===i.length?bi.throwArgumentError("missing primary type","types",e):i.length>1&&bi.throwArgumentError(`ambiguous primary types or unused types: ${i.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),K(this,"primaryType",i[0]),function i(o,s){s[o]&&bi.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),s[o]=!0,Object.keys(t[o]).forEach(e=>{r[e]&&(i(e,s),Object.keys(s).forEach(t=>{n[t][e]=!0}))}),delete s[o]}(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort(),this._types[t]=Oi(t,e[t])+r.map(t=>Oi(t,e[t])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=Ri(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],r=this.getEncoder(e),n=parseInt(t[3]);return t=>{n>=0&&t.length!==n&&bi.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let i=t.map(r);return this._types[e]&&(i=i.map(ae)),ae(I(i))}}const r=this.types[e];if(r){const t=Oe(this._types[e]);return e=>{const n=r.map(({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);return this._types[r]?ae(n):n});return n.unshift(t),I(n)}}return bi.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||bi.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return ae(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Ri(e))return r(e,t);const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1],i=parseInt(n[3]);return i>=0&&t.length!==i&&bi.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(t=>this._visit(e,t,r))}const i=this.types[e];return i?i.reduce((e,{name:n,type:i})=>(e[n]=this._visit(i,t[n],r),e),{}):bi.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ci(e)}static getPrimaryType(e){return Ci.from(e).primaryType}static hashStruct(e,t,r){return Ci.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=Ni[r];n||bi.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort((e,t)=>ki.indexOf(e.name)-ki.indexOf(t.name)),Ci.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return I(["0x1901",Ci.hashDomain(e),Ci.from(t).hash(r)])}static hash(e,t,r){return ae(Ci.encode(e,t,r))}static resolveNames(e,t,r,n){return i=this,o=void 0,a=function*(){e=J(e);const i={};e.verifyingContract&&!w(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Ci.from(t);o.visit(r,(e,t)=>("address"!==e||w(t,20)||(i[t]="0x"),t));for(const e in i)i[e]=yield n(e);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(e,t)=>"address"===e&&i[t]?i[t]:t),{domain:e,value:r}},new((s=void 0)||(s=Promise))(function(e,t){function r(e){try{u(a.next(e))}catch(e){t(e)}}function n(e){try{u(a.throw(e))}catch(e){t(e)}}function u(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s(function(e){e(i)})).then(r,n)}u((a=a.apply(i,o||[])).next())});var i,o,s,a}static getPayload(e,t,r){Ci.hashDomain(e);const n={},i=[];ki.forEach(t=>{const r=e[t];null!=r&&(n[t]=Ti[t](r),i.push({name:t,type:Ni[t]}))});const o=Ci.from(t),s=J(t);return s.EIP712Domain?bi.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):s.EIP712Domain=i,o.encode(r),{types:s,domain:n,primaryType:o.primaryType,message:o.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return A(m(t));if(e.match(/^u?int/))return D.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!=typeof t&&bi.throwArgumentError("invalid string","value",t),t}return bi.throwArgumentError("unsupported type","type",e)})}}}class xi{constructor(e){K(this,"alphabet",e),K(this,"base",e.length),K(this,"_alphabetMap",{}),K(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=m(e);if(0===t.length)return"";let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e)n+=r[e]<<8,r[e]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let e=0;0===t[e]&&e<t.length-1;++e)n+=this._leader;for(let e=r.length-1;e>=0;--e)n+=this.alphabet[r[e]];return n}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let e=0;e<t.length;++e)i+=t[e]*this.base,t[e]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return m(new Uint8Array(t.reverse()))}}new xi("abcdefghijklmnopqrstuvwxyz234567");const Ui=new xi("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Mi;!function(e){e.sha256="sha256",e.sha512="sha512"}(Mi||(Mi={}));const Li=new c.Logger("sha2/5.8.0");function Bi(e){return"0x"+Gt().sha256().update(m(e)).digest("hex")}function Di(e,t,r){return Mi[e]||Li.throwError("unsupported algorithm "+e,c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Gt().hmac(Gt()[e],m(t)).update(m(r)).digest("hex")}function Fi(e,t,r,n,i){let o;e=m(e),t=m(t);let s=1;const a=new Uint8Array(n),u=new Uint8Array(t.length+4);let c,l;u.set(t);for(let h=1;h<=s;h++){u[t.length]=h>>24&255,u[t.length+1]=h>>16&255,u[t.length+2]=h>>8&255,u[t.length+3]=255&h;let f=m(Di(i,e,u));o||(o=f.length,l=new Uint8Array(o),s=Math.ceil(n/o),c=n-(s-1)*o),l.set(f);for(let t=1;t<r;t++){f=m(Di(i,e,f));for(let e=0;e<o;e++)l[e]^=f[e]}const d=(h-1)*o,p=h===s?c:o;a.set(m(l).slice(0,p),d)}return A(a)}const ji=new c.Logger("wordlists/5.8.0");class Gi{constructor(e){ji.checkAbstract(new.target,Gi),K(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return Oe(t.join("\n")+"\n")}static register(e,t){t||(t=e.locale)}}let Wi=null;function Hi(e){if(null==Wi&&(Wi="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==Gi.check(e)))throw Wi=null,new Error("BIP39 Wordlist for en (English) FAILED")}const Ki=new class extends Gi{constructor(){super("en")}getWord(e){return Hi(this),Wi[e]}getWordIndex(e){return Hi(this),Wi.indexOf(e)}};Gi.register(Ki);const zi={en:Ki},Vi=new c.Logger("hdnode/5.8.0"),qi=D.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ji=Te("Bitcoin seed"),Xi=2147483648;function Yi(e){return(1<<e)-1<<8-e}function Qi(e){return(1<<e)-1}function $i(e){return k(A(e),32)}function Zi(e){return Ui.encode(y([e,_(Bi(Bi(e)),0,4)]))}function eo(e){if(null==e)return zi.en;if("string"==typeof e){const t=zi[e];return null==t&&Vi.throwArgumentError("unknown locale","wordlist",e),t}return e}const to={},ro="m/44'/60'/0'/0/0";class no{constructor(e,t,r,n,i,o,s,a){if(e!==to)throw new Error("HDNode constructor cannot be called directly");if(t){const e=new kr(t);K(this,"privateKey",e.privateKey),K(this,"publicKey",e.compressedPublicKey)}else K(this,"privateKey",null),K(this,"publicKey",A(r));var u;K(this,"parentFingerprint",n),K(this,"fingerprint",_((u=Bi(this.publicKey),"0x"+Gt().ripemd160().update(m(u)).digest("hex")),0,4)),K(this,"address",Mr(this.publicKey)),K(this,"chainCode",i),K(this,"index",o),K(this,"depth",s),null==a?(K(this,"mnemonic",null),K(this,"path",null)):"string"==typeof a?(K(this,"mnemonic",null),K(this,"path",a)):(K(this,"mnemonic",a),K(this,"path",a.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return Zi(y([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",A(this.depth),this.parentFingerprint,k(A(this.index),4),this.chainCode,null!=this.privateKey?y(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new no(to,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(2147483647&e));const r=new Uint8Array(37);if(e&Xi){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(m(this.privateKey),1),t&&(t+="'")}else r.set(m(this.publicKey));for(let t=24;t>=0;t-=8)r[33+(t>>3)]=e>>24-t&255;const n=m(Di(Mi.sha512,this.chainCode,r)),i=n.slice(0,32),o=n.slice(32);let s=null,a=null;this.privateKey?s=$i(D.from(i).add(this.privateKey).mod(qi)):a=new kr(A(i))._addPoint(this.publicKey);let u=t;const c=this.mnemonic;return c&&(u=Object.freeze({phrase:c.phrase,path:t,locale:c.locale||"en"})),new no(to,s,a,this.fingerprint,$i(o),e,this.depth+1,u)}derivePath(e){const t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();let r=this;for(let e=0;e<t.length;e++){const n=t[e];if(n.match(/^[0-9]+'$/)){const e=parseInt(n.substring(0,n.length-1));if(e>=Xi)throw new Error("invalid path index - "+n);r=r._derive(Xi+e)}else{if(!n.match(/^[0-9]+$/))throw new Error("invalid path component - "+n);{const e=parseInt(n);if(e>=Xi)throw new Error("invalid path index - "+n);r=r._derive(e)}}}return r}static _fromSeed(e,t){const r=m(e);if(r.length<16||r.length>64)throw new Error("invalid seed");const n=m(Di(Mi.sha512,Ji,r));return new no(to,$i(n.slice(0,32)),null,"0x00000000",$i(n.slice(32)),0,0,t)}static fromMnemonic(e,t,r){return e=oo(io(e,r=eo(r)),r),no._fromSeed(function(e,t){t||(t="");const r=Te("mnemonic"+t,_e.NFKD);return Fi(Te(e,_e.NFKD),r,2048,64,"sha512")}(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return no._fromSeed(e,null)}static fromExtendedKey(e){const t=Ui.decode(e);82===t.length&&Zi(t.slice(0,78))===e||Vi.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=t[4],n=A(t.slice(5,9)),i=parseInt(A(t.slice(9,13)).substring(2),16),o=A(t.slice(13,45)),s=t.slice(45,78);switch(A(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new no(to,null,A(s),n,o,i,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==s[0])break;return new no(to,A(s.slice(1)),null,n,o,i,r,null)}return Vi.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function io(e,t){t=eo(t),Vi.checkNormalize();const r=t.split(e);if(r.length%3!=0)throw new Error("invalid mnemonic");const n=m(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let e=0;e<r.length;e++){let o=t.getWordIndex(r[e].normalize("NFKD"));if(-1===o)throw new Error("invalid mnemonic");for(let e=0;e<11;e++)o&1<<10-e&&(n[i>>3]|=1<<7-i%8),i++}const o=32*r.length/3,s=Yi(r.length/3);if((m(Bi(n.slice(0,o/8)))[0]&s)!==(n[n.length-1]&s))throw new Error("invalid checksum");return A(n.slice(0,o/8))}function oo(e,t){if(t=eo(t),(e=m(e)).length%4!=0||e.length<16||e.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let t=0;t<e.length;t++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[t],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[t]>>8-n,r.push(e[t]&Qi(8-n)),n+=3);const i=e.length/4,o=m(Bi(e))[0]&Yi(i);return r[r.length-1]<<=i,r[r.length-1]|=o>>8-i,t.join(r.map(e=>t.getWord(e)))}const so=new c.Logger("random/5.8.0"),ao=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();let uo=ao.crypto||ao.msCrypto;function co(e){(e<=0||e>1024||e%1||e!=e)&&so.throwArgumentError("invalid length","length",e);const t=new Uint8Array(e);return uo.getRandomValues(t),m(t)}uo&&uo.getRandomValues||(so.warn("WARNING: Missing strong random number source"),uo={getRandomValues:function(e){return so.throwError("no secure random source avaialble",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var lo=r(41183),ho=r.n(lo),fo=r(73432),po=r.n(fo);function go(e){return"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),m(e)}function mo(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function yo(e){return"string"==typeof e?Te(e,_e.NFKC):m(e)}function bo(e,t){let r=e;const n=t.toLowerCase().split("/");for(let e=0;e<n.length;e++){let t=null;for(const i in r)if(i.toLowerCase()===n[e]){t=r[i];break}if(null===t)return null;r=t}return r}function vo(e){const t=m(e);t[6]=15&t[6]|64,t[8]=63&t[8]|128;const r=A(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const wo="json-wallets/5.8.0";const Eo=new c.Logger(wo);function Ao(e){return null!=e&&e.mnemonic&&e.mnemonic.phrase}class So extends Z{isKeystoreAccount(e){return!(!e||!e._isKeystoreAccount)}}function _o(e,t){const r=go(bo(e,"crypto/ciphertext"));if(A(ae(y([t.slice(16,32),r]))).substring(2)!==bo(e,"crypto/mac").toLowerCase())throw new Error("invalid password");const n=function(e,t,r){if("aes-128-ctr"===bo(e,"crypto/cipher")){const n=go(bo(e,"crypto/cipherparams/iv")),i=new(ho().Counter)(n);return m(new(ho().ModeOfOperation.ctr)(t,i).decrypt(r))}return null}(e,t.slice(0,16),r);n||Eo.throwError("unsupported cipher",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=t.slice(32,64),o=Mr(n);if(e.address){let t=e.address.toLowerCase();if("0x"!==t.substring(0,2)&&(t="0x"+t),Ee(t)!==o)throw new Error("address mismatch")}const s={_isKeystoreAccount:!0,address:o,privateKey:A(n)};if("0.1"===bo(e,"x-ethers/version")){const t=go(bo(e,"x-ethers/mnemonicCiphertext")),r=go(bo(e,"x-ethers/mnemonicCounter")),n=new(ho().Counter)(r),o=new(ho().ModeOfOperation.ctr)(i,n),a=bo(e,"x-ethers/path")||ro,u=bo(e,"x-ethers/locale")||"en",l=m(o.decrypt(t));try{const e=oo(l,u),t=no.fromMnemonic(e,null,u).derivePath(a);if(t.privateKey!=s.privateKey)throw new Error("mnemonic mismatch");s.mnemonic=t.mnemonic}catch(e){if(e.code!==c.Logger.errors.INVALID_ARGUMENT||"wordlist"!==e.argument)throw e}}return new So(s)}function Io(e,t,r,n,i){return m(Fi(e,t,r,n,i))}function No(e,t,r,n,i){return Promise.resolve(Io(e,t,r,n,i))}function ko(e,t,r,n,i){const o=yo(t),s=bo(e,"crypto/kdf");if(s&&"string"==typeof s){const t=function(e,t){return Eo.throwArgumentError("invalid key-derivation function parameters",e,t)};if("scrypt"===s.toLowerCase()){const r=go(bo(e,"crypto/kdfparams/salt")),a=parseInt(bo(e,"crypto/kdfparams/n")),u=parseInt(bo(e,"crypto/kdfparams/r")),c=parseInt(bo(e,"crypto/kdfparams/p"));a&&u&&c||t("kdf",s),a&a-1&&t("N",a);const l=parseInt(bo(e,"crypto/kdfparams/dklen"));return 32!==l&&t("dklen",l),n(o,r,a,u,c,64,i)}if("pbkdf2"===s.toLowerCase()){const n=go(bo(e,"crypto/kdfparams/salt"));let i=null;const s=bo(e,"crypto/kdfparams/prf");"hmac-sha256"===s?i="sha256":"hmac-sha512"===s?i="sha512":t("prf",s);const a=parseInt(bo(e,"crypto/kdfparams/c")),u=parseInt(bo(e,"crypto/kdfparams/dklen"));return 32!==u&&t("dklen",u),r(o,n,a,u,i)}}return Eo.throwArgumentError("unsupported key-derivation function","kdf",s)}const Po=new c.Logger(wo);class To extends Z{isCrowdsaleAccount(e){return!(!e||!e._isCrowdsaleAccount)}}function Ro(e,t){const r=JSON.parse(e);t=yo(t);const n=Ee(bo(r,"ethaddr")),i=go(bo(r,"encseed"));i&&i.length%16==0||Po.throwArgumentError("invalid encseed","json",e);const o=m(Fi(t,t,2e3,32,"sha256")).slice(0,16),s=i.slice(0,16),a=i.slice(16),u=new(ho().ModeOfOperation.cbc)(o,s),c=ho().padding.pkcs7.strip(m(u.decrypt(a)));let l="";for(let e=0;e<c.length;e++)l+=String.fromCharCode(c[e]);const h=ae(Te(l));return new To({_isCrowdsaleAccount:!0,address:n,privateKey:h})}function Oo(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return t.encseed&&t.ethaddr}function Co(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}function xo(e,t,r){if(Oo(e)){r&&r(0);const n=Ro(e,t);return r&&r(1),Promise.resolve(n)}return Co(e)?function(e,t,r){return n=this,i=void 0,s=function*(){const n=JSON.parse(e);return _o(n,yield ko(n,t,No,po().scrypt,r))},new((o=void 0)||(o=Promise))(function(e,t){function r(e){try{u(s.next(e))}catch(e){t(e)}}function a(e){try{u(s.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o(function(e){e(n)})).then(r,a)}u((s=s.apply(n,i||[])).next())});var n,i,o,s}(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}var Uo=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const Mo=new c.Logger("wallet/5.7.0");class Lo extends Dt{constructor(e,t){if(super(),null!=(r=e)&&w(r.privateKey,32)&&null!=r.address){const t=new kr(e.privateKey);if(K(this,"_signingKey",()=>t),K(this,"address",Mr(this.publicKey)),this.address!==Ee(e.address)&&Mo.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(e){const t=e.mnemonic;return t&&t.phrase}(e)){const t=e.mnemonic;K(this,"_mnemonic",()=>({phrase:t.phrase,path:t.path||ro,locale:t.locale||"en"}));const r=this.mnemonic;Mr(no.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path).privateKey)!==this.address&&Mo.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else K(this,"_mnemonic",()=>null)}else{if(kr.isSigningKey(e))"secp256k1"!==e.curve&&Mo.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),K(this,"_signingKey",()=>e);else{"string"==typeof e&&e.match(/^[0-9a-f]*$/i)&&64===e.length&&(e="0x"+e);const t=new kr(e);K(this,"_signingKey",()=>t)}K(this,"_mnemonic",()=>null),K(this,"address",Mr(this.publicKey))}var r;t&&!xt.isProvider(t)&&Mo.throwArgumentError("invalid provider","provider",t),K(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Lo(this,e)}signTransaction(e){return V(e).then(t=>{null!=t.from&&(Ee(t.from)!==this.address&&Mo.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const r=this._signingKey().signDigest(ae(Hr(t)));return Hr(t,r)})}signMessage(e){return Uo(this,void 0,void 0,function*(){return T(this._signingKey().signDigest(mi(e)))})}_signTypedData(e,t,r){return Uo(this,void 0,void 0,function*(){const n=yield Ci.resolveNames(e,t,r,e=>(null==this.provider&&Mo.throwError("cannot resolve ENS names without a provider",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:e}),this.provider.resolveName(e)));return T(this._signingKey().signDigest(Ci.hash(n.domain,t,n.value)))})}encrypt(e,t,r){if("function"!=typeof t||r||(r=t,t={}),r&&"function"!=typeof r)throw new Error("invalid callback");return t||(t={}),function(e,t,r,n){try{if(Ee(e.address)!==Mr(e.privateKey))throw new Error("address/privateKey mismatch");if(Ao(e)){const t=e.mnemonic;if(no.fromMnemonic(t.phrase,null,t.locale).derivePath(t.path||ro).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(e){return Promise.reject(e)}"function"!=typeof r||n||(n=r,r={}),r||(r={});const i=m(e.privateKey),o=yo(t);let s=null,a=null,u=null;if(Ao(e)){const t=e.mnemonic;s=m(io(t.phrase,t.locale||"en")),a=t.path||ro,u=t.locale||"en"}let c=r.client;c||(c="ethers.js");let l=null;l=r.salt?m(r.salt):co(32);let h=null;if(r.iv){if(h=m(r.iv),16!==h.length)throw new Error("invalid iv")}else h=co(16);let f=null;if(r.uuid){if(f=m(r.uuid),16!==f.length)throw new Error("invalid uuid")}else f=co(16);let d=1<<17,p=8,g=1;return r.scrypt&&(r.scrypt.N&&(d=r.scrypt.N),r.scrypt.r&&(p=r.scrypt.r),r.scrypt.p&&(g=r.scrypt.p)),po().scrypt(o,l,d,p,g,64,n).then(t=>{const r=(t=m(t)).slice(0,16),n=t.slice(16,32),o=t.slice(32,64),b=new(ho().Counter)(h),v=m(new(ho().ModeOfOperation.ctr)(r,b).encrypt(i)),w=ae(y([n,v])),E={address:e.address.substring(2).toLowerCase(),id:vo(f),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:A(h).substring(2)},ciphertext:A(v).substring(2),kdf:"scrypt",kdfparams:{salt:A(l).substring(2),n:d,dklen:32,p:g,r:p},mac:w.substring(2)}};if(s){const e=co(16),t=new(ho().Counter)(e),r=m(new(ho().ModeOfOperation.ctr)(o,t).encrypt(s)),n=new Date,i=n.getUTCFullYear()+"-"+mo(n.getUTCMonth()+1,2)+"-"+mo(n.getUTCDate(),2)+"T"+mo(n.getUTCHours(),2)+"-"+mo(n.getUTCMinutes(),2)+"-"+mo(n.getUTCSeconds(),2)+".0Z";E["x-ethers"]={client:c,gethFilename:"UTC--"+i+"--"+E.address,mnemonicCounter:A(e).substring(2),mnemonicCiphertext:A(r).substring(2),path:a,locale:u,version:"0.1"}}return JSON.stringify(E)})}(this,e,t,r)}static createRandom(e){let t=co(16);e||(e={}),e.extraEntropy&&(t=m(_(ae(y([t,e.extraEntropy])),0,16)));const r=oo(t,e.locale);return Lo.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return xo(e,t,r).then(e=>new Lo(e))}static fromEncryptedJsonSync(e,t){return new Lo(function(e,t){if(Oo(e))return Ro(e,t);if(Co(e))return function(e,t){const r=JSON.parse(e);return _o(r,ko(r,t,Io,po().syncScrypt))}(e,t);throw new Error("invalid JSON wallet")}(e,t))}static fromMnemonic(e,t,r){return t||(t=ro),new Lo(no.fromMnemonic(e,null,r).derivePath(t))}}function Bo(e,t){return Lr(mi(e),t)}function Do(e,t,r,n){return Lr(Ci.hash(e,t,r),n)}const Fo="0x0000000000000000000000000000000000000000";let jo=!1,Go=!1;const Wo={debug:1,default:2,info:2,warning:3,error:4,off:5};let Ho=Wo.default,Ko=null;const zo=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Vo,qo;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Vo||(Vo={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(qo||(qo={}));const Jo="0123456789abcdef";class Xo{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Wo[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Ho>Wo[r]||console.log.apply(console,t)}debug(...e){this._log(Xo.levels.DEBUG,e)}info(...e){this._log(Xo.levels.INFO,e)}warn(...e){this._log(Xo.levels.WARNING,e)}makeError(e,t,r){if(Go)return this.makeError("censored error",t,{});t||(t=Xo.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Jo[t[e]>>4],r+=Jo[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case qo.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case qo.CALL_EXCEPTION:case qo.INSUFFICIENT_FUNDS:case qo.MISSING_NEW:case qo.NONCE_EXPIRED:case qo.REPLACEMENT_UNDERPRICED:case qo.TRANSACTION_REPLACED:case qo.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Xo.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),zo&&this.throwError("platform missing String.prototype.normalize",Xo.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:zo})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Xo.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Xo.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Xo.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Xo.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Xo.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Xo.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Xo.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Ko||(Ko=new Xo("logger/5.8.0")),Ko}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Xo.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),jo){if(!e)return;this.globalLogger().throwError("error censorship permanent",Xo.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Go=!!e,jo=!!t}static setLogLevel(e){const t=Wo[e.toLowerCase()];null!=t?Ho=t:Xo.globalLogger().warn("invalid log level - "+e)}static from(e){return new Xo(e)}}Xo.errors=qo,Xo.levels=Vo;const Yo=new Xo("bytes/5.8.0");function Qo(e){return"number"==typeof e&&e==e&&e%1==0}function $o(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Qo(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Qo(r)||r<0||r>=256)return!1}return!0}function Zo(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const es="0123456789abcdef";var ts=O().BN;const rs=new Xo("bignumber/5.8.0"),ns={};let is=!1;class os{constructor(e,t){e!==ns&&rs.throwError("cannot call constructor directly; use BigNumber.from",Xo.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return as(us(this).fromTwos(e))}toTwos(e){return as(us(this).toTwos(e))}abs(){return"-"===this._hex[0]?os.from(this._hex.substring(1)):this}add(e){return as(us(this).add(us(e)))}sub(e){return as(us(this).sub(us(e)))}div(e){return os.from(e).isZero()&&cs("division-by-zero","div"),as(us(this).div(us(e)))}mul(e){return as(us(this).mul(us(e)))}mod(e){const t=us(e);return t.isNeg()&&cs("division-by-zero","mod"),as(us(this).umod(t))}pow(e){const t=us(e);return t.isNeg()&&cs("negative-power","pow"),as(us(this).pow(t))}and(e){const t=us(e);return(this.isNegative()||t.isNeg())&&cs("unbound-bitwise-result","and"),as(us(this).and(t))}or(e){const t=us(e);return(this.isNegative()||t.isNeg())&&cs("unbound-bitwise-result","or"),as(us(this).or(t))}xor(e){const t=us(e);return(this.isNegative()||t.isNeg())&&cs("unbound-bitwise-result","xor"),as(us(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&cs("negative-width","mask"),as(us(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&cs("negative-width","shl"),as(us(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&cs("negative-width","shr"),as(us(this).shrn(e))}eq(e){return us(this).eq(us(e))}lt(e){return us(this).lt(us(e))}lte(e){return us(this).lte(us(e))}gt(e){return us(this).gt(us(e))}gte(e){return us(this).gte(us(e))}isNegative(){return"-"===this._hex[0]}isZero(){return us(this).isZero()}toNumber(){try{return us(this).toNumber()}catch(e){cs("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return rs.throwError("this platform does not support BigInt",Xo.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?is||(is=!0,rs.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?rs.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Xo.errors.UNEXPECTED_ARGUMENT,{}):rs.throwError("BigNumber.toString does not accept parameters",Xo.errors.UNEXPECTED_ARGUMENT,{})),us(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof os)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new os(ns,ss(e)):e.match(/^-?[0-9]+$/)?new os(ns,ss(new ts(e))):rs.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&cs("underflow","BigNumber.from",e),(e>=9007199254740991||e<=-9007199254740991)&&cs("overflow","BigNumber.from",e),os.from(String(e));const t=e;if("bigint"==typeof t)return os.from(t.toString());if($o(t))return os.from(function(e,t){if(t||(t={}),"number"==typeof e){Yo.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=es[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e))return e.toHexString();if(Zo(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Yo.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if($o(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=es[(240&n)>>4]+es[15&n]}return t}return Yo.throwArgumentError("invalid hexlify value","value",e)}(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return os.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(Zo(e)||"-"===e[0]&&Zo(e.substring(1))))return os.from(e)}return rs.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function ss(e){if("string"!=typeof e)return ss(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&rs.throwArgumentError("invalid hex","value",e),"0x00"===(e=ss(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function as(e){return os.from(ss(e))}function us(e){const t=os.from(e).toHexString();return"-"===t[0]?new ts("-"+t.substring(3),16):new ts(t.substring(2),16)}function cs(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),rs.throwError(e,Xo.errors.NUMERIC_FAULT,n)}const ls=os.from(-1),hs=os.from(0),fs=os.from(1),ds=os.from(2),ps=os.from("1000000000000000000"),gs=os.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ms=os.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),ys=os.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),bs="0x0000000000000000000000000000000000000000000000000000000000000000",vs="",ws=new c.Logger("networks/5.8.0");function Es(e){const t=function(t,r){null==r&&(r={});const n=[];if(t.InfuraProvider&&"-"!==r.infura)try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}if(t.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}if(t.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}if(t.PocketProvider&&"-"!==r.pocket){const i=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(e,r.pocket);o.network&&-1===i.indexOf(o.network.name)&&n.push(o)}catch(e){}}if(t.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new t.CloudflareProvider(e))}catch(e){}if(t.AnkrProvider&&"-"!==r.ankr)try{const i=["ropsten"],o=new t.AnkrProvider(e,r.ankr);o.network&&-1===i.indexOf(o.network.name)&&n.push(o)}catch(e){}if(t.QuickNodeProvider&&"-"!==r.quicknode)try{n.push(new t.QuickNodeProvider(e,r.quicknode))}catch(e){}if(0===n.length)return null;if(t.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===e&&(i=2),new t.FallbackProvider(n,i)}return n[0]};return t.renetwork=function(e){return Es(e)},t}function As(e,t){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return As(e,t)},r}const Ss={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Es("homestead")},_s={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Es("ropsten")},Is={chainId:63,name:"classicMordor",_defaultProvider:As("https://www.ethercluster.com/mordor","classicMordor")},Ns={unspecified:{chainId:0,name:"unspecified"},homestead:Ss,mainnet:Ss,morden:{chainId:2,name:"morden"},ropsten:_s,testnet:_s,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Es("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Es("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Es("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:Es("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:Es("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:As("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Is,classicTestnet:Is,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:As("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Es("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:Es("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:Es("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function ks(e){if(null==e)return null;if("number"==typeof e){for(const t in Ns){const r=Ns[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){const t=Ns[e];return null==t?null:{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=Ns[e.name];if(!t)return"number"!=typeof e.chainId&&ws.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==t.chainId&&ws.throwArgumentError("network chainId mismatch","network",e);let r=e._defaultProvider||null;var n;return null==r&&t._defaultProvider&&(r=(n=t._defaultProvider)&&"function"==typeof n.renetwork?t._defaultProvider.renetwork(e):t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}function Ps(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return m(t)}function Ts(e){e=m(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function Rs(e,t){null==t&&(t=1);const r=[],n=r.forEach,i=function(e,t){n.call(e,function(e){t>0&&Array.isArray(e)?i(e,t-1):r.push(e)})};return i(e,t),r}function Os(e){return 1&e?~e>>1:e>>1}function Cs(e,t){let r=Array(e);for(let n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function xs(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=Os(t());return r}function Us(e,t){let r=Cs(e(),e),n=e(),i=Cs(n,e),o=function(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}(n,e);for(let e=0;e<n;e++)for(let t=0;t<o[e];t++)r.push(i[e]+t);return t?r.map(e=>t[e]):r}function Ms(e,t,r){let n=Array(e).fill(void 0).map(()=>[]);for(let i=0;i<t;i++)xs(e,r).forEach((e,t)=>n[t].push(e));return n}function Ls(e,t){let r=1+t(),n=t(),i=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(r)}return t}(t);return Rs(Ms(i.length,1+e,t).map((e,t)=>{const o=e[0],s=e.slice(1);return Array(i[t]).fill(void 0).map((e,t)=>{let i=t*n;return[o+t*r,s.map(e=>e+i)]})}))}function Bs(e,t){return Ms(1+t(),1+e,t).map(e=>[e[0],e.slice(1)])}const Ds=function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,o=[0,1];for(let e=1;e<n;e++)o.push(i+=r());let s=r(),a=t;t+=s;let u=0,c=0;function l(){return 0==u&&(c=c<<8|e[t++],u=8),c>>--u&1}const h=Math.pow(2,31),f=h>>>1,d=f>>1,p=h-1;let g=0;for(let e=0;e<31;e++)g=g<<1|l();let m=[],y=0,b=h;for(;;){let e=Math.floor(((g-y+1)*i-1)/b),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<o[n]?r=n:t=n}if(0==t)break;m.push(t);let s=y+Math.floor(b*o[t]/i),a=y+Math.floor(b*o[t+1]/i)-1;for(;0==((s^a)&f);)g=g<<1&p|l(),s=s<<1&p,a=a<<1&p|1;for(;s&~a&d;)g=g&f|g<<1&p>>>1|l(),s=s<<1^f,a=(a^f)<<1|f|1;y=s,b=1+a-s}let v=n-4;return m.map(t=>{switch(t-v){case 3:return v+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return v+256+(e[a++]<<8|e[a++]);case 1:return v+e[a++];default:return t-1}})}(Ps("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))),Fs=new Set(Us(Ds)),js=new Set(Us(Ds)),Gs=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(Ls(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(Bs(r,e))}return function(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}(Rs(t))}(Ds),Ws=function(e){let t=Us(e).sort((e,t)=>e-t);return function r(){let n=[];for(;;){let i=Us(e,t);if(0==i.length)break;n.push({set:new Set(i),node:r()})}n.sort((e,t)=>t.set.size-e.set.size);let i=e(),o=i%3;i=i/3|0;let s=!!(1&i);return i>>=1,{branches:n,valid:o,fe0f:s,save:1==i,check:2==i}}()}(Ds);function Hs(e){return function(e,t=_e.current){return Pe(Te(e,t))}(e)}function Ks(e){return e.filter(e=>65039!=e)}function zs(e){for(let t of e.split(".")){let e=Hs(t);try{for(let t=e.lastIndexOf(95)-1;t>=0;t--)if(95!==e[t])throw new Error("underscore only allowed at start");if(e.length>=4&&e.every(e=>e<128)&&45===e[2]&&45===e[3])throw new Error("invalid label extension")}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function Vs(e,t){var r;let n,i,o=Ws,s=[],a=e.length;for(t&&(t.length=0);a;){let u=e[--a];if(o=null===(r=o.branches.find(e=>e.set.has(u)))||void 0===r?void 0:r.node,!o)break;if(o.save)i=u;else if(o.check&&u===i)break;s.push(u),o.fe0f&&(s.push(65039),a>0&&65039==e[a-1]&&a--),o.valid&&(n=s.slice(),2==o.valid&&n.splice(1,1),t&&t.push(...e.slice(a).reverse()),e.length=a)}return n}const qs=new c.Logger(yi),Js=new Uint8Array(32);function Xs(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function Ys(e){const t=Te(function(e){return zs(function(e,t){let r=Hs(e).reverse(),n=[];for(;r.length;){let e=Vs(r);if(e){n.push(...t(e));continue}let i=r.pop();if(Fs.has(i)){n.push(i);continue}if(js.has(i))continue;let o=Gs[i];if(!o)throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`);n.push(...o)}return zs(String.fromCodePoint(...n).normalize("NFC"))}(e,Ks))}(e)),r=[];if(0===e.length)return r;let n=0;for(let e=0;e<t.length;e++)46===t[e]&&(r.push(Xs(t.slice(n,e))),n=e+1);if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(Xs(t.slice(n))),r}function Qs(e){"string"!=typeof e&&qs.throwArgumentError("invalid ENS name; not a string","name",e);let t=Js;const r=Ys(e);for(;r.length;)t=ae(y([t,ae(r.pop())]));return A(t)}Js.fill(0);function $s(e,t){return r=this,n=void 0,o=function*(){null==t&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),null!=t.fetchOptions){const e=t.fetchOptions;e.mode&&(r.mode=e.mode),e.cache&&(r.cache=e.cache),e.credentials&&(r.credentials=e.credentials),e.redirect&&(r.redirect=e.redirect),e.referrer&&(r.referrer=e.referrer)}const n=yield fetch(e,r),i=yield n.arrayBuffer(),o={};return n.headers.forEach?n.headers.forEach((e,t)=>{o[t.toLowerCase()]=e}):n.headers.keys().forEach(e=>{o[e.toLowerCase()]=n.headers.get(e)}),{headers:o,statusCode:n.status,statusMessage:n.statusText,body:m(new Uint8Array(i))}},new((i=void 0)||(i=Promise))(function(e,t){function s(e){try{u(o.next(e))}catch(e){t(e)}}function a(e){try{u(o.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i(function(e){e(r)})).then(s,a)}u((o=o.apply(r,n||[])).next())});var r,n,i,o}const Zs=new c.Logger("web/5.8.0");function ea(e){return new Promise(t=>{setTimeout(t,e)})}function ta(e,t){if(null==e)return null;if("string"==typeof e)return e;if(d(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return Re(e)}catch(e){}return A(e)}return e}function ra(e,t,r){let n=null;if(null!=t){n=Te(t);const r="string"==typeof e?{url:e}:J(e);r.headers?0!==Object.keys(r.headers).filter(e=>"content-type"===e.toLowerCase()).length||(r.headers=J(r.headers),r.headers["content-type"]="application/json"):r.headers={"content-type":"application/json"},e=r}return function(e,t,r){const n="object"==typeof e&&null!=e.throttleLimit?e.throttleLimit:12;Zs.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"==typeof e?e.throttleCallback:null,o="object"==typeof e&&"number"==typeof e.throttleSlotInterval?e.throttleSlotInterval:100;Zs.assertArgument(o>0&&o%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const s="object"==typeof e&&!!e.errorPassThrough,a={};let u=null;const l={method:"GET"};let h=!1,f=12e4;if("string"==typeof e)u=e;else if("object"==typeof e){if(null!=e&&null!=e.url||Zs.throwArgumentError("missing URL","connection.url",e),u=e.url,"number"==typeof e.timeout&&e.timeout>0&&(f=e.timeout),e.headers)for(const t in e.headers)a[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(h=!0);if(l.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==u.substring(0,6)&&!0!==e.allowInsecureAuthentication&&Zs.throwError("basic authentication requires a secure https url",c.Logger.errors.INVALID_ARGUMENT,{argument:"url",url:u,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;a.authorization={key:"Authorization",value:"Basic "+Ts(Te(t))}}null!=e.skipFetchSetup&&(l.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(l.fetchOptions=J(e.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),p=u?u.match(d):null;if(p)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":p[1]||"text/plain"},body:p[2]?Ps(p[3]):(g=p[3],Te(g.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16)))))};let t=e.body;return r&&(t=r(e.body,e)),Promise.resolve(t)}catch(e){Zs.throwError("processing response error",c.Logger.errors.SERVER_ERROR,{body:ta(p[1],p[2]),error:e,requestBody:null,requestMethod:"GET",url:u})}var g;t&&(l.method="POST",l.body=t,null==a["content-type"]&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==a["content-length"]&&(a["content-length"]={key:"Content-Length",value:String(t.length)}));const m={};Object.keys(a).forEach(e=>{const t=a[e];m[t.key]=t.value}),l.headers=m;const y=function(){let e=null;return{promise:new Promise(function(t,r){f&&(e=setTimeout(()=>{null!=e&&(e=null,r(Zs.makeError("timeout",c.Logger.errors.TIMEOUT,{requestBody:ta(l.body,m["content-type"]),requestMethod:l.method,timeout:f,url:u})))},f))}),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),b=function(){return e=this,t=void 0,f=function*(){for(let e=0;e<n;e++){let t=null;try{if(t=yield $s(u,l),e<n)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===l.method&&e.match(/^https:/)){u=t.headers.location;continue}}else if(429===t.statusCode){let r=!0;if(i&&(r=yield i(e,u)),r){let r=0;const n=t.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):o*parseInt(String(Math.random()*Math.pow(2,e))),yield ea(r);continue}}}catch(e){t=e.response,null==t&&(y.cancel(),Zs.throwError("missing response",c.Logger.errors.SERVER_ERROR,{requestBody:ta(l.body,m["content-type"]),requestMethod:l.method,serverError:e,url:u}))}let a=t.body;if(h&&304===t.statusCode?a=null:!s&&(t.statusCode<200||t.statusCode>=300)&&(y.cancel(),Zs.throwError("bad response",c.Logger.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:ta(a,t.headers?t.headers["content-type"]:null),requestBody:ta(l.body,m["content-type"]),requestMethod:l.method,url:u})),r)try{const e=yield r(a,t);return y.cancel(),e}catch(r){if(r.throttleRetry&&e<n){let t=!0;if(i&&(t=yield i(e,u)),t){const t=o*parseInt(String(Math.random()*Math.pow(2,e)));yield ea(t);continue}}y.cancel(),Zs.throwError("processing response error",c.Logger.errors.SERVER_ERROR,{body:ta(a,t.headers?t.headers["content-type"]:null),error:r,requestBody:ta(l.body,m["content-type"]),requestMethod:l.method,url:u})}return y.cancel(),a}return Zs.throwError("failed response",c.Logger.errors.SERVER_ERROR,{requestBody:ta(l.body,m["content-type"]),requestMethod:l.method,url:u})},new((a=void 0)||(a=Promise))(function(r,n){function i(e){try{s(f.next(e))}catch(e){n(e)}}function o(e){try{s(f.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(i,o)}s((f=f.apply(e,t||[])).next())});var e,t,a,f}();return Promise.race([y.promise,b])}(e,n,(e,t)=>{let n=null;if(null!=e)try{n=JSON.parse(Re(e))}catch(t){Zs.throwError("invalid JSON",c.Logger.errors.SERVER_ERROR,{body:e,error:t})}return r&&(n=r(n,t)),n})}function na(e,t){return t||(t={}),null==(t=J(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise(function(r,n){let i=null,o=!1;const s=()=>!o&&(o=!0,i&&clearTimeout(i),!0);t.timeout&&(i=setTimeout(()=>{s()&&n(new Error("timeout"))},t.timeout));const a=t.retryLimit;let u=0;!function i(){return e().then(function(e){if(void 0!==e)s()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",i);else if(t.onceBlock)t.onceBlock.once("block",i);else if(!o){if(u++,u>a)return void(s()&&n(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,u)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(i,e)}return null},function(e){s()&&n(e)})}()})}var ia=r(68993),oa=r.n(ia);const sa="providers/5.7.2",aa=new c.Logger(sa);class ua{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),o=this.hash.bind(this),s=this.hex.bind(this),a=this.number.bind(this),u=this.type.bind(this);return e.transaction={hash:o,type:u,accessList:ua.allowNull(this.accessList.bind(this),null),blockHash:ua.allowNull(o,null),blockNumber:ua.allowNull(a,null),transactionIndex:ua.allowNull(a,null),confirmations:ua.allowNull(a,null),from:t,gasPrice:ua.allowNull(r),maxPriorityFeePerGas:ua.allowNull(r),maxFeePerGas:ua.allowNull(r),gasLimit:r,to:ua.allowNull(t,null),value:r,nonce:a,data:i,r:ua.allowNull(this.uint256),s:ua.allowNull(this.uint256),v:ua.allowNull(a),creates:ua.allowNull(t,null),raw:ua.allowNull(i)},e.transactionRequest={from:ua.allowNull(t),nonce:ua.allowNull(a),gasLimit:ua.allowNull(r),gasPrice:ua.allowNull(r),maxPriorityFeePerGas:ua.allowNull(r),maxFeePerGas:ua.allowNull(r),to:ua.allowNull(t),value:ua.allowNull(r),data:ua.allowNull(e=>this.data(e,!0)),type:ua.allowNull(a),accessList:ua.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:o,address:t,topics:ua.arrayOf(o),data:i,logIndex:a,blockHash:o},e.receipt={to:ua.allowNull(this.address,null),from:ua.allowNull(this.address,null),contractAddress:ua.allowNull(t,null),transactionIndex:a,root:ua.allowNull(s),gasUsed:r,logsBloom:ua.allowNull(i),blockHash:o,transactionHash:o,logs:ua.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:ua.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:ua.allowNull(r),status:ua.allowNull(a),type:u},e.block={hash:ua.allowNull(o),parentHash:o,number:a,timestamp:a,nonce:ua.allowNull(s),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:ua.allowNull(t),extraData:i,transactions:ua.allowNull(ua.arrayOf(o)),baseFeePerGas:ua.allowNull(r)},e.blockWithTransactions=J(e.block),e.blockWithTransactions.transactions=ua.allowNull(ua.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:ua.allowNull(n,void 0),toBlock:ua.allowNull(n,void 0),blockHash:ua.allowNull(o,void 0),address:ua.allowNull(t,void 0),topics:ua.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:ua.allowNull(a),blockHash:ua.allowNull(o),transactionIndex:a,removed:ua.allowNull(this.boolean.bind(this)),address:t,data:ua.allowFalsish(i,"0x"),topics:ua.arrayOf(o),transactionHash:o,logIndex:a},e}accessList(e){return Fr(e||[])}number(e){return"0x"===e?0:D.from(e).toNumber()}type(e){return"0x"===e||null==e?0:D.from(e).toNumber()}bigNumber(e){return D.from(e)}boolean(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),w(e))?e.toLowerCase():aa.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Ee(e)}callAddress(e){if(!w(e,32))return null;const t=Ee(_(e,12));return"0x0000000000000000000000000000000000000000"===t?null:t}contractAddress(e){return Ae(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"==typeof e||w(e))return N(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return 32!==S(r)?aa.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(null==e)return null;const t=D.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!w(e))throw new Error("invalid uint256");return k(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const r=null!=e._difficulty?e._difficulty:e.difficulty,n=ua.check(t,e);return n._difficulty=null==r?null:D.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return ua.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&D.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);const t=ua.check(this.formats.transaction,e);if(null!=e.chainId){let r=e.chainId;w(r)&&(r=D.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;null==r&&null==t.v&&(r=e.chainId),w(r)&&(r=D.from(r).toNumber()),"number"!=typeof r&&null!=t.v&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),t.chainId=r}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return function(e){const t=m(e);if(t[0]>127)return function(e){const t=ge(e);9!==t.length&&6!==t.length&&Tr.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:Cr(t[0]).toNumber(),gasPrice:Cr(t[1]),gasLimit:Cr(t[2]),to:Or(t[3]),value:Cr(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=D.from(t[6]).toNumber()}catch(e){return r}if(r.r=k(t[7],32),r.s=k(t[8],32),D.from(r.r).isZero()&&D.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=t.slice(0,6);0!==r.chainId&&(i.push(A(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const o=ae(fe(i));try{r.from=Lr(o,{r:A(r.r),s:A(r.s),recoveryParam:n})}catch(e){}r.hash=ae(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){const t=ge(e.slice(1));8!==t.length&&11!==t.length&&Tr.throwArgumentError("invalid component count for transaction type: 1","payload",A(e));const r={type:1,chainId:Cr(t[0]).toNumber(),nonce:Cr(t[1]).toNumber(),gasPrice:Cr(t[2]),gasLimit:Cr(t[3]),to:Or(t[4]),value:Cr(t[5]),data:t[6],accessList:Fr(t[7])};return 8===t.length||(r.hash=ae(e),Kr(r,t.slice(8),Wr)),r}(t);case 2:return function(e){const t=ge(e.slice(1));9!==t.length&&12!==t.length&&Tr.throwArgumentError("invalid component count for transaction type: 2","payload",A(e));const r=Cr(t[2]),n=Cr(t[3]),i={type:2,chainId:Cr(t[0]).toNumber(),nonce:Cr(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Cr(t[4]),to:Or(t[5]),value:Cr(t[6]),data:t[7],accessList:Fr(t[8])};return 9===t.length||(i.hash=ae(e),Kr(i,t.slice(9),Gr)),i}(t)}return Tr.throwError(`unsupported transaction type: ${t[0]}`,c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}(e)}receiptLog(e){return ua.check(this.formats.receiptLog,e)}receipt(e){const t=ua.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const e=D.from(t.root).toNumber();0===e||1===e?(null!=t.status&&t.status!==e&&aa.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=e,delete t.root):aa.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&aa.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(e=>this.topics(e)):null!=e?this.hash(e,!0):null}filter(e){return ua.check(this.formats.filter,e)}filterLog(e){return ua.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e)try{const i=e[n](t[n]);void 0!==i&&(r[n]=i)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r}static allowNull(e,t){return function(r){return null==r?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(t){r.push(e(t))}),r}}}function ca(e){return e&&"function"==typeof e.isCommunityResource}function la(e){return ca(e)&&e.isCommunityResource()}let ha=!1;function fa(){ha||(ha=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var da=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const pa=new c.Logger(sa);function ga(e){return null==e?"null":(32!==S(e)&&pa.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function ma(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map(e=>{if(Array.isArray(e)){const t={};e.forEach(e=>{t[ga(e)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}return ga(e)}).join("&")}function ya(e){if("string"==typeof e){if(32===S(e=e.toLowerCase()))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+ma(e);if(Ct.isForkEvent(e))throw pa.warn("not implemented"),new Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+ma(e.topics||[])}throw new Error("invalid event - "+e)}function ba(){return(new Date).getTime()}function va(e){return new Promise(t=>{setTimeout(t,e)})}const wa=["block","network","pending","poll"];class Ea{constructor(e,t,r){K(this,"tag",e),K(this,"listener",t),K(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],r=""===(n=e[2])?[]:n.split(/&/g).map(e=>{if(""===e)return[];const t=e.split("|").map(e=>"null"===e?null:e);return 1===t.length?t[0]:t});var n;const i={};return r.length>0&&(i.topics=r),t&&"*"!==t&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||wa.indexOf(this.tag)>=0}}const Aa={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Sa(e){return k(D.from(e).toHexString(),32)}function _a(e){return Ui.encode(y([e,_(Bi(Bi(e)),0,4)]))}const Ia=new RegExp("^(ipfs)://(.*)$","i"),Na=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Ia,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function ka(e,t){try{return Re(Pa(e,t))}catch(e){}return null}function Pa(e,t){if("0x"===e)return null;const r=D.from(_(e,t,t+32)).toNumber(),n=D.from(_(e,r,r+32)).toNumber();return _(e,r+32,r+32+n)}function Ta(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):pa.throwArgumentError("unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}function Ra(e){const t=m(e);if(t.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(t,32-t.length),r}function Oa(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function Ca(e){const t=[];let r=0;for(let n=0;n<e.length;n++)t.push(null),r+=32;for(let n=0;n<e.length;n++){const i=m(e[n]);t[n]=Ra(r),t.push(Ra(i.length)),t.push(Oa(i)),r+=32+32*Math.ceil(i.length/32)}return I(t)}class xa{constructor(e,t,r,n){K(this,"provider",e),K(this,"name",r),K(this,"address",e.formatter.address(t)),K(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>D.from(e).eq(1)).catch(e=>{if(e.code===c.Logger.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return da(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:I([e,Qs(this.name),t||"0x"])};let n=!1;var i;(yield this.supportsWildcard())&&(n=!0,r.data=I(["0x9061b923",Ca([(i=this.name,A(y(Ys(i).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"),r.data])]));try{let e=yield this.provider.call(r);return m(e).length%32==4&&pa.throwError("resolver threw error",c.Logger.errors.CALL_EXCEPTION,{transaction:r,data:e}),n&&(e=Pa(e,0)),e}catch(e){if(e.code===c.Logger.errors.CALL_EXCEPTION)return null;throw e}})}_fetchBytes(e,t){return da(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return null!=r?Pa(r,0):null})}_getAddress(e,t){const r=Aa[String(e)];if(null==r&&pa.throwError(`unsupported coin type: ${e}`,c.Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===r.ilk)return this.provider.formatter.address(t);const n=m(t);if(null!=r.p2pkh){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return _a(y([[r.p2pkh],"0x"+e[2]]))}}if(null!=r.p2sh){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return _a(y([[r.p2sh],"0x"+e[2]]))}}if(null!=r.prefix){const e=n[1];let t=n[0];if(0===t?20!==e&&32!==e&&(t=-1):t=-1,t>=0&&n.length===2+e&&e>=1&&e<=75){const e=oa().toWords(n.slice(2));return e.unshift(t),oa().encode(r.prefix,e)}}return null}getAddress(e){return da(this,void 0,void 0,function*(){if(null==e&&(e=60),60===e)try{const e=yield this._fetch("0x3b3b57de");return"0x"===e||"0x0000000000000000000000000000000000000000000000000000000000000000"===e?null:this.provider.formatter.callAddress(e)}catch(e){if(e.code===c.Logger.errors.CALL_EXCEPTION)return null;throw e}const t=yield this._fetchBytes("0xf1cb7e06",Sa(e));if(null==t||"0x"===t)return null;const r=this._getAddress(e,t);return null==r&&pa.throwError("invalid or unsupported coin data",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return da(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let r=0;r<Na.length;r++){const n=t.match(Na[r]);if(null==n)continue;const i=n[1].toLowerCase();switch(i){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Ta(t)};case"erc721":case"erc1155":{const r="erc721"===i?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:t});const o=this._resolvedAddress||(yield this.getAddress()),s=(n[2]||"").split("/");if(2!==s.length)return null;const a=yield this.provider.formatter.address(s[0]),u=k(D.from(s[1]).toHexString(),32);if("erc721"===i){const t=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:I(["0x6352211e",u])}));if(o!==t)return null;e.push({type:"owner",content:t})}else if("erc1155"===i){const t=D.from(yield this.provider.call({to:a,data:I(["0x00fdd58e",k(o,32),u])}));if(t.isZero())return null;e.push({type:"balance",content:t.toString()})}const c={to:this.provider.formatter.address(s[0]),data:I([r,u])};let l=ka(yield this.provider.call(c),0);if(null==l)return null;e.push({type:"metadata-url-base",content:l}),"erc1155"===i&&(l=l.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:l})),l.match(/^ipfs:/i)&&(l=Ta(l)),e.push({type:"metadata-url",content:l});const h=yield ra(l);if(!h)return null;e.push({type:"metadata",content:JSON.stringify(h)});let f=h.image;if("string"!=typeof f)return null;if(f.match(/^(https:\/\/|data:)/i));else{if(null==f.match(Ia))return null;e.push({type:"url-ipfs",content:f}),f=Ta(f)}return e.push({type:"url",content:f}),{linkage:e,url:f}}}}}catch(e){}return null})}getContentHash(){return da(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===2*e)return"ipfs://"+Ui.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===2*e)return"ipns://"+Ui.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://"+n[1];const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i&&68===i[1].length){const e={"=":"","+":"-","/":"_"};return"sia://"+Ts("0x"+i[1]).replace(/[=+\/]/g,t=>e[t])}return pa.throwError("invalid or unsupported content hash data",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return da(this,void 0,void 0,function*(){let t=Te(e);t=y([Sa(64),Sa(t.length),t]),t.length%32!=0&&(t=y([t,k("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",A(t));return null==r||"0x"===r?null:Re(r)})}}let Ua=null,Ma=1;class La extends xt{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),K(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(e=>{}),this._ready().catch(e=>{});else{const t=z(new.target,"getNetwork")(e);t?(K(this,"_network",t),this.emit("network",t,null)):pa.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return da(this,void 0,void 0,function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch(e){}null==e&&(e=yield this.detectNetwork()),e||pa.throwError("no network detected",c.Logger.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:K(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return na(()=>this._ready().then(e=>e,e=>{if(e.code!==c.Logger.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))}static getFormatter(){return null==Ua&&(Ua=new ua),Ua}static getNetwork(e){return ks(null==e?"homestead":e)}ccipReadFetch(e,t,r){return da(this,void 0,void 0,function*(){if(this.disableCcipRead||0===r.length)return null;const n=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let e=0;e<r.length;e++){const t=r[e],s=t.replace("{sender}",n).replace("{data}",i),a=t.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:n}),u=yield ra({url:s,errorPassThrough:!0},a,(e,t)=>(e.status=t.statusCode,e));if(u.data)return u.data;const l=u.message||"unknown error";if(u.status>=400&&u.status<500)return pa.throwError(`response not found during CCIP fetch: ${l}`,c.Logger.errors.SERVER_ERROR,{url:t,errorMessage:l});o.push(l)}return pa.throwError(`error encountered during CCIP fetch: ${o.map(e=>JSON.stringify(e)).join(", ")}`,c.Logger.errors.SERVER_ERROR,{urls:r,errorMessages:o})})}_getInternalBlockNumber(e){return da(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const t=this._internalBlockNumber;try{const r=yield t;if(ba()-r.respTime<=e)return r.blockNumber;break}catch(e){if(this._internalBlockNumber===t)break}}const t=ba(),r=V({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(e=>null,e=>e)}).then(({blockNumber:e,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const i=ba();return(e=D.from(e).toNumber())<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:t,respTime:i}});return this._internalBlockNumber=r,r.catch(e=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return da(this,void 0,void 0,function*(){const e=Ma++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){return void this.emit("error",e)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)pa.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",pa.makeError("network block skew detected",c.Logger.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let e=this._emitted.block+1;e<=r;e++)this.emit("block",e);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(e=>{if("block"===e)return;const t=this._emitted[e];"pending"!==t&&r-t>12&&delete this._emitted[e]})),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach(e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then(e=>e&&null!=e.blockNumber?(this._emitted["t:"+r]=e.blockNumber,this.emit(r,e),null):null).catch(e=>{this.emit("error",e)});t.push(n);break}case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=r-1);const n=e.filter;n.fromBlock=e._lastBlockNumber+1,n.toBlock=r;const i=n.toBlock-this._maxFilterBlockRange;i>n.fromBlock&&(n.fromBlock=i),n.fromBlock<0&&(n.fromBlock=0);const o=this.getLogs(n).then(t=>{e._inflight=!1,0!==t.length&&t.forEach(t=>{t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)})}).catch(t=>{this.emit("error",t),e._inflight=!1});t.push(o)}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(e=>{this.emit("error",e)})}else this.emit("didPoll",e)})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return da(this,void 0,void 0,function*(){return pa.throwError("provider does not support network detection",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return da(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield va(0),this._network;const r=pa.makeError("underlying network changed",c.Logger.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=ba();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=ba(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return da(this,void 0,void 0,function*(){return this._waitForTransaction(e,null==t?1:t,r||0,null)})}_waitForTransaction(e,t,r,n){return da(this,void 0,void 0,function*(){const i=yield this.getTransactionReceipt(e);return(i?i.confirmations:0)>=t?i:new Promise((i,o)=>{const s=[];let a=!1;const u=function(){return!!a||(a=!0,s.forEach(e=>{e()}),!1)},l=e=>{e.confirmations<t||u()||i(e)};if(this.on(e,l),s.push(()=>{this.removeListener(e,l)}),n){let r=n.startBlock,i=null;const l=s=>da(this,void 0,void 0,function*(){a||(yield va(1e3),this.getTransactionCount(n.from).then(h=>da(this,void 0,void 0,function*(){if(!a){if(h<=n.nonce)r=s;else{{const t=yield this.getTransaction(e);if(t&&null!=t.blockNumber)return}for(null==i&&(i=r-3,i<n.startBlock&&(i=n.startBlock));i<=s;){if(a)return;const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const s=r.transactions[i];if(s.hash===e)return;if(s.from===n.from&&s.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(s.hash,t);if(u())return;let i="replaced";return s.data===n.data&&s.to===n.to&&s.value.eq(n.value)?i="repriced":"0x"===s.data&&s.from===s.to&&s.value.isZero()&&(i="cancelled"),void o(pa.makeError("transaction was replaced",c.Logger.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(s),hash:e,receipt:r}))}}i++}}a||this.once("block",l)}}),e=>{a||this.once("block",l)}))});if(a)return;this.once("block",l),s.push(()=>{this.removeListener("block",l)})}if("number"==typeof r&&r>0){const e=setTimeout(()=>{u()||o(pa.makeError("timeout exceeded",c.Logger.errors.TIMEOUT,{timeout:r}))},r);e.unref&&e.unref(),s.push(()=>{clearTimeout(e)})}})})}getBlockNumber(){return da(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return da(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return D.from(e)}catch(t){return pa.throwError("bad result from backend",c.Logger.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return da(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield V({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return D.from(n)}catch(e){return pa.throwError("bad result from backend",c.Logger.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}})}getTransactionCount(e,t){return da(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield V({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return D.from(n).toNumber()}catch(e){return pa.throwError("bad result from backend",c.Logger.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}})}getCode(e,t){return da(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield V({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return A(n)}catch(e){return pa.throwError("bad result from backend",c.Logger.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}})}getStorageAt(e,t,r){return da(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield V({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(e=>N(e))}),i=yield this.perform("getStorageAt",n);try{return A(i)}catch(e){return pa.throwError("bad result from backend",c.Logger.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:e})}})}_wrapTransaction(e,t,r){if(null!=t&&32!==S(t))throw new Error("invalid response - sendTransaction");const n=e;return null!=t&&e.hash!==t&&pa.throwError("Transaction hash mismatch from Provider.sendTransaction.",c.Logger.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(t,n)=>da(this,void 0,void 0,function*(){let i;null==t&&(t=1),null==n&&(n=0),0!==t&&null!=r&&(i={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const o=yield this._waitForTransaction(e.hash,t,n,i);return null==o&&0===t?null:(this._emitted["t:"+e.hash]=o.blockNumber,0===o.status&&pa.throwError("transaction failed",c.Logger.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:o}),o)}),n}sendTransaction(e){return da(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(e=>A(e)),r=this.formatter.transaction(e);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){throw e.transaction=r,e.transactionHash=r.hash,e}})}_getTransactionRequest(e){return da(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?this._getAddress(e):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?D.from(e):null))}),["type"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>null!=e?e:null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?A(e):null))}),this.formatter.transactionRequest(yield V(r))})}_getFilter(e){return da(this,void 0,void 0,function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{null!=e[r]&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{null!=e[r]&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield V(t))})}_call(e,t,r){return da(this,void 0,void 0,function*(){r>=10&&pa.throwError("CCIP read exceeded maximum redirections",c.Logger.errors.SERVER_ERROR,{redirects:r,transaction:e});const n=e.to,i=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&"latest"===t&&null!=n&&"0x556f1830"===i.substring(0,10)&&S(i)%32==4)try{const o=_(i,4),s=_(o,0,32);D.from(s).eq(n)||pa.throwError("CCIP Read sender did not match",c.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const a=[],u=D.from(_(o,32,64)).toNumber(),l=D.from(_(o,u,u+32)).toNumber(),h=_(o,u+32);for(let t=0;t<l;t++){const r=ka(h,32*t);null==r&&pa.throwError("CCIP Read contained corrupt URL string",c.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),a.push(r)}const f=Pa(o,64);D.from(_(o,100,128)).isZero()||pa.throwError("CCIP Read callback selector included junk",c.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const d=_(o,96,100),p=Pa(o,128),g=yield this.ccipReadFetch(e,f,a);null==g&&pa.throwError("CCIP Read disabled or provided no URLs",c.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const m={to:n,data:I([d,Ca([g,p])])};return this._call(m,t,r+1)}catch(e){if(e.code===c.Logger.errors.SERVER_ERROR)throw e}try{return A(i)}catch(r){return pa.throwError("bad result from backend",c.Logger.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:i,error:r})}})}call(e,t){return da(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield V({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return da(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield V({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return D.from(r)}catch(e){return pa.throwError("bad result from backend",c.Logger.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}})}_getAddress(e){return da(this,void 0,void 0,function*(){"string"!=typeof(e=yield e)&&pa.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&pa.throwError("ENS name not configured",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return da(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(w(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),w(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(t){pa.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return na(()=>da(this,void 0,void 0,function*(){const e=yield this.perform("getBlock",n);if(null==e)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==t&&(t=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);return r.transactions=r.transactions.map(e=>this._wrapTransaction(e)),r}return this.formatter.block(e)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return da(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return na(()=>da(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return this._wrapTransaction(n)}),{oncePoll:this})})}getTransactionReceipt(e){return da(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return na(()=>da(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return n}),{oncePoll:this})})}getLogs(e){return da(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield V({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(e=>{null==e.removed&&(e.removed=!1)}),ua.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return da(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return da(this,void 0,void 0,function*(){if("number"==typeof(e=yield e)&&e<0){e%1&&pa.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return da(this,void 0,void 0,function*(){let t=e;for(;;){if(""===t||"."===t)return null;if("eth"!==e&&"eth"===t)return null;const r=yield this._getResolver(t,"getResolver");if(null!=r){const n=new xa(this,r,e);return t===e||(yield n.supportsWildcard())?n:null}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return da(this,void 0,void 0,function*(){null==t&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||pa.throwError("network does not support ENS",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Qs(e).substring(2)});return this.formatter.callAddress(t)}catch(e){}return null})}resolveName(e){return da(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(w(e))throw t}"string"!=typeof e&&pa.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return da(this,void 0,void 0,function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(null==r)return null;const n=ka(yield this.call({to:r,data:"0x691f3431"+Qs(t).substring(2)}),0);return(yield this.resolveName(n))!=e?null:n})}getAvatar(e){return da(this,void 0,void 0,function*(){let t=null;if(w(e)){const r=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"getAvatar");if(!n)return null;t=new xa(this,n,r);try{const e=yield t.getAvatar();if(e)return e.url}catch(e){if(e.code!==c.Logger.errors.CALL_EXCEPTION)throw e}try{const e=ka(yield this.call({to:n,data:"0x691f3431"+Qs(r).substring(2)}),0);t=yield this.getResolver(e)}catch(e){if(e.code!==c.Logger.errors.CALL_EXCEPTION)throw e;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return null==r?null:r.url})}perform(e,t){return pa.throwError(e+" not implemented",c.Logger.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_addEventListener(e,t,r){const n=new Ea(ya(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],i=ya(e);return this._events=this._events.filter(e=>e.tag!==i||(setTimeout(()=>{e.listener.apply(this,t)},0),r=!0,!e.once||(n.push(e),!1))),n.forEach(e=>{this._stopEvent(e)}),r}listenerCount(e){if(!e)return this._events.length;let t=ya(e);return this._events.filter(e=>e.tag===t).length}listeners(e){if(null==e)return this._events.map(e=>e.listener);let t=ya(e);return this._events.filter(e=>e.tag===t).map(e=>e.listener)}off(e,t){if(null==t)return this.removeAllListeners(e);const r=[];let n=!1,i=ya(e);return this._events=this._events.filter(e=>e.tag!==i||e.listener!=t||!!n||(n=!0,r.push(e),!1)),r.forEach(e=>{this._stopEvent(e)}),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const r=ya(e);this._events=this._events.filter(e=>e.tag!==r||(t.push(e),!1))}return t.forEach(e=>{this._stopEvent(e)}),this}}var Ba=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const Da=new c.Logger(sa),Fa=["call","estimateGas"];function ja(e,t){if(null==e)return null;if("string"==typeof e.message&&e.message.match("reverted")){const r=w(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"==typeof e){for(const r in e){const n=ja(e[r],t);if(n)return n}return null}if("string"==typeof e)try{return ja(JSON.parse(e),t)}catch(e){}return null}function Ga(e,t,r){const n=r.transaction||r.signedTransaction;if("call"===e){const e=ja(t,!0);if(e)return e.data;Da.throwError("missing revert data in call exception; Transaction reverted without a reason string",c.Logger.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if("estimateGas"===e){let r=ja(t.body,!1);null==r&&(r=ja(t,!1)),r&&Da.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",c.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}let i=t.message;throw t.code===c.Logger.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?i=t.error.message:"string"==typeof t.body?i=t.body:"string"==typeof t.responseText&&(i=t.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Da.throwError("insufficient funds for intrinsic transaction cost",c.Logger.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),i.match(/nonce (is )?too low/i)&&Da.throwError("nonce has already been used",c.Logger.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Da.throwError("replacement fee too low",c.Logger.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),i.match(/only replay-protected/i)&&Da.throwError("legacy pre-eip-155 transactions not supported",c.Logger.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),Fa.indexOf(e)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Da.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",c.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function Wa(e){return new Promise(function(t){setTimeout(t,e)})}function Ha(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function Ka(e){return e?e.toLowerCase():e}const za={};class Va extends Dt{constructor(e,t,r){if(super(),e!==za)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");K(this,"provider",t),null==r&&(r=0),"string"==typeof r?(K(this,"_address",this.provider.formatter.address(r)),K(this,"_index",null)):"number"==typeof r?(K(this,"_index",r),K(this,"_address",null)):Da.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return Da.throwError("cannot alter JSON-RPC Signer connection",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new qa(za,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Da.throwError("unknown account #"+this._index,c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=J(e);const t=this.getAddress().then(e=>(e&&(e=e.toLowerCase()),e));if(null==e.gasLimit){const r=J(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then(e=>Ba(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&Da.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))),V({tx:V(e),sender:t}).then(({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&Da.throwArgumentError("from address mismatch","transaction",e):t.from=r;const n=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then(e=>e,e=>("string"==typeof e.message&&e.message.match(/user denied/i)&&Da.throwError("user rejected transaction",c.Logger.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t}),Ga("sendTransaction",e,n)))})}signTransaction(e){return Da.throwError("signing transactions is unsupported",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Ba(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield na(()=>Ba(this,void 0,void 0,function*(){const e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}),{oncePoll:this.provider})}catch(e){throw e.transactionHash=r,e}})}signMessage(e){return Ba(this,void 0,void 0,function*(){const t="string"==typeof e?Te(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[A(t),r.toLowerCase()])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&Da.throwError("user rejected signing",c.Logger.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),t}})}_legacySignMessage(e){return Ba(this,void 0,void 0,function*(){const t="string"==typeof e?Te(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),A(t)])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&Da.throwError("user rejected signing",c.Logger.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),t}})}_signTypedData(e,t,r){return Ba(this,void 0,void 0,function*(){const n=yield Ci.resolveNames(e,t,r,e=>this.provider.resolveName(e)),i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(Ci.getPayload(n.domain,t,n.value))])}catch(e){throw"string"==typeof e.message&&e.message.match(/user denied/i)&&Da.throwError("user rejected signing",c.Logger.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:n.domain,types:t,value:n.value}}),e}})}unlock(e){return Ba(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class qa extends Va{sendTransaction(e){return this.sendUncheckedTransaction(e).then(e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)}))}}const Ja={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Xa extends La{constructor(e,t){let r=t;null==r&&(r=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(t=>{e(t)},e=>{t(e)})},0)})),super(r),e||(e=z(this.constructor,"defaultUrl")()),K(this,"connection","string"==typeof e?Object.freeze({url:e}):Object.freeze(J(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Ba(this,void 0,void 0,function*(){yield Wa(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(null!=e){const t=z(this.constructor,"getNetwork");try{return t(D.from(e).toNumber())}catch(t){return Da.throwError("could not detect network",c.Logger.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return Da.throwError("could not detect network",c.Logger.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new Va(za,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(e=>this.formatter.address(e)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:$(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const i=ra(this.connection,JSON.stringify(r),Ha).then(e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e),e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e});return n&&(this._cache[e]=i,setTimeout(()=>{this._cache[e]=null},0)),i}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Ka(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Ka(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Ka(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Ka(t.address),k(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[z(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[z(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=Ka(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return Ba(this,void 0,void 0,function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&D.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((t=J(t)).transaction=J(e),delete t.transaction.type)}}const r=this.prepareRequest(e,t);null==r&&Da.throwError(e+" not implemented",c.Logger.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(r){return Ga(e,r,t)}})}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){return function n(){e.send("eth_getFilterChanges",[r]).then(function(r){if(e._pendingFilter!=t)return null;let n=Promise.resolve();return r.forEach(function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then(function(){return e.getTransaction(t).then(function(t){return e.emit("pending",t),null})})}),n.then(function(){return Wa(1e3)})}).then(function(){if(e._pendingFilter==t)return setTimeout(function(){n()},0),null;e.send("eth_uninstallFilter",[r])}).catch(e=>{})}(),r}).catch(e=>{})}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=J(Ja);if(t)for(const e in t)t[e]&&(r[e]=!0);q(e,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(t){if(null==e[t])return;const r=N(D.from(e[t]));"gasLimit"===t&&(t="gas"),n[t]=r}),["from","to","data"].forEach(function(t){null!=e[t]&&(n[t]=A(e[t]))}),e.accessList&&(n.accessList=Fr(e.accessList)),n}}let Ya=null;try{if(Ya=WebSocket,null==Ya)throw new Error("inject please")}catch(e){const t=new c.Logger(sa);Ya=function(){t.throwError("WebSockets not supported in this environment",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Qa=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const $a=new c.Logger(sa);let Za=1;class eu extends Xa{constructor(e,t){"any"===t&&$a.throwError("WebSocketProvider does not support 'any' network yet",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super("string"==typeof e?e:"_websocket",t),this._pollingInterval=-1,this._wsReady=!1,K(this,"_websocket","string"==typeof e?new Ya(this.connection.url):e),K(this,"_requests",{}),K(this,"_subs",{}),K(this,"_subIds",{}),K(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(e=>{this.websocket.send(this._requests[e].payload)})},this.websocket.onmessage=e=>{const t=e.data,r=JSON.parse(t);if(null!=r.id){const e=String(r.id),n=this._requests[e];if(delete this._requests[e],void 0!==r.result)n.callback(null,r.result),this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this});else{let e=null;r.error?(e=new Error(r.error.message||"unknown error"),K(e,"code",r.error.code||null),K(e,"response",t)):e=new Error("unknown error"),n.callback(e,void 0),this.emit("debug",{action:"response",error:e,request:JSON.parse(n.payload),provider:this})}}else if("eth_subscription"===r.method){const e=this._subs[r.params.subscription];e&&e.processFunc(r.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){$a.throwError("cannot reset events block on WebSocketProvider",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){$a.throwError("cannot set polling interval on WebSocketProvider",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Qa(this,void 0,void 0,function*(){return null})}set polling(e){e&&$a.throwError("cannot set polling on WebSocketProvider",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=Za++;return new Promise((n,i)=>{const o=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(o),provider:this}),this._requests[String(r)]={callback:function(e,t){return e?i(e):n(t)},payload:o},this._wsReady&&this.websocket.send(o)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return Qa(this,void 0,void 0,function*(){let n=this._subIds[e];null==n&&(n=Promise.all(t).then(e=>this.send("eth_subscribe",e)),this._subIds[e]=n);const i=yield n;this._subs[i]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],e=>{const t=D.from(e.number).toNumber();this._emitted.block=t,this.emit("block",t)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],e=>{this.emit("pending",e)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{null==t.removed&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=e=>{const t=e.hash;this.getTransactionReceipt(t).then(e=>{e&&this.emit(t,e)})};t(e),this._subscribe("tx",["newHeads"],e=>{this._events.filter(e=>"tx"===e.type).forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}}_stopEvent(e){let t=e.tag;if("tx"===e.type){if(this._events.filter(e=>"tx"===e.type).length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(e=>{this._subs[e]&&(delete this._subs[e],this.send("eth_unsubscribe",[e]))}))}destroy(){return Qa(this,void 0,void 0,function*(){this.websocket.readyState===Ya.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}const tu=new c.Logger(sa);class ru extends Xa{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return t=this,r=void 0,i=function*(){let t=this.network;return null==t&&(t=yield e.detectNetwork.call(this),t||tu.throwError("no network detected",c.Logger.errors.UNKNOWN_ERROR,{}),null==this._network&&(K(this,"_network",t),this.emit("network",t,null))),t},new((n=void 0)||(n=Promise))(function(e,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(s,a)}u((i=i.apply(t,r||[])).next())});var t,r,n,i}}class nu extends ru{constructor(e,t){tu.checkAbstract(new.target,nu),e=z(new.target,"getNetwork")(e),t=z(new.target,"getApiKey")(t),super(z(new.target,"getUrl")(e,t),e),"string"==typeof t?K(this,"apiKey",t):null!=t&&Object.keys(t).forEach(e=>{K(this,e,t[e])})}_startPending(){tu.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return tu.throwError("API provider does not support signing",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return tu.throwError("not implemented; sub-classes must override getUrl",c.Logger.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const iu=new c.Logger(sa),ou="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class su extends eu{constructor(e,t){const r=new au(e,t);super(r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),r.network),K(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===ou}}class au extends nu{static getWebSocketProvider(e,t){return new su(e,t)}static getApiKey(e){return null==e?ou:(e&&"string"!=typeof e&&iu.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:iu.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(e,r)=>(t===ou&&fa(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===ou}}const uu=new c.Logger(sa),cu="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function lu(e){switch(e){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return uu.throwArgumentError("unsupported network","name",e)}class hu extends nu{isCommunityResource(){return this.apiKey===cu}static getApiKey(e){return null==e?cu:e}static getUrl(e,t){null==t&&(t=cu);const r={allowGzip:!0,url:"https://"+lu(e.name)+t,throttleCallback:(e,r)=>(t.apiKey===cu&&fa(),Promise.resolve(!0))};return null!=t.projectSecret&&(r.user="",r.password=t.projectSecret),r}}const fu=new c.Logger(sa);class du extends nu{static getApiKey(e){return null!=e&&fu.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;return"homestead"===e.name?r="https://cloudflare-eth.com/":fu.throwArgumentError("unsupported network","network",arguments[0]),r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return n=this,i=void 0,s=function*(){return"getBlockNumber"===e?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)},new((o=void 0)||(o=Promise))(function(e,t){function r(e){try{u(s.next(e))}catch(e){t(e)}}function a(e){try{u(s.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o(function(e){e(n)})).then(r,a)}u((s=s.apply(n,i||[])).next())});var n,i,o,s}}var pu=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const gu=new c.Logger(sa);function mu(e){const t={};for(let r in e){if(null==e[r])continue;let n=e[r];"type"===r&&0===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?N(A(n)):"accessList"===r?"["+Fr(n).map(e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`).join(",")+"]":A(n),t[r]=n)}return t}function yu(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"string"!=typeof e.message||!e.message.match(/^OK/)){const t=new Error("invalid response");throw t.result=JSON.stringify(e),(e.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return e.result}function bu(e){if(e&&0==e.status&&"NOTOK"==e.message&&(e.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(e),t.throttleRetry=!0,t}if("2.0"!=e.jsonrpc){const t=new Error("invalid response");throw t.result=JSON.stringify(e),t}if(e.error){const t=new Error(e.error.message||"unknown error");throw e.error.code&&(t.code=e.error.code),e.error.data&&(t.data=e.error.data),t}return e.result}function vu(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}function wu(e,t,r){if("call"===e&&t.code===c.Logger.errors.SERVER_ERROR){const e=t.error;if(e&&(e.message.match(/reverted/i)||e.message.match(/VM execution error/i))){let r=e.data;if(r&&(r="0x"+r.replace(/^.*0x/i,"")),w(r))return r;gu.throwError("missing revert data in call exception",c.Logger.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let n=t.message;throw t.code===c.Logger.errors.SERVER_ERROR&&(t.error&&"string"==typeof t.error.message?n=t.error.message:"string"==typeof t.body?n=t.body:"string"==typeof t.responseText&&(n=t.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&gu.throwError("insufficient funds for intrinsic transaction cost",c.Logger.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&gu.throwError("nonce has already been used",c.Logger.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r}),n.match(/another transaction with same nonce/)&&gu.throwError("replacement fee too low",c.Logger.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&gu.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",c.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r}),t}class Eu extends La{constructor(e,t){super(e),K(this,"baseUrl",this.getBaseUrl()),K(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return gu.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce((e,r)=>{const n=t[r];return null!=n&&(e+=`&${r}=${n}`),e},""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return pu(this,void 0,void 0,function*(){const n=r?this.getPostUrl():this.getUrl(e,t),i=r?this.getPostData(e,t):null,o="proxy"===e?bu:yu;this.emit("debug",{action:"request",request:n,provider:this});const s={url:n,throttleSlotInterval:1e3,throttleCallback:(e,t)=>(this.isCommunityResource()&&fa(),Promise.resolve(!0))};let a=null;i&&(s.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},a=Object.keys(i).map(e=>`${e}=${i[e]}`).join("&"));const u=yield ra(s,a,o||bu);return this.emit("debug",{action:"response",request:n,response:$(u),provider:this}),u})}detectNetwork(){return pu(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return pu(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(e=>wu("sendTransaction",e,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if("latest"!==t.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const e=mu(t.transaction);e.module="proxy",e.action="eth_call";try{return yield this.fetch("proxy",e,!0)}catch(e){return wu("call",e,t.transaction)}}case"estimateGas":{const e=mu(t.transaction);e.module="proxy",e.action="eth_estimateGas";try{return yield this.fetch("proxy",e,!0)}catch(e){return wu("estimateGas",e,t.transaction)}}case"getLogs":{const e={action:"getLogs"};if(t.filter.fromBlock&&(e.fromBlock=vu(t.filter.fromBlock)),t.filter.toBlock&&(e.toBlock=vu(t.filter.toBlock)),t.filter.address&&(e.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&gu.throwError("unsupported topic count",c.Logger.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),1===t.filter.topics.length)){const r=t.filter.topics[0];"string"==typeof r&&66===r.length||gu.throwError("unsupported topic format",c.Logger.errors.UNSUPPORTED_OPERATION,{topic0:r}),e.topic0=r}const r=yield this.fetch("logs",e);let n={};for(let e=0;e<r.length;e++){const t=r[e];if(null==t.blockHash){if(null==n[t.blockNumber]){const e=yield this.getBlock(t.blockNumber);e&&(n[t.blockNumber]=e.hash)}t.blockHash=n[t.blockNumber]}}return r}case"getEtherPrice":return"homestead"!==this.network.name?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return pu(this,void 0,void 0,function*(){const n={action:"txlist",address:yield this.resolveName(e),startblock:null==t?0:t,endblock:null==r?99999999:r,sort:"asc"};return(yield this.fetch("account",n)).map(e=>{["contractAddress","to"].forEach(function(t){""==e[t]&&delete e[t]}),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);const t=this.formatter.transactionResponse(e);return e.timeStamp&&(t.timestamp=parseInt(e.timeStamp)),t})})}isCommunityResource(){return null==this.apiKey}}var Au=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const Su=new c.Logger(sa);function _u(){return(new Date).getTime()}function Iu(e){let t=null;for(let r=0;r<e.length;r++){const n=e[r];if(null==n)return null;t?t.name===n.name&&t.chainId===n.chainId&&(t.ensAddress===n.ensAddress||null==t.ensAddress&&null==n.ensAddress)||Su.throwArgumentError("provider mismatch","networks",e):t=n}return t}function Nu(e,t){e=e.slice().sort();const r=Math.floor(e.length/2);if(e.length%2)return e[r];const n=e[r-1],i=e[r];return null!=t&&Math.abs(n-i)>t?null:(n+i)/2}function ku(e){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return JSON.stringify(e);if("string"==typeof e)return e;if(D.isBigNumber(e))return e.toString();if(Array.isArray(e))return JSON.stringify(e.map(e=>ku(e)));if("object"==typeof e){const t=Object.keys(e);return t.sort(),"{"+t.map(t=>{let r=e[t];return r="function"==typeof r?"[function]":ku(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}let Pu=1;function Tu(e){let t=null,r=null,n=new Promise(n=>{t=function(){r&&(clearTimeout(r),r=null),n()},r=setTimeout(t,e)});return{cancel:t,getPromise:function(){return n},wait:e=>(n=n.then(e),n)}}const Ru=[c.Logger.errors.CALL_EXCEPTION,c.Logger.errors.INSUFFICIENT_FUNDS,c.Logger.errors.NONCE_EXPIRED,c.Logger.errors.REPLACEMENT_UNDERPRICED,c.Logger.errors.UNPREDICTABLE_GAS_LIMIT],Ou=["address","args","errorArgs","errorSignature","method","transaction"];function Cu(e,t){const r={weight:e.weight};return Object.defineProperty(r,"provider",{get:()=>e.provider}),e.start&&(r.start=e.start),t&&(r.duration=t-e.start),e.done&&(e.error?r.error=e.error:r.result=e.result||null),r}function xu(e,t){return Au(this,void 0,void 0,function*(){const r=e.provider;return null!=r.blockNumber&&r.blockNumber>=t||-1===t?r:na(()=>new Promise((n,i)=>{setTimeout(function(){return r.blockNumber>=t?n(r):e.cancelled?n(null):n(void 0)},0)}),{oncePoll:r})})}function Uu(e,t,r,n){return Au(this,void 0,void 0,function*(){let i=e.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&w(n.blockTag)&&(i=yield xu(e,t)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&w(n.blockTag)&&(i=yield xu(e,t)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&w(n.blockTag)&&(i=yield xu(e,t)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&w(n.blockTag)&&(i=yield xu(e,t)),"call"===r&&n.blockTag?i[r](n.transaction,n.blockTag):i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let r=n.filter;return(r.fromBlock&&w(r.fromBlock)||r.toBlock&&w(r.toBlock))&&(i=yield xu(e,t)),i.getLogs(r)}}return Su.throwError("unknown method error",c.Logger.errors.UNKNOWN_ERROR,{method:r,params:n})})}class Mu extends La{constructor(e,t){0===e.length&&Su.throwArgumentError("missing providers","providers",e);const r=e.map((e,t)=>{if(xt.isProvider(e)){const t=la(e)?2e3:750,r=1;return Object.freeze({provider:e,weight:1,stallTimeout:t,priority:r})}const r=J(e);null==r.priority&&(r.priority=1),null==r.stallTimeout&&(r.stallTimeout=la(e)?2e3:750),null==r.weight&&(r.weight=1);const n=r.weight;return(n%1||n>512||n<1)&&Su.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${t}].weight`,n),Object.freeze(r)}),n=r.reduce((e,t)=>e+t.weight,0);null==t?t=n/2:t>n&&Su.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let i=Iu(r.map(e=>e.provider.network));null==i&&(i=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(e,t)},0)})),super(i),K(this,"providerConfigs",Object.freeze(r)),K(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return Au(this,void 0,void 0,function*(){return Iu(yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork())))})}perform(e,t){return Au(this,void 0,void 0,function*(){if("sendTransaction"===e){const e=yield Promise.all(this.providerConfigs.map(e=>e.provider.sendTransaction(t.signedTransaction).then(e=>e.hash,e=>e)));for(let t=0;t<e.length;t++){const r=e[t];if("string"==typeof r)return r}throw e[0]}-1===this._highestBlockNumber&&"getBlockNumber"!==e&&(yield this.getBlockNumber());const r=function(e,t,r){let n=ku;switch(t){case"getBlockNumber":return function(t){const r=t.map(e=>e.result);let n=Nu(t.map(e=>e.result),2);if(null!=n)return n=Math.ceil(n),r.indexOf(n+1)>=0&&n++,n>=e._highestBlockNumber&&(e._highestBlockNumber=n),e._highestBlockNumber};case"getGasPrice":return function(e){const t=e.map(e=>e.result);return t.sort(),t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return Nu(e.map(e=>e.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){return null==e?null:((e=J(e)).confirmations=-1,ku(e))};break;case"getBlock":n=r.includeTransactions?function(e){return null==e?null:((e=J(e)).transactions=e.transactions.map(e=>((e=J(e)).confirmations=-1,e)),ku(e))}:function(e){return null==e?null:ku(e)};break;default:throw new Error("unknown method: "+t)}return function(e,t){return function(r){const n={};r.forEach(t=>{const r=e(t.result);n[r]||(n[r]={count:0,result:t.result}),n[r].count++});const i=Object.keys(n);for(let e=0;e<i.length;e++){const r=n[i[e]];if(r.count>=t)return r.result}}}(n,e.quorum)}(this,e,t),n=function(e){for(let t=(e=e.slice()).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}(this.providerConfigs.map(J));n.sort((e,t)=>e.priority-t.priority);const i=this._highestBlockNumber;let o=0,s=!0;for(;;){const a=_u();let u=n.filter(e=>e.runner&&a-e.start<e.stallTimeout).reduce((e,t)=>e+t.weight,0);for(;u<this.quorum&&o<n.length;){const r=n[o++],s=Pu++;r.start=_u(),r.staller=Tu(r.stallTimeout),r.staller.wait(()=>{r.staller=null}),r.runner=Uu(r,i,e,t).then(n=>{r.done=!0,r.result=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:s,backend:Cu(r,_u()),request:{method:e,params:$(t)},provider:this})},n=>{r.done=!0,r.error=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:s,backend:Cu(r,_u()),request:{method:e,params:$(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:s,backend:Cu(r,null),request:{method:e,params:$(t)},provider:this}),u+=r.weight}const c=[];n.forEach(e=>{!e.done&&e.runner&&(c.push(e.runner),e.staller&&c.push(e.staller.getPromise()))}),c.length&&(yield Promise.race(c));const l=n.filter(e=>e.done&&null==e.error);if(l.length>=this.quorum){const e=r(l);if(void 0!==e)return n.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}),e;s||(yield Tu(100).getPromise()),s=!1}const h=n.reduce((e,t)=>{if(!t.done||null==t.error)return e;const r=t.error.code;return Ru.indexOf(r)>=0&&(e[r]||(e[r]={error:t.error,weight:0}),e[r].weight+=t.weight),e},{});if(Object.keys(h).forEach(e=>{const t=h[e];if(t.weight<this.quorum)return;n.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0});const r=t.error,i={};Ou.forEach(e=>{null!=r[e]&&(i[e]=r[e])}),Su.throwError(r.reason||r.message,e,i)}),0===n.filter(e=>!e.done).length)break}return n.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}),Su.throwError("failed to meet quorum",c.Logger.errors.SERVER_ERROR,{method:e,params:t,results:n.map(e=>Cu(e)),provider:this})})}}const Lu=null,Bu=new c.Logger(sa),Du="84842078b09946638c03157f83405213";class Fu extends eu{constructor(e,t){const r=new ju(e,t),n=r.connection;n.password&&Bu.throwError("INFURA WebSocket project secrets unsupported",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"}),super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),e),K(this,"apiKey",r.projectId),K(this,"projectId",r.projectId),K(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===Du}}class ju extends nu{static getWebSocketProvider(e,t){return new Fu(e,t)}static getApiKey(e){const t={apiKey:Du,projectId:Du,projectSecret:null};return null==e||("string"==typeof e?t.projectId=e:null!=e.projectSecret?(Bu.assertArgument("string"==typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),Bu.assertArgument("string"==typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:Bu.throwError("unsupported network",c.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(e,r)=>(t.projectId===Du&&fa(),Promise.resolve(!0))};return null!=t.projectSecret&&(n.user="",n.password=t.projectSecret),n}isCommunityResource(){return this.projectId===Du}}class Gu extends Xa{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},i=new Promise((e,t)=>{n.resolve=e,n.reject=t});return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const e=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const t=e.map(e=>e.request);return this.emit("debug",{action:"requestBatch",request:$(t),provider:this}),ra(this.connection,JSON.stringify(t)).then(r=>{this.emit("debug",{action:"response",request:t,response:r,provider:this}),e.forEach((e,t)=>{const n=r[t];if(n.error){const t=new Error(n.error.message);t.code=n.error.code,t.data=n.error.data,e.reject(t)}else e.resolve(n.result)})},r=>{this.emit("debug",{action:"response",error:r,request:t,provider:this}),e.forEach(e=>{e.reject(r)})})},10)),i}}const Wu=new c.Logger(sa);class Hu extends nu{static getApiKey(e){return e&&"string"!=typeof e&&Wu.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"}static getUrl(e,t){Wu.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Wu.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const Ku=new c.Logger(sa),zu="62e1ad51b37b8e00394bda3b";class Vu extends nu{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return null==e?t.applicationId=zu:"string"==typeof e?t.applicationId=e:null!=e.applicationSecretKey?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:Ku.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:Ku.throwError("unsupported network",c.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={headers:{},url:`https://${r}/v1/lb/${t.applicationId}`};return null!=t.applicationSecretKey&&(n.user="",n.password=t.applicationSecretKey),n}isCommunityResource(){return this.applicationId===zu}}const qu=new c.Logger(sa);let Ju=1;function Xu(e,t){const r="Web3LegacyFetcher";return function(e,n){const i={method:e,params:n,id:Ju++,jsonrpc:"2.0"};return new Promise((e,n)=>{this.emit("debug",{action:"request",fetcher:r,request:$(i),provider:this}),t(i,(t,o)=>{if(t)return this.emit("debug",{action:"response",fetcher:r,error:t,request:i,provider:this}),n(t);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:o,provider:this}),o.error){const e=new Error(o.error.message);return e.code=o.error.code,e.data=o.error.data,n(e)}e(o.result)})})}}class Yu extends Xa{constructor(e,t){null==e&&qu.throwArgumentError("missing provider","provider",e);let r=null,n=null,i=null;"function"==typeof e?(r="unknown:",n=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),i=e,e.request?(""===r&&(r="eip-1193:"),n=function(e){return function(t,r){null==r&&(r=[]);const n={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:$(n),provider:this}),e.request(n).then(e=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:e,provider:this}),e),e=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:e,provider:this}),e})}}(e)):e.sendAsync?n=Xu(0,e.sendAsync.bind(e)):e.send?n=Xu(0,e.send.bind(e)):qu.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),K(this,"jsonRpcFetchFunc",n),K(this,"provider",i)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const Qu=new c.Logger(sa);function $u(e,t){if(null==e&&(e="homestead"),"string"==typeof e){const t=e.match(/^(ws|http)s?:/i);if(t)switch(t[1].toLowerCase()){case"http":case"https":return new Xa(e);case"ws":case"wss":return new eu(e);default:Qu.throwArgumentError("unsupported URL scheme","network",e)}}const r=ks(e);return r&&r._defaultProvider||Qu.throwError("unsupported getDefaultProvider network",c.Logger.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),r._defaultProvider({FallbackProvider:Mu,AlchemyProvider:au,AnkrProvider:hu,CloudflareProvider:du,EtherscanProvider:Eu,InfuraProvider:ju,JsonRpcProvider:Xa,NodesmithProvider:Hu,PocketProvider:Vu,Web3Provider:Yu,IpcProvider:Lu},t)}let Zu=!1,ec=!1;const tc={debug:1,default:2,info:2,warning:3,error:4,off:5};let rc=tc.default,nc=null;const ic=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var oc,sc;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(oc||(oc={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(sc||(sc={}));const ac="0123456789abcdef";class uc{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==tc[r]&&this.throwArgumentError("invalid log level name","logLevel",e),rc>tc[r]||console.log.apply(console,t)}debug(...e){this._log(uc.levels.DEBUG,e)}info(...e){this._log(uc.levels.INFO,e)}warn(...e){this._log(uc.levels.WARNING,e)}makeError(e,t,r){if(ec)return this.makeError("censored error",t,{});t||(t=uc.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=ac[t[e]>>4],r+=ac[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case sc.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case sc.CALL_EXCEPTION:case sc.INSUFFICIENT_FUNDS:case sc.MISSING_NEW:case sc.NONCE_EXPIRED:case sc.REPLACEMENT_UNDERPRICED:case sc.TRANSACTION_REPLACED:case sc.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,uc.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),ic&&this.throwError("platform missing String.prototype.normalize",uc.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:ic})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,uc.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,uc.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,uc.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,uc.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",uc.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",uc.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",uc.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return nc||(nc=new uc("logger/5.8.0")),nc}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",uc.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Zu){if(!e)return;this.globalLogger().throwError("error censorship permanent",uc.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}ec=!!e,Zu=!!t}static setLogLevel(e){const t=tc[e.toLowerCase()];null!=t?rc=t:uc.globalLogger().warn("invalid log level - "+e)}static from(e){return new uc(e)}}uc.errors=sc,uc.levels=oc;const cc=new uc("bytes/5.8.0");function lc(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return lc(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function hc(e){return"number"==typeof e&&e==e&&e%1==0}function fc(e,t){if(t||(t={}),"number"==typeof e){cc.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),lc(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e)&&(e=e.toHexString()),function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":cc.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return lc(new Uint8Array(n))}return function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!hc(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!hc(r)||r<0||r>=256)return!1}return!0}(e)?lc(new Uint8Array(e)):cc.throwArgumentError("invalid arrayify value","value",e)}const dc=new uc("strings/5.8.0");var pc,gc;function mc(e,t,r,n,i){if(e===gc.BAD_PREFIX||e===gc.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===gc.OVERRUN?r.length-t-1:0}function yc(e){return t=function(e,t=pc.current){t!=pc.current&&(dc.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&n)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return fc(r)}(e),"0x"+se().keccak_256(fc(t));var t}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(pc||(pc={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(gc||(gc={})),Object.freeze({error:function(e,t,r,n,i){return dc.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:mc,replace:function(e,t,r,n,i){return e===gc.OVERLONG?(n.push(i),0):(n.push(65533),mc(e,t,r))}}),new uc("properties/5.8.0");const bc=new uc("wordlists/5.7.0");class vc{constructor(e){var t,r,n;bc.checkAbstract(new.target,vc),t=this,r="locale",n=e,Object.defineProperty(t,r,{enumerable:!0,value:n,writable:!1})}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return yc(t.join("\n")+"\n")}static register(e,t){t||(t=e.locale)}}let wc=null;function Ec(e){if(null==wc&&(wc="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==vc.check(e)))throw wc=null,new Error("BIP39 Wordlist for en (English) FAILED")}const Ac=new class extends vc{constructor(){super("en")}getWord(e){return Ec(this),wc[e]}getWordIndex(e){return Ec(this),wc.indexOf(e)}};vc.register(Ac);const Sc={en:Ac},_c="abi/5.7.0",Ic=new c.Logger(_c);function Nc(e){const t=[],r=function(e,n){if(Array.isArray(n))for(let i in n){const o=e.slice();o.push(i);try{r(o,n[i])}catch(e){t.push({path:o,error:e})}}};return r([],e),t}class kc{constructor(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}_throwError(e,t){Ic.throwArgumentError(e,this.localName,t)}}class Pc{constructor(e){K(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return I(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(y(e._data))}writeBytes(e){let t=m(e);const r=t.length%this.wordSize;return r&&(t=y([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=m(D.from(e));return t.length>this.wordSize&&Ic.throwError("value out-of-bounds",c.Logger.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=y([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Tc{constructor(e,t,r,n){K(this,"_data",m(e)),K(this,"wordSize",t||32),K(this,"_coerceFunc",r),K(this,"allowLoose",n),this._offset=0}get data(){return A(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Tc.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:Ic.throwError("data out-of-bounds",c.Logger.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new Tc(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return D.from(this.readBytes(this.wordSize))}}class Rc extends kc{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Ee(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return Ee(k(e.readValue().toHexString(),20))}}class Oc extends kc{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Cc=new c.Logger(_c);function xc(e,t,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map(t=>{const n=t.localName;return n||Cc.throwError("cannot encode object for signature with missing names",c.Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]&&Cc.throwError("cannot encode object for signature with duplicate names",c.Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]=!0,r[n]})}else Cc.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&Cc.throwArgumentError("types/value length mismatch","tuple",r);let i=new Pc(e.wordSize),o=new Pc(e.wordSize),s=[];t.forEach((e,t)=>{let r=n[t];if(e.dynamic){let t=o.length;e.encode(o,r);let n=i.writeUpdatableValue();s.push(e=>{n(e+t)})}else e.encode(i,r)}),s.forEach(e=>{e(i.length)});let a=e.appendWriter(i);return a+=e.appendWriter(o),a}function Uc(e,t){let r=[],n=e.subReader(0);t.forEach(t=>{let i=null;if(t.dynamic){let r=e.readValue(),o=n.subReader(r.toNumber());try{i=t.decode(o)}catch(e){if(e.code===c.Logger.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(e.code===c.Logger.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}null!=i&&r.push(i)});const i=t.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});t.forEach((e,t)=>{let n=e.localName;if(!n||1!==i[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const o=r[t];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw o}}):r[n]=o});for(let e=0;e<r.length;e++){const t=r[e];t instanceof Error&&Object.defineProperty(r,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class Mc extends kc{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),Cc.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++)n.push(this.coder);return xc(e,n,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&Cc.throwError("insufficient data length",c.Logger.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let e=0;e<t;e++)r.push(new Oc(this.coder));return e.coerce(this.name,Uc(e,r))}}class Lc extends kc{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Bc extends kc{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=m(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Dc extends Bc{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,A(super.decode(e)))}}class Fc extends kc{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=m(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,A(e.readBytes(this.size)))}}class jc extends kc{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class Gc extends kc{constructor(e,t,r){const n=(t?"int":"uint")+8*e;super(n,n,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=D.from(t),n=Ve.mask(8*e.wordSize);if(this.signed){let e=n.mask(8*this.size-1);(r.gt(e)||r.lt(e.add(ze).mul(He)))&&this._throwError("value out-of-bounds",t)}else(r.lt(Ke)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class Wc extends Bc{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Te(t))}decode(e){return Re(super.decode(e))}}class Hc extends kc{constructor(e,t){let r=!1;const n=[];e.forEach(e=>{e.dynamic&&(r=!0),n.push(e.type)}),super("tuple","tuple("+n.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});const t=this.coders.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let i=r.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n]))}),Object.freeze(e)}encode(e,t){return xc(e,this.coders,t)}decode(e){return e.coerce(this.name,Uc(e,this.coders))}}const Kc=new c.Logger(_c),zc={};let Vc={calldata:!0,memory:!0,storage:!0},qc={calldata:!0,memory:!0};function Jc(e,t){if("bytes"===e||"string"===e){if(Vc[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&qc[t])return!0;return(Vc[t]||"payable"===t)&&Kc.throwArgumentError("invalid modifier","name",t),!1}function Xc(e,t){for(let r in t)K(e,r,t[r])}const Yc=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Qc=new RegExp(/^(.*)\[([0-9]*)\]$/);class $c{constructor(e,t){e!==zc&&Kc.throwError("use fromString",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Xc(this,t);let r=this.type.match(Qc);Xc(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:$c.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Yc.sighash),Yc[e]||Kc.throwArgumentError("invalid format type","format",e),e===Yc.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==Yc.sighash&&(t+=this.type),t+="("+this.components.map(t=>t.format(e)).join(e===Yc.full?", ":",")+")"):t+=this.type,e!==Yc.sighash&&(!0===this.indexed&&(t+=" indexed"),e===Yc.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?$c.fromString(e,t):$c.fromObject(e)}static fromObject(e){return $c.isParamType(e)?e:new $c(zc,{name:e.name||null,type:cl(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map($c.fromObject):null})}static fromString(e,t){return r=function(e,t){let r=e;function n(t){Kc.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function i(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let o={type:"",name:"",state:{allowType:!0}},s=o;for(let r=0;r<e.length;r++){let o=e[r];switch(o){case"(":s.state.allowType&&""===s.type?s.type="tuple":s.state.allowParams||n(r),s.state.allowType=!1,s.type=cl(s.type),s.components=[i(s)],s=s.components[0];break;case")":delete s.state,"indexed"===s.name&&(t||n(r),s.indexed=!0,s.name=""),Jc(s.type,s.name)&&(s.name=""),s.type=cl(s.type);let e=s;s=s.parent,s||n(r),delete e.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,"indexed"===s.name&&(t||n(r),s.indexed=!0,s.name=""),Jc(s.type,s.name)&&(s.name=""),s.type=cl(s.type);let a=i(s.parent);s.parent.components.push(a),delete s.parent,s=a;break;case" ":s.state.allowType&&""!==s.type&&(s.type=cl(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&("indexed"===s.name?(t||n(r),s.indexed&&n(r),s.indexed=!0,s.name=""):Jc(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||n(r),s.type+=o,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||n(r),s.type+=o,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=o,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=o,delete s.state.allowArray):s.state.readArray?s.type+=o:n(r)}}return s.parent&&Kc.throwArgumentError("unexpected eof","param",e),delete o.state,"indexed"===s.name?(t||n(r.length-7),s.indexed&&n(r.length-7),s.indexed=!0,s.name=""):Jc(s.type,s.name)&&(s.name=""),o.type=cl(o.type),o}(e,!!t),$c.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(null==e||!e._isParamType)}}function Zc(e,t){return function(e){e=e.trim();let t=[],r="",n=0;for(let i=0;i<e.length;i++){let o=e[i];","===o&&0===n?(t.push(r),r=""):(r+=o,"("===o?n++:")"===o&&(n--,-1===n&&Kc.throwArgumentError("unbalanced parenthesis","value",e)))}return r&&t.push(r),t}(e).map(e=>$c.fromString(e,t))}class el{constructor(e,t){e!==zc&&Kc.throwError("use a static from method",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Xc(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return el.isFragment(e)?e:"string"==typeof e?el.fromString(e):el.fromObject(e)}static fromObject(e){if(el.isFragment(e))return e;switch(e.type){case"function":return sl.fromObject(e);case"event":return tl.fromObject(e);case"constructor":return ol.fromObject(e);case"error":return ul.fromObject(e);case"fallback":case"receive":return null}return Kc.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?tl.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?sl.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?ol.fromString(e.trim()):"error"===e.split(" ")[0]?ul.fromString(e.substring(5).trim()):Kc.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class tl extends el{format(e){if(e||(e=Yc.sighash),Yc[e]||Kc.throwArgumentError("invalid format type","format",e),e===Yc.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t="";return e!==Yc.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(t=>t.format(e)).join(e===Yc.full?", ":",")+") ",e!==Yc.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"==typeof e?tl.fromString(e):tl.fromObject(e)}static fromObject(e){if(tl.isEventFragment(e))return e;"event"!==e.type&&Kc.throwArgumentError("invalid event object","value",e);const t={name:hl(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map($c.fromObject):[],type:"event"};return new tl(zc,t)}static fromString(e){let t=e.match(fl);t||Kc.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(e=>{switch(e.trim()){case"anonymous":r=!0;break;case"":break;default:Kc.warn("unknown modifier: "+e)}}),tl.fromObject({name:t[1].trim(),anonymous:r,inputs:Zc(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function rl(e,t){t.gas=null;let r=e.split("@");return 1!==r.length?(r.length>2&&Kc.throwArgumentError("invalid human-readable ABI signature","value",e),r[1].match(/^[0-9]+$/)||Kc.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=D.from(r[1]),r[0]):e}function nl(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach(e=>{switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}})}function il(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&Kc.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&Kc.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||Kc.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&Kc.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&Kc.throwArgumentError("unable to determine stateMutability","value",e),t}class ol extends el{format(e){if(e||(e=Yc.sighash),Yc[e]||Kc.throwArgumentError("invalid format type","format",e),e===Yc.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});e===Yc.sighash&&Kc.throwError("cannot format a constructor for sighash",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(t=>t.format(e)).join(e===Yc.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"==typeof e?ol.fromString(e):ol.fromObject(e)}static fromObject(e){if(ol.isConstructorFragment(e))return e;"constructor"!==e.type&&Kc.throwArgumentError("invalid constructor object","value",e);let t=il(e);t.constant&&Kc.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map($c.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?D.from(e.gas):null};return new ol(zc,r)}static fromString(e){let t={type:"constructor"},r=(e=rl(e,t)).match(fl);return r&&"constructor"===r[1].trim()||Kc.throwArgumentError("invalid constructor string","value",e),t.inputs=Zc(r[2].trim(),!1),nl(r[3].trim(),t),ol.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class sl extends ol{format(e){if(e||(e=Yc.sighash),Yc[e]||Kc.throwArgumentError("invalid format type","format",e),e===Yc.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});let t="";return e!==Yc.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(t=>t.format(e)).join(e===Yc.full?", ":",")+") ",e!==Yc.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(t=>t.format(e)).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"==typeof e?sl.fromString(e):sl.fromObject(e)}static fromObject(e){if(sl.isFunctionFragment(e))return e;"function"!==e.type&&Kc.throwArgumentError("invalid function object","value",e);let t=il(e);const r={type:e.type,name:hl(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map($c.fromObject):[],outputs:e.outputs?e.outputs.map($c.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?D.from(e.gas):null};return new sl(zc,r)}static fromString(e){let t={type:"function"},r=(e=rl(e,t)).split(" returns ");r.length>2&&Kc.throwArgumentError("invalid function string","value",e);let n=r[0].match(fl);if(n||Kc.throwArgumentError("invalid function signature","value",e),t.name=n[1].trim(),t.name&&hl(t.name),t.inputs=Zc(n[2],!1),nl(n[3].trim(),t),r.length>1){let n=r[1].match(fl);""==n[1].trim()&&""==n[3].trim()||Kc.throwArgumentError("unexpected tokens","value",e),t.outputs=Zc(n[2],!1)}else t.outputs=[];return sl.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function al(e){const t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||Kc.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class ul extends el{format(e){if(e||(e=Yc.sighash),Yc[e]||Kc.throwArgumentError("invalid format type","format",e),e===Yc.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t="";return e!==Yc.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(t=>t.format(e)).join(e===Yc.full?", ":",")+") ",t.trim()}static from(e){return"string"==typeof e?ul.fromString(e):ul.fromObject(e)}static fromObject(e){if(ul.isErrorFragment(e))return e;"error"!==e.type&&Kc.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:hl(e.name),inputs:e.inputs?e.inputs.map($c.fromObject):[]};return al(new ul(zc,t))}static fromString(e){let t={type:"error"},r=e.match(fl);return r||Kc.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&hl(t.name),t.inputs=Zc(r[2],!1),al(ul.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function cl(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const ll=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function hl(e){return e&&e.match(ll)||Kc.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}const fl=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),dl=new c.Logger(_c),pl=new RegExp(/^bytes([0-9]*)$/),gl=new RegExp(/^(u?int)([0-9]*)$/);class ml{constructor(e){K(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Rc(e.name);case"bool":return new Lc(e.name);case"string":return new Wc(e.name);case"bytes":return new Dc(e.name);case"array":return new Mc(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Hc((e.components||[]).map(e=>this._getCoder(e)),e.name);case"":return new jc(e.name)}let t=e.type.match(gl);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&dl.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Gc(r/8,"int"===t[1],e.name)}if(t=e.type.match(pl),t){let r=parseInt(t[1]);return(0===r||r>32)&&dl.throwArgumentError("invalid bytes length","param",e),new Fc(r,e.name)}return dl.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Tc(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Pc(this._getWordSize())}getDefaultValue(e){const t=e.map(e=>this._getCoder($c.from(e)));return new Hc(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&dl.throwError("types/values length mismatch",c.Logger.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(e=>this._getCoder($c.from(e))),n=new Hc(r,"_"),i=this._getWriter();return n.encode(i,t),i.data}decode(e,t,r){const n=e.map(e=>this._getCoder($c.from(e)));return new Hc(n,"_").decode(this._getReader(m(t),r))}}const yl=new ml,bl=new c.Logger(_c);class vl extends Z{}class wl extends Z{}class El extends Z{}class Al extends Z{static isIndexed(e){return!(!e||!e._isIndexed)}}const Sl={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function _l(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);return r.error=t,r}class Il{constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,K(this,"fragments",t.map(e=>el.from(e)).filter(e=>null!=e)),K(this,"_abiCoder",z(new.target,"getAbiCoder")()),K(this,"functions",{}),K(this,"errors",{}),K(this,"events",{}),K(this,"structs",{}),this.fragments.forEach(e=>{let t=null;switch(e.type){case"constructor":return this.deploy?void bl.warn("duplicate definition - constructor"):void K(this,"deploy",e);case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let r=e.format();t[r]?bl.warn("duplicate definition - "+r):t[r]=e}),this.deploy||K(this,"deploy",ol.from({payable:!1,type:"constructor"})),K(this,"_isInterface",!0)}format(e){e||(e=Yc.full),e===Yc.sighash&&bl.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(t=>t.format(e));return e===Yc.json?JSON.stringify(t.map(e=>JSON.parse(e))):t}static getAbiCoder(){return yl}static getAddress(e){return Ee(e)}static getSighash(e){return _(Oe(e.format()),0,4)}static getEventTopic(e){return Oe(e.format())}getFunction(e){if(w(e)){for(const t in this.functions)if(e===this.getSighash(t))return this.functions[t];bl.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.functions).filter(e=>e.split("(")[0]===t);return 0===r.length?bl.throwArgumentError("no matching function","name",t):r.length>1&&bl.throwArgumentError("multiple matching functions","name",t),this.functions[r[0]]}const t=this.functions[sl.fromString(e).format()];return t||bl.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(w(e)){const t=e.toLowerCase();for(const e in this.events)if(t===this.getEventTopic(e))return this.events[e];bl.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.events).filter(e=>e.split("(")[0]===t);return 0===r.length?bl.throwArgumentError("no matching event","name",t):r.length>1&&bl.throwArgumentError("multiple matching events","name",t),this.events[r[0]]}const t=this.events[tl.fromString(e).format()];return t||bl.throwArgumentError("no matching event","signature",e),t}getError(e){if(w(e)){const t=z(this.constructor,"getSighash");for(const r in this.errors)if(e===t(this.errors[r]))return this.errors[r];bl.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.errors).filter(e=>e.split("(")[0]===t);return 0===r.length?bl.throwArgumentError("no matching error","name",t):r.length>1&&bl.throwArgumentError("multiple matching errors","name",t),this.errors[r[0]]}const t=this.errors[sl.fromString(e).format()];return t||bl.throwArgumentError("no matching error","signature",e),t}getSighash(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(e){throw t}}return z(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"==typeof e&&(e=this.getEvent(e)),z(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"==typeof e&&(e=this.getError(e));const r=m(t);return A(r.slice(0,4))!==this.getSighash(e)&&bl.throwArgumentError(`data signature does not match error ${e.name}.`,"data",A(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return"string"==typeof e&&(e=this.getError(e)),A(y([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"==typeof e&&(e=this.getFunction(e));const r=m(t);return A(r.slice(0,4))!==this.getSighash(e)&&bl.throwArgumentError(`data signature does not match function ${e.name}.`,"data",A(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return"string"==typeof e&&(e=this.getFunction(e)),A(y([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"==typeof e&&(e=this.getFunction(e));let r=m(t),n=null,i="",o=null,s=null,a=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(e){}break;case 4:{const e=A(r.slice(0,4)),t=Sl[e];if(t)o=this._abiCoder.decode(t.inputs,r.slice(4)),s=t.name,a=t.signature,t.reason&&(n=o[0]),"Error"===s?i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:"Panic"===s&&(i=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const t=this.getError(e);o=this._abiCoder.decode(t.inputs,r.slice(4)),s=t.name,a=t.format()}catch(e){}break}}return bl.throwError("call revert exception"+i,c.Logger.errors.CALL_EXCEPTION,{method:e.format(),data:A(t),errorArgs:o,errorName:s,errorSignature:a,reason:n})}encodeFunctionResult(e,t){return"string"==typeof e&&(e=this.getFunction(e)),A(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&bl.throwError("too many arguments for "+e.format(),c.Logger.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const n=(e,t)=>"string"===e.type?Oe(t):"bytes"===e.type?ae(A(t)):("bool"===e.type&&"boolean"==typeof t&&(t=t?"0x01":"0x00"),e.type.match(/^u?int/)&&(t=D.from(t).toHexString()),"address"===e.type&&this._abiCoder.encode(["address"],[t]),k(A(t),32));for(t.forEach((t,i)=>{let o=e.inputs[i];o.indexed?null==t?r.push(null):"array"===o.baseType||"tuple"===o.baseType?bl.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,t):Array.isArray(t)?r.push(t.map(e=>n(o,e))):r.push(n(o,t)):null!=t&&bl.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,t)});r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){"string"==typeof e&&(e=this.getEvent(e));const r=[],n=[],i=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&bl.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((e,o)=>{const s=t[o];if(e.indexed)if("string"===e.type)r.push(Oe(s));else if("bytes"===e.type)r.push(ae(s));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([e.type],[s]))}else n.push(e),i.push(s)}),{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e&&(e=this.getEvent(e)),null!=r&&!e.anonymous){let t=this.getEventTopic(e);w(r[0],32)&&r[0].toLowerCase()===t||bl.throwError("fragment/topic mismatch",c.Logger.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:r[0]}),r=r.slice(1)}let n=[],i=[],o=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push($c.fromObject({type:"bytes32",name:e.name})),o.push(!0)):(n.push(e),o.push(!1)):(i.push(e),o.push(!1))});let s=null!=r?this._abiCoder.decode(n,y(r)):null,a=this._abiCoder.decode(i,t,!0),u=[],l=0,h=0;e.inputs.forEach((e,t)=>{if(e.indexed)if(null==s)u[t]=new Al({_isIndexed:!0,hash:null});else if(o[t])u[t]=new Al({_isIndexed:!0,hash:s[h++]});else try{u[t]=s[h++]}catch(e){u[t]=e}else try{u[t]=a[l++]}catch(e){u[t]=e}if(e.name&&null==u[e.name]){const r=u[t];r instanceof Error?Object.defineProperty(u,e.name,{enumerable:!0,get:()=>{throw _l(`property ${JSON.stringify(e.name)}`,r)}}):u[e.name]=r}});for(let e=0;e<u.length;e++){const t=u[e];t instanceof Error&&Object.defineProperty(u,e,{enumerable:!0,get:()=>{throw _l(`index ${e}`,t)}})}return Object.freeze(u)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new wl({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:D.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new vl({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=A(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new El({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!(!e||!e._isInterface)}}let Nl=!1,kl=!1;const Pl={debug:1,default:2,info:2,warning:3,error:4,off:5};let Tl=Pl.default,Rl=null;const Ol=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Cl,xl;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Cl||(Cl={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(xl||(xl={}));const Ul="0123456789abcdef";class Ml{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Pl[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Tl>Pl[r]||console.log.apply(console,t)}debug(...e){this._log(Ml.levels.DEBUG,e)}info(...e){this._log(Ml.levels.INFO,e)}warn(...e){this._log(Ml.levels.WARNING,e)}makeError(e,t,r){if(kl)return this.makeError("censored error",t,{});t||(t=Ml.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Ul[t[e]>>4],r+=Ul[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case xl.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case xl.CALL_EXCEPTION:case xl.INSUFFICIENT_FUNDS:case xl.MISSING_NEW:case xl.NONCE_EXPIRED:case xl.REPLACEMENT_UNDERPRICED:case xl.TRANSACTION_REPLACED:case xl.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Ml.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Ol&&this.throwError("platform missing String.prototype.normalize",Ml.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ol})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Ml.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Ml.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Ml.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Ml.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Ml.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Ml.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Ml.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Rl||(Rl=new Ml("logger/5.8.0")),Rl}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Ml.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Nl){if(!e)return;this.globalLogger().throwError("error censorship permanent",Ml.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}kl=!!e,Nl=!!t}static setLogLevel(e){const t=Pl[e.toLowerCase()];null!=t?Tl=t:Ml.globalLogger().warn("invalid log level - "+e)}static from(e){return new Ml(e)}}Ml.errors=xl,Ml.levels=Cl;const Ll=new Ml("bytes/5.8.0");function Bl(e){return!!e.toHexString}function Dl(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Dl(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Fl(e){return"number"==typeof e&&e==e&&e%1==0}function jl(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Fl(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Fl(r)||r<0||r>=256)return!1}return!0}function Gl(e,t){if(t||(t={}),"number"==typeof e){Ll.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Dl(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Bl(e)&&(e=e.toHexString()),Wl(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Ll.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Dl(new Uint8Array(n))}return jl(e)?Dl(new Uint8Array(e)):Ll.throwArgumentError("invalid arrayify value","value",e)}function Wl(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const Hl="0123456789abcdef";function Kl(e,t){if(t||(t={}),"number"==typeof e){Ll.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=Hl[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Bl(e))return e.toHexString();if(Wl(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Ll.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(jl(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=Hl[(240&n)>>4]+Hl[15&n]}return t}return Ll.throwArgumentError("invalid hexlify value","value",e)}function zl(e){if("string"!=typeof e)e=Kl(e);else if(!Wl(e)||e.length%2)return null;return(e.length-2)/2}function Vl(e,t,r){return"string"!=typeof e?e=Kl(e):(!Wl(e)||e.length%2)&&Ll.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}var ql=O().BN;const Jl=new Ml("bignumber/5.8.0"),Xl={};let Yl=!1;class Ql{constructor(e,t){e!==Xl&&Jl.throwError("cannot call constructor directly; use BigNumber.from",Ml.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Zl(eh(this).fromTwos(e))}toTwos(e){return Zl(eh(this).toTwos(e))}abs(){return"-"===this._hex[0]?Ql.from(this._hex.substring(1)):this}add(e){return Zl(eh(this).add(eh(e)))}sub(e){return Zl(eh(this).sub(eh(e)))}div(e){return Ql.from(e).isZero()&&th("division-by-zero","div"),Zl(eh(this).div(eh(e)))}mul(e){return Zl(eh(this).mul(eh(e)))}mod(e){const t=eh(e);return t.isNeg()&&th("division-by-zero","mod"),Zl(eh(this).umod(t))}pow(e){const t=eh(e);return t.isNeg()&&th("negative-power","pow"),Zl(eh(this).pow(t))}and(e){const t=eh(e);return(this.isNegative()||t.isNeg())&&th("unbound-bitwise-result","and"),Zl(eh(this).and(t))}or(e){const t=eh(e);return(this.isNegative()||t.isNeg())&&th("unbound-bitwise-result","or"),Zl(eh(this).or(t))}xor(e){const t=eh(e);return(this.isNegative()||t.isNeg())&&th("unbound-bitwise-result","xor"),Zl(eh(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&th("negative-width","mask"),Zl(eh(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&th("negative-width","shl"),Zl(eh(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&th("negative-width","shr"),Zl(eh(this).shrn(e))}eq(e){return eh(this).eq(eh(e))}lt(e){return eh(this).lt(eh(e))}lte(e){return eh(this).lte(eh(e))}gt(e){return eh(this).gt(eh(e))}gte(e){return eh(this).gte(eh(e))}isNegative(){return"-"===this._hex[0]}isZero(){return eh(this).isZero()}toNumber(){try{return eh(this).toNumber()}catch(e){th("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return Jl.throwError("this platform does not support BigInt",Ml.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?Yl||(Yl=!0,Jl.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Jl.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Ml.errors.UNEXPECTED_ARGUMENT,{}):Jl.throwError("BigNumber.toString does not accept parameters",Ml.errors.UNEXPECTED_ARGUMENT,{})),eh(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Ql)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new Ql(Xl,$l(e)):e.match(/^-?[0-9]+$/)?new Ql(Xl,$l(new ql(e))):Jl.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&th("underflow","BigNumber.from",e),(e>=9007199254740991||e<=-9007199254740991)&&th("overflow","BigNumber.from",e),Ql.from(String(e));const t=e;if("bigint"==typeof t)return Ql.from(t.toString());if(jl(t))return Ql.from(Kl(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return Ql.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(Wl(e)||"-"===e[0]&&Wl(e.substring(1))))return Ql.from(e)}return Jl.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function $l(e){if("string"!=typeof e)return $l(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&Jl.throwArgumentError("invalid hex","value",e),"0x00"===(e=$l(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Zl(e){return Ql.from($l(e))}function eh(e){const t=Ql.from(e).toHexString();return"-"===t[0]?new ql("-"+t.substring(3),16):new ql(t.substring(2),16)}function th(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),Jl.throwError(e,Ml.errors.NUMERIC_FAULT,n)}function rh(e){return"0x"+se().keccak_256(Gl(e))}const nh=new Ml("rlp/5.8.0");function ih(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function oh(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(oh(e))}),t.length<=55)return t.unshift(192+t.length),t;const r=ih(t.length);return r.unshift(247+r.length),r.concat(t)}var t;Wl(t=e)&&!(t.length%2)||jl(t)||nh.throwArgumentError("RLP object must be BytesLike","object",e);const r=Array.prototype.slice.call(Gl(e));if(1===r.length&&r[0]<=127)return r;if(r.length<=55)return r.unshift(128+r.length),r;const n=ih(r.length);return n.unshift(183+n.length),n.concat(r)}const sh=new Ml("address/5.7.0");function ah(e){Wl(e,20)||sh.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=Gl(rh(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const uh={};for(let e=0;e<10;e++)uh[String(e)]=String(e);for(let e=0;e<26;e++)uh[String.fromCharCode(65+e)]=String(10+e);const ch=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function lh(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>uh[e]).join("");for(;t.length>=ch;){let e=t.substring(0,ch);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}function hh(e){let t=null;if("string"!=typeof e&&sh.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=ah(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&sh.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==lh(e)&&sh.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new ql(r,36).toString(16);t.length<40;)t="0"+t;t=ah("0x"+t)}else sh.throwArgumentError("invalid address","address",e);var r;return t}function fh(e){try{return hh(e),!0}catch(e){}return!1}function dh(e){let t=(r=hh(e).substring(2),new ql(r,16).toString(36)).toUpperCase();for(var r;t.length<30;)t="0"+t;return"XE"+lh("XE00"+t)+t}function ph(e){let t=null;try{t=hh(e.from)}catch(t){sh.throwArgumentError("missing from address","transaction",e)}return hh(Vl(rh(Kl(oh([t,function(e){let t=Gl(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}(Gl(Ql.from(e.nonce).toHexString()))]))),12))}function gh(e,t,r){return 32!==zl(t)&&sh.throwArgumentError("salt must be 32 bytes","salt",t),32!==zl(r)&&sh.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),hh(Vl(rh(function(e){const t=e.map(e=>Gl(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),Dl(n)}(["0xff",hh(e),t,r])),12))}let mh=!1,yh=!1;const bh={debug:1,default:2,info:2,warning:3,error:4,off:5};let vh=bh.default,wh=null;const Eh=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Ah,Sh;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Ah||(Ah={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Sh||(Sh={}));const _h="0123456789abcdef";class Ih{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==bh[r]&&this.throwArgumentError("invalid log level name","logLevel",e),vh>bh[r]||console.log.apply(console,t)}debug(...e){this._log(Ih.levels.DEBUG,e)}info(...e){this._log(Ih.levels.INFO,e)}warn(...e){this._log(Ih.levels.WARNING,e)}makeError(e,t,r){if(yh)return this.makeError("censored error",t,{});t||(t=Ih.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=_h[t[e]>>4],r+=_h[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Sh.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Sh.CALL_EXCEPTION:case Sh.INSUFFICIENT_FUNDS:case Sh.MISSING_NEW:case Sh.NONCE_EXPIRED:case Sh.REPLACEMENT_UNDERPRICED:case Sh.TRANSACTION_REPLACED:case Sh.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Ih.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Eh&&this.throwError("platform missing String.prototype.normalize",Ih.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Eh})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Ih.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Ih.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Ih.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Ih.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Ih.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Ih.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Ih.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return wh||(wh=new Ih("logger/5.8.0")),wh}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Ih.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),mh){if(!e)return;this.globalLogger().throwError("error censorship permanent",Ih.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}yh=!!e,mh=!!t}static setLogLevel(e){const t=bh[e.toLowerCase()];null!=t?vh=t:Ih.globalLogger().warn("invalid log level - "+e)}static from(e){return new Ih(e)}}Ih.errors=Sh,Ih.levels=Ah;const Nh=new Ih("bytes/5.8.0");function kh(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return kh(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Ph(e){return"number"==typeof e&&e==e&&e%1==0}function Th(e,t){if(t||(t={}),"number"==typeof e){Nh.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),kh(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e)&&(e=e.toHexString()),function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Nh.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return kh(new Uint8Array(n))}return function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Ph(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Ph(r)||r<0||r>=256)return!1}return!0}(e)?kh(new Uint8Array(e)):Nh.throwArgumentError("invalid arrayify value","value",e)}function Rh(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return Th(t)}function Oh(e){e=Th(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}let Ch=!1,xh=!1;const Uh={debug:1,default:2,info:2,warning:3,error:4,off:5};let Mh=Uh.default,Lh=null;const Bh=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Dh,Fh;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Dh||(Dh={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Fh||(Fh={}));const jh="0123456789abcdef";class Gh{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Uh[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Mh>Uh[r]||console.log.apply(console,t)}debug(...e){this._log(Gh.levels.DEBUG,e)}info(...e){this._log(Gh.levels.INFO,e)}warn(...e){this._log(Gh.levels.WARNING,e)}makeError(e,t,r){if(xh)return this.makeError("censored error",t,{});t||(t=Gh.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=jh[t[e]>>4],r+=jh[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Fh.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Fh.CALL_EXCEPTION:case Fh.INSUFFICIENT_FUNDS:case Fh.MISSING_NEW:case Fh.NONCE_EXPIRED:case Fh.REPLACEMENT_UNDERPRICED:case Fh.TRANSACTION_REPLACED:case Fh.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Gh.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Bh&&this.throwError("platform missing String.prototype.normalize",Gh.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Bh})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Gh.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Gh.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Gh.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Gh.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Gh.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Gh.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Gh.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Lh||(Lh=new Gh("logger/5.8.0")),Lh}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Gh.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Ch){if(!e)return;this.globalLogger().throwError("error censorship permanent",Gh.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}xh=!!e,Ch=!!t}static setLogLevel(e){const t=Uh[e.toLowerCase()];null!=t?Mh=t:Gh.globalLogger().warn("invalid log level - "+e)}static from(e){return new Gh(e)}}Gh.errors=Fh,Gh.levels=Dh;const Wh=new Gh("bytes/5.8.0");function Hh(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Hh(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Kh(e){return"number"==typeof e&&e==e&&e%1==0}function zh(e,t){if(t||(t={}),"number"==typeof e){Wh.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Hh(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e)&&(e=e.toHexString()),function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Wh.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Hh(new Uint8Array(n))}return function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Kh(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Kh(r)||r<0||r>=256)return!1}return!0}(e)?Hh(new Uint8Array(e)):Wh.throwArgumentError("invalid arrayify value","value",e)}function Vh(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}new Gh("properties/5.8.0");class qh{constructor(e){Vh(this,"alphabet",e),Vh(this,"base",e.length),Vh(this,"_alphabetMap",{}),Vh(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=zh(e);if(0===t.length)return"";let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e)n+=r[e]<<8,r[e]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let e=0;0===t[e]&&e<t.length-1;++e)n+=this._leader;for(let e=r.length-1;e>=0;--e)n+=this.alphabet[r[e]];return n}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let e=0;e<t.length;++e)i+=t[e]*this.base,t[e]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return zh(new Uint8Array(t.reverse()))}}new qh("abcdefghijklmnopqrstuvwxyz234567");const Jh=new qh("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");let Xh=!1,Yh=!1;const Qh={debug:1,default:2,info:2,warning:3,error:4,off:5};let $h=Qh.default,Zh=null;const ef=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var tf,rf;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(tf||(tf={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(rf||(rf={}));const nf="0123456789abcdef";class of{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Qh[r]&&this.throwArgumentError("invalid log level name","logLevel",e),$h>Qh[r]||console.log.apply(console,t)}debug(...e){this._log(of.levels.DEBUG,e)}info(...e){this._log(of.levels.INFO,e)}warn(...e){this._log(of.levels.WARNING,e)}makeError(e,t,r){if(Yh)return this.makeError("censored error",t,{});t||(t=of.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=nf[t[e]>>4],r+=nf[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case rf.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case rf.CALL_EXCEPTION:case rf.INSUFFICIENT_FUNDS:case rf.MISSING_NEW:case rf.NONCE_EXPIRED:case rf.REPLACEMENT_UNDERPRICED:case rf.TRANSACTION_REPLACED:case rf.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,of.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),ef&&this.throwError("platform missing String.prototype.normalize",of.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:ef})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,of.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,of.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,of.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,of.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",of.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",of.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",of.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Zh||(Zh=new of("logger/5.8.0")),Zh}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",of.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Xh){if(!e)return;this.globalLogger().throwError("error censorship permanent",of.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Yh=!!e,Xh=!!t}static setLogLevel(e){const t=Qh[e.toLowerCase()];null!=t?$h=t:of.globalLogger().warn("invalid log level - "+e)}static from(e){return new of(e)}}of.errors=rf,of.levels=tf;const sf=new of("bytes/5.7.0");function af(e){return!!e.toHexString}function uf(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return uf(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function cf(e){return mf(e)&&!(e.length%2)||hf(e)}function lf(e){return"number"==typeof e&&e==e&&e%1==0}function hf(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!lf(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!lf(r)||r<0||r>=256)return!1}return!0}function ff(e,t){if(t||(t={}),"number"==typeof e){sf.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),uf(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),af(e)&&(e=e.toHexString()),mf(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":sf.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return uf(new Uint8Array(n))}return hf(e)?uf(new Uint8Array(e)):sf.throwArgumentError("invalid arrayify value","value",e)}function df(e){const t=e.map(e=>ff(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),uf(n)}function pf(e){let t=ff(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function gf(e,t){(e=ff(e)).length>t&&sf.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),uf(r)}function mf(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const yf="0123456789abcdef";function bf(e,t){if(t||(t={}),"number"==typeof e){sf.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=yf[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),af(e))return e.toHexString();if(mf(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":sf.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(hf(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=yf[(240&n)>>4]+yf[15&n]}return t}return sf.throwArgumentError("invalid hexlify value","value",e)}function vf(e){if("string"!=typeof e)e=bf(e);else if(!mf(e)||e.length%2)return null;return(e.length-2)/2}function wf(e,t,r){return"string"!=typeof e?e=bf(e):(!mf(e)||e.length%2)&&sf.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function Ef(e){let t="0x";return e.forEach(e=>{t+=bf(e).substring(2)}),t}function Af(e){const t=Sf(bf(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function Sf(e){"string"!=typeof e&&(e=bf(e)),mf(e)||sf.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function _f(e,t){for("string"!=typeof e?e=bf(e):mf(e)||sf.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&sf.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function If(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(cf(e)){let r=ff(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=bf(r.slice(0,32)),t.s=bf(r.slice(32,64))):65===r.length?(t.r=bf(r.slice(0,32)),t.s=bf(r.slice(32,64)),t.v=r[64]):sf.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:sf.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=bf(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=gf(ff(t._vs),32);t._vs=bf(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&sf.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=bf(r);null==t.s?t.s=i:t.s!==i&&sf.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?sf.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&sf.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&mf(t.r)?t.r=_f(t.r,32):sf.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&mf(t.s)?t.s=_f(t.s,32):sf.throwArgumentError("signature missing or invalid s","signature",e);const r=ff(t.s);r[0]>=128&&sf.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=bf(r);t._vs&&(mf(t._vs)||sf.throwArgumentError("signature invalid _vs","signature",e),t._vs=_f(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&sf.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function Nf(e){return bf(df([(e=If(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}let kf=!1,Pf=!1;const Tf={debug:1,default:2,info:2,warning:3,error:4,off:5};let Rf=Tf.default,Of=null;const Cf=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var xf,Uf;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(xf||(xf={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Uf||(Uf={}));const Mf="0123456789abcdef";class Lf{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Tf[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Rf>Tf[r]||console.log.apply(console,t)}debug(...e){this._log(Lf.levels.DEBUG,e)}info(...e){this._log(Lf.levels.INFO,e)}warn(...e){this._log(Lf.levels.WARNING,e)}makeError(e,t,r){if(Pf)return this.makeError("censored error",t,{});t||(t=Lf.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Mf[t[e]>>4],r+=Mf[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Uf.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Uf.CALL_EXCEPTION:case Uf.INSUFFICIENT_FUNDS:case Uf.MISSING_NEW:case Uf.NONCE_EXPIRED:case Uf.REPLACEMENT_UNDERPRICED:case Uf.TRANSACTION_REPLACED:case Uf.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Lf.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Cf&&this.throwError("platform missing String.prototype.normalize",Lf.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Cf})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Lf.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Lf.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Lf.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Lf.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Lf.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Lf.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Lf.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Of||(Of=new Lf("logger/5.8.0")),Of}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Lf.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),kf){if(!e)return;this.globalLogger().throwError("error censorship permanent",Lf.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Pf=!!e,kf=!!t}static setLogLevel(e){const t=Tf[e.toLowerCase()];null!=t?Rf=t:Lf.globalLogger().warn("invalid log level - "+e)}static from(e){return new Lf(e)}}Lf.errors=Uf,Lf.levels=xf;const Bf=new Lf("bytes/5.8.0");function Df(e){return!!e.toHexString}function Ff(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Ff(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function jf(e){return"number"==typeof e&&e==e&&e%1==0}function Gf(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!jf(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!jf(r)||r<0||r>=256)return!1}return!0}function Wf(e,t){if(t||(t={}),"number"==typeof e){Bf.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Ff(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Df(e)&&(e=e.toHexString()),Kf(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Bf.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Ff(new Uint8Array(n))}return Gf(e)?Ff(new Uint8Array(e)):Bf.throwArgumentError("invalid arrayify value","value",e)}function Hf(e){const t=e.map(e=>Wf(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),Ff(n)}function Kf(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const zf="0123456789abcdef";function Vf(e,t){if(t||(t={}),"number"==typeof e){Bf.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=zf[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Df(e))return e.toHexString();if(Kf(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Bf.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Gf(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=zf[(240&n)>>4]+zf[15&n]}return t}return Bf.throwArgumentError("invalid hexlify value","value",e)}function qf(e){let t="0x";return e.forEach(e=>{t+=Vf(e).substring(2)}),t}function Jf(e,t){for("string"!=typeof e?e=Vf(e):Kf(e)||Bf.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Bf.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}const Xf=new Lf("strings/5.8.0");var Yf,Qf;function $f(e,t,r,n,i){if(e===Qf.BAD_PREFIX||e===Qf.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===Qf.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Yf||(Yf={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Qf||(Qf={}));const Zf=Object.freeze({error:function(e,t,r,n,i){return Xf.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:$f,replace:function(e,t,r,n,i){return e===Qf.OVERLONG?(n.push(i),0):(n.push(65533),$f(e,t,r))}});function ed(e,t=Yf.current){t!=Yf.current&&(Xf.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&n)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return Wf(r)}function td(e){return"0x"+se().keccak_256(Wf(e))}const rd="hash/5.7.0";function nd(e,t){null==t&&(t=1);const r=[],n=r.forEach,i=function(e,t){n.call(e,function(e){t>0&&Array.isArray(e)?i(e,t-1):r.push(e)})};return i(e,t),r}function id(e){return 1&e?~e>>1:e>>1}function od(e,t){let r=Array(e);for(let n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function sd(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=id(t());return r}function ad(e,t){let r=od(e(),e),n=e(),i=od(n,e),o=function(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}(n,e);for(let e=0;e<n;e++)for(let t=0;t<o[e];t++)r.push(i[e]+t);return t?r.map(e=>t[e]):r}function ud(e,t,r){let n=Array(e).fill(void 0).map(()=>[]);for(let i=0;i<t;i++)sd(e,r).forEach((e,t)=>n[t].push(e));return n}function cd(e,t){let r=1+t(),n=t(),i=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(r)}return t}(t);return nd(ud(i.length,1+e,t).map((e,t)=>{const o=e[0],s=e.slice(1);return Array(i[t]).fill(void 0).map((e,t)=>{let i=t*n;return[o+t*r,s.map(e=>e+i)]})}))}function ld(e,t){return ud(1+t(),1+e,t).map(e=>[e[0],e.slice(1)])}const hd=function(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,o=[0,1];for(let e=1;e<n;e++)o.push(i+=r());let s=r(),a=t;t+=s;let u=0,c=0;function l(){return 0==u&&(c=c<<8|e[t++],u=8),c>>--u&1}const h=Math.pow(2,31),f=h>>>1,d=f>>1,p=h-1;let g=0;for(let e=0;e<31;e++)g=g<<1|l();let m=[],y=0,b=h;for(;;){let e=Math.floor(((g-y+1)*i-1)/b),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<o[n]?r=n:t=n}if(0==t)break;m.push(t);let s=y+Math.floor(b*o[t]/i),a=y+Math.floor(b*o[t+1]/i)-1;for(;0==((s^a)&f);)g=g<<1&p|l(),s=s<<1&p,a=a<<1&p|1;for(;s&~a&d;)g=g&f|g<<1&p>>>1|l(),s=s<<1^f,a=(a^f)<<1|f|1;y=s,b=1+a-s}let v=n-4;return m.map(t=>{switch(t-v){case 3:return v+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return v+256+(e[a++]<<8|e[a++]);case 1:return v+e[a++];default:return t-1}})}(e))}(function(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return Wf(t)}("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA==")),fd=new Set(ad(hd)),dd=new Set(ad(hd)),pd=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(cd(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(ld(r,e))}return function(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}(nd(t))}(hd),gd=function(e){let t=ad(e).sort((e,t)=>e-t);return function r(){let n=[];for(;;){let i=ad(e,t);if(0==i.length)break;n.push({set:new Set(i),node:r()})}n.sort((e,t)=>t.set.size-e.set.size);let i=e(),o=i%3;i=i/3|0;let s=!!(1&i);return i>>=1,{branches:n,valid:o,fe0f:s,save:1==i,check:2==i}}()}(hd),md=45,yd=95;function bd(e){return function(e,t=Yf.current){return function(e,t){null==t&&(t=Zf.error),e=Wf(e);const r=[];let n=0;for(;n<e.length;){const i=e[n++];if(!(i>>7)){r.push(i);continue}let o=null,s=null;if(192==(224&i))o=1,s=127;else if(224==(240&i))o=2,s=2047;else{if(240!=(248&i)){n+=t(128==(192&i)?Qf.UNEXPECTED_CONTINUE:Qf.BAD_PREFIX,n-1,e,r);continue}o=3,s=65535}if(n-1+o>=e.length){n+=t(Qf.OVERRUN,n-1,e,r);continue}let a=i&(1<<8-o-1)-1;for(let i=0;i<o;i++){let i=e[n];if(128!=(192&i)){n+=t(Qf.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=t(Qf.OUT_OF_RANGE,n-1-o,e,r,a):a>=55296&&a<=57343?n+=t(Qf.UTF16_SURROGATE,n-1-o,e,r,a):a<=s?n+=t(Qf.OVERLONG,n-1-o,e,r,a):r.push(a))}return r}(ed(e,t))}(e)}function vd(e){return e.filter(e=>65039!=e)}function wd(e){for(let t of e.split(".")){let e=bd(t);try{for(let t=e.lastIndexOf(yd)-1;t>=0;t--)if(e[t]!==yd)throw new Error("underscore only allowed at start");if(e.length>=4&&e.every(e=>e<128)&&e[2]===md&&e[3]===md)throw new Error("invalid label extension")}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function Ed(e,t){var r;let n,i,o=gd,s=[],a=e.length;for(t&&(t.length=0);a;){let u=e[--a];if(o=null===(r=o.branches.find(e=>e.set.has(u)))||void 0===r?void 0:r.node,!o)break;if(o.save)i=u;else if(o.check&&u===i)break;s.push(u),o.fe0f&&(s.push(65039),a>0&&65039==e[a-1]&&a--),o.valid&&(n=s.slice(),2==o.valid&&n.splice(1,1),t&&t.push(...e.slice(a).reverse()),e.length=a)}return n}const Ad=new Lf(rd),Sd=new Uint8Array(32);function _d(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function Id(e){const t=ed(function(e){return wd(function(e,t){let r=bd(e).reverse(),n=[];for(;r.length;){let e=Ed(r);if(e){n.push(...t(e));continue}let i=r.pop();if(fd.has(i)){n.push(i);continue}if(dd.has(i))continue;let o=pd[i];if(!o)throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`);n.push(...o)}return wd(String.fromCodePoint(...n).normalize("NFC"))}(e,vd))}(e)),r=[];if(0===e.length)return r;let n=0;for(let e=0;e<t.length;e++)46===t[e]&&(r.push(_d(t.slice(n,e))),n=e+1);if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(_d(t.slice(n))),r}function Nd(e){try{return 0!==Id(e).length}catch(e){}return!1}function kd(e){"string"!=typeof e&&Ad.throwArgumentError("invalid ENS name; not a string","name",e);let t=Sd;const r=Id(e);for(;r.length;)t=td(Hf([t,td(r.pop())]));return Vf(t)}function Pd(e){return Vf(Hf(Id(e).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}Sd.fill(0);const Td="Ethereum Signed Message:\n";function Rd(e){return"string"==typeof e&&(e=ed(e)),td(Hf([ed(Td),ed(String(e.length)),e]))}function Od(e){return td(ed(e))}var Cd=O().BN;const xd=new Lf("bignumber/5.8.0"),Ud={};let Md=!1;class Ld{constructor(e,t){e!==Ud&&xd.throwError("cannot call constructor directly; use BigNumber.from",Lf.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Dd(Fd(this).fromTwos(e))}toTwos(e){return Dd(Fd(this).toTwos(e))}abs(){return"-"===this._hex[0]?Ld.from(this._hex.substring(1)):this}add(e){return Dd(Fd(this).add(Fd(e)))}sub(e){return Dd(Fd(this).sub(Fd(e)))}div(e){return Ld.from(e).isZero()&&jd("division-by-zero","div"),Dd(Fd(this).div(Fd(e)))}mul(e){return Dd(Fd(this).mul(Fd(e)))}mod(e){const t=Fd(e);return t.isNeg()&&jd("division-by-zero","mod"),Dd(Fd(this).umod(t))}pow(e){const t=Fd(e);return t.isNeg()&&jd("negative-power","pow"),Dd(Fd(this).pow(t))}and(e){const t=Fd(e);return(this.isNegative()||t.isNeg())&&jd("unbound-bitwise-result","and"),Dd(Fd(this).and(t))}or(e){const t=Fd(e);return(this.isNegative()||t.isNeg())&&jd("unbound-bitwise-result","or"),Dd(Fd(this).or(t))}xor(e){const t=Fd(e);return(this.isNegative()||t.isNeg())&&jd("unbound-bitwise-result","xor"),Dd(Fd(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&jd("negative-width","mask"),Dd(Fd(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&jd("negative-width","shl"),Dd(Fd(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&jd("negative-width","shr"),Dd(Fd(this).shrn(e))}eq(e){return Fd(this).eq(Fd(e))}lt(e){return Fd(this).lt(Fd(e))}lte(e){return Fd(this).lte(Fd(e))}gt(e){return Fd(this).gt(Fd(e))}gte(e){return Fd(this).gte(Fd(e))}isNegative(){return"-"===this._hex[0]}isZero(){return Fd(this).isZero()}toNumber(){try{return Fd(this).toNumber()}catch(e){jd("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return xd.throwError("this platform does not support BigInt",Lf.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?Md||(Md=!0,xd.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?xd.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Lf.errors.UNEXPECTED_ARGUMENT,{}):xd.throwError("BigNumber.toString does not accept parameters",Lf.errors.UNEXPECTED_ARGUMENT,{})),Fd(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Ld)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new Ld(Ud,Bd(e)):e.match(/^-?[0-9]+$/)?new Ld(Ud,Bd(new Cd(e))):xd.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&jd("underflow","BigNumber.from",e),(e>=9007199254740991||e<=-9007199254740991)&&jd("overflow","BigNumber.from",e),Ld.from(String(e));const t=e;if("bigint"==typeof t)return Ld.from(t.toString());if(Gf(t))return Ld.from(Vf(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return Ld.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(Kf(e)||"-"===e[0]&&Kf(e.substring(1))))return Ld.from(e)}return xd.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function Bd(e){if("string"!=typeof e)return Bd(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&xd.throwArgumentError("invalid hex","value",e),"0x00"===(e=Bd(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Dd(e){return Ld.from(Bd(e))}function Fd(e){const t=Ld.from(e).toHexString();return"-"===t[0]?new Cd("-"+t.substring(3),16):new Cd(t.substring(2),16)}function jd(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),xd.throwError(e,Lf.errors.NUMERIC_FAULT,n)}const Gd=new Lf("address/5.8.0");function Wd(e){Kf(e,20)||Gd.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=Wf(td(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const Hd={};for(let e=0;e<10;e++)Hd[String(e)]=String(e);for(let e=0;e<26;e++)Hd[String.fromCharCode(65+e)]=String(10+e);const Kd=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function zd(e){let t=null;if("string"!=typeof e&&Gd.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=Wd(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Gd.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>Hd[e]).join("");for(;t.length>=Kd;){let e=t.substring(0,Kd);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e)&&Gd.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new Cd(r,36).toString(16);t.length<40;)t="0"+t;t=Wd("0x"+t)}else Gd.throwArgumentError("invalid address","address",e);var r;return t}const Vd=new Lf("properties/5.8.0");function qd(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function Jd(e){const t={};for(const r in e)t[r]=e[r];return t}const Xd={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Yd(e){if(null==e||Xd[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!Yd(n))return!1}return!0}return Vd.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Qd(e){if(Yd(e))return e;if(Array.isArray(e))return Object.freeze(e.map(e=>$d(e)));if("object"==typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&qd(t,r,$d(n))}return t}return Vd.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function $d(e){return Qd(e)}const Zd=new Lf(rd),ep=new Uint8Array(32);ep.fill(0);const tp=Ld.from(-1),rp=Ld.from(0),np=Ld.from(1),ip=Ld.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),op=Jf(np.toHexString(),32),sp=Jf(rp.toHexString(),32),ap={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},up=["name","version","chainId","verifyingContract","salt"];function cp(e){return function(t){return"string"!=typeof t&&Zd.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const lp={name:cp("name"),version:cp("version"),chainId:function(e){try{return Ld.from(e).toString()}catch(e){}return Zd.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return zd(e).toLowerCase()}catch(e){}return Zd.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=Wf(e);if(32!==t.length)throw new Error("bad length");return Vf(t)}catch(e){}return Zd.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function hp(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=""===t[1],n=parseInt(t[2]||"256");(n%8!=0||n>256||t[2]&&t[2]!==String(n))&&Zd.throwArgumentError("invalid numeric width","type",e);const i=ip.mask(r?n-1:n),o=r?i.add(np).mul(tp):rp;return function(t){const r=Ld.from(t);return(r.lt(o)||r.gt(i))&&Zd.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),Jf(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(0===r||r>32||t[1]!==String(r))&&Zd.throwArgumentError("invalid bytes width","type",e),function(t){return Wf(t).length!==r&&Zd.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){const t=Wf(e),r=t.length%32;return r?qf([t,ep.slice(r)]):Vf(t)}(t)}}}switch(e){case"address":return function(e){return Jf(zd(e),32)};case"bool":return function(e){return e?op:sp};case"bytes":return function(e){return td(e)};case"string":return function(e){return Od(e)}}return null}function fp(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}class dp{constructor(e){qd(this,"types",Object.freeze($d(e))),qd(this,"_encoderCache",{}),qd(this,"_types",{});const t={},r={},n={};Object.keys(e).forEach(e=>{t[e]={},r[e]=[],n[e]={}});for(const n in e){const i={};e[n].forEach(o=>{i[o.name]&&Zd.throwArgumentError(`duplicate variable name ${JSON.stringify(o.name)} in ${JSON.stringify(n)}`,"types",e),i[o.name]=!0;const s=o.type.match(/^([^\x5b]*)(\x5b|$)/)[1];s===n&&Zd.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",e),hp(s)||(r[s]||Zd.throwArgumentError(`unknown type ${JSON.stringify(s)}`,"types",e),r[s].push(n),t[n][s]=!0)})}const i=Object.keys(r).filter(e=>0===r[e].length);0===i.length?Zd.throwArgumentError("missing primary type","types",e):i.length>1&&Zd.throwArgumentError(`ambiguous primary types or unused types: ${i.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),qd(this,"primaryType",i[0]),function i(o,s){s[o]&&Zd.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),s[o]=!0,Object.keys(t[o]).forEach(e=>{r[e]&&(i(e,s),Object.keys(s).forEach(t=>{n[t][e]=!0}))}),delete s[o]}(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort(),this._types[t]=fp(t,e[t])+r.map(t=>fp(t,e[t])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=hp(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],r=this.getEncoder(e),n=parseInt(t[3]);return t=>{n>=0&&t.length!==n&&Zd.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let i=t.map(r);return this._types[e]&&(i=i.map(td)),td(qf(i))}}const r=this.types[e];if(r){const t=Od(this._types[e]);return e=>{const n=r.map(({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);return this._types[r]?td(n):n});return n.unshift(t),qf(n)}}return Zd.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Zd.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return td(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(hp(e))return r(e,t);const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1],i=parseInt(n[3]);return i>=0&&t.length!==i&&Zd.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(t=>this._visit(e,t,r))}const i=this.types[e];return i?i.reduce((e,{name:n,type:i})=>(e[n]=this._visit(i,t[n],r),e),{}):Zd.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new dp(e)}static getPrimaryType(e){return dp.from(e).primaryType}static hashStruct(e,t,r){return dp.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=ap[r];n||Zd.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort((e,t)=>up.indexOf(e.name)-up.indexOf(t.name)),dp.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return qf(["0x1901",dp.hashDomain(e),dp.from(t).hash(r)])}static hash(e,t,r){return td(dp.encode(e,t,r))}static resolveNames(e,t,r,n){return i=this,o=void 0,a=function*(){e=Jd(e);const i={};e.verifyingContract&&!Kf(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=dp.from(t);o.visit(r,(e,t)=>("address"!==e||Kf(t,20)||(i[t]="0x"),t));for(const e in i)i[e]=yield n(e);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(e,t)=>"address"===e&&i[t]?i[t]:t),{domain:e,value:r}},new((s=void 0)||(s=Promise))(function(e,t){function r(e){try{u(a.next(e))}catch(e){t(e)}}function n(e){try{u(a.throw(e))}catch(e){t(e)}}function u(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s(function(e){e(i)})).then(r,n)}u((a=a.apply(i,o||[])).next())});var i,o,s,a}static getPayload(e,t,r){dp.hashDomain(e);const n={},i=[];up.forEach(t=>{const r=e[t];null!=r&&(n[t]=lp[t](r),i.push({name:t,type:ap[t]}))});const o=dp.from(t),s=Jd(t);return s.EIP712Domain?Zd.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):s.EIP712Domain=i,o.encode(r),{types:s,domain:n,primaryType:o.primaryType,message:o.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return Vf(Wf(t));if(e.match(/^u?int/))return Ld.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!=typeof t&&Zd.throwArgumentError("invalid string","value",t),t}return Zd.throwArgumentError("unsupported type","type",e)})}}}let pp=!1,gp=!1;const mp={debug:1,default:2,info:2,warning:3,error:4,off:5};let yp=mp.default,bp=null;const vp=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var wp,Ep;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(wp||(wp={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Ep||(Ep={}));const Ap="0123456789abcdef";class Sp{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==mp[r]&&this.throwArgumentError("invalid log level name","logLevel",e),yp>mp[r]||console.log.apply(console,t)}debug(...e){this._log(Sp.levels.DEBUG,e)}info(...e){this._log(Sp.levels.INFO,e)}warn(...e){this._log(Sp.levels.WARNING,e)}makeError(e,t,r){if(gp)return this.makeError("censored error",t,{});t||(t=Sp.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Ap[t[e]>>4],r+=Ap[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Ep.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Ep.CALL_EXCEPTION:case Ep.INSUFFICIENT_FUNDS:case Ep.MISSING_NEW:case Ep.NONCE_EXPIRED:case Ep.REPLACEMENT_UNDERPRICED:case Ep.TRANSACTION_REPLACED:case Ep.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Sp.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),vp&&this.throwError("platform missing String.prototype.normalize",Sp.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:vp})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Sp.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Sp.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Sp.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Sp.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Sp.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Sp.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Sp.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return bp||(bp=new Sp("logger/5.8.0")),bp}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Sp.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),pp){if(!e)return;this.globalLogger().throwError("error censorship permanent",Sp.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}gp=!!e,pp=!!t}static setLogLevel(e){const t=mp[e.toLowerCase()];null!=t?yp=t:Sp.globalLogger().warn("invalid log level - "+e)}static from(e){return new Sp(e)}}Sp.errors=Ep,Sp.levels=wp;const _p=new Sp("bytes/5.8.0");function Ip(e){return!!e.toHexString}function Np(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Np(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function kp(e){return"number"==typeof e&&e==e&&e%1==0}function Pp(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!kp(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!kp(r)||r<0||r>=256)return!1}return!0}function Tp(e,t){if(t||(t={}),"number"==typeof e){_p.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Np(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Ip(e)&&(e=e.toHexString()),Op(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":_p.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Np(new Uint8Array(n))}return Pp(e)?Np(new Uint8Array(e)):_p.throwArgumentError("invalid arrayify value","value",e)}function Rp(e){const t=e.map(e=>Tp(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),Np(n)}function Op(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const Cp="0123456789abcdef";function xp(e,t){if(t||(t={}),"number"==typeof e){_p.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=Cp[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Ip(e))return e.toHexString();if(Op(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":_p.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Pp(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=Cp[(240&n)>>4]+Cp[15&n]}return t}return _p.throwArgumentError("invalid hexlify value","value",e)}function Up(e,t,r){return"string"!=typeof e?e=xp(e):(!Op(e)||e.length%2)&&_p.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function Mp(e,t){for("string"!=typeof e?e=xp(e):Op(e)||_p.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&_p.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function Lp(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}new Sp("properties/5.8.0");class Bp{constructor(e){Lp(this,"alphabet",e),Lp(this,"base",e.length),Lp(this,"_alphabetMap",{}),Lp(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=Tp(e);if(0===t.length)return"";let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e)n+=r[e]<<8,r[e]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let e=0;0===t[e]&&e<t.length-1;++e)n+=this._leader;for(let e=r.length-1;e>=0;--e)n+=this.alphabet[r[e]];return n}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let e=0;e<t.length;++e)i+=t[e]*this.base,t[e]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return Tp(new Uint8Array(t.reverse()))}}new Bp("abcdefghijklmnopqrstuvwxyz234567");const Dp=new Bp("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Fp=O().BN;const jp=new Sp("bignumber/5.8.0"),Gp={};let Wp=!1;class Hp{constructor(e,t){e!==Gp&&jp.throwError("cannot call constructor directly; use BigNumber.from",Sp.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return zp(Vp(this).fromTwos(e))}toTwos(e){return zp(Vp(this).toTwos(e))}abs(){return"-"===this._hex[0]?Hp.from(this._hex.substring(1)):this}add(e){return zp(Vp(this).add(Vp(e)))}sub(e){return zp(Vp(this).sub(Vp(e)))}div(e){return Hp.from(e).isZero()&&qp("division-by-zero","div"),zp(Vp(this).div(Vp(e)))}mul(e){return zp(Vp(this).mul(Vp(e)))}mod(e){const t=Vp(e);return t.isNeg()&&qp("division-by-zero","mod"),zp(Vp(this).umod(t))}pow(e){const t=Vp(e);return t.isNeg()&&qp("negative-power","pow"),zp(Vp(this).pow(t))}and(e){const t=Vp(e);return(this.isNegative()||t.isNeg())&&qp("unbound-bitwise-result","and"),zp(Vp(this).and(t))}or(e){const t=Vp(e);return(this.isNegative()||t.isNeg())&&qp("unbound-bitwise-result","or"),zp(Vp(this).or(t))}xor(e){const t=Vp(e);return(this.isNegative()||t.isNeg())&&qp("unbound-bitwise-result","xor"),zp(Vp(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&qp("negative-width","mask"),zp(Vp(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&qp("negative-width","shl"),zp(Vp(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&qp("negative-width","shr"),zp(Vp(this).shrn(e))}eq(e){return Vp(this).eq(Vp(e))}lt(e){return Vp(this).lt(Vp(e))}lte(e){return Vp(this).lte(Vp(e))}gt(e){return Vp(this).gt(Vp(e))}gte(e){return Vp(this).gte(Vp(e))}isNegative(){return"-"===this._hex[0]}isZero(){return Vp(this).isZero()}toNumber(){try{return Vp(this).toNumber()}catch(e){qp("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return jp.throwError("this platform does not support BigInt",Sp.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?Wp||(Wp=!0,jp.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?jp.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Sp.errors.UNEXPECTED_ARGUMENT,{}):jp.throwError("BigNumber.toString does not accept parameters",Sp.errors.UNEXPECTED_ARGUMENT,{})),Vp(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Hp)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new Hp(Gp,Kp(e)):e.match(/^-?[0-9]+$/)?new Hp(Gp,Kp(new Fp(e))):jp.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&qp("underflow","BigNumber.from",e),(e>=9007199254740991||e<=-9007199254740991)&&qp("overflow","BigNumber.from",e),Hp.from(String(e));const t=e;if("bigint"==typeof t)return Hp.from(t.toString());if(Pp(t))return Hp.from(xp(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return Hp.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(Op(e)||"-"===e[0]&&Op(e.substring(1))))return Hp.from(e)}return jp.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function Kp(e){if("string"!=typeof e)return Kp(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&jp.throwArgumentError("invalid hex","value",e),"0x00"===(e=Kp(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function zp(e){return Hp.from(Kp(e))}function Vp(e){const t=Hp.from(e).toHexString();return"-"===t[0]?new Fp("-"+t.substring(3),16):new Fp(t.substring(2),16)}function qp(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),jp.throwError(e,Sp.errors.NUMERIC_FAULT,n)}const Jp=new Sp("strings/5.8.0");var Xp,Yp,Qp;function $p(e,t,r,n,i){if(e===Yp.BAD_PREFIX||e===Yp.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===Yp.OVERRUN?r.length-t-1:0}function Zp(e,t=Xp.current){t!=Xp.current&&(Jp.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&n)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return Tp(r)}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Xp||(Xp={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Yp||(Yp={})),Object.freeze({error:function(e,t,r,n,i){return Jp.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:$p,replace:function(e,t,r,n,i){return e===Yp.OVERLONG?(n.push(i),0):(n.push(65533),$p(e,t,r))}}),function(e){e.sha256="sha256",e.sha512="sha512"}(Qp||(Qp={}));const eg=new Sp("sha2/5.8.0");function tg(e){return"0x"+Gt().sha256().update(Tp(e)).digest("hex")}function rg(e,t,r){return Qp[e]||eg.throwError("unsupported algorithm "+e,Sp.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Gt().hmac(Gt()[e],Tp(t)).update(Tp(r)).digest("hex")}function ng(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var ig=og;function og(e,t){if(!e)throw new Error(t||"Assertion failed")}og.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var sg=ng(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}}),ag=ng(function(e,t){var r=t;r.assert=ig,r.toArray=sg.toArray,r.zero2=sg.zero2,r.toHex=sg.toHex,r.encode=sg.encode,r.getNAF=function(e,t,r){var n,i=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<i.length;n+=1)i[n]=0;var o=1<<t+1,s=e.clone();for(n=0;n<i.length;n++){var a,u=s.andln(o-1);s.isOdd()?(a=u>(o>>1)-1?(o>>1)-u:u,s.isubn(a)):a=0,i[n]=a,s.iushrn(1)}return i},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),s=1&u?3!=(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u:0,r[0].push(s),a=1&c?3!=(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c:0,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(O())(e,"hex","le")}}),ug=ag.getNAF,cg=ag.getJSF,lg=ag.assert;function hg(e,t){this.type=e,this.p=new(O())(t.p,16),this.red=t.prime?O().red(t.prime):O().mont(this.p),this.zero=new(O())(0).toRed(this.red),this.one=new(O())(1).toRed(this.red),this.two=new(O())(2).toRed(this.red),this.n=t.n&&new(O())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var fg=hg;function dg(e,t){this.curve=e,this.type=t,this.precomputed=null}hg.prototype.point=function(){throw new Error("Not implemented")},hg.prototype.validate=function(){throw new Error("Not implemented")},hg.prototype._fixedNafMul=function(e,t){lg(e.precomputed);var r=e._getDoubles(),n=ug(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var u=o+r.step-1;u>=o;u--)s=(s<<1)+n[u];a.push(s)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=i;h>0;h--){for(o=0;o<a.length;o++)(s=a[o])===h?l=l.mixedAdd(r.points[o]):s===-h&&(l=l.mixedAdd(r.points[o].neg()));c=c.add(l)}return c.toP()},hg.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=ug(t,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var u=0;a>=0&&0===o[a];a--)u++;if(a>=0&&u++,s=s.dblp(u),a<0)break;var c=o[a];lg(0!==c),s="affine"===e.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===e.type?s.toP():s},hg.prototype._wnafMulAdd=function(e,t,r,n,i){var o,s,a,u=this._wnafT1,c=this._wnafT2,l=this._wnafT3,h=0;for(o=0;o<n;o++){var f=(a=t[o])._getNAFPoints(e);u[o]=f.wnd,c[o]=f.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var g=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(g[1]=t[d].add(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].add(t[p].neg())):(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=cg(r[d],r[p]);for(h=Math.max(y[0].length,h),l[d]=new Array(h),l[p]=new Array(h),s=0;s<h;s++){var b=0|y[0][s],v=0|y[1][s];l[d][s]=m[3*(b+1)+(v+1)],l[p][s]=0,c[d]=g}}else l[d]=ug(r[d],u[d],this._bitLength),l[p]=ug(r[p],u[p],this._bitLength),h=Math.max(l[d].length,h),h=Math.max(l[p].length,h)}var w=this.jpoint(null,null,null),E=this._wnafT4;for(o=h;o>=0;o--){for(var A=0;o>=0;){var S=!0;for(s=0;s<n;s++)E[s]=0|l[s][o],0!==E[s]&&(S=!1);if(!S)break;A++,o--}if(o>=0&&A++,w=w.dblp(A),o<0)break;for(s=0;s<n;s++){var _=E[s];0!==_&&(_>0?a=c[s][_-1>>1]:_<0&&(a=c[s][-_-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(o=0;o<n;o++)c[o]=null;return i?w:w.toP()},hg.BasePoint=dg,dg.prototype.eq=function(){throw new Error("Not implemented")},dg.prototype.validate=function(){return this.curve.validate(this)},hg.prototype.decodePoint=function(e,t){e=ag.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?lg(e[e.length-1]%2==0):7===e[0]&&lg(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},dg.prototype.encodeCompressed=function(e){return this.encode(e,!0)},dg.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},dg.prototype.encode=function(e,t){return ag.encode(this._encode(t),e)},dg.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},dg.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},dg.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},dg.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},dg.prototype._getBeta=function(){return null},dg.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var pg=ng(function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),gg=ag.assert;function mg(e){fg.call(this,"short",e),this.a=new(O())(e.a,16).toRed(this.red),this.b=new(O())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}pg(mg,fg);var yg=mg;function bg(e,t,r,n){fg.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(O())(t,16),this.y=new(O())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function vg(e,t,r,n){fg.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(O())(0)):(this.x=new(O())(t,16),this.y=new(O())(r,16),this.z=new(O())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}mg.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(O())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(O())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],gg(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new(O())(e.a,16),b:new(O())(e.b,16)}}):this._getEndoBasis(r)}}},mg.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:O().mont(e),r=new(O())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(O())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},mg.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),d=new(O())(1),p=new(O())(0),g=new(O())(0),m=new(O())(1),y=0;0!==h.cmpn(0);){var b=f.div(h);u=f.sub(b.mul(h)),c=g.sub(b.mul(d));var v=m.sub(b.mul(p));if(!n&&u.cmp(l)<0)t=a.neg(),r=d,n=u.neg(),i=c;else if(n&&2===++y)break;a=u,f=h,h=u,g=d,d=c,m=p,p=v}o=u.neg(),s=c;var w=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},mg.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:u.add(c).neg()}},mg.prototype.pointFromX=function(e,t){(e=new(O())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},mg.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},mg.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[2*o]=a,n[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),l=0;l<2*o;l++)n[l]=null,i[l]=null;return c},pg(bg,fg.BasePoint),mg.prototype.point=function(e,t,r){return new bg(this,e,t,r)},mg.prototype.pointFromJSON=function(e,t){return bg.fromJSON(this,e,t)},bg.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},bg.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},bg.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},bg.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},bg.prototype.isInfinity=function(){return this.inf},bg.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},bg.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},bg.prototype.getX=function(){return this.x.fromRed()},bg.prototype.getY=function(){return this.y.fromRed()},bg.prototype.mul=function(e){return e=new(O())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},bg.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},bg.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},bg.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},bg.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},bg.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},pg(vg,fg.BasePoint),mg.prototype.jpoint=function(e,t,r){return new vg(this,e,t,r)},vg.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},vg.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},vg.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),h=n.redMul(c),f=u.redSqr().redIAdd(l).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,d,p)},vg.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),l=r.redMul(u),h=a.redSqr().redIAdd(c).redISub(l).redISub(l),f=a.redMul(l.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(h,f,d)},vg.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(t=0;t<e;t++){var l=o.redSqr(),h=c.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=o.redMul(h),g=d.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=d.redMul(m);y=y.redIAdd(y).redISub(f);var b=c.redMul(a);t+1<e&&(u=u.redMul(f)),o=g,a=b,c=y}return this.curve.jpoint(o,c.redMul(i),a)},vg.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},vg.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},vg.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),g=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=d.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},vg.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(s),l=a.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(h).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},vg.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(a).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,f,d)},vg.prototype.mul=function(e,t){return e=new(O())(e,t),this.curve._wnafMul(this,e)},vg.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},vg.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},vg.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},vg.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var wg=ng(function(e,t){var r=t;r.base=fg,r.short=yg,r.mont=null,r.edwards=null}),Eg=ng(function(e,t){var r,n=t,i=ag.assert;function o(e){"short"===e.type?this.curve=new wg.short(e):"edwards"===e.type?this.curve=new wg.edwards(e):this.curve=new wg.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Gt().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Gt().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Gt().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Gt().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Gt().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Gt().sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Gt().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Gt().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function Ag(e){if(!(this instanceof Ag))return new Ag(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=sg.toArray(e.entropy,e.entropyEnc||"hex"),r=sg.toArray(e.nonce,e.nonceEnc||"hex"),n=sg.toArray(e.pers,e.persEnc||"hex");ig(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var Sg=Ag;Ag.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Ag.prototype._hmac=function(){return new(Gt().hmac)(this.hash,this.K)},Ag.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Ag.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=sg.toArray(e,t),r=sg.toArray(r,n),ig(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Ag.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=sg.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,sg.encode(o,t)};var _g=ag.assert;function Ig(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Ng=Ig;Ig.fromPublic=function(e,t,r){return t instanceof Ig?t:new Ig(e,{pub:t,pubEnc:r})},Ig.fromPrivate=function(e,t,r){return t instanceof Ig?t:new Ig(e,{priv:t,privEnc:r})},Ig.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ig.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Ig.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},Ig.prototype._importPrivate=function(e,t){this.priv=new(O())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Ig.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?_g(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||_g(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},Ig.prototype.derive=function(e){return e.validate()||_g(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Ig.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},Ig.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},Ig.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var kg=ag.assert;function Pg(e,t){if(e instanceof Pg)return e;this._importDER(e,t)||(kg(e.r&&e.s,"Signature without r or s"),this.r=new(O())(e.r,16),this.s=new(O())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Tg=Pg;function Rg(){this.place=0}function Og(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function Cg(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function xg(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Pg.prototype._importDER=function(e,t){e=ag.toArray(e,t);var r=new Rg;if(48!==e[r.place++])return!1;var n=Og(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=Og(e,r);if(!1===i)return!1;if(128&e[r.place])return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var s=Og(e,r);if(!1===s)return!1;if(e.length!==s+r.place)return!1;if(128&e[r.place])return!1;var a=e.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(O())(o),this.s=new(O())(a),this.recoveryParam=null,!0},Pg.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=Cg(t),r=Cg(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];xg(n,t.length),(n=n.concat(t)).push(2),xg(n,r.length);var i=n.concat(r),o=[48];return xg(o,i.length),o=o.concat(i),ag.encode(o,e)};var Ug=function(){throw new Error("unsupported")},Mg=ag.assert;function Lg(e){if(!(this instanceof Lg))return new Lg(e);"string"==typeof e&&(Mg(Object.prototype.hasOwnProperty.call(Eg,e),"Unknown curve "+e),e=Eg[e]),e instanceof Eg.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Bg=Lg;Lg.prototype.keyPair=function(e){return new Ng(this,e)},Lg.prototype.keyFromPrivate=function(e,t){return Ng.fromPrivate(this,e,t)},Lg.prototype.keyFromPublic=function(e,t){return Ng.fromPublic(this,e,t)},Lg.prototype.genKeyPair=function(e){e||(e={});for(var t=new Sg({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Ug(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(O())(2));;){var i=new(O())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Lg.prototype._truncateToN=function(e,t,r){var n;if(O().isBN(e)||"number"==typeof e)n=(e=new(O())(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new(O())(e,16);else{var i=e.toString();n=i.length+1>>>1,e=new(O())(i,16)}"number"!=typeof r&&(r=8*n);var o=r-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Lg.prototype.sign=function(e,t,r,n){if("object"==typeof r&&(n=r,r=null),n||(n={}),"string"!=typeof e&&"number"!=typeof e&&!O().isBN(e)){Mg("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),Mg(e.length>>>0===e.length);for(var i=0;i<e.length;i++)Mg((255&e[i])===e[i])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,n.msgBitLength),Mg(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),s=t.getPrivate().toArray("be",o),a=e.toArray("be",o);Mg(new(O())(a).eq(e),"Can not sign message");for(var u=new Sg({hash:this.hash,entropy:s,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new(O())(1)),l=0;;l++){var h=n.k?n.k(l):new(O())(u.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(c)>=0)){var f=this.g.mul(h);if(!f.isInfinity()){var d=f.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)){var g=h.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var m=(f.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0);return n.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),m^=1),new Tg({r:p,s:g,recoveryParam:m})}}}}}},Lg.prototype.verify=function(e,t,r,n,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,n);var o=(t=new Tg(t,"hex")).r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,u=s.invm(this.n),c=u.mul(e).umod(this.n),l=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,r.getPublic(),l)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(c,r.getPublic(),l)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},Lg.prototype.recoverPubKey=function(e,t,r,n){Mg((3&r)===r,"The recovery param is more than two bits"),t=new Tg(t,n);var i=this.n,o=new(O())(e),s=t.r,a=t.s,u=1&r,c=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");s=c?this.curve.pointFromX(s.add(this.curve.n),u):this.curve.pointFromX(s,u);var l=t.r.invm(i),h=i.sub(o).mul(l).umod(i),f=a.mul(l).umod(i);return this.g.mulAdd(h,s,f)},Lg.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new Tg(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Dg=ng(function(e,t){var r=t;r.version="6.6.1",r.utils=ag,r.rand=function(){throw new Error("unsupported")},r.curve=wg,r.curves=Eg,r.ec=Bg,r.eddsa=null}).ec;const Fg=new Sp("signing-key/5.8.0");let jg=null;function Gg(){return jg||(jg=new Dg("secp256k1")),jg}class Wg{constructor(e){Lp(this,"curve","secp256k1"),Lp(this,"privateKey",xp(e)),32!==function(e){if("string"!=typeof e)e=xp(e);else if(!Op(e)||e.length%2)return null;return(e.length-2)/2}(this.privateKey)&&Fg.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Gg().keyFromPrivate(Tp(this.privateKey));Lp(this,"publicKey","0x"+t.getPublic(!1,"hex")),Lp(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Lp(this,"_isSigningKey",!0)}_addPoint(e){const t=Gg().keyFromPublic(Tp(this.publicKey)),r=Gg().keyFromPublic(Tp(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=Gg().keyFromPrivate(Tp(this.privateKey)),r=Tp(e);32!==r.length&&Fg.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return function(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Op(r=e)&&!(r.length%2)||Pp(r)){let r=Tp(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=xp(r.slice(0,32)),t.s=xp(r.slice(32,64))):65===r.length?(t.r=xp(r.slice(0,32)),t.s=xp(r.slice(32,64)),t.v=r[64]):_p.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:_p.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=xp(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=function(e,t){(e=Tp(e)).length>t&&_p.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),Np(r)}(Tp(t._vs),32);t._vs=xp(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&_p.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=xp(r);null==t.s?t.s=i:t.s!==i&&_p.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?_p.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&_p.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&Op(t.r)?t.r=Mp(t.r,32):_p.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&Op(t.s)?t.s=Mp(t.s,32):_p.throwArgumentError("signature missing or invalid s","signature",e);const r=Tp(t.s);r[0]>=128&&_p.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=xp(r);t._vs&&(Op(t._vs)||_p.throwArgumentError("signature invalid _vs","signature",e),t._vs=Mp(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&_p.throwArgumentError("signature _vs mismatch v and s","signature",e)}var r;return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}({recoveryParam:n.recoveryParam,r:Mp("0x"+n.r.toString(16),32),s:Mp("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=Gg().keyFromPrivate(Tp(this.privateKey)),r=Gg().keyFromPublic(Tp(Hg(e)));return Mp("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function Hg(e,t){const r=Tp(e);if(32===r.length){const e=new Wg(r);return t?"0x"+Gg().keyFromPrivate(r).getPublic(!0,"hex"):e.publicKey}return 33===r.length?t?xp(r):"0x"+Gg().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+Gg().keyFromPublic(r).getPublic(!0,"hex"):xp(r):Fg.throwArgumentError("invalid public or private key","key","[REDACTED]")}function Kg(e){return"0x"+se().keccak_256(Tp(e))}const zg=new Sp("address/5.8.0");function Vg(e){Op(e,20)||zg.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=Tp(Kg(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const qg={};for(let e=0;e<10;e++)qg[String(e)]=String(e);for(let e=0;e<26;e++)qg[String.fromCharCode(65+e)]=String(10+e);const Jg=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function Xg(e){let t=null;if("string"!=typeof e&&zg.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=Vg(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&zg.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>qg[e]).join("");for(;t.length>=Jg;){let e=t.substring(0,Jg);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e)&&zg.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new Fp(r,36).toString(16);t.length<40;)t="0"+t;t=Vg("0x"+t)}else zg.throwArgumentError("invalid address","address",e);var r;return t}var Yg;new Sp("transactions/5.8.0"),function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(Yg||(Yg={}));const Qg=new Sp("wordlists/5.8.0");class $g{constructor(e){Qg.checkAbstract(new.target,$g),Lp(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return Kg(Zp(t.join("\n")+"\n"))}static register(e,t){t||(t=e.locale)}}let Zg=null;function em(e){if(null==Zg&&(Zg="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==$g.check(e)))throw Zg=null,new Error("BIP39 Wordlist for en (English) FAILED")}const tm=new class extends $g{constructor(){super("en")}getWord(e){return em(this),Zg[e]}getWordIndex(e){return em(this),Zg.indexOf(e)}};$g.register(tm);const rm={en:tm},nm=new Sp("hdnode/5.7.0"),im=Hp.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),om=Zp("Bitcoin seed"),sm=2147483648;function am(e){return(1<<e)-1<<8-e}function um(e){return(1<<e)-1}function cm(e){return Mp(xp(e),32)}function lm(e){return Dp.encode(Rp([e,Up(tg(tg(e)),0,4)]))}function hm(e){if(null==e)return rm.en;if("string"==typeof e){const t=rm[e];return null==t&&nm.throwArgumentError("unknown locale","wordlist",e),t}return e}const fm={},dm="m/44'/60'/0'/0/0";class pm{constructor(e,t,r,n,i,o,s,a){if(e!==fm)throw new Error("HDNode constructor cannot be called directly");if(t){const e=new Wg(t);Lp(this,"privateKey",e.privateKey),Lp(this,"publicKey",e.compressedPublicKey)}else Lp(this,"privateKey",null),Lp(this,"publicKey",xp(r));var u;Lp(this,"parentFingerprint",n),Lp(this,"fingerprint",Up((u=tg(this.publicKey),"0x"+Gt().ripemd160().update(Tp(u)).digest("hex")),0,4)),Lp(this,"address",function(e){return Xg(Up(Kg(Up(Hg(e),1)),12))}(this.publicKey)),Lp(this,"chainCode",i),Lp(this,"index",o),Lp(this,"depth",s),null==a?(Lp(this,"mnemonic",null),Lp(this,"path",null)):"string"==typeof a?(Lp(this,"mnemonic",null),Lp(this,"path",a)):(Lp(this,"mnemonic",a),Lp(this,"path",a.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return lm(Rp([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",xp(this.depth),this.parentFingerprint,Mp(xp(this.index),4),this.chainCode,null!=this.privateKey?Rp(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new pm(fm,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(e&~sm));const r=new Uint8Array(37);if(e&sm){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(Tp(this.privateKey),1),t&&(t+="'")}else r.set(Tp(this.publicKey));for(let t=24;t>=0;t-=8)r[33+(t>>3)]=e>>24-t&255;const n=Tp(rg(Qp.sha512,this.chainCode,r)),i=n.slice(0,32),o=n.slice(32);let s=null,a=null;this.privateKey?s=cm(Hp.from(i).add(this.privateKey).mod(im)):a=new Wg(xp(i))._addPoint(this.publicKey);let u=t;const c=this.mnemonic;return c&&(u=Object.freeze({phrase:c.phrase,path:t,locale:c.locale||"en"})),new pm(fm,s,a,this.fingerprint,cm(o),e,this.depth+1,u)}derivePath(e){const t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();let r=this;for(let e=0;e<t.length;e++){const n=t[e];if(n.match(/^[0-9]+'$/)){const e=parseInt(n.substring(0,n.length-1));if(e>=sm)throw new Error("invalid path index - "+n);r=r._derive(sm+e)}else{if(!n.match(/^[0-9]+$/))throw new Error("invalid path component - "+n);{const e=parseInt(n);if(e>=sm)throw new Error("invalid path index - "+n);r=r._derive(e)}}}return r}static _fromSeed(e,t){const r=Tp(e);if(r.length<16||r.length>64)throw new Error("invalid seed");const n=Tp(rg(Qp.sha512,om,r));return new pm(fm,cm(n.slice(0,32)),null,"0x00000000",cm(n.slice(32)),0,0,t)}static fromMnemonic(e,t,r){return e=ym(mm(e,r=hm(r)),r),pm._fromSeed(gm(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return pm._fromSeed(e,null)}static fromExtendedKey(e){const t=Dp.decode(e);82===t.length&&lm(t.slice(0,78))===e||nm.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=t[4],n=xp(t.slice(5,9)),i=parseInt(xp(t.slice(9,13)).substring(2),16),o=xp(t.slice(13,45)),s=t.slice(45,78);switch(xp(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new pm(fm,null,xp(s),n,o,i,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==s[0])break;return new pm(fm,xp(s.slice(1)),null,n,o,i,r,null)}return nm.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function gm(e,t){t||(t="");const r=Zp("mnemonic"+t,Xp.NFKD);return function(e,t,r,n,i){let o;e=Tp(e),t=Tp(t);let s=1;const a=new Uint8Array(64),u=new Uint8Array(t.length+4);let c,l;u.set(t);for(let r=1;r<=s;r++){u[t.length]=r>>24&255,u[t.length+1]=r>>16&255,u[t.length+2]=r>>8&255,u[t.length+3]=255&r;let n=Tp(rg(i,e,u));o||(o=n.length,l=new Uint8Array(o),s=Math.ceil(64/o),c=64-(s-1)*o),l.set(n);for(let t=1;t<2048;t++){n=Tp(rg(i,e,n));for(let e=0;e<o;e++)l[e]^=n[e]}const h=(r-1)*o,f=r===s?c:o;a.set(Tp(l).slice(0,f),h)}return xp(a)}(Zp(e,Xp.NFKD),r,0,0,"sha512")}function mm(e,t){t=hm(t),nm.checkNormalize();const r=t.split(e);if(r.length%3!=0)throw new Error("invalid mnemonic");const n=Tp(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let e=0;e<r.length;e++){let o=t.getWordIndex(r[e].normalize("NFKD"));if(-1===o)throw new Error("invalid mnemonic");for(let e=0;e<11;e++)o&1<<10-e&&(n[i>>3]|=1<<7-i%8),i++}const o=32*r.length/3,s=am(r.length/3);if((Tp(tg(n.slice(0,o/8)))[0]&s)!==(n[n.length-1]&s))throw new Error("invalid checksum");return xp(n.slice(0,o/8))}function ym(e,t){if(t=hm(t),(e=Tp(e)).length%4!=0||e.length<16||e.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let t=0;t<e.length;t++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[t],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[t]>>8-n,r.push(e[t]&um(8-n)),n+=3);const i=e.length/4,o=Tp(tg(e))[0]&am(i);return r[r.length-1]<<=i,r[r.length-1]|=o>>8-i,t.join(r.map(e=>t.getWord(e)))}function bm(e,t){try{return mm(e,t),!0}catch(e){}return!1}function vm(e){return("number"!=typeof e||e<0||e>=sm||e%1)&&nm.throwArgumentError("invalid account index","index",e),`m/44'/60'/${e}'/0/0`}function wm(e){if(function(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return t.encseed&&t.ethaddr}(e))try{return Ee(JSON.parse(e).ethaddr)}catch(e){return null}if(function(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}(e))try{return Ee(JSON.parse(e).address)}catch(e){return null}return null}let Em=!1,Am=!1;const Sm={debug:1,default:2,info:2,warning:3,error:4,off:5};let _m=Sm.default,Im=null;const Nm=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var km,Pm;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(km||(km={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Pm||(Pm={}));const Tm="0123456789abcdef";class Rm{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Sm[r]&&this.throwArgumentError("invalid log level name","logLevel",e),_m>Sm[r]||console.log.apply(console,t)}debug(...e){this._log(Rm.levels.DEBUG,e)}info(...e){this._log(Rm.levels.INFO,e)}warn(...e){this._log(Rm.levels.WARNING,e)}makeError(e,t,r){if(Am)return this.makeError("censored error",t,{});t||(t=Rm.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Tm[t[e]>>4],r+=Tm[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Pm.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Pm.CALL_EXCEPTION:case Pm.INSUFFICIENT_FUNDS:case Pm.MISSING_NEW:case Pm.NONCE_EXPIRED:case Pm.REPLACEMENT_UNDERPRICED:case Pm.TRANSACTION_REPLACED:case Pm.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Rm.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Nm&&this.throwError("platform missing String.prototype.normalize",Rm.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Nm})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Rm.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Rm.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Rm.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Rm.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Rm.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Rm.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Rm.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Im||(Im=new Rm("logger/5.8.0")),Im}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Rm.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Em){if(!e)return;this.globalLogger().throwError("error censorship permanent",Rm.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Am=!!e,Em=!!t}static setLogLevel(e){const t=Sm[e.toLowerCase()];null!=t?_m=t:Rm.globalLogger().warn("invalid log level - "+e)}static from(e){return new Rm(e)}}Rm.errors=Pm,Rm.levels=km;const Om=new Rm("bytes/5.8.0");function Cm(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Cm(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function xm(e){return"number"==typeof e&&e==e&&e%1==0}function Um(e,t){if(t||(t={}),"number"==typeof e){Om.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Cm(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e)&&(e=e.toHexString()),function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Om.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Cm(new Uint8Array(n))}return function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!xm(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!xm(r)||r<0||r>=256)return!1}return!0}(e)?Cm(new Uint8Array(e)):Om.throwArgumentError("invalid arrayify value","value",e)}function Mm(e){return"0x"+se().keccak_256(Um(e))}let Lm=!1,Bm=!1;const Dm={debug:1,default:2,info:2,warning:3,error:4,off:5};let Fm=Dm.default,jm=null;const Gm=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Wm,Hm;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Wm||(Wm={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Hm||(Hm={}));const Km="0123456789abcdef";class zm{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Dm[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Fm>Dm[r]||console.log.apply(console,t)}debug(...e){this._log(zm.levels.DEBUG,e)}info(...e){this._log(zm.levels.INFO,e)}warn(...e){this._log(zm.levels.WARNING,e)}makeError(e,t,r){if(Bm)return this.makeError("censored error",t,{});t||(t=zm.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Km[t[e]>>4],r+=Km[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Hm.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Hm.CALL_EXCEPTION:case Hm.INSUFFICIENT_FUNDS:case Hm.MISSING_NEW:case Hm.NONCE_EXPIRED:case Hm.REPLACEMENT_UNDERPRICED:case Hm.TRANSACTION_REPLACED:case Hm.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,zm.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Gm&&this.throwError("platform missing String.prototype.normalize",zm.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Gm})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,zm.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,zm.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,zm.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,zm.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",zm.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",zm.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",zm.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return jm||(jm=new zm("logger/5.7.0")),jm}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",zm.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Lm){if(!e)return;this.globalLogger().throwError("error censorship permanent",zm.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Bm=!!e,Lm=!!t}static setLogLevel(e){const t=Dm[e.toLowerCase()];null!=t?Fm=t:zm.globalLogger().warn("invalid log level - "+e)}static from(e){return new zm(e)}}zm.errors=Hm,zm.levels=Wm;let Vm=!1,qm=!1;const Jm={debug:1,default:2,info:2,warning:3,error:4,off:5};let Xm=Jm.default,Ym=null;const Qm=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var $m,Zm;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}($m||($m={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Zm||(Zm={}));const ey="0123456789abcdef";class ty{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Jm[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Xm>Jm[r]||console.log.apply(console,t)}debug(...e){this._log(ty.levels.DEBUG,e)}info(...e){this._log(ty.levels.INFO,e)}warn(...e){this._log(ty.levels.WARNING,e)}makeError(e,t,r){if(qm)return this.makeError("censored error",t,{});t||(t=ty.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=ey[t[e]>>4],r+=ey[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Zm.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Zm.CALL_EXCEPTION:case Zm.INSUFFICIENT_FUNDS:case Zm.MISSING_NEW:case Zm.NONCE_EXPIRED:case Zm.REPLACEMENT_UNDERPRICED:case Zm.TRANSACTION_REPLACED:case Zm.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,ty.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Qm&&this.throwError("platform missing String.prototype.normalize",ty.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Qm})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,ty.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,ty.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,ty.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,ty.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",ty.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",ty.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",ty.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Ym||(Ym=new ty("logger/5.8.0")),Ym}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",ty.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Vm){if(!e)return;this.globalLogger().throwError("error censorship permanent",ty.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}qm=!!e,Vm=!!t}static setLogLevel(e){const t=Jm[e.toLowerCase()];null!=t?Xm=t:ty.globalLogger().warn("invalid log level - "+e)}static from(e){return new ty(e)}}ty.errors=Zm,ty.levels=$m;const ry=new ty("bytes/5.8.0");function ny(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return ny(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function iy(e){return"number"==typeof e&&e==e&&e%1==0}function oy(e,t){if(t||(t={}),"number"==typeof e){ry.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),ny(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e)&&(e=e.toHexString()),function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":ry.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return ny(new Uint8Array(n))}return function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!iy(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!iy(r)||r<0||r>=256)return!1}return!0}(e)?ny(new Uint8Array(e)):ry.throwArgumentError("invalid arrayify value","value",e)}var sy;!function(e){e.sha256="sha256",e.sha512="sha512"}(sy||(sy={}));const ay=new ty("sha2/5.7.0");function uy(e){return"0x"+Gt().ripemd160().update(oy(e)).digest("hex")}function cy(e){return"0x"+Gt().sha256().update(oy(e)).digest("hex")}function ly(e){return"0x"+Gt().sha512().update(oy(e)).digest("hex")}function hy(e,t,r){return sy[e]||ay.throwError("unsupported algorithm "+e,ty.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Gt().hmac(Gt()[e],oy(t)).update(oy(r)).digest("hex")}const fy=new RegExp("^bytes([0-9]+)$"),dy=new RegExp("^(u?int)([0-9]*)$"),py=new RegExp("^(.*)\\[([0-9]*)\\]$"),gy="0000000000000000000000000000000000000000000000000000000000000000",my=new c.Logger("solidity/5.7.0");function yy(e,t,r){switch(e){case"address":return r?v(t,32):m(t);case"string":return Te(t);case"bytes":return m(t);case"bool":return t=t?"0x01":"0x00",r?v(t,32):m(t)}let n=e.match(dy);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!=0||0===i||i>256)&&my.throwArgumentError("invalid number type","type",e),r&&(i=256),v(t=D.from(t).toTwos(i),i/8)}if(n=e.match(fy),n){const i=parseInt(n[1]);return(String(i)!==n[1]||0===i||i>32)&&my.throwArgumentError("invalid bytes type","type",e),m(t).byteLength!==i&&my.throwArgumentError(`invalid value for ${e}`,"value",t),r?m((t+gy).substring(0,66)):t}if(n=e.match(py),n&&Array.isArray(t)){const r=n[1];parseInt(n[2]||String(t.length))!=t.length&&my.throwArgumentError(`invalid array length for ${e}`,"value",t);const i=[];return t.forEach(function(e){i.push(yy(r,e,!0))}),y(i)}return my.throwArgumentError("invalid type","type",e)}function by(e,t){e.length!=t.length&&my.throwArgumentError("wrong number of values; expected ${ types.length }","values",t);const r=[];return e.forEach(function(e,n){r.push(yy(e,t[n]))}),A(y(r))}function vy(e,t){return ae(by(e,t))}function wy(e,t){return Bi(by(e,t))}let Ey=!1,Ay=!1;const Sy={debug:1,default:2,info:2,warning:3,error:4,off:5};let _y=Sy.default,Iy=null;const Ny=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var ky,Py;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(ky||(ky={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Py||(Py={}));const Ty="0123456789abcdef";class Ry{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Sy[r]&&this.throwArgumentError("invalid log level name","logLevel",e),_y>Sy[r]||console.log.apply(console,t)}debug(...e){this._log(Ry.levels.DEBUG,e)}info(...e){this._log(Ry.levels.INFO,e)}warn(...e){this._log(Ry.levels.WARNING,e)}makeError(e,t,r){if(Ay)return this.makeError("censored error",t,{});t||(t=Ry.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Ty[t[e]>>4],r+=Ty[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Py.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Py.CALL_EXCEPTION:case Py.INSUFFICIENT_FUNDS:case Py.MISSING_NEW:case Py.NONCE_EXPIRED:case Py.REPLACEMENT_UNDERPRICED:case Py.TRANSACTION_REPLACED:case Py.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Ry.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Ny&&this.throwError("platform missing String.prototype.normalize",Ry.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ny})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Ry.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Ry.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Ry.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Ry.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Ry.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Ry.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Ry.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Iy||(Iy=new Ry("logger/5.8.0")),Iy}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Ry.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Ey){if(!e)return;this.globalLogger().throwError("error censorship permanent",Ry.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Ay=!!e,Ey=!!t}static setLogLevel(e){const t=Sy[e.toLowerCase()];null!=t?_y=t:Ry.globalLogger().warn("invalid log level - "+e)}static from(e){return new Ry(e)}}Ry.errors=Py,Ry.levels=ky;const Oy=new Ry("bytes/5.8.0");function Cy(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Cy(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function xy(e){return"number"==typeof e&&e==e&&e%1==0}function Uy(e,t){if(t||(t={}),"number"==typeof e){Oy.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Cy(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e)&&(e=e.toHexString()),function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Oy.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Cy(new Uint8Array(n))}return function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!xy(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!xy(r)||r<0||r>=256)return!1}return!0}(e)?Cy(new Uint8Array(e)):Oy.throwArgumentError("invalid arrayify value","value",e)}const My=new Ry("random/5.7.0"),Ly=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();let By=Ly.crypto||Ly.msCrypto;function Dy(e){(e<=0||e>1024||e%1||e!=e)&&My.throwArgumentError("invalid length","length",e);const t=new Uint8Array(e);return By.getRandomValues(t),Uy(t)}function Fy(e){for(let t=(e=e.slice()).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}By&&By.getRandomValues||(My.warn("WARNING: Missing strong random number source"),By={getRandomValues:function(e){return My.throwError("no secure random source avaialble",Ry.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});let jy=!1,Gy=!1;const Wy={debug:1,default:2,info:2,warning:3,error:4,off:5};let Hy=Wy.default,Ky=null;const zy=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Vy,qy;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Vy||(Vy={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(qy||(qy={}));const Jy="0123456789abcdef";class Xy{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Wy[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Hy>Wy[r]||console.log.apply(console,t)}debug(...e){this._log(Xy.levels.DEBUG,e)}info(...e){this._log(Xy.levels.INFO,e)}warn(...e){this._log(Xy.levels.WARNING,e)}makeError(e,t,r){if(Gy)return this.makeError("censored error",t,{});t||(t=Xy.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Jy[t[e]>>4],r+=Jy[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case qy.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case qy.CALL_EXCEPTION:case qy.INSUFFICIENT_FUNDS:case qy.MISSING_NEW:case qy.NONCE_EXPIRED:case qy.REPLACEMENT_UNDERPRICED:case qy.TRANSACTION_REPLACED:case qy.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Xy.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),zy&&this.throwError("platform missing String.prototype.normalize",Xy.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:zy})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Xy.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Xy.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Xy.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Xy.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Xy.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Xy.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Xy.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Ky||(Ky=new Xy("logger/5.8.0")),Ky}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Xy.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),jy){if(!e)return;this.globalLogger().throwError("error censorship permanent",Xy.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Gy=!!e,jy=!!t}static setLogLevel(e){const t=Wy[e.toLowerCase()];null!=t?Hy=t:Xy.globalLogger().warn("invalid log level - "+e)}static from(e){return new Xy(e)}}Xy.errors=qy,Xy.levels=Vy;var Yy=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const Qy=new Xy("properties/5.7.0");function $y(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function Zy(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function eb(e){return Yy(this,void 0,void 0,function*(){const t=Object.keys(e).map(t=>{const r=e[t];return Promise.resolve(r).then(e=>({key:t,value:e}))});return(yield Promise.all(t)).reduce((e,t)=>(e[t.key]=t.value,e),{})})}function tb(e,t){e&&"object"==typeof e||Qy.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(r=>{t[r]||Qy.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}function rb(e){const t={};for(const r in e)t[r]=e[r];return t}const nb={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function ib(e){if(null==e||nb[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!ib(n))return!1}return!0}return Qy.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function ob(e){if(ib(e))return e;if(Array.isArray(e))return Object.freeze(e.map(e=>sb(e)));if("object"==typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&$y(t,r,sb(n))}return t}return Qy.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function sb(e){return ob(e)}let ab=!1,ub=!1;const cb={debug:1,default:2,info:2,warning:3,error:4,off:5};let lb=cb.default,hb=null;const fb=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var db,pb;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(db||(db={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(pb||(pb={}));const gb="0123456789abcdef";class mb{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==cb[r]&&this.throwArgumentError("invalid log level name","logLevel",e),lb>cb[r]||console.log.apply(console,t)}debug(...e){this._log(mb.levels.DEBUG,e)}info(...e){this._log(mb.levels.INFO,e)}warn(...e){this._log(mb.levels.WARNING,e)}makeError(e,t,r){if(ub)return this.makeError("censored error",t,{});t||(t=mb.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=gb[t[e]>>4],r+=gb[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case pb.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case pb.CALL_EXCEPTION:case pb.INSUFFICIENT_FUNDS:case pb.MISSING_NEW:case pb.NONCE_EXPIRED:case pb.REPLACEMENT_UNDERPRICED:case pb.TRANSACTION_REPLACED:case pb.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,mb.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),fb&&this.throwError("platform missing String.prototype.normalize",mb.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:fb})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,mb.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,mb.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,mb.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,mb.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",mb.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",mb.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",mb.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return hb||(hb=new mb("logger/5.8.0")),hb}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",mb.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),ab){if(!e)return;this.globalLogger().throwError("error censorship permanent",mb.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}ub=!!e,ab=!!t}static setLogLevel(e){const t=cb[e.toLowerCase()];null!=t?lb=t:mb.globalLogger().warn("invalid log level - "+e)}static from(e){return new mb(e)}}mb.errors=pb,mb.levels=db;const yb=new mb("bytes/5.8.0");function bb(e){return!!e.toHexString}function vb(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return vb(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function wb(e){return"number"==typeof e&&e==e&&e%1==0}function Eb(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!wb(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!wb(r)||r<0||r>=256)return!1}return!0}function Ab(e,t){if(t||(t={}),"number"==typeof e){yb.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),vb(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),bb(e)&&(e=e.toHexString()),Sb(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":yb.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return vb(new Uint8Array(n))}return Eb(e)?vb(new Uint8Array(e)):yb.throwArgumentError("invalid arrayify value","value",e)}function Sb(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const _b="0123456789abcdef";function Ib(e,t){if(t||(t={}),"number"==typeof e){yb.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=_b[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),bb(e))return e.toHexString();if(Sb(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":yb.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Eb(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=_b[(240&n)>>4]+_b[15&n]}return t}return yb.throwArgumentError("invalid hexlify value","value",e)}const Nb=new mb("rlp/5.7.0");function kb(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function Pb(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function Tb(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(Tb(e))}),t.length<=55)return t.unshift(192+t.length),t;const r=kb(t.length);return r.unshift(247+r.length),r.concat(t)}var t;Sb(t=e)&&!(t.length%2)||Eb(t)||Nb.throwArgumentError("RLP object must be BytesLike","object",e);const r=Array.prototype.slice.call(Ab(e));if(1===r.length&&r[0]<=127)return r;if(r.length<=55)return r.unshift(128+r.length),r;const n=kb(r.length);return n.unshift(183+n.length),n.concat(r)}function Rb(e){return Ib(Tb(e))}function Ob(e,t,r,n){const i=[];for(;r<t+1+n;){const o=Cb(e,r);i.push(o.result),(r+=o.consumed)>t+1+n&&Nb.throwError("child data too short",mb.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Cb(e,t){if(0===e.length&&Nb.throwError("data too short",mb.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&Nb.throwError("data short segment too short",mb.errors.BUFFER_OVERRUN,{});const n=Pb(e,t+1,r);return t+1+r+n>e.length&&Nb.throwError("data long segment too short",mb.errors.BUFFER_OVERRUN,{}),Ob(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&Nb.throwError("data array too short",mb.errors.BUFFER_OVERRUN,{}),Ob(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&Nb.throwError("data array too short",mb.errors.BUFFER_OVERRUN,{});const n=Pb(e,t+1,r);return t+1+r+n>e.length&&Nb.throwError("data array too short",mb.errors.BUFFER_OVERRUN,{}),{consumed:1+r+n,result:Ib(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;return t+1+r>e.length&&Nb.throwError("data too short",mb.errors.BUFFER_OVERRUN,{}),{consumed:1+r,result:Ib(e.slice(t+1,t+1+r))}}return{consumed:1,result:Ib(e[t])}}function xb(e){const t=Ab(e),r=Cb(t,0);return r.consumed!==t.length&&Nb.throwArgumentError("invalid rlp data","data",e),r.result}function Ub(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var Mb=Lb;function Lb(e,t){if(!e)throw new Error(t||"Assertion failed")}Lb.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var Bb=Ub(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}}),Db=Ub(function(e,t){var r=t;r.assert=Mb,r.toArray=Bb.toArray,r.zero2=Bb.zero2,r.toHex=Bb.toHex,r.encode=Bb.encode,r.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),s=0;s<n.length;s++){var a,u=o.andln(i-1);o.isOdd()?(a=u>(i>>1)-1?(i>>1)-u:u,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),s=1&u?3!=(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u:0,r[0].push(s),a=1&c?3!=(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c:0,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(O())(e,"hex","le")}}),Fb=Db.getNAF,jb=Db.getJSF,Gb=Db.assert;function Wb(e,t){this.type=e,this.p=new(O())(t.p,16),this.red=t.prime?O().red(t.prime):O().mont(this.p),this.zero=new(O())(0).toRed(this.red),this.one=new(O())(1).toRed(this.red),this.two=new(O())(2).toRed(this.red),this.n=t.n&&new(O())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Hb=Wb;function Kb(e,t){this.curve=e,this.type=t,this.precomputed=null}Wb.prototype.point=function(){throw new Error("Not implemented")},Wb.prototype.validate=function(){throw new Error("Not implemented")},Wb.prototype._fixedNafMul=function(e,t){Gb(e.precomputed);var r=e._getDoubles(),n=Fb(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var u=o+r.step-1;u>=o;u--)s=(s<<1)+n[u];a.push(s)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=i;h>0;h--){for(o=0;o<a.length;o++)(s=a[o])===h?l=l.mixedAdd(r.points[o]):s===-h&&(l=l.mixedAdd(r.points[o].neg()));c=c.add(l)}return c.toP()},Wb.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=Fb(t,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var u=0;a>=0&&0===o[a];a--)u++;if(a>=0&&u++,s=s.dblp(u),a<0)break;var c=o[a];Gb(0!==c),s="affine"===e.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===e.type?s.toP():s},Wb.prototype._wnafMulAdd=function(e,t,r,n,i){var o,s,a,u=this._wnafT1,c=this._wnafT2,l=this._wnafT3,h=0;for(o=0;o<n;o++){var f=(a=t[o])._getNAFPoints(e);u[o]=f.wnd,c[o]=f.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var g=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(g[1]=t[d].add(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].add(t[p].neg())):(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=jb(r[d],r[p]);for(h=Math.max(y[0].length,h),l[d]=new Array(h),l[p]=new Array(h),s=0;s<h;s++){var b=0|y[0][s],v=0|y[1][s];l[d][s]=m[3*(b+1)+(v+1)],l[p][s]=0,c[d]=g}}else l[d]=Fb(r[d],u[d],this._bitLength),l[p]=Fb(r[p],u[p],this._bitLength),h=Math.max(l[d].length,h),h=Math.max(l[p].length,h)}var w=this.jpoint(null,null,null),E=this._wnafT4;for(o=h;o>=0;o--){for(var A=0;o>=0;){var S=!0;for(s=0;s<n;s++)E[s]=0|l[s][o],0!==E[s]&&(S=!1);if(!S)break;A++,o--}if(o>=0&&A++,w=w.dblp(A),o<0)break;for(s=0;s<n;s++){var _=E[s];0!==_&&(_>0?a=c[s][_-1>>1]:_<0&&(a=c[s][-_-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(o=0;o<n;o++)c[o]=null;return i?w:w.toP()},Wb.BasePoint=Kb,Kb.prototype.eq=function(){throw new Error("Not implemented")},Kb.prototype.validate=function(){return this.curve.validate(this)},Wb.prototype.decodePoint=function(e,t){e=Db.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?Gb(e[e.length-1]%2==0):7===e[0]&&Gb(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},Kb.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Kb.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},Kb.prototype.encode=function(e,t){return Db.encode(this._encode(t),e)},Kb.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Kb.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Kb.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},Kb.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},Kb.prototype._getBeta=function(){return null},Kb.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var zb=Ub(function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),Vb=Db.assert;function qb(e){Hb.call(this,"short",e),this.a=new(O())(e.a,16).toRed(this.red),this.b=new(O())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}zb(qb,Hb);var Jb=qb;function Xb(e,t,r,n){Hb.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(O())(t,16),this.y=new(O())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Yb(e,t,r,n){Hb.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(O())(0)):(this.x=new(O())(t,16),this.y=new(O())(r,16),this.z=new(O())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}qb.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(O())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(O())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],Vb(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new(O())(e.a,16),b:new(O())(e.b,16)}}):this._getEndoBasis(r)}}},qb.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:O().mont(e),r=new(O())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(O())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},qb.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),d=new(O())(1),p=new(O())(0),g=new(O())(0),m=new(O())(1),y=0;0!==h.cmpn(0);){var b=f.div(h);u=f.sub(b.mul(h)),c=g.sub(b.mul(d));var v=m.sub(b.mul(p));if(!n&&u.cmp(l)<0)t=a.neg(),r=d,n=u.neg(),i=c;else if(n&&2===++y)break;a=u,f=h,h=u,g=d,d=c,m=p,p=v}o=u.neg(),s=c;var w=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},qb.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:u.add(c).neg()}},qb.prototype.pointFromX=function(e,t){(e=new(O())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},qb.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},qb.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[2*o]=a,n[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),l=0;l<2*o;l++)n[l]=null,i[l]=null;return c},zb(Xb,Hb.BasePoint),qb.prototype.point=function(e,t,r){return new Xb(this,e,t,r)},qb.prototype.pointFromJSON=function(e,t){return Xb.fromJSON(this,e,t)},Xb.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Xb.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Xb.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},Xb.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Xb.prototype.isInfinity=function(){return this.inf},Xb.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Xb.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},Xb.prototype.getX=function(){return this.x.fromRed()},Xb.prototype.getY=function(){return this.y.fromRed()},Xb.prototype.mul=function(e){return e=new(O())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Xb.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Xb.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Xb.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Xb.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Xb.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},zb(Yb,Hb.BasePoint),qb.prototype.jpoint=function(e,t,r){return new Yb(this,e,t,r)},Yb.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},Yb.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Yb.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),h=n.redMul(c),f=u.redSqr().redIAdd(l).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,d,p)},Yb.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),l=r.redMul(u),h=a.redSqr().redIAdd(c).redISub(l).redISub(l),f=a.redMul(l.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(h,f,d)},Yb.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(t=0;t<e;t++){var l=o.redSqr(),h=c.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=o.redMul(h),g=d.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=d.redMul(m);y=y.redIAdd(y).redISub(f);var b=c.redMul(a);t+1<e&&(u=u.redMul(f)),o=g,a=b,c=y}return this.curve.jpoint(o,c.redMul(i),a)},Yb.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Yb.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},Yb.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),g=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=d.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},Yb.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(s),l=a.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(h).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},Yb.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(a).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,f,d)},Yb.prototype.mul=function(e,t){return e=new(O())(e,t),this.curve._wnafMul(this,e)},Yb.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},Yb.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},Yb.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Yb.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Qb=Ub(function(e,t){var r=t;r.base=Hb,r.short=Jb,r.mont=null,r.edwards=null}),$b=Ub(function(e,t){var r,n=t,i=Db.assert;function o(e){"short"===e.type?this.curve=new Qb.short(e):"edwards"===e.type?this.curve=new Qb.edwards(e):this.curve=new Qb.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Gt().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Gt().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Gt().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Gt().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Gt().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Gt().sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Gt().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Gt().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function Zb(e){if(!(this instanceof Zb))return new Zb(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Bb.toArray(e.entropy,e.entropyEnc||"hex"),r=Bb.toArray(e.nonce,e.nonceEnc||"hex"),n=Bb.toArray(e.pers,e.persEnc||"hex");Mb(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var ev=Zb;Zb.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Zb.prototype._hmac=function(){return new(Gt().hmac)(this.hash,this.K)},Zb.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Zb.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=Bb.toArray(e,t),r=Bb.toArray(r,n),Mb(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Zb.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=Bb.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,Bb.encode(o,t)};var tv=Db.assert;function rv(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var nv=rv;rv.fromPublic=function(e,t,r){return t instanceof rv?t:new rv(e,{pub:t,pubEnc:r})},rv.fromPrivate=function(e,t,r){return t instanceof rv?t:new rv(e,{priv:t,privEnc:r})},rv.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},rv.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},rv.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},rv.prototype._importPrivate=function(e,t){this.priv=new(O())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},rv.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?tv(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||tv(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},rv.prototype.derive=function(e){return e.validate()||tv(e.validate(),"public point not validated"),e.mul(this.priv).getX()},rv.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},rv.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},rv.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var iv=Db.assert;function ov(e,t){if(e instanceof ov)return e;this._importDER(e,t)||(iv(e.r&&e.s,"Signature without r or s"),this.r=new(O())(e.r,16),this.s=new(O())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var sv=ov;function av(){this.place=0}function uv(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function cv(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function lv(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}ov.prototype._importDER=function(e,t){e=Db.toArray(e,t);var r=new av;if(48!==e[r.place++])return!1;var n=uv(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=uv(e,r);if(!1===i)return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var s=uv(e,r);if(!1===s)return!1;if(e.length!==s+r.place)return!1;var a=e.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(O())(o),this.s=new(O())(a),this.recoveryParam=null,!0},ov.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=cv(t),r=cv(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];lv(n,t.length),(n=n.concat(t)).push(2),lv(n,r.length);var i=n.concat(r),o=[48];return lv(o,i.length),o=o.concat(i),Db.encode(o,e)};var hv=function(){throw new Error("unsupported")},fv=Db.assert;function dv(e){if(!(this instanceof dv))return new dv(e);"string"==typeof e&&(fv(Object.prototype.hasOwnProperty.call($b,e),"Unknown curve "+e),e=$b[e]),e instanceof $b.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var pv=dv;dv.prototype.keyPair=function(e){return new nv(this,e)},dv.prototype.keyFromPrivate=function(e,t){return nv.fromPrivate(this,e,t)},dv.prototype.keyFromPublic=function(e,t){return nv.fromPublic(this,e,t)},dv.prototype.genKeyPair=function(e){e||(e={});for(var t=new ev({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||hv(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(O())(2));;){var i=new(O())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},dv.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},dv.prototype.sign=function(e,t,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new(O())(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),s=e.toArray("be",i),a=new ev({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new(O())(1)),c=0;;c++){var l=n.k?n.k(c):new(O())(a.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(u)>=0)){var h=this.g.mul(l);if(!h.isInfinity()){var f=h.getX(),d=f.umod(this.n);if(0!==d.cmpn(0)){var p=l.invm(this.n).mul(d.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var g=(h.getY().isOdd()?1:0)|(0!==f.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),g^=1),new sv({r:d,s:p,recoveryParam:g})}}}}}},dv.prototype.verify=function(e,t,r,n){e=this._truncateToN(new(O())(e,16)),r=this.keyFromPublic(r,n);var i=(t=new sv(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),u=a.mul(e).umod(this.n),c=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},dv.prototype.recoverPubKey=function(e,t,r,n){fv((3&r)===r,"The recovery param is more than two bits"),t=new sv(t,n);var i=this.n,o=new(O())(e),s=t.r,a=t.s,u=1&r,c=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");s=c?this.curve.pointFromX(s.add(this.curve.n),u):this.curve.pointFromX(s,u);var l=t.r.invm(i),h=i.sub(o).mul(l).umod(i),f=a.mul(l).umod(i);return this.g.mulAdd(h,s,f)},dv.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new sv(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var gv=Ub(function(e,t){var r=t;r.version="6.5.4",r.utils=Db,r.rand=function(){throw new Error("unsupported")},r.curve=Qb,r.curves=$b,r.ec=pv,r.eddsa=null}).ec;let mv=!1,yv=!1;const bv={debug:1,default:2,info:2,warning:3,error:4,off:5};let vv=bv.default,wv=null;const Ev=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Av,Sv;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Av||(Av={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Sv||(Sv={}));const _v="0123456789abcdef";class Iv{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==bv[r]&&this.throwArgumentError("invalid log level name","logLevel",e),vv>bv[r]||console.log.apply(console,t)}debug(...e){this._log(Iv.levels.DEBUG,e)}info(...e){this._log(Iv.levels.INFO,e)}warn(...e){this._log(Iv.levels.WARNING,e)}makeError(e,t,r){if(yv)return this.makeError("censored error",t,{});t||(t=Iv.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=_v[t[e]>>4],r+=_v[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Sv.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Sv.CALL_EXCEPTION:case Sv.INSUFFICIENT_FUNDS:case Sv.MISSING_NEW:case Sv.NONCE_EXPIRED:case Sv.REPLACEMENT_UNDERPRICED:case Sv.TRANSACTION_REPLACED:case Sv.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Iv.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Ev&&this.throwError("platform missing String.prototype.normalize",Iv.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ev})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Iv.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Iv.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Iv.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Iv.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Iv.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Iv.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Iv.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return wv||(wv=new Iv("logger/5.8.0")),wv}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Iv.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),mv){if(!e)return;this.globalLogger().throwError("error censorship permanent",Iv.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}yv=!!e,mv=!!t}static setLogLevel(e){const t=bv[e.toLowerCase()];null!=t?vv=t:Iv.globalLogger().warn("invalid log level - "+e)}static from(e){return new Iv(e)}}Iv.errors=Sv,Iv.levels=Av;const Nv=new Iv("bytes/5.8.0");function kv(e){return!!e.toHexString}function Pv(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Pv(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Tv(e){return"number"==typeof e&&e==e&&e%1==0}function Rv(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Tv(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Tv(r)||r<0||r>=256)return!1}return!0}function Ov(e,t){if(t||(t={}),"number"==typeof e){Nv.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Pv(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),kv(e)&&(e=e.toHexString()),Cv(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Nv.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Pv(new Uint8Array(n))}return Rv(e)?Pv(new Uint8Array(e)):Nv.throwArgumentError("invalid arrayify value","value",e)}function Cv(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const xv="0123456789abcdef";function Uv(e,t){if(t||(t={}),"number"==typeof e){Nv.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=xv[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),kv(e))return e.toHexString();if(Cv(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Nv.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Rv(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=xv[(240&n)>>4]+xv[15&n]}return t}return Nv.throwArgumentError("invalid hexlify value","value",e)}function Mv(e,t){for("string"!=typeof e?e=Uv(e):Cv(e)||Nv.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Nv.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function Lv(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Cv(r=e)&&!(r.length%2)||Rv(r)){let r=Ov(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Uv(r.slice(0,32)),t.s=Uv(r.slice(32,64))):65===r.length?(t.r=Uv(r.slice(0,32)),t.s=Uv(r.slice(32,64)),t.v=r[64]):Nv.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:Nv.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Uv(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=function(e,t){(e=Ov(e)).length>t&&Nv.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),Pv(r)}(Ov(t._vs),32);t._vs=Uv(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&Nv.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=Uv(r);null==t.s?t.s=i:t.s!==i&&Nv.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?Nv.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&Nv.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&Cv(t.r)?t.r=Mv(t.r,32):Nv.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&Cv(t.s)?t.s=Mv(t.s,32):Nv.throwArgumentError("signature missing or invalid s","signature",e);const r=Ov(t.s);r[0]>=128&&Nv.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=Uv(r);t._vs&&(Cv(t._vs)||Nv.throwArgumentError("signature invalid _vs","signature",e),t._vs=Mv(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&Nv.throwArgumentError("signature _vs mismatch v and s","signature",e)}var r;return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function Bv(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}new Iv("properties/5.8.0");const Dv=new Iv("signing-key/5.7.0");let Fv=null;function jv(){return Fv||(Fv=new gv("secp256k1")),Fv}class Gv{constructor(e){Bv(this,"curve","secp256k1"),Bv(this,"privateKey",Uv(e)),32!==function(e){if("string"!=typeof e)e=Uv(e);else if(!Cv(e)||e.length%2)return null;return(e.length-2)/2}(this.privateKey)&&Dv.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=jv().keyFromPrivate(Ov(this.privateKey));Bv(this,"publicKey","0x"+t.getPublic(!1,"hex")),Bv(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Bv(this,"_isSigningKey",!0)}_addPoint(e){const t=jv().keyFromPublic(Ov(this.publicKey)),r=jv().keyFromPublic(Ov(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=jv().keyFromPrivate(Ov(this.privateKey)),r=Ov(e);32!==r.length&&Dv.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return Lv({recoveryParam:n.recoveryParam,r:Mv("0x"+n.r.toString(16),32),s:Mv("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=jv().keyFromPrivate(Ov(this.privateKey)),r=jv().keyFromPublic(Ov(Hv(e)));return Mv("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function Wv(e,t){const r=Lv(t),n={r:Ov(r.r),s:Ov(r.s)};return"0x"+jv().recoverPubKey(Ov(e),n,r.recoveryParam).encode("hex",!1)}function Hv(e,t){const r=Ov(e);if(32===r.length){const e=new Gv(r);return t?"0x"+jv().keyFromPrivate(r).getPublic(!0,"hex"):e.publicKey}return 33===r.length?t?Uv(r):"0x"+jv().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+jv().keyFromPublic(r).getPublic(!0,"hex"):Uv(r):Dv.throwArgumentError("invalid public or private key","key","[REDACTED]")}let Kv=!1,zv=!1;const Vv={debug:1,default:2,info:2,warning:3,error:4,off:5};let qv=Vv.default,Jv=null;const Xv=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Yv,Qv;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Yv||(Yv={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Qv||(Qv={}));const $v="0123456789abcdef";class Zv{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Vv[r]&&this.throwArgumentError("invalid log level name","logLevel",e),qv>Vv[r]||console.log.apply(console,t)}debug(...e){this._log(Zv.levels.DEBUG,e)}info(...e){this._log(Zv.levels.INFO,e)}warn(...e){this._log(Zv.levels.WARNING,e)}makeError(e,t,r){if(zv)return this.makeError("censored error",t,{});t||(t=Zv.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=$v[t[e]>>4],r+=$v[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Qv.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Qv.CALL_EXCEPTION:case Qv.INSUFFICIENT_FUNDS:case Qv.MISSING_NEW:case Qv.NONCE_EXPIRED:case Qv.REPLACEMENT_UNDERPRICED:case Qv.TRANSACTION_REPLACED:case Qv.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Zv.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Xv&&this.throwError("platform missing String.prototype.normalize",Zv.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Xv})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Zv.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Zv.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Zv.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Zv.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Zv.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Zv.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Zv.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Jv||(Jv=new Zv("logger/5.8.0")),Jv}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Zv.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Kv){if(!e)return;this.globalLogger().throwError("error censorship permanent",Zv.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}zv=!!e,Kv=!!t}static setLogLevel(e){const t=Vv[e.toLowerCase()];null!=t?qv=t:Zv.globalLogger().warn("invalid log level - "+e)}static from(e){return new Zv(e)}}Zv.errors=Qv,Zv.levels=Yv;const ew=new Zv("bytes/5.8.0");function tw(e){return!!e.toHexString}function rw(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return rw(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function nw(e){return"number"==typeof e&&e==e&&e%1==0}function iw(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!nw(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!nw(r)||r<0||r>=256)return!1}return!0}function ow(e,t){if(t||(t={}),"number"==typeof e){ew.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),rw(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),tw(e)&&(e=e.toHexString()),sw(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":ew.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return rw(new Uint8Array(n))}return iw(e)?rw(new Uint8Array(e)):ew.throwArgumentError("invalid arrayify value","value",e)}function sw(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const aw="0123456789abcdef";const uw=new Zv("strings/5.7.0");var cw,lw;function hw(e,t,r,n,i){if(e===lw.BAD_PREFIX||e===lw.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===lw.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(cw||(cw={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(lw||(lw={}));const fw=Object.freeze({error:function(e,t,r,n,i){return uw.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:hw,replace:function(e,t,r,n,i){return e===lw.OVERLONG?(n.push(i),0):(n.push(65533),hw(e,t,r))}});function dw(e,t){null==t&&(t=fw.error),e=ow(e);const r=[];let n=0;for(;n<e.length;){const i=e[n++];if(!(i>>7)){r.push(i);continue}let o=null,s=null;if(192==(224&i))o=1,s=127;else if(224==(240&i))o=2,s=2047;else{if(240!=(248&i)){n+=t(128==(192&i)?lw.UNEXPECTED_CONTINUE:lw.BAD_PREFIX,n-1,e,r);continue}o=3,s=65535}if(n-1+o>=e.length){n+=t(lw.OVERRUN,n-1,e,r);continue}let a=i&(1<<8-o-1)-1;for(let i=0;i<o;i++){let i=e[n];if(128!=(192&i)){n+=t(lw.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=t(lw.OUT_OF_RANGE,n-1-o,e,r,a):a>=55296&&a<=57343?n+=t(lw.UTF16_SURROGATE,n-1-o,e,r,a):a<=s?n+=t(lw.OVERLONG,n-1-o,e,r,a):r.push(a))}return r}function pw(e,t=cw.current){t!=cw.current&&(uw.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&n)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return ow(r)}function gw(e){const t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function mw(e,t){return'"'+dw(e,t).map(e=>{if(e<256){switch(e){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(e>=32&&e<127)return String.fromCharCode(e)}return e<=65535?gw(e):gw(55296+((e-=65536)>>10&1023))+gw(56320+(1023&e))}).join("")+'"'}function yw(e){return e.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}function bw(e,t){return yw(dw(e,t))}function vw(e,t=cw.current){return dw(pw(e,t))}function ww(e,t){t||(t=function(e){return[parseInt(e,16)]});let r=0,n={};return e.split(",").forEach(e=>{let i=e.split(":");r+=parseInt(i[0],16),n[r]=t(i[1])}),n}function Ew(e){let t=0;return e.split(",").map(e=>{let r=e.split("-");1===r.length?r[1]="0":""===r[1]&&(r[1]="1");let n=t+parseInt(r[0],16);return t=parseInt(r[1],16),{l:n,h:t}})}function Aw(e,t){let r=0;for(let n=0;n<t.length;n++){let i=t[n];if(r+=i.l,e>=r&&e<=r+i.h&&(e-r)%(i.d||1)===0){if(i.e&&-1!==i.e.indexOf(e-r))continue;return i}}return null}const Sw=Ew("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),_w="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(e=>parseInt(e,16)),Iw=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],Nw=ww("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),kw=ww("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Pw=ww("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",function(e){if(e.length%4!=0)throw new Error("bad data");let t=[];for(let r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t}),Tw=Ew("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Rw(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59)return e.toLowerCase();let t=vw(e);var r;r=t.map(e=>{if(_w.indexOf(e)>=0)return[];if(e>=65024&&e<=65039)return[];let t=function(e){let t=Aw(e,Iw);if(t)return[e+t.s];let r=Nw[e];if(r)return r;let n=kw[e];return n?[e+n[0]]:Pw[e]||null}(e);return t||[e]}),t=r.reduce((e,t)=>(t.forEach(t=>{e.push(t)}),e),[]),t=vw(yw(t),cw.NFKC),t.forEach(e=>{if(Aw(e,Tw))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),t.forEach(e=>{if(Aw(e,Sw))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let n=yw(t);if("-"===n.substring(0,1)||"--"===n.substring(2,4)||"-"===n.substring(n.length-1))throw new Error("invalid hyphen");return n}const Ow="0x0000000000000000000000000000000000000000000000000000000000000000";function Cw(e){const t=pw(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return function(e,t){if(t||(t={}),"number"==typeof e){ew.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=aw[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),tw(e))return e.toHexString();if(sw(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":ew.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(iw(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=aw[(240&n)>>4]+aw[15&n]}return t}return ew.throwArgumentError("invalid hexlify value","value",e)}(function(e){const t=e.map(e=>ow(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),rw(n)}([t,Ow]).slice(0,32))}function xw(e){const t=ow(e);if(32!==t.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;0===t[r-1];)r--;return bw(t.slice(0,r))}let Uw=!1,Mw=!1;const Lw={debug:1,default:2,info:2,warning:3,error:4,off:5};let Bw=Lw.default,Dw=null;const Fw=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var jw,Gw;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(jw||(jw={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Gw||(Gw={}));const Ww="0123456789abcdef";class Hw{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Lw[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Bw>Lw[r]||console.log.apply(console,t)}debug(...e){this._log(Hw.levels.DEBUG,e)}info(...e){this._log(Hw.levels.INFO,e)}warn(...e){this._log(Hw.levels.WARNING,e)}makeError(e,t,r){if(Mw)return this.makeError("censored error",t,{});t||(t=Hw.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Ww[t[e]>>4],r+=Ww[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case Gw.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Gw.CALL_EXCEPTION:case Gw.INSUFFICIENT_FUNDS:case Gw.MISSING_NEW:case Gw.NONCE_EXPIRED:case Gw.REPLACEMENT_UNDERPRICED:case Gw.TRANSACTION_REPLACED:case Gw.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Hw.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Fw&&this.throwError("platform missing String.prototype.normalize",Hw.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Fw})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Hw.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Hw.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Hw.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Hw.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Hw.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Hw.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Hw.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Dw||(Dw=new Hw("logger/5.8.0")),Dw}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Hw.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Uw){if(!e)return;this.globalLogger().throwError("error censorship permanent",Hw.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Mw=!!e,Uw=!!t}static setLogLevel(e){const t=Lw[e.toLowerCase()];null!=t?Bw=t:Hw.globalLogger().warn("invalid log level - "+e)}static from(e){return new Hw(e)}}Hw.errors=Gw,Hw.levels=jw;const Kw=new Hw("bytes/5.8.0");function zw(e){return!!e.toHexString}function Vw(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Vw(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function qw(e){return $w(e)&&!(e.length%2)||Xw(e)}function Jw(e){return"number"==typeof e&&e==e&&e%1==0}function Xw(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Jw(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Jw(r)||r<0||r>=256)return!1}return!0}function Yw(e,t){if(t||(t={}),"number"==typeof e){Kw.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Vw(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),zw(e)&&(e=e.toHexString()),$w(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Kw.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Vw(new Uint8Array(n))}return Xw(e)?Vw(new Uint8Array(e)):Kw.throwArgumentError("invalid arrayify value","value",e)}function Qw(e){let t=Yw(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function $w(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const Zw="0123456789abcdef";function eE(e,t){if(t||(t={}),"number"==typeof e){Kw.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=Zw[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),zw(e))return e.toHexString();if($w(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Kw.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Xw(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=Zw[(240&n)>>4]+Zw[15&n]}return t}return Kw.throwArgumentError("invalid hexlify value","value",e)}function tE(e){if("string"!=typeof e)e=eE(e);else if(!$w(e)||e.length%2)return null;return(e.length-2)/2}function rE(e,t,r){return"string"!=typeof e?e=eE(e):(!$w(e)||e.length%2)&&Kw.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function nE(e){let t="0x";return e.forEach(e=>{t+=eE(e).substring(2)}),t}function iE(e,t){for("string"!=typeof e?e=eE(e):$w(e)||Kw.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Kw.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function oE(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(qw(e)){let r=Yw(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=eE(r.slice(0,32)),t.s=eE(r.slice(32,64))):65===r.length?(t.r=eE(r.slice(0,32)),t.s=eE(r.slice(32,64)),t.v=r[64]):Kw.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:Kw.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=eE(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=function(e,t){(e=Yw(e)).length>t&&Kw.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),Vw(r)}(Yw(t._vs),32);t._vs=eE(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&Kw.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=eE(r);null==t.s?t.s=i:t.s!==i&&Kw.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?Kw.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&Kw.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&$w(t.r)?t.r=iE(t.r,32):Kw.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&$w(t.s)?t.s=iE(t.s,32):Kw.throwArgumentError("signature missing or invalid s","signature",e);const r=Yw(t.s);r[0]>=128&&Kw.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=eE(r);t._vs&&($w(t._vs)||Kw.throwArgumentError("signature invalid _vs","signature",e),t._vs=iE(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&Kw.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}var sE=O().BN;const aE=new Hw("bignumber/5.8.0"),uE={};let cE=!1;class lE{constructor(e,t){e!==uE&&aE.throwError("cannot call constructor directly; use BigNumber.from",Hw.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return fE(dE(this).fromTwos(e))}toTwos(e){return fE(dE(this).toTwos(e))}abs(){return"-"===this._hex[0]?lE.from(this._hex.substring(1)):this}add(e){return fE(dE(this).add(dE(e)))}sub(e){return fE(dE(this).sub(dE(e)))}div(e){return lE.from(e).isZero()&&pE("division-by-zero","div"),fE(dE(this).div(dE(e)))}mul(e){return fE(dE(this).mul(dE(e)))}mod(e){const t=dE(e);return t.isNeg()&&pE("division-by-zero","mod"),fE(dE(this).umod(t))}pow(e){const t=dE(e);return t.isNeg()&&pE("negative-power","pow"),fE(dE(this).pow(t))}and(e){const t=dE(e);return(this.isNegative()||t.isNeg())&&pE("unbound-bitwise-result","and"),fE(dE(this).and(t))}or(e){const t=dE(e);return(this.isNegative()||t.isNeg())&&pE("unbound-bitwise-result","or"),fE(dE(this).or(t))}xor(e){const t=dE(e);return(this.isNegative()||t.isNeg())&&pE("unbound-bitwise-result","xor"),fE(dE(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&pE("negative-width","mask"),fE(dE(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&pE("negative-width","shl"),fE(dE(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&pE("negative-width","shr"),fE(dE(this).shrn(e))}eq(e){return dE(this).eq(dE(e))}lt(e){return dE(this).lt(dE(e))}lte(e){return dE(this).lte(dE(e))}gt(e){return dE(this).gt(dE(e))}gte(e){return dE(this).gte(dE(e))}isNegative(){return"-"===this._hex[0]}isZero(){return dE(this).isZero()}toNumber(){try{return dE(this).toNumber()}catch(e){pE("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return aE.throwError("this platform does not support BigInt",Hw.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?cE||(cE=!0,aE.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?aE.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Hw.errors.UNEXPECTED_ARGUMENT,{}):aE.throwError("BigNumber.toString does not accept parameters",Hw.errors.UNEXPECTED_ARGUMENT,{})),dE(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof lE)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new lE(uE,hE(e)):e.match(/^-?[0-9]+$/)?new lE(uE,hE(new sE(e))):aE.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&pE("underflow","BigNumber.from",e),(e>=9007199254740991||e<=-9007199254740991)&&pE("overflow","BigNumber.from",e),lE.from(String(e));const t=e;if("bigint"==typeof t)return lE.from(t.toString());if(Xw(t))return lE.from(eE(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return lE.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&($w(e)||"-"===e[0]&&$w(e.substring(1))))return lE.from(e)}return aE.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function hE(e){if("string"!=typeof e)return hE(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&aE.throwArgumentError("invalid hex","value",e),"0x00"===(e=hE(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function fE(e){return lE.from(hE(e))}function dE(e){const t=lE.from(e).toHexString();return"-"===t[0]?new sE("-"+t.substring(3),16):new sE(t.substring(2),16)}function pE(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),aE.throwError(e,Hw.errors.NUMERIC_FAULT,n)}function gE(e){return"0x"+se().keccak_256(Yw(e))}const mE=new Hw("address/5.8.0");function yE(e){$w(e,20)||mE.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=Yw(gE(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const bE={};for(let e=0;e<10;e++)bE[String(e)]=String(e);for(let e=0;e<26;e++)bE[String.fromCharCode(65+e)]=String(10+e);const vE=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function wE(e){let t=null;if("string"!=typeof e&&mE.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=yE(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&mE.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>bE[e]).join("");for(;t.length>=vE;){let e=t.substring(0,vE);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e)&&mE.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new sE(r,36).toString(16);t.length<40;)t="0"+t;t=yE("0x"+t)}else mE.throwArgumentError("invalid address","address",e);var r;return t}const EE=lE.from(0),AE=new Hw("properties/5.8.0");function SE(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}const _E=new Hw("rlp/5.8.0");function IE(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function NE(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function kE(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(kE(e))}),t.length<=55)return t.unshift(192+t.length),t;const r=IE(t.length);return r.unshift(247+r.length),r.concat(t)}qw(e)||_E.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(Yw(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=IE(t.length);return r.unshift(183+r.length),r.concat(t)}function PE(e){return eE(kE(e))}function TE(e,t,r,n){const i=[];for(;r<t+1+n;){const o=RE(e,r);i.push(o.result),(r+=o.consumed)>t+1+n&&_E.throwError("child data too short",Hw.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function RE(e,t){if(0===e.length&&_E.throwError("data too short",Hw.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&_E.throwError("data short segment too short",Hw.errors.BUFFER_OVERRUN,{});const n=NE(e,t+1,r);return t+1+r+n>e.length&&_E.throwError("data long segment too short",Hw.errors.BUFFER_OVERRUN,{}),TE(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&_E.throwError("data array too short",Hw.errors.BUFFER_OVERRUN,{}),TE(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&_E.throwError("data array too short",Hw.errors.BUFFER_OVERRUN,{});const n=NE(e,t+1,r);return t+1+r+n>e.length&&_E.throwError("data array too short",Hw.errors.BUFFER_OVERRUN,{}),{consumed:1+r+n,result:eE(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;return t+1+r>e.length&&_E.throwError("data too short",Hw.errors.BUFFER_OVERRUN,{}),{consumed:1+r,result:eE(e.slice(t+1,t+1+r))}}return{consumed:1,result:eE(e[t])}}function OE(e){const t=Yw(e),r=RE(t,0);return r.consumed!==t.length&&_E.throwArgumentError("invalid rlp data","data",e),r.result}function CE(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var xE=UE;function UE(e,t){if(!e)throw new Error(t||"Assertion failed")}UE.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var ME=CE(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}}),LE=CE(function(e,t){var r=t;r.assert=xE,r.toArray=ME.toArray,r.zero2=ME.zero2,r.toHex=ME.toHex,r.encode=ME.encode,r.getNAF=function(e,t,r){var n,i=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<i.length;n+=1)i[n]=0;var o=1<<t+1,s=e.clone();for(n=0;n<i.length;n++){var a,u=s.andln(o-1);s.isOdd()?(a=u>(o>>1)-1?(o>>1)-u:u,s.isubn(a)):a=0,i[n]=a,s.iushrn(1)}return i},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),s=1&u?3!=(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u:0,r[0].push(s),a=1&c?3!=(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c:0,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(O())(e,"hex","le")}}),BE=LE.getNAF,DE=LE.getJSF,FE=LE.assert;function jE(e,t){this.type=e,this.p=new(O())(t.p,16),this.red=t.prime?O().red(t.prime):O().mont(this.p),this.zero=new(O())(0).toRed(this.red),this.one=new(O())(1).toRed(this.red),this.two=new(O())(2).toRed(this.red),this.n=t.n&&new(O())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var GE=jE;function WE(e,t){this.curve=e,this.type=t,this.precomputed=null}jE.prototype.point=function(){throw new Error("Not implemented")},jE.prototype.validate=function(){throw new Error("Not implemented")},jE.prototype._fixedNafMul=function(e,t){FE(e.precomputed);var r=e._getDoubles(),n=BE(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var u=o+r.step-1;u>=o;u--)s=(s<<1)+n[u];a.push(s)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=i;h>0;h--){for(o=0;o<a.length;o++)(s=a[o])===h?l=l.mixedAdd(r.points[o]):s===-h&&(l=l.mixedAdd(r.points[o].neg()));c=c.add(l)}return c.toP()},jE.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=BE(t,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var u=0;a>=0&&0===o[a];a--)u++;if(a>=0&&u++,s=s.dblp(u),a<0)break;var c=o[a];FE(0!==c),s="affine"===e.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===e.type?s.toP():s},jE.prototype._wnafMulAdd=function(e,t,r,n,i){var o,s,a,u=this._wnafT1,c=this._wnafT2,l=this._wnafT3,h=0;for(o=0;o<n;o++){var f=(a=t[o])._getNAFPoints(e);u[o]=f.wnd,c[o]=f.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var g=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(g[1]=t[d].add(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].add(t[p].neg())):(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=DE(r[d],r[p]);for(h=Math.max(y[0].length,h),l[d]=new Array(h),l[p]=new Array(h),s=0;s<h;s++){var b=0|y[0][s],v=0|y[1][s];l[d][s]=m[3*(b+1)+(v+1)],l[p][s]=0,c[d]=g}}else l[d]=BE(r[d],u[d],this._bitLength),l[p]=BE(r[p],u[p],this._bitLength),h=Math.max(l[d].length,h),h=Math.max(l[p].length,h)}var w=this.jpoint(null,null,null),E=this._wnafT4;for(o=h;o>=0;o--){for(var A=0;o>=0;){var S=!0;for(s=0;s<n;s++)E[s]=0|l[s][o],0!==E[s]&&(S=!1);if(!S)break;A++,o--}if(o>=0&&A++,w=w.dblp(A),o<0)break;for(s=0;s<n;s++){var _=E[s];0!==_&&(_>0?a=c[s][_-1>>1]:_<0&&(a=c[s][-_-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(o=0;o<n;o++)c[o]=null;return i?w:w.toP()},jE.BasePoint=WE,WE.prototype.eq=function(){throw new Error("Not implemented")},WE.prototype.validate=function(){return this.curve.validate(this)},jE.prototype.decodePoint=function(e,t){e=LE.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?FE(e[e.length-1]%2==0):7===e[0]&&FE(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},WE.prototype.encodeCompressed=function(e){return this.encode(e,!0)},WE.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},WE.prototype.encode=function(e,t){return LE.encode(this._encode(t),e)},WE.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},WE.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},WE.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},WE.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},WE.prototype._getBeta=function(){return null},WE.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var HE=CE(function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),KE=LE.assert;function zE(e){GE.call(this,"short",e),this.a=new(O())(e.a,16).toRed(this.red),this.b=new(O())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}HE(zE,GE);var VE=zE;function qE(e,t,r,n){GE.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(O())(t,16),this.y=new(O())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JE(e,t,r,n){GE.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(O())(0)):(this.x=new(O())(t,16),this.y=new(O())(r,16),this.z=new(O())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}zE.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(O())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(O())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],KE(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new(O())(e.a,16),b:new(O())(e.b,16)}}):this._getEndoBasis(r)}}},zE.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:O().mont(e),r=new(O())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(O())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},zE.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),d=new(O())(1),p=new(O())(0),g=new(O())(0),m=new(O())(1),y=0;0!==h.cmpn(0);){var b=f.div(h);u=f.sub(b.mul(h)),c=g.sub(b.mul(d));var v=m.sub(b.mul(p));if(!n&&u.cmp(l)<0)t=a.neg(),r=d,n=u.neg(),i=c;else if(n&&2===++y)break;a=u,f=h,h=u,g=d,d=c,m=p,p=v}o=u.neg(),s=c;var w=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},zE.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:u.add(c).neg()}},zE.prototype.pointFromX=function(e,t){(e=new(O())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},zE.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},zE.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[2*o]=a,n[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),l=0;l<2*o;l++)n[l]=null,i[l]=null;return c},HE(qE,GE.BasePoint),zE.prototype.point=function(e,t,r){return new qE(this,e,t,r)},zE.prototype.pointFromJSON=function(e,t){return qE.fromJSON(this,e,t)},qE.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},qE.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},qE.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},qE.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},qE.prototype.isInfinity=function(){return this.inf},qE.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},qE.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},qE.prototype.getX=function(){return this.x.fromRed()},qE.prototype.getY=function(){return this.y.fromRed()},qE.prototype.mul=function(e){return e=new(O())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},qE.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},qE.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},qE.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},qE.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},qE.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},HE(JE,GE.BasePoint),zE.prototype.jpoint=function(e,t,r){return new JE(this,e,t,r)},JE.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},JE.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JE.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),h=n.redMul(c),f=u.redSqr().redIAdd(l).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,d,p)},JE.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),l=r.redMul(u),h=a.redSqr().redIAdd(c).redISub(l).redISub(l),f=a.redMul(l.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(h,f,d)},JE.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(t=0;t<e;t++){var l=o.redSqr(),h=c.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=o.redMul(h),g=d.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=d.redMul(m);y=y.redIAdd(y).redISub(f);var b=c.redMul(a);t+1<e&&(u=u.redMul(f)),o=g,a=b,c=y}return this.curve.jpoint(o,c.redMul(i),a)},JE.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JE.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},JE.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),g=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=d.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},JE.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(s),l=a.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(h).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},JE.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(a).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,f,d)},JE.prototype.mul=function(e,t){return e=new(O())(e,t),this.curve._wnafMul(this,e)},JE.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},JE.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},JE.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JE.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var XE=CE(function(e,t){var r=t;r.base=GE,r.short=VE,r.mont=null,r.edwards=null}),YE=CE(function(e,t){var r,n=t,i=LE.assert;function o(e){"short"===e.type?this.curve=new XE.short(e):"edwards"===e.type?this.curve=new XE.edwards(e):this.curve=new XE.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Gt().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Gt().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Gt().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Gt().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Gt().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Gt().sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Gt().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Gt().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function QE(e){if(!(this instanceof QE))return new QE(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=ME.toArray(e.entropy,e.entropyEnc||"hex"),r=ME.toArray(e.nonce,e.nonceEnc||"hex"),n=ME.toArray(e.pers,e.persEnc||"hex");xE(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var $E=QE;QE.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},QE.prototype._hmac=function(){return new(Gt().hmac)(this.hash,this.K)},QE.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},QE.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=ME.toArray(e,t),r=ME.toArray(r,n),xE(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},QE.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=ME.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,ME.encode(o,t)};var ZE=LE.assert;function eA(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var tA=eA;eA.fromPublic=function(e,t,r){return t instanceof eA?t:new eA(e,{pub:t,pubEnc:r})},eA.fromPrivate=function(e,t,r){return t instanceof eA?t:new eA(e,{priv:t,privEnc:r})},eA.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},eA.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},eA.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},eA.prototype._importPrivate=function(e,t){this.priv=new(O())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},eA.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?ZE(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||ZE(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},eA.prototype.derive=function(e){return e.validate()||ZE(e.validate(),"public point not validated"),e.mul(this.priv).getX()},eA.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},eA.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},eA.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var rA=LE.assert;function nA(e,t){if(e instanceof nA)return e;this._importDER(e,t)||(rA(e.r&&e.s,"Signature without r or s"),this.r=new(O())(e.r,16),this.s=new(O())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var iA=nA;function oA(){this.place=0}function sA(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function aA(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function uA(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}nA.prototype._importDER=function(e,t){e=LE.toArray(e,t);var r=new oA;if(48!==e[r.place++])return!1;var n=sA(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=sA(e,r);if(!1===i)return!1;if(128&e[r.place])return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var s=sA(e,r);if(!1===s)return!1;if(e.length!==s+r.place)return!1;if(128&e[r.place])return!1;var a=e.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(O())(o),this.s=new(O())(a),this.recoveryParam=null,!0},nA.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=aA(t),r=aA(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];uA(n,t.length),(n=n.concat(t)).push(2),uA(n,r.length);var i=n.concat(r),o=[48];return uA(o,i.length),o=o.concat(i),LE.encode(o,e)};var cA=function(){throw new Error("unsupported")},lA=LE.assert;function hA(e){if(!(this instanceof hA))return new hA(e);"string"==typeof e&&(lA(Object.prototype.hasOwnProperty.call(YE,e),"Unknown curve "+e),e=YE[e]),e instanceof YE.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var fA=hA;hA.prototype.keyPair=function(e){return new tA(this,e)},hA.prototype.keyFromPrivate=function(e,t){return tA.fromPrivate(this,e,t)},hA.prototype.keyFromPublic=function(e,t){return tA.fromPublic(this,e,t)},hA.prototype.genKeyPair=function(e){e||(e={});for(var t=new $E({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||cA(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(O())(2));;){var i=new(O())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},hA.prototype._truncateToN=function(e,t,r){var n;if(O().isBN(e)||"number"==typeof e)n=(e=new(O())(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new(O())(e,16);else{var i=e.toString();n=i.length+1>>>1,e=new(O())(i,16)}"number"!=typeof r&&(r=8*n);var o=r-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},hA.prototype.sign=function(e,t,r,n){if("object"==typeof r&&(n=r,r=null),n||(n={}),"string"!=typeof e&&"number"!=typeof e&&!O().isBN(e)){lA("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),lA(e.length>>>0===e.length);for(var i=0;i<e.length;i++)lA((255&e[i])===e[i])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,n.msgBitLength),lA(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),s=t.getPrivate().toArray("be",o),a=e.toArray("be",o);lA(new(O())(a).eq(e),"Can not sign message");for(var u=new $E({hash:this.hash,entropy:s,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new(O())(1)),l=0;;l++){var h=n.k?n.k(l):new(O())(u.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(c)>=0)){var f=this.g.mul(h);if(!f.isInfinity()){var d=f.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)){var g=h.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var m=(f.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0);return n.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),m^=1),new iA({r:p,s:g,recoveryParam:m})}}}}}},hA.prototype.verify=function(e,t,r,n,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,n);var o=(t=new iA(t,"hex")).r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,u=s.invm(this.n),c=u.mul(e).umod(this.n),l=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,r.getPublic(),l)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(c,r.getPublic(),l)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},hA.prototype.recoverPubKey=function(e,t,r,n){lA((3&r)===r,"The recovery param is more than two bits"),t=new iA(t,n);var i=this.n,o=new(O())(e),s=t.r,a=t.s,u=1&r,c=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");s=c?this.curve.pointFromX(s.add(this.curve.n),u):this.curve.pointFromX(s,u);var l=t.r.invm(i),h=i.sub(o).mul(l).umod(i),f=a.mul(l).umod(i);return this.g.mulAdd(h,s,f)},hA.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new iA(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var dA=CE(function(e,t){var r=t;r.version="6.6.1",r.utils=LE,r.rand=function(){throw new Error("unsupported")},r.curve=XE,r.curves=YE,r.ec=fA,r.eddsa=null}).ec;const pA=new Hw("signing-key/5.8.0");let gA=null;function mA(){return gA||(gA=new dA("secp256k1")),gA}class yA{constructor(e){SE(this,"curve","secp256k1"),SE(this,"privateKey",eE(e)),32!==tE(this.privateKey)&&pA.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=mA().keyFromPrivate(Yw(this.privateKey));SE(this,"publicKey","0x"+t.getPublic(!1,"hex")),SE(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),SE(this,"_isSigningKey",!0)}_addPoint(e){const t=mA().keyFromPublic(Yw(this.publicKey)),r=mA().keyFromPublic(Yw(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=mA().keyFromPrivate(Yw(this.privateKey)),r=Yw(e);32!==r.length&&pA.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return oE({recoveryParam:n.recoveryParam,r:iE("0x"+n.r.toString(16),32),s:iE("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=mA().keyFromPrivate(Yw(this.privateKey)),r=mA().keyFromPublic(Yw(bA(e)));return iE("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function bA(e,t){const r=Yw(e);if(32===r.length){const e=new yA(r);return t?"0x"+mA().keyFromPrivate(r).getPublic(!0,"hex"):e.publicKey}return 33===r.length?t?eE(r):"0x"+mA().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+mA().keyFromPublic(r).getPublic(!0,"hex"):eE(r):pA.throwArgumentError("invalid public or private key","key","[REDACTED]")}const vA=new Hw("transactions/5.7.0");var wA;function EA(e){return"0x"===e?null:wE(e)}function AA(e){return"0x"===e?EE:lE.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(wA||(wA={}));const SA=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],_A={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function IA(e){return wE(rE(gE(rE(bA(e),1)),12))}function NA(e,t){return IA(function(e,t){const r=oE(t),n={r:Yw(r.r),s:Yw(r.s)};return"0x"+mA().recoverPubKey(Yw(e),n,r.recoveryParam).encode("hex",!1)}(Yw(e),t))}function kA(e,t){const r=Qw(lE.from(e).toHexString());return r.length>32&&vA.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function PA(e,t){return{address:wE(e),storageKeys:(t||[]).map((t,r)=>(32!==tE(t)&&vA.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase()))}}function TA(e){if(Array.isArray(e))return e.map((e,t)=>Array.isArray(e)?(e.length>2&&vA.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),PA(e[0],e[1])):PA(e.address,e.storageKeys));const t=Object.keys(e).map(t=>{const r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return PA(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}function RA(e){return TA(e).map(e=>[e.address,e.storageKeys])}function OA(e,t){if(null!=e.gasPrice){const t=lE.from(e.gasPrice),r=lE.from(e.maxFeePerGas||0);t.eq(r)||vA.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[kA(e.chainId||0,"chainId"),kA(e.nonce||0,"nonce"),kA(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),kA(e.maxFeePerGas||0,"maxFeePerGas"),kA(e.gasLimit||0,"gasLimit"),null!=e.to?wE(e.to):"0x",kA(e.value||0,"value"),e.data||"0x",RA(e.accessList||[])];if(t){const e=oE(t);r.push(kA(e.recoveryParam,"recoveryParam")),r.push(Qw(e.r)),r.push(Qw(e.s))}return nE(["0x02",PE(r)])}function CA(e,t){const r=[kA(e.chainId||0,"chainId"),kA(e.nonce||0,"nonce"),kA(e.gasPrice||0,"gasPrice"),kA(e.gasLimit||0,"gasLimit"),null!=e.to?wE(e.to):"0x",kA(e.value||0,"value"),e.data||"0x",RA(e.accessList||[])];if(t){const e=oE(t);r.push(kA(e.recoveryParam,"recoveryParam")),r.push(Qw(e.r)),r.push(Qw(e.s))}return nE(["0x01",PE(r)])}function xA(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&vA.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){var r,n;n=_A,(r=e)&&"object"==typeof r||AE.throwArgumentError("invalid object","object",r),Object.keys(r).forEach(e=>{n[e]||AE.throwArgumentError("invalid object key - "+e,"transaction:"+e,r)});const i=[];SA.forEach(function(t){let r=e[t.name]||[];const n={};t.numeric&&(n.hexPad="left"),r=Yw(eE(r,n)),t.length&&r.length!==t.length&&r.length>0&&vA.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,r),t.maxLength&&(r=Qw(r),r.length>t.maxLength&&vA.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,r)),i.push(eE(r))});let o=0;if(null!=e.chainId?(o=e.chainId,"number"!=typeof o&&vA.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!qw(t)&&t.v>28&&(o=Math.floor((t.v-35)/2)),0!==o&&(i.push(eE(o)),i.push("0x"),i.push("0x")),!t)return PE(i);const s=oE(t);let a=27+s.recoveryParam;return 0!==o?(i.pop(),i.pop(),i.pop(),a+=2*o+8,s.v>28&&s.v!==a&&vA.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):s.v!==a&&vA.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),i.push(eE(a)),i.push(Qw(Yw(s.r))),i.push(Qw(Yw(s.s))),PE(i)}(e,t);switch(e.type){case 1:return CA(e,t);case 2:return OA(e,t)}return vA.throwError(`unsupported transaction type: ${e.type}`,Hw.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function UA(e,t,r){try{const r=AA(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(e){vA.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=iE(t[1],32),e.s=iE(t[2],32);try{const t=gE(r(e));e.from=NA(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function MA(e){const t=Yw(e);if(t[0]>127)return function(e){const t=OE(e);9!==t.length&&6!==t.length&&vA.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:AA(t[0]).toNumber(),gasPrice:AA(t[1]),gasLimit:AA(t[2]),to:EA(t[3]),value:AA(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=lE.from(t[6]).toNumber()}catch(e){return r}if(r.r=iE(t[7],32),r.s=iE(t[8],32),lE.from(r.r).isZero()&&lE.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=t.slice(0,6);0!==r.chainId&&(i.push(eE(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const o=gE(PE(i));try{r.from=NA(o,{r:eE(r.r),s:eE(r.s),recoveryParam:n})}catch(e){}r.hash=gE(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){const t=OE(e.slice(1));8!==t.length&&11!==t.length&&vA.throwArgumentError("invalid component count for transaction type: 1","payload",eE(e));const r={type:1,chainId:AA(t[0]).toNumber(),nonce:AA(t[1]).toNumber(),gasPrice:AA(t[2]),gasLimit:AA(t[3]),to:EA(t[4]),value:AA(t[5]),data:t[6],accessList:TA(t[7])};return 8===t.length||(r.hash=gE(e),UA(r,t.slice(8),CA)),r}(t);case 2:return function(e){const t=OE(e.slice(1));9!==t.length&&12!==t.length&&vA.throwArgumentError("invalid component count for transaction type: 2","payload",eE(e));const r=AA(t[2]),n=AA(t[3]),i={type:2,chainId:AA(t[0]).toNumber(),nonce:AA(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:AA(t[4]),to:EA(t[5]),value:AA(t[6]),data:t[7],accessList:TA(t[8])};return 9===t.length||(i.hash=gE(e),UA(i,t.slice(9),OA)),i}(t)}return vA.throwError(`unsupported transaction type: ${t[0]}`,Hw.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}const LA=new c.Logger(C),BA={},DA=D.from(0),FA=D.from(-1);function jA(e,t,r,n){const i={fault:t,operation:r};return void 0!==n&&(i.value=n),LA.throwError(e,c.Logger.errors.NUMERIC_FAULT,i)}let GA="0";for(;GA.length<256;)GA+=GA;function WA(e){if("number"!=typeof e)try{e=D.from(e).toNumber()}catch(e){}return"number"==typeof e&&e>=0&&e<=256&&!(e%1)?"1"+GA.substring(0,e):LA.throwArgumentError("invalid decimal size","decimals",e)}function HA(e,t){null==t&&(t=0);const r=WA(t),n=(e=D.from(e)).lt(DA);n&&(e=e.mul(FA));let i=e.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=e.div(r).toString();return e=1===r.length?o:o+"."+i,n&&(e="-"+e),e}function KA(e,t){null==t&&(t=0);const r=WA(t);"string"==typeof e&&e.match(/^-?[0-9.]+$/)||LA.throwArgumentError("invalid decimal value","value",e);const n="-"===e.substring(0,1);n&&(e=e.substring(1)),"."===e&&LA.throwArgumentError("missing value","value",e);const i=e.split(".");i.length>2&&LA.throwArgumentError("too many decimal points","value",e);let o=i[0],s=i[1];for(o||(o="0"),s||(s="0");"0"===s[s.length-1];)s=s.substring(0,s.length-1);for(s.length>r.length-1&&jA("fractional component exceeds decimals","underflow","parseFixed"),""===s&&(s="0");s.length<r.length-1;)s+="0";const a=D.from(o),u=D.from(s);let c=a.mul(r).add(u);return n&&(c=c.mul(FA)),c}class zA{constructor(e,t,r,n){e!==BA&&LA.throwError("cannot use FixedFormat constructor; use FixedFormat.from",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=n,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(n),this._multiplier=WA(n),Object.freeze(this)}static from(e){if(e instanceof zA)return e;"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,r=128,n=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||LA.throwArgumentError("invalid fixed format","format",e),t="u"!==i[1],r=parseInt(i[2]),n=parseInt(i[3])}else if(e){const i=(t,r,n)=>null==e[t]?n:(typeof e[t]!==r&&LA.throwArgumentError("invalid fixed format ("+t+" not "+r+")","format."+t,e[t]),e[t]);t=i("signed","boolean",t),r=i("width","number",r),n=i("decimals","number",n)}return r%8&&LA.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),n>80&&LA.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new zA(BA,t,r,n)}}class VA{constructor(e,t,r,n){e!==BA&&LA.throwError("cannot use FixedNumber constructor; use FixedNumber.from",c.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&LA.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=KA(this._value,this.format.decimals),r=KA(e._value,e.format.decimals);return VA.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=KA(this._value,this.format.decimals),r=KA(e._value,e.format.decimals);return VA.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=KA(this._value,this.format.decimals),r=KA(e._value,e.format.decimals);return VA.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=KA(this._value,this.format.decimals),r=KA(e._value,e.format.decimals);return VA.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=VA.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(qA.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=VA.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(qA.toFormat(t.format))),t}round(e){null==e&&(e=0);const t=this.toString().split(".");if(1===t.length&&t.push("0"),(e<0||e>80||e%1)&&LA.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const r=VA.from("1"+GA.substring(0,e),this.format),n=JA.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(n).floor().divUnsafe(r)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(e){return null==e?this._hex:(e%8&&LA.throwArgumentError("invalid byte width","width",e),k(D.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString(),e/8))}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return VA.fromString(this._value,e)}static fromValue(e,t,r){return null!=r||null==t||function(e){return null!=e&&(D.isBigNumber(e)||"number"==typeof e&&e%1==0||"string"==typeof e&&!!e.match(/^-?[0-9]+$/)||w(e)||"bigint"==typeof e||g(e))}(t)||(r=t,t=null),null==t&&(t=0),null==r&&(r="fixed"),VA.fromString(HA(e,t),zA.from(r))}static fromString(e,t){null==t&&(t="fixed");const r=zA.from(t),n=KA(e,r.decimals);!r.signed&&n.lt(DA)&&jA("unsigned value cannot be negative","overflow","value",e);let i=null;r.signed?i=n.toTwos(r.width).toHexString():(i=n.toHexString(),i=k(i,r.width/8));const o=HA(n,r.decimals);return new VA(BA,i,o,r)}static fromBytes(e,t){null==t&&(t="fixed");const r=zA.from(t);if(m(e).length>r.width/8)throw new Error("overflow");let n=D.from(e);r.signed&&(n=n.fromTwos(r.width));const i=n.toTwos((r.signed?0:1)+r.width).toHexString(),o=HA(n,r.decimals);return new VA(BA,i,o,r)}static from(e,t){if("string"==typeof e)return VA.fromString(e,t);if(g(e))return VA.fromBytes(e,t);try{return VA.fromValue(e,0,t)}catch(e){if(e.code!==c.Logger.errors.INVALID_ARGUMENT)throw e}return LA.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!(!e||!e._isFixedNumber)}}const qA=VA.from(1),JA=VA.from("0.5"),XA=new c.Logger("units/5.7.0"),YA=["wei","kwei","mwei","gwei","szabo","finney","ether"];function QA(e){const t=String(e).split(".");(t.length>2||!t[0].match(/^-?[0-9]*$/)||t[1]&&!t[1].match(/^[0-9]*$/)||"."===e||"-."===e)&&XA.throwArgumentError("invalid value","value",e);let r=t[0],n="";for("-"===r.substring(0,1)&&(n="-",r=r.substring(1));"0"===r.substring(0,1);)r=r.substring(1);""===r&&(r="0");let i="";for(2===t.length&&(i="."+(t[1]||"0"));i.length>2&&"0"===i[i.length-1];)i=i.substring(0,i.length-1);const o=[];for(;r.length;){if(r.length<=3){o.unshift(r);break}{const e=r.length-3;o.unshift(r.substring(e)),r=r.substring(0,e)}}return n+o.join(",")+i}function $A(e,t){if("string"==typeof t){const e=YA.indexOf(t);-1!==e&&(t=3*e)}return HA(e,null!=t?t:18)}function ZA(e,t){if("string"!=typeof e&&XA.throwArgumentError("value must be a string","value",e),"string"==typeof t){const e=YA.indexOf(t);-1!==e&&(t=3*e)}return KA(e,null!=t?t:18)}function eS(e){return $A(e,18)}function tS(e){return ZA(e,18)}let rS=!1,nS=!1;const iS={debug:1,default:2,info:2,warning:3,error:4,off:5};let oS=iS.default,sS=null;const aS=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var uS,cS;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(uS||(uS={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(cS||(cS={}));const lS="0123456789abcdef";class hS{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==iS[r]&&this.throwArgumentError("invalid log level name","logLevel",e),oS>iS[r]||console.log.apply(console,t)}debug(...e){this._log(hS.levels.DEBUG,e)}info(...e){this._log(hS.levels.INFO,e)}warn(...e){this._log(hS.levels.WARNING,e)}makeError(e,t,r){if(nS)return this.makeError("censored error",t,{});t||(t=hS.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=lS[t[e]>>4],r+=lS[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case cS.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case cS.CALL_EXCEPTION:case cS.INSUFFICIENT_FUNDS:case cS.MISSING_NEW:case cS.NONCE_EXPIRED:case cS.REPLACEMENT_UNDERPRICED:case cS.TRANSACTION_REPLACED:case cS.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach(function(e){s[e]=r[e]}),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,hS.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),aS&&this.throwError("platform missing String.prototype.normalize",hS.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:aS})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,hS.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,hS.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,hS.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,hS.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",hS.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",hS.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",hS.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return sS||(sS=new hS("logger/5.8.0")),sS}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",hS.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),rS){if(!e)return;this.globalLogger().throwError("error censorship permanent",hS.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}nS=!!e,rS=!!t}static setLogLevel(e){const t=iS[e.toLowerCase()];null!=t?oS=t:hS.globalLogger().warn("invalid log level - "+e)}static from(e){return new hS(e)}}hS.errors=cS,hS.levels=uS;const fS=new hS("bytes/5.8.0");function dS(e){return!!e.toHexString}function pS(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return pS(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function gS(e){return"number"==typeof e&&e==e&&e%1==0}function mS(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!gS(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!gS(r)||r<0||r>=256)return!1}return!0}function yS(e,t){if(t||(t={}),"number"==typeof e){fS.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),pS(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),dS(e)&&(e=e.toHexString()),bS(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":fS.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return pS(new Uint8Array(n))}return mS(e)?pS(new Uint8Array(e)):fS.throwArgumentError("invalid arrayify value","value",e)}function bS(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const vS="0123456789abcdef";function wS(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return yS(t)}function ES(e){e=yS(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function AS(e){const t={};for(const r in e)t[r]=e[r];return t}new hS("properties/5.8.0");const SS=new hS("strings/5.8.0");var _S,IS;function NS(e,t,r,n,i){if(e===IS.BAD_PREFIX||e===IS.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===IS.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(_S||(_S={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(IS||(IS={}));const kS=Object.freeze({error:function(e,t,r,n,i){return SS.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:NS,replace:function(e,t,r,n,i){return e===IS.OVERLONG?(n.push(i),0):(n.push(65533),NS(e,t,r))}});function PS(e,t=_S.current){t!=_S.current&&(SS.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&n)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return yS(r)}function TS(e,t){return function(e,t){null==t&&(t=kS.error),e=yS(e);const r=[];let n=0;for(;n<e.length;){const i=e[n++];if(!(i>>7)){r.push(i);continue}let o=null,s=null;if(192==(224&i))o=1,s=127;else if(224==(240&i))o=2,s=2047;else{if(240!=(248&i)){n+=t(128==(192&i)?IS.UNEXPECTED_CONTINUE:IS.BAD_PREFIX,n-1,e,r);continue}o=3,s=65535}if(n-1+o>=e.length){n+=t(IS.OVERRUN,n-1,e,r);continue}let a=i&(1<<8-o-1)-1;for(let i=0;i<o;i++){let i=e[n];if(128!=(192&i)){n+=t(IS.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=t(IS.OUT_OF_RANGE,n-1-o,e,r,a):a>=55296&&a<=57343?n+=t(IS.UTF16_SURROGATE,n-1-o,e,r,a):a<=s?n+=t(IS.OVERLONG,n-1-o,e,r,a):r.push(a))}return r}(e,t).map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}var RS=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};function OS(e,t){return RS(this,void 0,void 0,function*(){null==t&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),null!=t.fetchOptions){const e=t.fetchOptions;e.mode&&(r.mode=e.mode),e.cache&&(r.cache=e.cache),e.credentials&&(r.credentials=e.credentials),e.redirect&&(r.redirect=e.redirect),e.referrer&&(r.referrer=e.referrer)}const n=yield fetch(e,r),i=yield n.arrayBuffer(),o={};return n.headers.forEach?n.headers.forEach((e,t)=>{o[t.toLowerCase()]=e}):n.headers.keys().forEach(e=>{o[e.toLowerCase()]=n.headers.get(e)}),{headers:o,statusCode:n.status,statusMessage:n.statusText,body:yS(new Uint8Array(i))}})}var CS=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const xS=new hS("web/5.7.1");function US(e){return new Promise(t=>{setTimeout(t,e)})}function MS(e,t){if(null==e)return null;if("string"==typeof e)return e;if(function(e){return bS(e)&&!(e.length%2)||mS(e)}(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return TS(e)}catch(e){}return function(e,t){if(t||(t={}),"number"==typeof e){fS.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=vS[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),dS(e))return e.toHexString();if(bS(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":fS.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(mS(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=vS[(240&n)>>4]+vS[15&n]}return t}return fS.throwArgumentError("invalid hexlify value","value",e)}(e)}return e}function LS(e,t,r){const n="object"==typeof e&&null!=e.throttleLimit?e.throttleLimit:12;xS.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"==typeof e?e.throttleCallback:null,o="object"==typeof e&&"number"==typeof e.throttleSlotInterval?e.throttleSlotInterval:100;xS.assertArgument(o>0&&o%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const s="object"==typeof e&&!!e.errorPassThrough,a={};let u=null;const c={method:"GET"};let l=!1,h=12e4;if("string"==typeof e)u=e;else if("object"==typeof e){if(null!=e&&null!=e.url||xS.throwArgumentError("missing URL","connection.url",e),u=e.url,"number"==typeof e.timeout&&e.timeout>0&&(h=e.timeout),e.headers)for(const t in e.headers)a[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(l=!0);if(c.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==u.substring(0,6)&&!0!==e.allowInsecureAuthentication&&xS.throwError("basic authentication requires a secure https url",hS.errors.INVALID_ARGUMENT,{argument:"url",url:u,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;a.authorization={key:"Authorization",value:"Basic "+ES(PS(t))}}null!=e.skipFetchSetup&&(c.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(c.fetchOptions=AS(e.fetchOptions))}const f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),d=u?u.match(f):null;if(d)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?wS(d[3]):(p=d[3],PS(p.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16)))))};let t=e.body;return r&&(t=r(e.body,e)),Promise.resolve(t)}catch(e){xS.throwError("processing response error",hS.errors.SERVER_ERROR,{body:MS(d[1],d[2]),error:e,requestBody:null,requestMethod:"GET",url:u})}var p;t&&(c.method="POST",c.body=t,null==a["content-type"]&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==a["content-length"]&&(a["content-length"]={key:"Content-Length",value:String(t.length)}));const g={};Object.keys(a).forEach(e=>{const t=a[e];g[t.key]=t.value}),c.headers=g;const m=function(){let e=null;return{promise:new Promise(function(t,r){h&&(e=setTimeout(()=>{null!=e&&(e=null,r(xS.makeError("timeout",hS.errors.TIMEOUT,{requestBody:MS(c.body,g["content-type"]),requestMethod:c.method,timeout:h,url:u})))},h))}),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),y=function(){return CS(this,void 0,void 0,function*(){for(let e=0;e<n;e++){let t=null;try{if(t=yield OS(u,c),e<n)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===c.method&&e.match(/^https:/)){u=t.headers.location;continue}}else if(429===t.statusCode){let r=!0;if(i&&(r=yield i(e,u)),r){let r=0;const n=t.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):o*parseInt(String(Math.random()*Math.pow(2,e))),yield US(r);continue}}}catch(e){t=e.response,null==t&&(m.cancel(),xS.throwError("missing response",hS.errors.SERVER_ERROR,{requestBody:MS(c.body,g["content-type"]),requestMethod:c.method,serverError:e,url:u}))}let a=t.body;if(l&&304===t.statusCode?a=null:!s&&(t.statusCode<200||t.statusCode>=300)&&(m.cancel(),xS.throwError("bad response",hS.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:MS(a,t.headers?t.headers["content-type"]:null),requestBody:MS(c.body,g["content-type"]),requestMethod:c.method,url:u})),r)try{const e=yield r(a,t);return m.cancel(),e}catch(r){if(r.throttleRetry&&e<n){let t=!0;if(i&&(t=yield i(e,u)),t){const t=o*parseInt(String(Math.random()*Math.pow(2,e)));yield US(t);continue}}m.cancel(),xS.throwError("processing response error",hS.errors.SERVER_ERROR,{body:MS(a,t.headers?t.headers["content-type"]:null),error:r,requestBody:MS(c.body,g["content-type"]),requestMethod:c.method,url:u})}return m.cancel(),a}return xS.throwError("failed response",hS.errors.SERVER_ERROR,{requestBody:MS(c.body,g["content-type"]),requestMethod:c.method,url:u})})}();return Promise.race([m.promise,y])}function BS(e,t,r){let n=null;if(null!=t){n=PS(t);const r="string"==typeof e?{url:e}:AS(e);r.headers?0!==Object.keys(r.headers).filter(e=>"content-type"===e.toLowerCase()).length||(r.headers=AS(r.headers),r.headers["content-type"]="application/json"):r.headers={"content-type":"application/json"},e=r}return LS(e,n,(e,t)=>{let n=null;if(null!=e)try{n=JSON.parse(TS(e))}catch(t){xS.throwError("invalid JSON",hS.errors.SERVER_ERROR,{body:e,error:t})}return r&&(n=r(n,t)),n})}function DS(e,t){return t||(t={}),null==(t=AS(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise(function(r,n){let i=null,o=!1;const s=()=>!o&&(o=!0,i&&clearTimeout(i),!0);t.timeout&&(i=setTimeout(()=>{s()&&n(new Error("timeout"))},t.timeout));const a=t.retryLimit;let u=0;!function i(){return e().then(function(e){if(void 0!==e)s()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",i);else if(t.onceBlock)t.onceBlock.once("block",i);else if(!o){if(u++,u>a)return void(s()&&n(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,u)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(i,e)}return null},function(e){s()&&n(e)})}()})}const FS="ethers/5.7.2",jS=new zm(FS);try{const e=window;null==e._ethers&&(e._ethers=u)}catch(e){}},73110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.osmosisDescribePath=function(e){const t={verbose:(0,n.addressNListToBIP32)(e),coin:"Osmo",isKnown:!1};if(5!=e.length)return t;if(2147483692!=e[0])return t;if(e[1]!=2147483648+(0,n.slip44ByCoin)("Osmo"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(0!==e[3]||0!==e[4])return t;const r=2147483647&e[2];return{verbose:`Osmosis Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Osmo",isKnown:!0,isPrefork:!1}};const n=r(33612)},73483:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),l.parse(l.partial(l.object({network:l.object({}),output:u.BufferSchema,data:l.array(u.BufferSchema)})),e);const r={name:"embed",network:e.network||s.bitcoin};if(c.prop(r,"output",()=>{if(e.data)return a.compile([h.OP_RETURN].concat(e.data))}),c.prop(r,"data",()=>{if(e.output)return a.decompile(e.output).slice(1)}),t.validate&&e.output){const t=a.decompile(e.output);if(t[0]!==h.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(e=>l.is(u.BufferSchema,e)))throw new TypeError("Output is invalid");if(e.data&&!(0,u.stacksEqual)(e.data,r.data))throw new TypeError("Data mismatch")}return Object.assign(r,e)};const s=r(81281),a=o(r(52421)),u=r(22343),c=o(r(33410)),l=o(r(86466)),h=a.OPS},73716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(){return!0}},74070:(e,t,r)=>{"use strict";r.d(t,{X:()=>n});var n=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},74077:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ArgumentOutOfRangeError:()=>R.k,AsyncSubject:()=>l.h,BehaviorSubject:()=>u.t,ConnectableObservable:()=>i.G,EMPTY:()=>X.w,EmptyError:()=>O.G,GroupedObservable:()=>o.k,NEVER:()=>he,Notification:()=>I.E,NotificationKind:()=>I.I,ObjectUnsubscribedError:()=>C.P,Observable:()=>n.c,ReplaySubject:()=>c.m,Scheduler:()=>A._,Subject:()=>a.B7,Subscriber:()=>_.v,Subscription:()=>S.y,TimeoutError:()=>U.M,UnsubscriptionError:()=>x.Z,VirtualAction:()=>E,VirtualTimeScheduler:()=>w,animationFrame:()=>v,animationFrameScheduler:()=>b,asap:()=>h.I,asapScheduler:()=>h.$,async:()=>f.b,asyncScheduler:()=>f.E,bindCallback:()=>F,bindNodeCallback:()=>W,combineLatest:()=>V.zV,concat:()=>q.x,config:()=>Te.$,defer:()=>J.v,empty:()=>X.I,forkJoin:()=>$,from:()=>Q.H,fromEvent:()=>te,fromEventPattern:()=>ne,generate:()=>ie,identity:()=>P.D,iif:()=>se,interval:()=>ue,isObservable:()=>T,merge:()=>le.h,never:()=>fe,noop:()=>k.l,observable:()=>s.s,of:()=>de.of,onErrorResumeNext:()=>pe,pairs:()=>ge,partition:()=>we,pipe:()=>N.F,queue:()=>d.g,queueScheduler:()=>d.T,race:()=>Ee.O4,range:()=>Ae,scheduled:()=>Pe.c,throwError:()=>_e.$,timer:()=>Ie.O,using:()=>Ne,zip:()=>ke.yU});var n=r(86323),i=r(98094),o=r(42223),s=r(22231),a=r(46907),u=r(15850),c=r(40194),l=r(61063),h=r(61222),f=r(21505),d=r(40901),p=r(61220),g=r(80658),m=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return p.C6(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(cancelAnimationFrame(r),t.scheduled=void 0)},t}(g.R),y=r(45672),b=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p.C6(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(y.q))(m),v=b,w=function(e){function t(t,r){void 0===t&&(t=E),void 0===r&&(r=Number.POSITIVE_INFINITY);var n=e.call(this,t,function(){return n.frame})||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return p.C6(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(y.q),E=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1);var i=e.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.index=n,i.active=!0,i.index=t.index=n,i}return p.C6(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(g.R),A=r(13826),S=r(33862),_=r(90189),I=r(19376),N=r(1674),k=r(46582),P=r(32984);function T(e){return!!e&&(e instanceof n.c||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var R=r(44841),O=r(48671),C=r(81678),x=r(24788),U=r(39225),M=r(4679),L=r(78008),B=r(81065),D=r(42637);function F(e,t,r){if(t){if(!(0,D.m)(t))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return F(e,r).apply(void 0,n).pipe((0,M.T)(function(e){return(0,B.c)(e)?t.apply(void 0,e):t(e)}))};r=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o,s=this,a={context:s,subject:o,callbackFunc:e,scheduler:r};return new n.c(function(n){if(r){var i={args:t,subscriber:n,params:a};return r.schedule(j,0,i)}if(!o){o=new l.h;try{e.apply(s,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.next(e.length<=1?e[0]:e),o.complete()}]))}catch(e){(0,L.H)(o)?o.error(e):console.warn(e)}}return o.subscribe(n)})}}function j(e){var t=this,r=e.args,n=e.subscriber,i=e.params,o=i.callbackFunc,s=i.context,a=i.scheduler,u=i.subject;if(!u){u=i.subject=new l.h;try{o.apply(s,r.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.length<=1?e[0]:e;t.add(a.schedule(G,0,{value:n,subject:u}))}]))}catch(e){u.error(e)}}this.add(u.subscribe(n))}function G(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function W(e,t,r){if(t){if(!(0,D.m)(t))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return W(e,r).apply(void 0,n).pipe((0,M.T)(function(e){return(0,B.c)(e)?t.apply(void 0,e):t(e)}))};r=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o={subject:void 0,args:t,callbackFunc:e,scheduler:r,context:this};return new n.c(function(n){var i=o.context,s=o.subject;if(r)return r.schedule(H,0,{params:o,subscriber:n,context:i});if(!s){s=o.subject=new l.h;try{e.apply(i,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.shift();r?s.error(r):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){(0,L.H)(s)?s.error(e):console.warn(e)}}return s.subscribe(n)})}}function H(e){var t=this,r=e.params,n=e.subscriber,i=e.context,o=r.callbackFunc,s=r.args,a=r.scheduler,u=r.subject;if(!u){u=r.subject=new l.h;try{o.apply(i,s.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.shift();if(n)t.add(a.schedule(z,0,{err:n,subject:u}));else{var i=e.length<=1?e[0]:e;t.add(a.schedule(K,0,{value:i,subject:u}))}}]))}catch(e){this.add(a.schedule(z,0,{err:e,subject:u}))}}this.add(u.subscribe(n))}function K(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function z(e){var t=e.err;e.subject.error(t)}var V=r(4439),q=r(77041),J=r(26641),X=r(53200),Y=r(45989),Q=r(80125);function $(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=e[0];if((0,B.c)(r))return Z(r,null);if((0,Y.G)(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return Z(n.map(function(e){return r[e]}),n)}}if("function"==typeof e[e.length-1]){var i=e.pop();return Z(e=1===e.length&&(0,B.c)(e[0])?e[0]:e,null).pipe((0,M.T)(function(e){return i.apply(void 0,e)}))}return Z(e,null)}function Z(e,t){return new n.c(function(r){var n=e.length;if(0!==n)for(var i=new Array(n),o=0,s=0,a=function(a){var u=(0,Q.H)(e[a]),c=!1;r.add(u.subscribe({next:function(e){c||(c=!0,s++),i[a]=e},error:function(e){return r.error(e)},complete:function(){++o!==n&&c||(s===n&&r.next(t?t.reduce(function(e,t,r){return e[t]=i[r],e},{}):i),r.complete())}}))},u=0;u<n;u++)a(u);else r.complete()})}var ee=r(23842);function te(e,t,r,i){return(0,ee.T)(r)&&(i=r,r=void 0),i?te(e,t,r).pipe((0,M.T)(function(e){return(0,B.c)(e)?i.apply(void 0,e):i(e)})):new n.c(function(n){re(e,t,function(e){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(e)},n,r)})}function re(e,t,r,n,i){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var s=e;e.addEventListener(t,r,i),o=function(){return s.removeEventListener(t,r,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var a=e;e.on(t,r),o=function(){return a.off(t,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var u=e;e.addListener(t,r),o=function(){return u.removeListener(t,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,l=e.length;c<l;c++)re(e[c],t,r,n,i)}n.add(o)}function ne(e,t,r){return r?ne(e,t).pipe((0,M.T)(function(e){return(0,B.c)(e)?r.apply(void 0,e):r(e)})):new n.c(function(r){var n,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)};try{n=e(i)}catch(e){return void r.error(e)}if((0,ee.T)(t))return function(){return t(i,n)}})}function ie(e,t,r,i,o){var s,a;if(1==arguments.length){var u=e;a=u.initialState,t=u.condition,r=u.iterate,s=u.resultSelector||P.D,o=u.scheduler}else void 0===i||(0,D.m)(i)?(a=e,s=P.D,o=i):(a=e,s=i);return new n.c(function(e){var n=a;if(o)return o.schedule(oe,0,{subscriber:e,iterate:r,condition:t,resultSelector:s,state:n});for(;;){if(t){var i=void 0;try{i=t(n)}catch(t){return void e.error(t)}if(!i){e.complete();break}}var u=void 0;try{u=s(n)}catch(t){return void e.error(t)}if(e.next(u),e.closed)break;try{n=r(n)}catch(t){return void e.error(t)}}})}function oe(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function se(e,t,r){return void 0===t&&(t=X.w),void 0===r&&(r=X.w),(0,J.v)(function(){return e()?t:r})}var ae=r(95263);function ue(e,t){return void 0===e&&(e=0),void 0===t&&(t=f.b),(!(0,ae.k)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=f.b),new n.c(function(r){return r.add(t.schedule(ce,e,{subscriber:r,counter:0,period:e})),r})}function ce(e){var t=e.subscriber,r=e.counter,n=e.period;t.next(r),this.schedule({subscriber:t,counter:r+1,period:n},n)}var le=r(33465),he=new n.c(k.l);function fe(){return he}var de=r(15812);function pe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return X.w;var r=e[0],i=e.slice(1);return 1===e.length&&(0,B.c)(r)?pe.apply(void 0,r):new n.c(function(e){var t=function(){return e.add(pe.apply(void 0,i).subscribe(e))};return(0,Q.H)(r).subscribe({next:function(t){e.next(t)},error:t,complete:t})})}function ge(e,t){return t?new n.c(function(r){var n=Object.keys(e),i=new S.y;return i.add(t.schedule(me,0,{keys:n,index:0,subscriber:r,subscription:i,obj:e})),i}):new n.c(function(t){for(var r=Object.keys(e),n=0;n<r.length&&!t.closed;n++){var i=r[n];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function me(e){var t=e.keys,r=e.index,n=e.subscriber,i=e.subscription,o=e.obj;if(!n.closed)if(r<t.length){var s=t[r];n.next([s,o[s]]),i.add(this.schedule({keys:t,index:r+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}var ye=r(82781),be=r(47722),ve=r(41975);function we(e,t,r){return[(0,ve.p)(t,r)(new n.c((0,be.i)(e))),(0,ve.p)((0,ye.A)(t,r))(new n.c((0,be.i)(e)))]}var Ee=r(43304);function Ae(e,t,r){return void 0===e&&(e=0),new n.c(function(n){void 0===t&&(t=e,e=0);var i=0,o=e;if(r)return r.schedule(Se,0,{index:i,count:t,start:e,subscriber:n});for(;;){if(i++>=t){n.complete();break}if(n.next(o++),n.closed)break}})}function Se(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t),i.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))}var _e=r(39815),Ie=r(57572);function Ne(e,t){return new n.c(function(r){var n,i;try{n=e()}catch(e){return void r.error(e)}try{i=t(n)}catch(e){return void r.error(e)}var o=(i?(0,Q.H)(i):X.w).subscribe(r);return function(){o.unsubscribe(),n&&n.unsubscribe()}})}var ke=r(2014),Pe=r(29024),Te=r(58701)},74387:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(27294)),o=e=>33===e.length&&[2,3].includes(e[0])||65===e.length&&4===e[0];t.makeConverter=function(e,t=o){return{decode:function(r){if(r.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+i.toHex(r.key));const n=r.key.slice(1);if(!t(n))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+i.toHex(r.key));if(r.value.length/4%1!=0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");const o={masterFingerprint:r.value.slice(0,4),pubkey:n,path:"m"};for(const e of(s=r.value.length/4-1,[...Array(s).keys()])){const t=i.readUInt32(r.value,4*e+4,"LE"),n=!!(2147483648&t),s=2147483647&t;o.path+="/"+s.toString(10)+(n?"'":"")}var s;return o},encode:function(t){const r=Uint8Array.from([e]),n=i.concat([r,t.pubkey]),o=t.path.split("/"),s=new Uint8Array(4*o.length);s.set(t.masterFingerprint,0);let a=4;return o.slice(1).forEach(e=>{const t="'"===e.slice(-1);let r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),i.writeUInt32(s,a,r,"LE"),a+=4}),{key:n,value:s}},check:function(e){return e.pubkey instanceof Uint8Array&&e.masterFingerprint instanceof Uint8Array&&"string"==typeof e.path&&t(e.pubkey)&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Uint8Array; pubkey: Uint8Array; path: string; }",canAddToArray:function(e,t,r){const n=i.toHex(t.pubkey);return!r.has(n)&&(r.add(n),0===e.filter(e=>0===i.compare(e.pubkey,t.pubkey)).length)}}}},77041:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});var n=r(15812),i=r(99958);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,i.K)()(n.of.apply(void 0,e))}},77496:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.GlobalTypes||(t.GlobalTypes={}))[i.UNSIGNED_TX=0]="UNSIGNED_TX",i[i.GLOBAL_XPUB=1]="GLOBAL_XPUB",t.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],(n=t.InputTypes||(t.InputTypes={}))[n.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",n[n.WITNESS_UTXO=1]="WITNESS_UTXO",n[n.PARTIAL_SIG=2]="PARTIAL_SIG",n[n.SIGHASH_TYPE=3]="SIGHASH_TYPE",n[n.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",n[n.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",n[n.BIP32_DERIVATION=6]="BIP32_DERIVATION",n[n.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",n[n.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",n[n.POR_COMMITMENT=9]="POR_COMMITMENT",n[n.TAP_KEY_SIG=19]="TAP_KEY_SIG",n[n.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",n[n.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",n[n.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",n[n.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",n[n.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT",t.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],(r=t.OutputTypes||(t.OutputTypes={}))[r.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",r[r.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",r[r.BIP32_DERIVATION=2]="BIP32_DERIVATION",r[r.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",r[r.TAP_TREE=6]="TAP_TREE",r[r.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION",t.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]},78008:(e,t,r)=>{"use strict";r.d(t,{H:()=>i});var n=r(90189);function i(e){for(;e;){var t=e,r=t.closed,i=t.destination,o=t.isStopped;if(r||o)return!1;e=i&&i instanceof n.v?i:null}return!0}},80125:(e,t,r)=>{"use strict";r.d(t,{H:()=>s});var n=r(86323),i=r(47722),o=r(29024);function s(e,t){return t?(0,o.c)(e,t):e instanceof n.c?e:new n.c((0,i.i)(e))}},80658:(e,t,r)=>{"use strict";r.d(t,{R:()=>i});var n=r(61220),i=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return n.C6(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,r){return e.call(this)||this}return n.C6(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r(33862).y))},81065:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});var n=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},81281:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testnet=t.regtest=t.bitcoin=void 0,t.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},81413:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(2795),o=n(r(27294));function s(e,t,r){return n=>{if(e.has(n))return;const i=r.filter(e=>o.toHex(e.key)===n)[0];t.push(i),e.add(n)}}function a(e){return e.globalMap.unsignedTx}function u(e){const t=new Set;return e.forEach(e=>{const r=o.toHex(e.key);if(t.has(r))throw new Error("Combine: KeyValue Map keys should be unique");t.add(r)}),t}t.combine=function(e){const t=e[0],r=i.psbtToKeyVals(t),n=e.slice(1);if(0===n.length)throw new Error("Combine: Nothing to combine");const c=a(t);if(void 0===c)throw new Error("Combine: Self missing transaction");const l=u(r.globalKeyVals),h=r.inputKeyVals.map(u),f=r.outputKeyVals.map(u);for(const e of n){const t=a(e);if(void 0===t||0!==o.compare(t.toBuffer(),c.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");const n=i.psbtToKeyVals(e);u(n.globalKeyVals).forEach(s(l,r.globalKeyVals,n.globalKeyVals)),n.inputKeyVals.map(u).forEach((e,t)=>e.forEach(s(h[t],r.inputKeyVals[t],n.inputKeyVals[t]))),n.outputKeyVals.map(u).forEach((e,t)=>e.forEach(s(f[t],r.outputKeyVals[t],n.outputKeyVals[t])))}return i.psbtFromKeyVals(c,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}},81511:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.encodingLength=u,t.encode=function(e,t,r){const n=u(t);return 1===n?a.writeUInt8(e,r,t):2===n?(a.writeUInt8(e,r,s.OPS.OP_PUSHDATA1),a.writeUInt8(e,r+1,t)):3===n?(a.writeUInt8(e,r,s.OPS.OP_PUSHDATA2),a.writeUInt16(e,r+1,t,"LE")):(a.writeUInt8(e,r,s.OPS.OP_PUSHDATA4),a.writeUInt32(e,r+1,t,"LE")),n},t.decode=function(e,t){const r=a.readUInt8(e,t);let n,i;if(r<s.OPS.OP_PUSHDATA1)n=r,i=1;else if(r===s.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;n=a.readUInt8(e,t+1),i=2}else if(r===s.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;n=a.readUInt16(e,t+1,"LE"),i=3}else{if(t+5>e.length)return null;if(r!==s.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=a.readUInt32(e,t+1,"LE"),i=5}return{opcode:r,number:n,size:i}};const s=r(26224),a=o(r(27294));function u(e){return e<s.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}},81678:(e,t,r)=>{"use strict";r.d(t,{P:()=>n});var n=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},82296:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294)),s=n(r(7170));t.decode=function(e){if(e.key[0]!==i.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+o.toHex(e.key));const t=o.readInt64(e.value,0,"LE");let r=8;const{numberValue:n,bytes:a}=s.decode(e.value,r);r+=a;const u=e.value.slice(r);if(u.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:u,value:t}},t.encode=function(e){const{script:t,value:r}=e,n=s.encodingLength(t.length),a=new Uint8Array(8+n+t.length);return o.writeInt64(a,0,BigInt(r),"LE"),s.encode(t.length,a,8),a.set(t,8+n),{key:Uint8Array.from([i.InputTypes.WITNESS_UTXO]),value:a}},t.expected="{ script: Uint8Array; value: bigint; }",t.check=function(e){return e.script instanceof Uint8Array&&"bigint"==typeof e.value},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo}},82781:(e,t,r)=>{"use strict";function n(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}r.d(t,{A:()=>n})},83125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.solanaDescribePath=function(e){const t={verbose:(0,i.addressNListToBIP32)(e),coin:"Solana",isKnown:!1};if(4!=e.length)return t;if(2147483692!=e[0])return t;if(e[1]!=2147483648+(0,i.slip44ByCoin)("Solana"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(2147483648!==e[3])return t;const r=2147483647&e[2];return{verbose:`Solana Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Solana",isKnown:!0}},t.solanaGetAccountPaths=function(e){return[{addressNList:[2147483692,2147483648+(0,i.slip44ByCoin)("Solana"),2147483648+e.accountIdx,2147483648]}]},t.solanaAddressNListToBIP32=function(e){return(0,i.addressNListToBIP32)((0,i.ed25519Path)(e))},t.solanaBuildTransaction=function(e,t){var r,i;const o=function(e){return e.map(e=>new n.TransactionInstruction({keys:e.keys.map(e=>Object.assign(e,{pubkey:new n.PublicKey(e.pubkey)})),programId:new n.PublicKey(e.programId),data:e.data}))}(null!==(r=e.instructions)&&void 0!==r?r:[]),s=Number(e.value);!isNaN(s)&&s>0&&e.to&&o.push(n.SystemProgram.transfer({fromPubkey:new n.PublicKey(t),toPubkey:new n.PublicKey(e.to),lamports:s})),void 0!==e.computeUnitLimit&&o.push(n.ComputeBudgetProgram.setComputeUnitLimit({units:e.computeUnitLimit})),void 0!==e.computeUnitPrice&&o.push(n.ComputeBudgetProgram.setComputeUnitPrice({microLamports:e.computeUnitPrice}));const a=null===(i=e.addressLookupTableAccountInfos)||void 0===i?void 0:i.map(e=>new n.AddressLookupTableAccount({key:new n.PublicKey(e.key),state:n.AddressLookupTableAccount.deserialize(new Uint8Array(e.data))})),u=new n.TransactionMessage({payerKey:new n.PublicKey(t),instructions:o,recentBlockhash:e.blockHash}).compileToV0Message(a);return new n.VersionedTransaction(u)};const n=r(88652),i=r(33612)},83182:(e,t,r)=>{"use strict";r.d(t,{Y:()=>i});var n=r(61220),i=function(e){function t(t,r){var n=e.call(this)||this;return n.subject=t,n.subscriber=r,n.closed=!1,n}return n.C6(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(r(33862).y)},84008:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(88088)),s=n(r(91661)),a=n(r(7543)),u=n(r(51657)),c=n(r(5477)),l=n(r(19537)),h=n(r(85957)),f=n(r(33498)),d=n(r(61994)),p=n(r(18455)),g=n(r(57772)),m=n(r(44106)),y=n(r(82296)),b=n(r(5061)),v=n(r(74387)),w=n(r(3176)),E=n(r(38339)),A=n(r(23494)),S=n(r(13403)),_=n(r(62386)),I={unsignedTx:s,globalXpub:o,checkPubkey:w.makeChecker([])};t.globals=I;const N={nonWitnessUtxo:c,partialSig:l,sighashType:f,finalScriptSig:a,finalScriptWitness:u,porCommitment:h,witnessUtxo:y,bip32Derivation:v.makeConverter(i.InputTypes.BIP32_DERIVATION),redeemScript:E.makeConverter(i.InputTypes.REDEEM_SCRIPT),witnessScript:_.makeConverter(i.InputTypes.WITNESS_SCRIPT),checkPubkey:w.makeChecker([i.InputTypes.PARTIAL_SIG,i.InputTypes.BIP32_DERIVATION]),tapKeySig:d,tapScriptSig:m,tapLeafScript:p,tapBip32Derivation:A.makeConverter(i.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:S.makeConverter(i.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:g};t.inputs=N;const k={bip32Derivation:v.makeConverter(i.OutputTypes.BIP32_DERIVATION),redeemScript:E.makeConverter(i.OutputTypes.REDEEM_SCRIPT),witnessScript:_.makeConverter(i.OutputTypes.WITNESS_SCRIPT),checkPubkey:w.makeChecker([i.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:A.makeConverter(i.OutputTypes.TAP_BIP32_DERIVATION),tapTree:b,tapInternalKey:S.makeConverter(i.OutputTypes.TAP_INTERNAL_KEY)};t.outputs=k},84590:(e,t,r)=>{"use strict";r.d(t,{U:()=>o});var n=r(54863),i=r(32984);function o(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),(0,n.ZZ)(i.D,e)}},84808:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kavaDescribePath=function(e){const t={verbose:(0,n.addressNListToBIP32)(e),coin:"Kava",isKnown:!1};if(5!=e.length)return t;if(2147483692!=e[0])return t;if(e[1]!=2147483648+(0,n.slip44ByCoin)("Kava"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(0!==e[3]||0!==e[4])return t;const r=2147483647&e[2];return{verbose:`Kava Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Kava",isKnown:!0,isPrefork:!1}};const n=r(33612)},85257:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0,t.makeEvent=function(e){return Object.assign({date:Date.now()},e)},function(e){e.BUTTON_REQUEST="BUTTON_REQUEST",e.CANCEL="CANCEL",e.CHARACTER_REQUEST="CHARACTER_REQUEST",e.CONNECT="CONNECT",e.DISCONNECT="DISCONNECT",e.FAILURE="FAILURE",e.PASSPHRASE_REQUEST="PASSPHRASE_REQUEST",e.PIN_REQUEST="PIN_REQUEST",e.SUCCESS="SUCCESS",e.WORD_REQUEST="WORD_REQUEST"}(r||(t.Events=r={}))},85957:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));t.decode=function(e){if(e.key[0]!==i.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+o.toHex(e.key));return o.toUtf8(e.value)},t.encode=function(e){return{key:new Uint8Array([i.InputTypes.POR_COMMITMENT]),value:o.fromUtf8(e)}},t.expected="string",t.check=function(e){return"string"==typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment}},86139:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),p.parse(p.partial(p.object({network:p.object({}),address:p.string(),hash:(0,l.NBufferSchemaFactory)(20),output:(0,l.NBufferSchemaFactory)(23),redeem:p.partial(p.object({network:p.object({}),output:l.BufferSchema,input:l.BufferSchema,witness:p.array(l.BufferSchema)})),input:l.BufferSchema,witness:p.array(l.BufferSchema)})),e);let r=e.network;r||(r=e.redeem&&e.redeem.network||u.bitcoin);const n={network:r},i=h.value(()=>{const t=f.default.decode(e.address);return{version:d.readUInt8(t,0),hash:t.slice(1)}}),o=h.value(()=>c.decompile(e.input)),s=h.value(()=>{const t=o(),n=t[t.length-1];return{network:r,output:n===g.OP_FALSE?Uint8Array.from([]):n,input:c.compile(t.slice(0,-1)),witness:e.witness||[]}});if(h.prop(n,"address",()=>{if(!n.hash)return;const e=new Uint8Array(21);return d.writeUInt8(e,0,n.network.scriptHash),e.set(n.hash,1),f.default.encode(e)}),h.prop(n,"hash",()=>e.output?e.output.slice(2,22):e.address?i().hash:n.redeem&&n.redeem.output?a.hash160(n.redeem.output):void 0),h.prop(n,"output",()=>{if(n.hash)return c.compile([g.OP_HASH160,n.hash,g.OP_EQUAL])}),h.prop(n,"redeem",()=>{if(e.input)return s()}),h.prop(n,"input",()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return c.compile([].concat(c.decompile(e.redeem.input),e.redeem.output))}),h.prop(n,"witness",()=>n.redeem&&n.redeem.witness?n.redeem.witness:n.input?[]:void 0),h.prop(n,"name",()=>{const e=["p2sh"];return void 0!==n.redeem&&void 0!==n.redeem.name&&e.push(n.redeem.name),e.join("-")}),t.validate){let t=Uint8Array.from([]);if(e.address){if(i().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==i().hash.length)throw new TypeError("Invalid address");t=i().hash}if(e.hash){if(t.length>0&&0!==d.compare(t,e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==g.OP_HASH160||20!==e.output[1]||e.output[22]!==g.OP_EQUAL)throw new TypeError("Output is invalid");const r=e.output.slice(2,22);if(t.length>0&&0!==d.compare(t,r))throw new TypeError("Hash mismatch");t=r}const n=e=>{if(e.output){const r=c.decompile(e.output);if(!r||r.length<1)throw new TypeError("Redeem.output too short");if(e.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(c.countNonPushOnlyOPs(r)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const n=a.hash160(e.output);if(t.length>0&&0!==d.compare(t,n))throw new TypeError("Hash mismatch");t=n}if(e.input){const t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw new TypeError("Empty input");if(t&&r)throw new TypeError("Input and witness provided");if(t){const t=c.decompile(e.input);if(!c.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=o();if(!e||e.length<1)throw new TypeError("Input too short");if(!(s().output instanceof Uint8Array))throw new TypeError("Input is invalid");n(s())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw new TypeError("Network mismatch");if(e.input){const t=s();if(e.redeem.output&&0!==d.compare(e.redeem.output,t.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&0!==d.compare(e.redeem.input,t.input))throw new TypeError("Redeem.input mismatch")}n(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!(0,l.stacksEqual)(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)};const a=o(r(43807)),u=r(81281),c=o(r(52421)),l=r(22343),h=o(r(33410)),f=s(r(44496)),d=o(r(27294)),p=o(r(86466)),g=c.OPS},86323:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(78008),i=r(90189),o=r(34050),s=r(29841),a=r(22231),u=r(1674),c=r(58701),l=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,a=function(e,t,r){if(e){if(e instanceof i.v)return e;if(e[o.D])return e[o.D]()}return e||t||r?new i.v(e,t,r):new i.v(s.I)}(e,t,r);if(n?a.add(n.call(a,this.source)):a.add(this.source||c.$.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.$.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){c.$.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),(0,n.H)(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=h(t))(function(t,n){var i;i=r.subscribe(function(t){try{e(t)}catch(e){n(e),i&&i.unsubscribe()}},n,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[a.s]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:(0,u.m)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=h(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function h(e){if(e||(e=c.$.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},86466:e=>{"use strict";var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,s={};function a(){return{kind:"transformation",type:"await",reference:a,async:!0,_run:async e=>(e.value=await e.value,e)}}((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(s,{BASE64_REGEX:()=>f,BIC_REGEX:()=>d,CUID2_REGEX:()=>p,DECIMAL_REGEX:()=>g,EMAIL_REGEX:()=>m,EMOJI_REGEX:()=>y,HEXADECIMAL_REGEX:()=>b,HEX_COLOR_REGEX:()=>v,IMEI_REGEX:()=>w,IPV4_REGEX:()=>E,IPV6_REGEX:()=>A,IP_REGEX:()=>S,ISO_DATE_REGEX:()=>_,ISO_DATE_TIME_REGEX:()=>I,ISO_TIMESTAMP_REGEX:()=>P,ISO_TIME_REGEX:()=>N,ISO_TIME_SECOND_REGEX:()=>k,ISO_WEEK_REGEX:()=>T,MAC48_REGEX:()=>R,MAC64_REGEX:()=>O,MAC_REGEX:()=>C,OCTAL_REGEX:()=>x,ULID_REGEX:()=>U,UUID_REGEX:()=>M,ValiError:()=>oe,_addIssue:()=>X,_isLuhnAlgo:()=>Q,_isValidObjectKey:()=>$,_joinExpects:()=>Z,_stringify:()=>J,any:()=>er,array:()=>tr,arrayAsync:()=>rr,awaitAsync:()=>a,base64:()=>se,bic:()=>ae,bigint:()=>nr,blob:()=>ir,boolean:()=>or,brand:()=>ue,bytes:()=>ce,check:()=>le,checkAsync:()=>he,checkItems:()=>fe,config:()=>Gt,creditCard:()=>me,cuid2:()=>ye,custom:()=>sr,customAsync:()=>ar,date:()=>ur,decimal:()=>be,deleteGlobalConfig:()=>D,deleteGlobalMessage:()=>G,deleteSchemaMessage:()=>K,deleteSpecificMessage:()=>q,description:()=>ve,email:()=>we,emoji:()=>Ee,empty:()=>Ae,endsWith:()=>Se,entriesFromList:()=>ee,enum:()=>cr,enum_:()=>cr,everyItem:()=>_e,excludes:()=>Ie,fallback:()=>Ht,fallbackAsync:()=>Kt,file:()=>lr,filterItems:()=>Ne,findItem:()=>ke,finite:()=>Pe,flatten:()=>zt,forward:()=>Vt,forwardAsync:()=>qt,function:()=>hr,function_:()=>hr,getDefault:()=>Jt,getDefaults:()=>Xt,getDefaultsAsync:()=>Yt,getDotPath:()=>te,getFallback:()=>Wt,getFallbacks:()=>Qt,getFallbacksAsync:()=>$t,getGlobalConfig:()=>B,getGlobalMessage:()=>j,getSchemaMessage:()=>H,getSpecificMessage:()=>V,hash:()=>Re,hexColor:()=>Ce,hexadecimal:()=>Oe,imei:()=>xe,includes:()=>Ue,instance:()=>fr,integer:()=>Me,intersect:()=>pr,intersectAsync:()=>gr,ip:()=>Le,ipv4:()=>Be,ipv6:()=>De,is:()=>Zt,isOfKind:()=>re,isOfType:()=>ne,isValiError:()=>ie,isoDate:()=>Fe,isoDateTime:()=>je,isoTime:()=>Ge,isoTimeSecond:()=>We,isoTimestamp:()=>He,isoWeek:()=>Ke,keyof:()=>yn,lazy:()=>mr,lazyAsync:()=>yr,length:()=>ze,literal:()=>br,looseObject:()=>vr,looseObjectAsync:()=>wr,looseTuple:()=>Er,looseTupleAsync:()=>Ar,mac:()=>Ve,mac48:()=>qe,mac64:()=>Je,map:()=>Sr,mapAsync:()=>_r,mapItems:()=>Xe,maxBytes:()=>Ye,maxLength:()=>Qe,maxSize:()=>$e,maxValue:()=>Ze,mimeType:()=>et,minBytes:()=>tt,minLength:()=>rt,minSize:()=>nt,minValue:()=>it,multipleOf:()=>ot,nan:()=>Ir,never:()=>Nr,nonEmpty:()=>st,nonNullable:()=>kr,nonNullableAsync:()=>Pr,nonNullish:()=>Tr,nonNullishAsync:()=>Rr,nonOptional:()=>Or,nonOptionalAsync:()=>Cr,normalize:()=>at,notBytes:()=>ut,notLength:()=>ct,notSize:()=>lt,notValue:()=>ht,null:()=>xr,null_:()=>xr,nullable:()=>Ur,nullableAsync:()=>Mr,nullish:()=>Lr,nullishAsync:()=>Br,number:()=>Dr,object:()=>Fr,objectAsync:()=>jr,objectWithRest:()=>Gr,objectWithRestAsync:()=>Wr,octal:()=>ft,omit:()=>bn,optional:()=>Hr,optionalAsync:()=>Kr,parse:()=>vn,parseAsync:()=>wn,parser:()=>En,parserAsync:()=>An,partial:()=>Sn,partialAsync:()=>_n,partialCheck:()=>pt,partialCheckAsync:()=>gt,pick:()=>In,picklist:()=>zr,pipe:()=>Nn,pipeAsync:()=>kn,promise:()=>Vr,rawCheck:()=>mt,rawCheckAsync:()=>yt,rawTransform:()=>bt,rawTransformAsync:()=>vt,readonly:()=>wt,record:()=>qr,recordAsync:()=>Jr,reduceItems:()=>Et,regex:()=>At,required:()=>Pn,requiredAsync:()=>Tn,safeInteger:()=>St,safeParse:()=>Rn,safeParseAsync:()=>On,safeParser:()=>Cn,safeParserAsync:()=>xn,set:()=>Xr,setAsync:()=>Yr,setGlobalConfig:()=>L,setGlobalMessage:()=>F,setSchemaMessage:()=>W,setSpecificMessage:()=>z,size:()=>_t,someItem:()=>It,sortItems:()=>Nt,startsWith:()=>kt,strictObject:()=>Qr,strictObjectAsync:()=>$r,strictTuple:()=>Zr,strictTupleAsync:()=>en,string:()=>tn,symbol:()=>rn,toLowerCase:()=>Pt,toMaxValue:()=>Tt,toMinValue:()=>Rt,toUpperCase:()=>Ot,transform:()=>Ct,transformAsync:()=>xt,trim:()=>Ut,trimEnd:()=>Mt,trimStart:()=>Lt,tuple:()=>nn,tupleAsync:()=>on,tupleWithRest:()=>sn,tupleWithRestAsync:()=>an,ulid:()=>Bt,undefined:()=>un,undefined_:()=>un,union:()=>ln,unionAsync:()=>hn,unknown:()=>fn,unwrap:()=>Un,url:()=>Dt,uuid:()=>Ft,value:()=>jt,variant:()=>pn,variantAsync:()=>gn,void:()=>mn,void_:()=>mn}),e.exports=(t=s,((e,t,s,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of i(t))o.call(e,s)||undefined===s||r(e,s,{get:()=>t[s],enumerable:!(a=n(t,s))||a.enumerable});return e})(r({},"__esModule",{value:!0}),t));var u,c,l,h,f=/^(?:[\da-z+/]{4})*(?:[\da-z+/]{2}==|[\da-z+/]{3}=)?$/iu,d=/^[A-Z]{6}(?!00)[\dA-Z]{2}(?:[\dA-Z]{3})?$/u,p=/^[a-z][\da-z]*$/u,g=/^\d+$/u,m=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,y=/^(?:[\u{1F1E6}-\u{1F1FF}]{2}|\u{1F3F4}[\u{E0061}-\u{E007A}]{2}[\u{E0030}-\u{E0039}\u{E0061}-\u{E007A}]{1,3}\u{E007F}|(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation})(?:\u200D(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation}))*)+$/u,b=/^(?:0[hx])?[\da-f]+$/iu,v=/^#(?:[\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/iu,w=/^\d{15}$|^\d{2}-\d{6}-\d{6}-\d$/u,E=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$/u,A=/^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,S=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$|^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,_=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u,I=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])T(?:0\d|1\d|2[0-3]):[0-5]\d$/u,N=/^(?:0\d|1\d|2[0-3]):[0-5]\d$/u,k=/^(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}$/u,P=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])T(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u,T=/^\d{4}-W(?:0[1-9]|[1-4]\d|5[0-3])$/u,R=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$/iu,O=/^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,C=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$|^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,x=/^(?:0o)?[0-7]+$/iu,U=/^[\da-hjkmnp-tv-z]{26}$/iu,M=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function L(e){u={...u,...e}}function B(e){return{lang:e?.lang??u?.lang,message:e?.message,abortEarly:e?.abortEarly??u?.abortEarly,abortPipeEarly:e?.abortPipeEarly??u?.abortPipeEarly}}function D(){u=void 0}function F(e,t){c||(c=new Map),c.set(t,e)}function j(e){return c?.get(e)}function G(e){c?.delete(e)}function W(e,t){l||(l=new Map),l.set(t,e)}function H(e){return l?.get(e)}function K(e){l?.delete(e)}function z(e,t,r){h||(h=new Map),h.get(e)||h.set(e,new Map),h.get(e).set(r,t)}function V(e,t){return h?.get(e)?.get(t)}function q(e,t){h?.get(e)?.delete(t)}function J(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function X(e,t,r,n,i){const o=i&&"input"in i?i.input:r.value,s=i?.expected??e.expects??null,a=i?.received??J(o),u={kind:e.kind,type:e.type,input:o,expected:s,received:a,message:`Invalid ${t}: ${s?`Expected ${s} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},c="schema"===e.kind,l=i?.message??e.message??V(e.reference,u.lang)??(c?H(u.lang):null)??n.message??j(u.lang);l&&(u.message="function"==typeof l?l(u):l),c&&(r.typed=!1),r.issues?r.issues.push(u):r.issues=[u]}var Y=/\D/gu;function Q(e){const t=e.replace(Y,"");let r=t.length,n=1,i=0;for(;r;){const e=+t[--r];n^=1,i+=n?[0,2,4,6,8,1,3,5,7,9][e]:e}return i%10==0}function $(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function Z(e,t){const r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:r[0]??"never"}function ee(e,t){const r={};for(const n of e)r[n]=t;return r}function te(e){if(e.path){let t="";for(const r of e.path){if("string"!=typeof r.key&&"number"!=typeof r.key)return null;t+=t?`.${r.key}`:r.key}return t}return null}function re(e,t){return t.kind===e}function ne(e,t){return t.type===e}function ie(e){return e instanceof oe}var oe=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function se(e){return{kind:"validation",type:"base64",reference:se,async:!1,expects:null,requirement:f,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"Base64",e,t),e}}}function ae(e){return{kind:"validation",type:"bic",reference:ae,async:!1,expects:null,requirement:d,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"BIC",e,t),e}}}function ue(e){return{kind:"transformation",type:"brand",reference:ue,async:!1,name:e,_run:e=>e}}function ce(e,t){return{kind:"validation",type:"bytes",reference:ce,async:!1,expects:`${e}`,requirement:e,message:t,_run(e,t){if(e.typed){const r=(new TextEncoder).encode(e.value).length;r!==this.requirement&&X(this,"bytes",e,t,{received:`${r}`})}return e}}}function le(e,t){return{kind:"validation",type:"check",reference:le,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"input",e,t),e}}}function he(e,t){return{kind:"validation",type:"check",reference:he,async:!0,expects:null,requirement:e,message:t,async _run(e,t){return e.typed&&!await this.requirement(e.value)&&X(this,"input",e,t),e}}}function fe(e,t){return{kind:"validation",type:"check_items",reference:fe,async:!1,expects:null,requirement:e,message:t,_run(e,t){if(e.typed)for(let r=0;r<e.value.length;r++){const n=e.value[r];this.requirement(n,r,e.value)||X(this,"item",e,t,{input:n,path:[{type:"array",origin:"value",input:e.value,key:r,value:n}]})}return e}}}var de=/^(?:\d{14,19}|\d{4}(?: \d{3,6}){2,4}|\d{4}(?:-\d{3,6}){2,4})$/u,pe=/[- ]/gu,ge=[/^3[47]\d{13}$/u,/^3(?:0[0-5]|[68]\d)\d{11,13}$/u,/^6(?:011|5\d{2})\d{12,15}$/u,/^(?:2131|1800|35\d{3})\d{11}$/u,/^5[1-5]\d{2}|(?:222\d|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}$/u,/^(?:6[27]\d{14,17}|81\d{14,17})$/u,/^4\d{12}(?:\d{3,6})?$/u];function me(e){return{kind:"validation",type:"credit_card",reference:me,async:!1,expects:null,requirement(e){let t;return de.test(e)&&(t=e.replace(pe,""))&&ge.some(e=>e.test(t))&&Q(t)},message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"credit card",e,t),e}}}function ye(e){return{kind:"validation",type:"cuid2",reference:ye,async:!1,expects:null,requirement:p,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"Cuid2",e,t),e}}}function be(e){return{kind:"validation",type:"decimal",reference:be,async:!1,expects:null,requirement:g,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"decimal",e,t),e}}}function ve(e){return{kind:"metadata",type:"description",reference:ve,description:e}}function we(e){return{kind:"validation",type:"email",reference:we,expects:null,async:!1,requirement:m,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"email",e,t),e}}}function Ee(e){return{kind:"validation",type:"emoji",reference:Ee,async:!1,expects:null,requirement:y,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"emoji",e,t),e}}}function Ae(e){return{kind:"validation",type:"empty",reference:Ae,async:!1,expects:"0",message:e,_run(e,t){return e.typed&&e.value.length>0&&X(this,"length",e,t,{received:`${e.value.length}`}),e}}}function Se(e,t){return{kind:"validation",type:"ends_with",reference:Se,async:!1,expects:`"${e}"`,requirement:e,message:t,_run(e,t){return e.typed&&!e.value.endsWith(this.requirement)&&X(this,"end",e,t,{received:`"${e.value.slice(-this.requirement.length)}"`}),e}}}function _e(e,t){return{kind:"validation",type:"every_item",reference:_e,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!e.value.every(this.requirement)&&X(this,"item",e,t),e}}}function Ie(e,t){const r=J(e);return{kind:"validation",type:"excludes",reference:Ie,async:!1,expects:`!${r}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.includes(this.requirement)&&X(this,"content",e,t,{received:r}),e}}}function Ne(e){return{kind:"transformation",type:"filter_items",reference:Ne,async:!1,operation:e,_run(e){return e.value=e.value.filter(this.operation),e}}}function ke(e){return{kind:"transformation",type:"find_item",reference:ke,async:!1,operation:e,_run(e){return e.value=e.value.find(this.operation),e}}}function Pe(e){return{kind:"validation",type:"finite",reference:Pe,async:!1,expects:null,requirement:Number.isFinite,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"finite",e,t),e}}}var Te={md4:32,md5:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8,adler32:8};function Re(e,t){return{kind:"validation",type:"hash",reference:Re,expects:null,async:!1,requirement:RegExp(e.map(e=>`^[a-f0-9]{${Te[e]}}$`).join("|"),"iu"),message:t,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"hash",e,t),e}}}function Oe(e){return{kind:"validation",type:"hexadecimal",reference:Oe,async:!1,expects:null,requirement:b,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"hexadecimal",e,t),e}}}function Ce(e){return{kind:"validation",type:"hex_color",reference:Ce,async:!1,expects:null,requirement:v,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"hex color",e,t),e}}}function xe(e){return{kind:"validation",type:"imei",reference:xe,async:!1,expects:null,requirement:e=>w.test(e)&&Q(e),message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"IMEI",e,t),e}}}function Ue(e,t){const r=J(e);return{kind:"validation",type:"includes",reference:Ue,async:!1,expects:r,requirement:e,message:t,_run(e,t){return e.typed&&!e.value.includes(this.requirement)&&X(this,"content",e,t,{received:`!${r}`}),e}}}function Me(e){return{kind:"validation",type:"integer",reference:Me,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"integer",e,t),e}}}function Le(e){return{kind:"validation",type:"ip",reference:Le,async:!1,expects:null,requirement:S,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"IP",e,t),e}}}function Be(e){return{kind:"validation",type:"ipv4",reference:Be,async:!1,expects:null,requirement:E,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"IPv4",e,t),e}}}function De(e){return{kind:"validation",type:"ipv6",reference:De,async:!1,expects:null,requirement:A,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"IPv6",e,t),e}}}function Fe(e){return{kind:"validation",type:"iso_date",reference:Fe,async:!1,expects:null,requirement:_,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"date",e,t),e}}}function je(e){return{kind:"validation",type:"iso_date_time",reference:je,async:!1,expects:null,requirement:I,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"date-time",e,t),e}}}function Ge(e){return{kind:"validation",type:"iso_time",reference:Ge,async:!1,expects:null,requirement:N,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"time",e,t),e}}}function We(e){return{kind:"validation",type:"iso_time_second",reference:We,async:!1,expects:null,requirement:k,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"time-second",e,t),e}}}function He(e){return{kind:"validation",type:"iso_timestamp",reference:He,async:!1,expects:null,requirement:P,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"timestamp",e,t),e}}}function Ke(e){return{kind:"validation",type:"iso_week",reference:Ke,async:!1,expects:null,requirement:T,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"week",e,t),e}}}function ze(e,t){return{kind:"validation",type:"length",reference:ze,async:!1,expects:`${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.length!==this.requirement&&X(this,"length",e,t,{received:`${e.value.length}`}),e}}}function Ve(e){return{kind:"validation",type:"mac",reference:Ve,async:!1,expects:null,requirement:C,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"MAC",e,t),e}}}function qe(e){return{kind:"validation",type:"mac48",reference:qe,async:!1,expects:null,requirement:R,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"48-bit MAC",e,t),e}}}function Je(e){return{kind:"validation",type:"mac64",reference:Je,async:!1,expects:null,requirement:O,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"64-bit MAC",e,t),e}}}function Xe(e){return{kind:"transformation",type:"map_items",reference:Xe,async:!1,operation:e,_run(e){return e.value=e.value.map(this.operation),e}}}function Ye(e,t){return{kind:"validation",type:"max_bytes",reference:Ye,async:!1,expects:`<=${e}`,requirement:e,message:t,_run(e,t){if(e.typed){const r=(new TextEncoder).encode(e.value).length;r>this.requirement&&X(this,"bytes",e,t,{received:`${r}`})}return e}}}function Qe(e,t){return{kind:"validation",type:"max_length",reference:Qe,async:!1,expects:`<=${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.length>this.requirement&&X(this,"length",e,t,{received:`${e.value.length}`}),e}}}function $e(e,t){return{kind:"validation",type:"max_size",reference:$e,async:!1,expects:`<=${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.size>this.requirement&&X(this,"size",e,t,{received:`${e.value.size}`}),e}}}function Ze(e,t){return{kind:"validation",type:"max_value",reference:Ze,async:!1,expects:`<=${e instanceof Date?e.toJSON():J(e)}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value>this.requirement&&X(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():J(e.value)}),e}}}function et(e,t){return{kind:"validation",type:"mime_type",reference:et,async:!1,expects:Z(e.map(e=>`"${e}"`),"|"),requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement.includes(e.value.type)&&X(this,"MIME type",e,t,{received:`"${e.value.type}"`}),e}}}function tt(e,t){return{kind:"validation",type:"min_bytes",reference:tt,async:!1,expects:`>=${e}`,requirement:e,message:t,_run(e,t){if(e.typed){const r=(new TextEncoder).encode(e.value).length;r<this.requirement&&X(this,"bytes",e,t,{received:`${r}`})}return e}}}function rt(e,t){return{kind:"validation",type:"min_length",reference:rt,async:!1,expects:`>=${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.length<this.requirement&&X(this,"length",e,t,{received:`${e.value.length}`}),e}}}function nt(e,t){return{kind:"validation",type:"min_size",reference:nt,async:!1,expects:`>=${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.size<this.requirement&&X(this,"size",e,t,{received:`${e.value.size}`}),e}}}function it(e,t){return{kind:"validation",type:"min_value",reference:it,async:!1,expects:`>=${e instanceof Date?e.toJSON():J(e)}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value<this.requirement&&X(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():J(e.value)}),e}}}function ot(e,t){return{kind:"validation",type:"multiple_of",reference:ot,async:!1,expects:`%${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value%this.requirement!==0&&X(this,"multiple",e,t),e}}}function st(e){return{kind:"validation",type:"non_empty",reference:st,async:!1,expects:"!0",message:e,_run(e,t){return e.typed&&0===e.value.length&&X(this,"length",e,t,{received:"0"}),e}}}function at(e){return{kind:"transformation",type:"normalize",reference:at,async:!1,form:e,_run(e){return e.value=e.value.normalize(this.form),e}}}function ut(e,t){return{kind:"validation",type:"not_bytes",reference:ut,async:!1,expects:`!${e}`,requirement:e,message:t,_run(e,t){if(e.typed){const r=(new TextEncoder).encode(e.value).length;r===this.requirement&&X(this,"bytes",e,t,{received:`${r}`})}return e}}}function ct(e,t){return{kind:"validation",type:"not_length",reference:ct,async:!1,expects:`!${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.length===this.requirement&&X(this,"length",e,t,{received:`${e.value.length}`}),e}}}function lt(e,t){return{kind:"validation",type:"not_size",reference:lt,async:!1,expects:`!${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.size===this.requirement&&X(this,"size",e,t,{received:`${e.value.size}`}),e}}}function ht(e,t){return{kind:"validation",type:"not_value",reference:ht,async:!1,expects:e instanceof Date?`!${e.toJSON()}`:`!${J(e)}`,requirement:e,message:t,_run(e,t){return e.typed&&this.requirement<=e.value&&this.requirement>=e.value&&X(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():J(e.value)}),e}}}function ft(e){return{kind:"validation",type:"octal",reference:ft,async:!1,expects:null,requirement:x,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"octal",e,t),e}}}function dt(e,t){if(e.issues)for(const r of t)for(const t of e.issues){let e=!1;const n=Math.min(r.length,t.path?.length??0);for(let i=0;i<n;i++)if(r[i]!==t.path[i].key){e=!0;break}if(!e)return!1}return!0}function pt(e,t,r){return{kind:"validation",type:"partial_check",reference:pt,async:!1,expects:null,requirement:t,message:r,_run(t,r){return dt(t,e)&&!this.requirement(t.value)&&X(this,"input",t,r),t}}}function gt(e,t,r){return{kind:"validation",type:"partial_check",reference:gt,async:!0,expects:null,requirement:t,message:r,async _run(t,r){return dt(t,e)&&!await this.requirement(t.value)&&X(this,"input",t,r),t}}}function mt(e){return{kind:"validation",type:"raw_check",reference:mt,async:!1,expects:null,_run(t,r){return e({dataset:t,config:r,addIssue:e=>X(this,e?.label??"input",t,r,e)}),t}}}function yt(e){return{kind:"validation",type:"raw_check",reference:yt,async:!0,expects:null,async _run(t,r){return await e({dataset:t,config:r,addIssue:e=>X(this,e?.label??"input",t,r,e)}),t}}}function bt(e){return{kind:"transformation",type:"raw_transform",reference:bt,async:!1,_run(t,r){const n=e({dataset:t,config:r,addIssue:e=>X(this,e?.label??"input",t,r,e),NEVER:null});return t.issues?t.typed=!1:t.value=n,t}}}function vt(e){return{kind:"transformation",type:"raw_transform",reference:vt,async:!0,async _run(t,r){const n=await e({dataset:t,config:r,addIssue:e=>X(this,e?.label??"input",t,r,e),NEVER:null});return t.issues?t.typed=!1:t.value=n,t}}}function wt(){return{kind:"transformation",type:"readonly",reference:wt,async:!1,_run:e=>e}}function Et(e,t){return{kind:"transformation",type:"reduce_items",reference:Et,async:!1,operation:e,initial:t,_run(e){return e.value=e.value.reduce(this.operation,this.initial),e}}}function At(e,t){return{kind:"validation",type:"regex",reference:At,async:!1,expects:`${e}`,requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"format",e,t),e}}}function St(e){return{kind:"validation",type:"safe_integer",reference:St,async:!1,expects:null,requirement:Number.isSafeInteger,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"safe integer",e,t),e}}}function _t(e,t){return{kind:"validation",type:"size",reference:_t,async:!1,expects:`${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.size!==this.requirement&&X(this,"size",e,t,{received:`${e.value.size}`}),e}}}function It(e,t){return{kind:"validation",type:"some_item",reference:It,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!e.value.some(this.requirement)&&X(this,"item",e,t),e}}}function Nt(e){return{kind:"transformation",type:"sort_items",reference:Nt,async:!1,operation:e,_run(e){return e.value=e.value.sort(this.operation),e}}}function kt(e,t){return{kind:"validation",type:"starts_with",reference:kt,async:!1,expects:`"${e}"`,requirement:e,message:t,_run(e,t){return e.typed&&!e.value.startsWith(this.requirement)&&X(this,"start",e,t,{received:`"${e.value.slice(0,this.requirement.length)}"`}),e}}}function Pt(){return{kind:"transformation",type:"to_lower_case",reference:Pt,async:!1,_run:e=>(e.value=e.value.toLowerCase(),e)}}function Tt(e){return{kind:"transformation",type:"to_max_value",reference:Tt,async:!1,requirement:e,_run(e){return e.value=e.value>this.requirement?this.requirement:e.value,e}}}function Rt(e){return{kind:"transformation",type:"to_min_value",reference:Rt,async:!1,requirement:e,_run(e){return e.value=e.value<this.requirement?this.requirement:e.value,e}}}function Ot(){return{kind:"transformation",type:"to_upper_case",reference:Ot,async:!1,_run:e=>(e.value=e.value.toUpperCase(),e)}}function Ct(e){return{kind:"transformation",type:"transform",reference:Ct,async:!1,operation:e,_run(e){return e.value=this.operation(e.value),e}}}function xt(e){return{kind:"transformation",type:"transform",reference:xt,async:!0,operation:e,async _run(e){return e.value=await this.operation(e.value),e}}}function Ut(){return{kind:"transformation",type:"trim",reference:Ut,async:!1,_run:e=>(e.value=e.value.trim(),e)}}function Mt(){return{kind:"transformation",type:"trim_end",reference:Mt,async:!1,_run:e=>(e.value=e.value.trimEnd(),e)}}function Lt(){return{kind:"transformation",type:"trim_start",reference:Lt,async:!1,_run:e=>(e.value=e.value.trimStart(),e)}}function Bt(e){return{kind:"validation",type:"ulid",reference:Bt,async:!1,expects:null,requirement:U,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"ULID",e,t),e}}}function Dt(e){return{kind:"validation",type:"url",reference:Dt,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch{return!1}},message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&X(this,"URL",e,t),e}}}function Ft(e){return{kind:"validation",type:"uuid",reference:Ft,async:!1,expects:null,requirement:M,message:e,_run(e,t){return e.typed&&!this.requirement.test(e.value)&&X(this,"UUID",e,t),e}}}function jt(e,t){return{kind:"validation",type:"value",reference:jt,async:!1,expects:e instanceof Date?e.toJSON():J(e),requirement:e,message:t,_run(e,t){return!e.typed||this.requirement<=e.value&&this.requirement>=e.value||X(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():J(e.value)}),e}}}function Gt(e,t){return{...e,_run:(r,n)=>e._run(r,{...n,...t})}}function Wt(e,t,r){return"function"==typeof e.fallback?e.fallback(t,r):e.fallback}function Ht(e,t){return{...e,fallback:t,_run(t,r){const n=e._run(t,r);return n.issues?{typed:!0,value:Wt(this,n,r)}:n}}}function Kt(e,t){return{...e,fallback:t,async:!0,async _run(t,r){const n=await e._run(t,r);return n.issues?{typed:!0,value:await Wt(this,n,r)}:n}}}function zt(e){const t={};for(const r of e)if(r.path){const e=te(r);e?(t.nested||(t.nested={}),t.nested[e]?t.nested[e].push(r.message):t.nested[e]=[r.message]):t.other?t.other.push(r.message):t.other=[r.message]}else t.root?t.root.push(r.message):t.root=[r.message];return t}function Vt(e,t){return{...e,_run(r,n){const i=r.issues&&[...r.issues];if(e._run(r,n),r.issues)for(const e of r.issues)if(!i?.includes(e)){let n=r.value;for(const r of t){const t=n[r],i={type:"unknown",origin:"value",input:n,key:r,value:t};if(e.path?e.path.push(i):e.path=[i],!t)break;n=t}}return r}}}function qt(e,t){return{...e,async:!0,async _run(r,n){const i=r.issues&&[...r.issues];if(await e._run(r,n),r.issues)for(const e of r.issues)if(!i?.includes(e)){let n=r.value;for(const r of t){const t=n[r],i={type:"unknown",origin:"value",input:n,key:r,value:t};if(e.path?e.path.push(i):e.path=[i],!t)break;n=t}}return r}}}function Jt(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function Xt(e){if("entries"in e){const t={};for(const r in e.entries)t[r]=Xt(e.entries[r]);return t}return"items"in e?e.items.map(Xt):Jt(e)}async function Yt(e){return"entries"in e?Object.fromEntries(await Promise.all(Object.entries(e.entries).map(async([e,t])=>[e,await Yt(t)]))):"items"in e?Promise.all(e.items.map(Yt)):Jt(e)}function Qt(e){if("entries"in e){const t={};for(const r in e.entries)t[r]=Qt(e.entries[r]);return t}return"items"in e?e.items.map(Qt):Wt(e)}async function $t(e){return"entries"in e?Object.fromEntries(await Promise.all(Object.entries(e.entries).map(async([e,t])=>[e,await $t(t)]))):"items"in e?Promise.all(e.items.map($t)):Wt(e)}function Zt(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function er(){return{kind:"schema",type:"any",reference:er,expects:"any",async:!1,_run:e=>(e.typed=!0,e)}}function tr(e,t){return{kind:"schema",type:"array",reference:tr,expects:"Array",async:!1,item:e,message:t,_run(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<r.length;n++){const i=r[n],o=this.item._run({typed:!1,value:i},t);if(o.issues){const s={type:"array",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else X(this,"type",e,t);return e}}}function rr(e,t){return{kind:"schema",type:"array",reference:rr,expects:"Array",async:!0,item:e,message:t,async _run(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];const n=await Promise.all(r.map(e=>this.item._run({typed:!1,value:e},t)));for(let i=0;i<n.length;i++){const o=n[i];if(o.issues){const n={type:"array",origin:"value",input:r,key:i,value:r[i]};for(const t of o.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else X(this,"type",e,t);return e}}}function nr(e){return{kind:"schema",type:"bigint",reference:nr,expects:"bigint",async:!1,message:e,_run(e,t){return"bigint"==typeof e.value?e.typed=!0:X(this,"type",e,t),e}}}function ir(e){return{kind:"schema",type:"blob",reference:ir,expects:"Blob",async:!1,message:e,_run(e,t){return e.value instanceof Blob?e.typed=!0:X(this,"type",e,t),e}}}function or(e){return{kind:"schema",type:"boolean",reference:or,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:X(this,"type",e,t),e}}}function sr(e,t){return{kind:"schema",type:"custom",reference:sr,expects:"unknown",async:!1,check:e,message:t,_run(e,t){return this.check(e.value)?e.typed=!0:X(this,"type",e,t),e}}}function ar(e,t){return{kind:"schema",type:"custom",reference:ar,expects:"unknown",async:!0,check:e,message:t,async _run(e,t){return await this.check(e.value)?e.typed=!0:X(this,"type",e,t),e}}}function ur(e){return{kind:"schema",type:"date",reference:ur,expects:"Date",async:!1,message:e,_run(e,t){return e.value instanceof Date?isNaN(e.value)?X(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:X(this,"type",e,t),e}}}function cr(e,t){const r=Object.entries(e).filter(([e])=>isNaN(+e)).map(([,e])=>e);return{kind:"schema",type:"enum",reference:cr,expects:Z(r.map(J),"|"),async:!1,enum:e,options:r,message:t,_run(e,t){return this.options.includes(e.value)?e.typed=!0:X(this,"type",e,t),e}}}function lr(e){return{kind:"schema",type:"file",reference:lr,expects:"File",async:!1,message:e,_run(e,t){return e.value instanceof File?e.typed=!0:X(this,"type",e,t),e}}}function hr(e){return{kind:"schema",type:"function",reference:hr,expects:"Function",async:!1,message:e,_run(e,t){return"function"==typeof e.value?e.typed=!0:X(this,"type",e,t),e}}}function fr(e,t){return{kind:"schema",type:"instance",reference:fr,expects:e.name,async:!1,class:e,message:t,_run(e,t){return e.value instanceof this.class?e.typed=!0:X(this,"type",e,t),e}}}function dr(e,t){if(typeof e==typeof t){if(e===t||e instanceof Date&&t instanceof Date&&+e===+t)return{value:e};if(e&&t&&e.constructor===Object&&t.constructor===Object){for(const r in t)if(r in e){const n=dr(e[r],t[r]);if(n.issue)return n;e[r]=n.value}else e[r]=t[r];return{value:e}}if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){for(let r=0;r<e.length;r++){const n=dr(e[r],t[r]);if(n.issue)return n;e[r]=n.value}return{value:e}}}return{issue:!0}}function pr(e,t){return{kind:"schema",type:"intersect",reference:pr,expects:Z(e.map(e=>e.expects),"&"),async:!1,options:e,message:t,_run(e,t){if(this.options.length){const r=e.value;let n;e.typed=!0;for(const i of this.options){const o=i._run({typed:!1,value:r},t);if(o.issues&&(e.issues?e.issues.push(...o.issues):e.issues=o.issues,t.abortEarly)){e.typed=!1;break}o.typed||(e.typed=!1),e.typed&&(n?n.push(o.value):n=[o.value])}if(e.typed){e.value=n[0];for(let r=1;r<n.length;r++){const i=dr(e.value,n[r]);if(i.issue){X(this,"type",e,t,{received:"unknown"});break}e.value=i.value}}}else X(this,"type",e,t);return e}}}function gr(e,t){return{kind:"schema",type:"intersect",reference:gr,expects:Z(e.map(e=>e.expects),"&"),async:!0,options:e,message:t,async _run(e,t){if(this.options.length){const r=e.value;let n;e.typed=!0;const i=await Promise.all(this.options.map(e=>e._run({typed:!1,value:r},t)));for(const r of i){if(r.issues&&(e.issues?e.issues.push(...r.issues):e.issues=r.issues,t.abortEarly)){e.typed=!1;break}r.typed||(e.typed=!1),e.typed&&(n?n.push(r.value):n=[r.value])}if(e.typed){e.value=n[0];for(let r=1;r<n.length;r++){const i=dr(e.value,n[r]);if(i.issue){X(this,"type",e,t,{received:"unknown"});break}e.value=i.value}}}else X(this,"type",e,t);return e}}}function mr(e){return{kind:"schema",type:"lazy",reference:mr,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function yr(e){return{kind:"schema",type:"lazy",reference:yr,expects:"unknown",async:!0,getter:e,async _run(e,t){return(await this.getter(e.value))._run(e,t)}}}function br(e,t){return{kind:"schema",type:"literal",reference:br,expects:J(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:X(this,"type",e,t),e}}}function vr(e,t){return{kind:"schema",type:"loose_object",reference:vr,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in this.entries){const i=r[n],o=this.entries[n]._run({typed:!1,value:i},t);if(o.issues){const s={type:"object",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}if(!e.issues||!t.abortEarly)for(const t in r)$(r,t)&&!(t in this.entries)&&(e.value[t]=r[t])}else X(this,"type",e,t);return e}}}function wr(e,t){return{kind:"schema",type:"loose_object",reference:wr,expects:"Object",async:!0,entries:e,message:t,async _run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};const n=await Promise.all(Object.entries(this.entries).map(async([e,n])=>{const i=r[e];return[e,i,await n._run({typed:!1,value:i},t)]}));for(const[i,o,s]of n){if(s.issues){const n={type:"object",origin:"value",input:r,key:i,value:o};for(const t of s.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),(void 0!==s.value||i in r)&&(e.value[i]=s.value)}if(!e.issues||!t.abortEarly)for(const t in r)$(r,t)&&!(t in this.entries)&&(e.value[t]=r[t])}else X(this,"type",e,t);return e}}}function Er(e,t){return{kind:"schema",type:"loose_tuple",reference:Er,expects:"Array",async:!1,items:e,message:t,_run(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){const i=r[n],o=this.items[n]._run({typed:!1,value:i},t);if(o.issues){const s={type:"array",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}if(!e.issues||!t.abortEarly)for(let t=this.items.length;t<r.length;t++)e.value.push(r[t])}else X(this,"type",e,t);return e}}}function Ar(e,t){return{kind:"schema",type:"loose_tuple",reference:Ar,expects:"Array",async:!0,items:e,message:t,async _run(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];const n=await Promise.all(this.items.map(async(e,n)=>{const i=r[n];return[n,i,await e._run({typed:!1,value:i},t)]}));for(const[i,o,s]of n){if(s.issues){const n={type:"array",origin:"value",input:r,key:i,value:o};for(const t of s.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}if(!e.issues||!t.abortEarly)for(let t=this.items.length;t<r.length;t++)e.value.push(r[t])}else X(this,"type",e,t);return e}}}function Sr(e,t,r){return{kind:"schema",type:"map",reference:Sr,expects:"Map",async:!1,key:e,value:t,message:r,_run(e,t){const r=e.value;if(r instanceof Map){e.typed=!0,e.value=new Map;for(const[n,i]of r){const o=this.key._run({typed:!1,value:n},t);if(o.issues){const s={type:"map",origin:"key",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}const s=this.value._run({typed:!1,value:i},t);if(s.issues){const o={type:"map",origin:"value",input:r,key:n,value:i};for(const t of s.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}o.typed&&s.typed||(e.typed=!1),e.value.set(o.value,s.value)}}else X(this,"type",e,t);return e}}}function _r(e,t,r){return{kind:"schema",type:"map",reference:_r,expects:"Map",async:!0,key:e,value:t,message:r,async _run(e,t){const r=e.value;if(r instanceof Map){e.typed=!0,e.value=new Map;const n=await Promise.all([...r].map(([e,r])=>Promise.all([e,r,this.key._run({typed:!1,value:e},t),this.value._run({typed:!1,value:r},t)])));for(const[i,o,s,a]of n){if(s.issues){const n={type:"map",origin:"key",input:r,key:i,value:o};for(const t of s.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}if(a.issues){const n={type:"map",origin:"value",input:r,key:i,value:o};for(const t of a.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}s.typed&&a.typed||(e.typed=!1),e.value.set(s.value,a.value)}}else X(this,"type",e,t);return e}}}function Ir(e){return{kind:"schema",type:"nan",reference:Ir,expects:"NaN",async:!1,message:e,_run(e,t){return Number.isNaN(e.value)?e.typed=!0:X(this,"type",e,t),e}}}function Nr(e){return{kind:"schema",type:"never",reference:Nr,expects:"never",async:!1,message:e,_run(e,t){return X(this,"type",e,t),e}}}function kr(e,t){return{kind:"schema",type:"non_nullable",reference:kr,expects:"!null",async:!1,wrapped:e,message:t,_run(e,t){return null===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function Pr(e,t){return{kind:"schema",type:"non_nullable",reference:Pr,expects:"!null",async:!0,wrapped:e,message:t,async _run(e,t){return null===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function Tr(e,t){return{kind:"schema",type:"non_nullish",reference:Tr,expects:"(!null & !undefined)",async:!1,wrapped:e,message:t,_run(e,t){return null===e.value||void 0===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function Rr(e,t){return{kind:"schema",type:"non_nullish",reference:Rr,expects:"(!null & !undefined)",async:!0,wrapped:e,message:t,async _run(e,t){return null===e.value||void 0===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function Or(e,t){return{kind:"schema",type:"non_optional",reference:Or,expects:"!undefined",async:!1,wrapped:e,message:t,_run(e,t){return void 0===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function Cr(e,t){return{kind:"schema",type:"non_optional",reference:Cr,expects:"!undefined",async:!0,wrapped:e,message:t,async _run(e,t){return void 0===e.value?(X(this,"type",e,t),e):this.wrapped._run(e,t)}}}function xr(e){return{kind:"schema",type:"null",reference:xr,expects:"null",async:!1,message:e,_run(e,t){return null===e.value?e.typed=!0:X(this,"type",e,t),e}}}function Ur(e,...t){const r={kind:"schema",type:"nullable",reference:Ur,expects:`(${e.expects} | null)`,async:!1,wrapped:e,_run(e,t){return null===e.value&&("default"in this&&(e.value=Jt(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function Mr(e,...t){const r={kind:"schema",type:"nullable",reference:Mr,expects:`(${e.expects} | null)`,async:!0,wrapped:e,async _run(e,t){return null===e.value&&("default"in this&&(e.value=await Jt(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function Lr(e,...t){const r={kind:"schema",type:"nullish",reference:Lr,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,_run(e,t){return null!==e.value&&void 0!==e.value||("default"in this&&(e.value=Jt(this,e,t)),null!==e.value&&void 0!==e.value)?this.wrapped._run(e,t):(e.typed=!0,e)}};return 0 in t&&(r.default=t[0]),r}function Br(e,...t){const r={kind:"schema",type:"nullish",reference:Br,expects:`(${e.expects} | null | undefined)`,async:!0,wrapped:e,async _run(e,t){return null!==e.value&&void 0!==e.value||("default"in this&&(e.value=await Jt(this,e,t)),null!==e.value&&void 0!==e.value)?this.wrapped._run(e,t):(e.typed=!0,e)}};return 0 in t&&(r.default=t[0]),r}function Dr(e){return{kind:"schema",type:"number",reference:Dr,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?X(this,"type",e,t):e.typed=!0,e}}}function Fr(e,t){return{kind:"schema",type:"object",reference:Fr,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in this.entries){const i=r[n],o=this.entries[n]._run({typed:!1,value:i},t);if(o.issues){const s={type:"object",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}}else X(this,"type",e,t);return e}}}function jr(e,t){return{kind:"schema",type:"object",reference:jr,expects:"Object",async:!0,entries:e,message:t,async _run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};const n=await Promise.all(Object.entries(this.entries).map(async([e,n])=>{const i=r[e];return[e,i,await n._run({typed:!1,value:i},t)]}));for(const[i,o,s]of n){if(s.issues){const n={type:"object",origin:"value",input:r,key:i,value:o};for(const t of s.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),(void 0!==s.value||i in r)&&(e.value[i]=s.value)}}else X(this,"type",e,t);return e}}}function Gr(e,t,r){return{kind:"schema",type:"object_with_rest",reference:Gr,expects:"Object",async:!1,entries:e,rest:t,message:r,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in this.entries){const i=r[n],o=this.entries[n]._run({typed:!1,value:i},t);if(o.issues){const s={type:"object",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}if(!e.issues||!t.abortEarly)for(const n in r)if($(r,n)&&!(n in this.entries)){const i=r[n],o=this.rest._run({typed:!1,value:i},t);if(o.issues){const s={type:"object",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[n]=o.value}}else X(this,"type",e,t);return e}}}function Wr(e,t,r){return{kind:"schema",type:"object_with_rest",reference:Wr,expects:"Object",async:!0,entries:e,rest:t,message:r,async _run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};const[n,i]=await Promise.all([Promise.all(Object.entries(this.entries).map(async([e,n])=>{const i=r[e];return[e,i,await n._run({typed:!1,value:i},t)]})),Promise.all(Object.entries(r).filter(([e])=>$(r,e)&&!(e in this.entries)).map(async([e,r])=>[e,r,await this.rest._run({typed:!1,value:r},t)]))]);for(const[i,o,s]of n){if(s.issues){const n={type:"object",origin:"value",input:r,key:i,value:o};for(const t of s.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),(void 0!==s.value||i in r)&&(e.value[i]=s.value)}if(!e.issues||!t.abortEarly)for(const[n,o,s]of i){if(s.issues){const i={type:"object",origin:"value",input:r,key:n,value:o};for(const t of s.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value[n]=s.value}}else X(this,"type",e,t);return e}}}function Hr(e,...t){const r={kind:"schema",type:"optional",reference:Hr,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=Jt(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function Kr(e,...t){const r={kind:"schema",type:"optional",reference:Kr,expects:`(${e.expects} | undefined)`,async:!0,wrapped:e,async _run(e,t){return void 0===e.value&&("default"in this&&(e.value=await Jt(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function zr(e,t){return{kind:"schema",type:"picklist",reference:zr,expects:Z(e.map(J),"|"),async:!1,options:e,message:t,_run(e,t){return this.options.includes(e.value)?e.typed=!0:X(this,"type",e,t),e}}}function Vr(e){return{kind:"schema",type:"promise",reference:Vr,expects:"Promise",async:!1,message:e,_run(e,t){return e.value instanceof Promise?e.typed=!0:X(this,"type",e,t),e}}}function qr(e,t,r){return{kind:"schema",type:"record",reference:qr,expects:"Object",async:!1,key:e,value:t,message:r,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in r)if($(r,n)){const i=r[n],o=this.key._run({typed:!1,value:n},t);if(o.issues){const s={type:"object",origin:"key",input:r,key:n,value:i};for(const t of o.issues)t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}const s=this.value._run({typed:!1,value:i},t);if(s.issues){const o={type:"object",origin:"value",input:r,key:n,value:i};for(const t of s.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}o.typed&&s.typed||(e.typed=!1),o.typed&&(e.value[o.value]=s.value)}}else X(this,"type",e,t);return e}}}function Jr(e,t,r){return{kind:"schema",type:"record",reference:Jr,expects:"Object",async:!0,key:e,value:t,message:r,async _run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};const n=await Promise.all(Object.entries(r).filter(([e])=>$(r,e)).map(([e,r])=>Promise.all([e,r,this.key._run({typed:!1,value:e},t),this.value._run({typed:!1,value:r},t)])));for(const[i,o,s,a]of n){if(s.issues){const n={type:"object",origin:"key",input:r,key:i,value:o};for(const t of s.issues)t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}if(a.issues){const n={type:"object",origin:"value",input:r,key:i,value:o};for(const t of a.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}s.typed&&a.typed||(e.typed=!1),s.typed&&(e.value[s.value]=a.value)}}else X(this,"type",e,t);return e}}}function Xr(e,t){return{kind:"schema",type:"set",reference:Xr,expects:"Set",async:!1,value:e,message:t,_run(e,t){const r=e.value;if(r instanceof Set){e.typed=!0,e.value=new Set;for(const n of r){const i=this.value._run({typed:!1,value:n},t);if(i.issues){const o={type:"set",origin:"value",input:r,key:null,value:n};for(const t of i.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),e.value.add(i.value)}}else X(this,"type",e,t);return e}}}function Yr(e,t){return{kind:"schema",type:"set",reference:Yr,expects:"Set",async:!0,value:e,message:t,async _run(e,t){const r=e.value;if(r instanceof Set){e.typed=!0,e.value=new Set;const n=await Promise.all([...r].map(async e=>[e,await this.value._run({typed:!1,value:e},t)]));for(const[i,o]of n){if(o.issues){const n={type:"set",origin:"value",input:r,key:null,value:i};for(const t of o.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.add(o.value)}}else X(this,"type",e,t);return e}}}function Qr(e,t){return{kind:"schema",type:"strict_object",reference:Qr,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in this.entries){const i=r[n],o=this.entries[n]._run({typed:!1,value:i},t);if(o.issues){const s={type:"object",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}if(!e.issues||!t.abortEarly)for(const n in r)if(!(n in this.entries)){const i=r[n];X(this,"type",e,t,{input:i,expected:"never",path:[{type:"object",origin:"value",input:r,key:n,value:i}]});break}}else X(this,"type",e,t);return e}}}function $r(e,t){return{kind:"schema",type:"strict_object",reference:$r,expects:"Object",async:!0,entries:e,message:t,async _run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};const n=await Promise.all(Object.entries(this.entries).map(async([e,n])=>{const i=r[e];return[e,i,await n._run({typed:!1,value:i},t)]}));for(const[i,o,s]of n){if(s.issues){const n={type:"object",origin:"value",input:r,key:i,value:o};for(const t of s.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),(void 0!==s.value||i in r)&&(e.value[i]=s.value)}if(!e.issues||!t.abortEarly)for(const n in r)if(!(n in this.entries)){const i=r[n];X(this,"type",e,t,{input:i,expected:"never",path:[{type:"object",origin:"value",input:r,key:n,value:i}]});break}}else X(this,"type",e,t);return e}}}function Zr(e,t){return{kind:"schema",type:"strict_tuple",reference:Zr,expects:"Array",async:!1,items:e,message:t,_run(t,r){const n=t.value;if(Array.isArray(n)){t.typed=!0,t.value=[];for(let e=0;e<this.items.length;e++){const i=n[e],o=this.items[e]._run({typed:!1,value:i},r);if(o.issues){const s={type:"array",origin:"value",input:n,key:e,value:i};for(const e of o.issues)e.path?e.path.unshift(s):e.path=[s],t.issues?.push(e);if(t.issues||(t.issues=o.issues),r.abortEarly){t.typed=!1;break}}o.typed||(t.typed=!1),t.value.push(o.value)}if((!t.issues||!r.abortEarly)&&this.items.length<n.length){const i=n[e.length];X(this,"type",t,r,{input:i,expected:"never",path:[{type:"array",origin:"value",input:n,key:this.items.length,value:i}]})}}else X(this,"type",t,r);return t}}}function en(e,t){return{kind:"schema",type:"strict_tuple",reference:en,expects:"Array",async:!0,items:e,message:t,async _run(t,r){const n=t.value;if(Array.isArray(n)){t.typed=!0,t.value=[];const i=await Promise.all(this.items.map(async(e,t)=>{const i=n[t];return[t,i,await e._run({typed:!1,value:i},r)]}));for(const[e,o,s]of i){if(s.issues){const i={type:"array",origin:"value",input:n,key:e,value:o};for(const e of s.issues)e.path?e.path.unshift(i):e.path=[i],t.issues?.push(e);if(t.issues||(t.issues=s.issues),r.abortEarly){t.typed=!1;break}}s.typed||(t.typed=!1),t.value.push(s.value)}if((!t.issues||!r.abortEarly)&&this.items.length<n.length){const i=n[e.length];X(this,"type",t,r,{input:i,expected:"never",path:[{type:"array",origin:"value",input:n,key:this.items.length,value:i}]})}}else X(this,"type",t,r);return t}}}function tn(e){return{kind:"schema",type:"string",reference:tn,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:X(this,"type",e,t),e}}}function rn(e){return{kind:"schema",type:"symbol",reference:rn,expects:"symbol",async:!1,message:e,_run(e,t){return"symbol"==typeof e.value?e.typed=!0:X(this,"type",e,t),e}}}function nn(e,t){return{kind:"schema",type:"tuple",reference:nn,expects:"Array",async:!1,items:e,message:t,_run(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){const i=r[n],o=this.items[n]._run({typed:!1,value:i},t);if(o.issues){const s={type:"array",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else X(this,"type",e,t);return e}}}function on(e,t){return{kind:"schema",type:"tuple",reference:on,expects:"Array",async:!0,items:e,message:t,async _run(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];const n=await Promise.all(this.items.map(async(e,n)=>{const i=r[n];return[n,i,await e._run({typed:!1,value:i},t)]}));for(const[i,o,s]of n){if(s.issues){const n={type:"array",origin:"value",input:r,key:i,value:o};for(const t of s.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}}else X(this,"type",e,t);return e}}}function sn(e,t,r){return{kind:"schema",type:"tuple_with_rest",reference:sn,expects:"Array",async:!1,items:e,rest:t,message:r,_run(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){const i=r[n],o=this.items[n]._run({typed:!1,value:i},t);if(o.issues){const s={type:"array",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}if(!e.issues||!t.abortEarly)for(let n=this.items.length;n<r.length;n++){const i=r[n],o=this.rest._run({typed:!1,value:i},t);if(o.issues){const s={type:"array",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else X(this,"type",e,t);return e}}}function an(e,t,r){return{kind:"schema",type:"tuple_with_rest",reference:an,expects:"Array",async:!0,items:e,rest:t,message:r,async _run(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];const[n,i]=await Promise.all([Promise.all(this.items.map(async(e,n)=>{const i=r[n];return[n,i,await e._run({typed:!1,value:i},t)]})),Promise.all(r.slice(this.items.length).map(async(e,r)=>[r+this.items.length,e,await this.rest._run({typed:!1,value:e},t)]))]);for(const[i,o,s]of n){if(s.issues){const n={type:"array",origin:"value",input:r,key:i,value:o};for(const t of s.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}if(!e.issues||!t.abortEarly)for(const[n,o,s]of i){if(s.issues){const i={type:"array",origin:"value",input:r,key:n,value:o};for(const t of s.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}}else X(this,"type",e,t);return e}}}function un(e){return{kind:"schema",type:"undefined",reference:un,expects:"undefined",async:!1,message:e,_run(e,t){return void 0===e.value?e.typed=!0:X(this,"type",e,t),e}}}function cn(e){let t;if(e)for(const r of e)t?t.push(...r.issues):t=r.issues;return t}function ln(e,t){return{kind:"schema",type:"union",reference:ln,expects:Z(e.map(e=>e.expects),"|"),async:!1,options:e,message:t,_run(e,t){let r,n,i;for(const o of this.options){const s=o._run({typed:!1,value:e.value},t);if(s.typed){if(!s.issues){r=s;break}n?n.push(s):n=[s]}else i?i.push(s):i=[s]}if(r)return r;if(n){if(1===n.length)return n[0];X(this,"type",e,t,{issues:cn(n)}),e.typed=!0}else{if(1===i?.length)return i[0];X(this,"type",e,t,{issues:cn(i)})}return e}}}function hn(e,t){return{kind:"schema",type:"union",reference:hn,expects:Z(e.map(e=>e.expects),"|"),async:!0,options:e,message:t,async _run(e,t){let r,n,i;for(const o of this.options){const s=await o._run({typed:!1,value:e.value},t);if(s.typed){if(!s.issues){r=s;break}n?n.push(s):n=[s]}else i?i.push(s):i=[s]}if(r)return r;if(n){if(1===n.length)return n[0];X(this,"type",e,t,{issues:cn(n)}),e.typed=!0}else{if(1===i?.length)return i[0];X(this,"type",e,t,{issues:cn(i)})}return e}}}function fn(){return{kind:"schema",type:"unknown",reference:fn,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}function dn(e,t,r=[]){for(const n of t)"variant"===n.type?dn(e,n.options,r):r.push(n.entries[e].expects);return r}function pn(e,t,r){let n;return{kind:"schema",type:"variant",reference:pn,expects:"Object",async:!1,key:e,options:t,message:r,_run(e,t){const r=e.value;if(r&&"object"==typeof r){const i=r[this.key];if(this.key in r){let e;for(const n of this.options)if("variant"===n.type||!n.entries[this.key]._run({typed:!1,value:i},t).issues){const i=n._run({typed:!1,value:r},t);if(!i.issues)return i;(!e||!e.typed&&i.typed)&&(e=i)}if(e)return e}n||(n=Z(dn(this.key,this.options),"|")),X(this,"type",e,t,{input:i,expected:n,path:[{type:"object",origin:"value",input:r,key:this.key,value:i}]})}else X(this,"type",e,t);return e}}}function gn(e,t,r){let n;return{kind:"schema",type:"variant",reference:gn,expects:"Object",async:!0,key:e,options:t,message:r,async _run(e,t){const r=e.value;if(r&&"object"==typeof r){const i=r[this.key];if(this.key in r){let e;for(const n of this.options)if("variant"===n.type||!(await n.entries[this.key]._run({typed:!1,value:i},t)).issues){const i=await n._run({typed:!1,value:r},t);if(!i.issues)return i;(!e||!e.typed&&i.typed)&&(e=i)}if(e)return e}n||(n=Z(dn(this.key,this.options),"|")),X(this,"type",e,t,{input:i,expected:n,path:[{type:"object",origin:"value",input:r,key:this.key,value:i}]})}else X(this,"type",e,t);return e}}}function mn(e){return{kind:"schema",type:"void",reference:mn,expects:"void",async:!1,message:e,_run(e,t){return void 0===e.value?e.typed=!0:X(this,"type",e,t),e}}}function yn(e,t){return zr(Object.keys(e.entries),t)}function bn(e,t){const r={...e.entries};for(const e of t)delete r[e];return{...e,entries:r}}function vn(e,t,r){const n=e._run({typed:!1,value:t},B(r));if(n.issues)throw new oe(n.issues);return n.value}async function wn(e,t,r){const n=await e._run({typed:!1,value:t},B(r));if(n.issues)throw new oe(n.issues);return n.value}function En(e,t){const r=r=>vn(e,r,t);return r.schema=e,r.config=t,r}function An(e,t){const r=r=>wn(e,r,t);return r.schema=e,r.config=t,r}function Sn(e,t){const r={};for(const n in e.entries)r[n]=!t||t.includes(n)?Hr(e.entries[n]):e.entries[n];return{...e,entries:r}}function _n(e,t){const r={};for(const n in e.entries)r[n]=!t||t.includes(n)?Kr(e.entries[n]):e.entries[n];return{...e,entries:r}}function In(e,t){const r={};for(const n of t)r[n]=e.entries[n];return{...e,entries:r}}function Nn(...e){return{...e[0],pipe:e,_run(t,r){for(const n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n._run(t,r))}return t}}}function kn(...e){return{...e[0],pipe:e,async:!0,async _run(t,r){for(const n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=await n._run(t,r))}return t}}}function Pn(e,t,r){const n=Array.isArray(t)?t:void 0,i=Array.isArray(t)?r:t,o={};for(const t in e.entries)o[t]=!n||n.includes(t)?Or(e.entries[t],i):e.entries[t];return{...e,entries:o}}function Tn(e,t,r){const n=Array.isArray(t)?t:void 0,i=Array.isArray(t)?r:t,o={};for(const t in e.entries)o[t]=!n||n.includes(t)?Cr(e.entries[t],i):e.entries[t];return{...e,entries:o}}function Rn(e,t,r){const n=e._run({typed:!1,value:t},B(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}async function On(e,t,r){const n=await e._run({typed:!1,value:t},B(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}function Cn(e,t){const r=r=>Rn(e,r,t);return r.schema=e,r.config=t,r}function xn(e,t){const r=r=>On(e,r,t);return r.schema=e,r.config=t,r}function Un(e){return e.wrapped}},86528:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(84008)),o=r(15909),s=n(r(27294));t.psbtToBuffer=function({globalMap:e,inputs:t,outputs:r}){const{globalKeyVals:n,inputKeyVals:i,outputKeyVals:a}=c({globalMap:e,inputs:t,outputs:r}),u=o.keyValsToBuffer(n),l=e=>0===e.length?[Uint8Array.from([0])]:e.map(o.keyValsToBuffer),h=l(i),f=l(a),d=new Uint8Array(5);return d.set([112,115,98,116,255],0),s.concat([d,u].concat(h,f))};const a=(e,t)=>s.compare(e.key,t.key);function u(e,t){const r=new Set,n=Object.entries(e).reduce((e,[n,i])=>{if("unknownKeyVals"===n)return e;const o=t[n];if(void 0===o)return e;const a=(Array.isArray(i)?i:[i]).map(o.encode);return a.map(e=>s.toHex(e.key)).forEach(e=>{if(r.has(e))throw new Error("Serialize Error: Duplicate key: "+e);r.add(e)}),e.concat(a)},[]),i=e.unknownKeyVals?e.unknownKeyVals.filter(e=>!r.has(s.toHex(e.key))):[];return n.concat(i).sort(a)}function c({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:u(e,i.globals),inputKeyVals:t.map(e=>u(e,i.inputs)),outputKeyVals:r.map(e=>u(e,i.outputs))}}t.psbtToKeyVals=c},86572:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},87543:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(84008)),o=r(15909),s=n(r(7170)),a=n(r(27294)),u=r(77496);function c(e,t,r){if(a.compare(t,Uint8Array.from([r])))throw new Error(`Format Error: Invalid ${e} key: ${a.toHex(t)}`)}function l(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:n}){const s={unsignedTx:e};let a=0;for(const e of t)switch(e.key[0]){case u.GlobalTypes.UNSIGNED_TX:if(c("global",e.key,u.GlobalTypes.UNSIGNED_TX),a>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");a++;break;case u.GlobalTypes.GLOBAL_XPUB:void 0===s.globalXpub&&(s.globalXpub=[]),s.globalXpub.push(i.globals.globalXpub.decode(e));break;default:s.unknownKeyVals||(s.unknownKeyVals=[]),s.unknownKeyVals.push(e)}const l=r.length,h=n.length,f=[],d=[];for(const e of o.range(l)){const t={};for(const n of r[e])switch(i.inputs.checkPubkey(n),n.key[0]){case u.InputTypes.NON_WITNESS_UTXO:if(c("input",n.key,u.InputTypes.NON_WITNESS_UTXO),void 0!==t.nonWitnessUtxo)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");t.nonWitnessUtxo=i.inputs.nonWitnessUtxo.decode(n);break;case u.InputTypes.WITNESS_UTXO:if(c("input",n.key,u.InputTypes.WITNESS_UTXO),void 0!==t.witnessUtxo)throw new Error("Format Error: Input has multiple WITNESS_UTXO");t.witnessUtxo=i.inputs.witnessUtxo.decode(n);break;case u.InputTypes.PARTIAL_SIG:void 0===t.partialSig&&(t.partialSig=[]),t.partialSig.push(i.inputs.partialSig.decode(n));break;case u.InputTypes.SIGHASH_TYPE:if(c("input",n.key,u.InputTypes.SIGHASH_TYPE),void 0!==t.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");t.sighashType=i.inputs.sighashType.decode(n);break;case u.InputTypes.REDEEM_SCRIPT:if(c("input",n.key,u.InputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");t.redeemScript=i.inputs.redeemScript.decode(n);break;case u.InputTypes.WITNESS_SCRIPT:if(c("input",n.key,u.InputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");t.witnessScript=i.inputs.witnessScript.decode(n);break;case u.InputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(i.inputs.bip32Derivation.decode(n));break;case u.InputTypes.FINAL_SCRIPTSIG:c("input",n.key,u.InputTypes.FINAL_SCRIPTSIG),t.finalScriptSig=i.inputs.finalScriptSig.decode(n);break;case u.InputTypes.FINAL_SCRIPTWITNESS:c("input",n.key,u.InputTypes.FINAL_SCRIPTWITNESS),t.finalScriptWitness=i.inputs.finalScriptWitness.decode(n);break;case u.InputTypes.POR_COMMITMENT:c("input",n.key,u.InputTypes.POR_COMMITMENT),t.porCommitment=i.inputs.porCommitment.decode(n);break;case u.InputTypes.TAP_KEY_SIG:c("input",n.key,u.InputTypes.TAP_KEY_SIG),t.tapKeySig=i.inputs.tapKeySig.decode(n);break;case u.InputTypes.TAP_SCRIPT_SIG:void 0===t.tapScriptSig&&(t.tapScriptSig=[]),t.tapScriptSig.push(i.inputs.tapScriptSig.decode(n));break;case u.InputTypes.TAP_LEAF_SCRIPT:void 0===t.tapLeafScript&&(t.tapLeafScript=[]),t.tapLeafScript.push(i.inputs.tapLeafScript.decode(n));break;case u.InputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(i.inputs.tapBip32Derivation.decode(n));break;case u.InputTypes.TAP_INTERNAL_KEY:c("input",n.key,u.InputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=i.inputs.tapInternalKey.decode(n);break;case u.InputTypes.TAP_MERKLE_ROOT:c("input",n.key,u.InputTypes.TAP_MERKLE_ROOT),t.tapMerkleRoot=i.inputs.tapMerkleRoot.decode(n);break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(n)}f.push(t)}for(const e of o.range(h)){const t={};for(const r of n[e])switch(i.outputs.checkPubkey(r),r.key[0]){case u.OutputTypes.REDEEM_SCRIPT:if(c("output",r.key,u.OutputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");t.redeemScript=i.outputs.redeemScript.decode(r);break;case u.OutputTypes.WITNESS_SCRIPT:if(c("output",r.key,u.OutputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");t.witnessScript=i.outputs.witnessScript.decode(r);break;case u.OutputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(i.outputs.bip32Derivation.decode(r));break;case u.OutputTypes.TAP_INTERNAL_KEY:c("output",r.key,u.OutputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=i.outputs.tapInternalKey.decode(r);break;case u.OutputTypes.TAP_TREE:c("output",r.key,u.OutputTypes.TAP_TREE),t.tapTree=i.outputs.tapTree.decode(r);break;case u.OutputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(i.outputs.tapBip32Derivation.decode(r));break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(r)}d.push(t)}return{globalMap:s,inputs:f,outputs:d}}t.psbtFromBuffer=function(e,t){let r=0;function n(){const{numberValue:t,bytes:n}=s.decode(e,r);r+=n;const i=e.slice(r,r+Number(t));return r+=Number(t),i}function i(){return{key:n(),value:n()}}function c(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");const t=0===a.readUInt8(e,r);return t&&r++,t}if(1886610036!==function(){const t=a.readUInt32(e,r,"BE");return r+=4,t}())throw new Error("Format Error: Invalid Magic Number");if(255!==function(){const t=a.readUInt8(e,r);return r+=1,t}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");const h=[],f={};for(;!c();){const e=i(),t=a.toHex(e.key);if(f[t])throw new Error("Format Error: Keys must be unique for global keymap: key "+t);f[t]=1,h.push(e)}const d=h.filter(e=>e.key[0]===u.GlobalTypes.UNSIGNED_TX);if(1!==d.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");const p=t(d[0].value),{inputCount:g,outputCount:m}=p.getInputOutputCounts(),y=[],b=[];for(const e of o.range(g)){const t={},r=[];for(;!c();){const n=i(),o=a.toHex(n.key);if(t[o])throw new Error("Format Error: Keys must be unique for each input: input index "+e+" key "+o);t[o]=1,r.push(n)}y.push(r)}for(const e of o.range(m)){const t={},r=[];for(;!c();){const n=i(),o=a.toHex(n.key);if(t[o])throw new Error("Format Error: Keys must be unique for each output: output index "+e+" key "+o);t[o]=1,r.push(n)}b.push(r)}return l(p,{globalMapKeyVals:h,inputKeyVals:y,outputKeyVals:b})},t.checkKeyBuffer=c,t.psbtFromKeyVals=l},87659:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.initEccLib=function(e){var t;e?e!==a.eccLib&&(c("function"==typeof(t=e).isXOnlyPoint),c(t.isXOnlyPoint(u("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),c(t.isXOnlyPoint(u("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),c(t.isXOnlyPoint(u("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),c(t.isXOnlyPoint(u("0000000000000000000000000000000000000000000000000000000000000001"))),c(!t.isXOnlyPoint(u("0000000000000000000000000000000000000000000000000000000000000000"))),c(!t.isXOnlyPoint(u("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),c("function"==typeof t.xOnlyPointAddTweak),l.forEach(e=>{const r=t.xOnlyPointAddTweak(u(e.pubkey),u(e.tweak));null===e.result?c(null===r):(c(null!==r),c(r.parity===e.parity),c(0===s.compare(r.xOnlyPubkey,u(e.result))))}),a.eccLib=e):a.eccLib=e},t.getEccLib=function(){if(!a.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return a.eccLib};const s=o(r(27294)),a={},u=e=>s.fromHex(e);function c(e){if(!e)throw new Error("ecc library invalid")}const l=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]},88088:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(77496),o=n(r(27294));t.decode=function(e){if(e.key[0]!==i.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+o.toHex(e.key));if(79!==e.key.length||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+o.toHex(e.key));if(e.value.length/4%1!=0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");const t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(const t of(n=e.value.length/4-1,[...Array(n).keys()])){const n=o.readUInt32(e.value,4*t+4,"LE"),i=!!(2147483648&n),s=2147483647&n;r.path+="/"+s.toString(10)+(i?"'":"")}var n;return r},t.encode=function(e){const t=new Uint8Array([i.GlobalTypes.GLOBAL_XPUB]),r=o.concat([t,e.extendedPubkey]),n=e.path.split("/"),s=new Uint8Array(4*n.length);s.set(e.masterFingerprint,0);let a=4;return n.slice(1).forEach(e=>{const t="'"===e.slice(-1);let r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),o.writeUInt32(s,a,r,"LE"),a+=4}),{key:r,value:s}},t.expected="{ masterFingerprint: Uint8Array; extendedPubkey: Uint8Array; path: string; }",t.check=function(e){const t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return t instanceof Uint8Array&&78===t.length&&[2,3].indexOf(t[45])>-1&&r instanceof Uint8Array&&4===r.length&&"string"==typeof n&&!!n.match(/^m(\/\d+'?)*$/)},t.canAddToArray=function(e,t,r){const n=o.toHex(t.extendedPubkey);return!r.has(n)&&(r.add(n),0===e.filter(e=>o.compare(e.extendedPubkey,t.extendedPubkey)).length)}},88652:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Account:()=>U,AddressLookupTableAccount:()=>Ve,AddressLookupTableInstruction:()=>Vr,AddressLookupTableProgram:()=>qr,Authorized:()=>on,BLOCKHASH_CACHE_TIMEOUT_MS:()=>$e,BPF_LOADER_DEPRECATED_PROGRAM_ID:()=>M,BPF_LOADER_PROGRAM_ID:()=>Me,BpfLoader:()=>Le,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:()=>Xr,ComputeBudgetInstruction:()=>Jr,ComputeBudgetProgram:()=>Yr,Connection:()=>Hr,Ed25519Program:()=>$r,Enum:()=>k,EpochSchedule:()=>He,FeeCalculatorLayout:()=>Ie,Keypair:()=>Kr,LAMPORTS_PER_SOL:()=>Pn,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:()=>zr,Loader:()=>Ue,Lockup:()=>sn,MAX_SEED_LENGTH:()=>R,Message:()=>ee,MessageAccountKeys:()=>W,MessageV0:()=>te,NONCE_ACCOUNT_LENGTH:()=>ke,NonceAccount:()=>Pe,PACKET_DATA_SIZE:()=>L,PUBLIC_KEY_LENGTH:()=>O,PublicKey:()=>x,SIGNATURE_LENGTH_IN_BYTES:()=>D,SOLANA_SCHEMA:()=>P,STAKE_CONFIG_ID:()=>nn,STAKE_INSTRUCTION_LAYOUTS:()=>un,SYSTEM_INSTRUCTION_LAYOUTS:()=>Oe,SYSVAR_CLOCK_PUBKEY:()=>ce,SYSVAR_EPOCH_SCHEDULE_PUBKEY:()=>le,SYSVAR_INSTRUCTIONS_PUBKEY:()=>he,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:()=>fe,SYSVAR_RENT_PUBKEY:()=>de,SYSVAR_REWARDS_PUBKEY:()=>pe,SYSVAR_SLOT_HASHES_PUBKEY:()=>ge,SYSVAR_SLOT_HISTORY_PUBKEY:()=>me,SYSVAR_STAKE_HISTORY_PUBKEY:()=>ye,Secp256k1Program:()=>tn,SendTransactionError:()=>be,SolanaJSONRPCError:()=>we,SolanaJSONRPCErrorCode:()=>ve,StakeAuthorizationLayout:()=>cn,StakeInstruction:()=>an,StakeProgram:()=>ln,Struct:()=>N,SystemInstruction:()=>Re,SystemProgram:()=>Ce,Transaction:()=>se,TransactionExpiredBlockheightExceededError:()=>F,TransactionExpiredNonceInvalidError:()=>G,TransactionExpiredTimeoutError:()=>j,TransactionInstruction:()=>oe,TransactionMessage:()=>ae,TransactionStatus:()=>ne,VALIDATOR_INFO_KEY:()=>mn,VERSION_PREFIX_MASK:()=>B,VOTE_PROGRAM_ID:()=>vn,ValidatorInfo:()=>bn,VersionedMessage:()=>re,VersionedTransaction:()=>ue,VoteAccount:()=>En,VoteAuthorizationLayout:()=>pn,VoteInit:()=>hn,VoteInstruction:()=>fn,VoteProgram:()=>gn,clusterApiUrl:()=>Nn,sendAndConfirmRawTransaction:()=>kn,sendAndConfirmTransaction:()=>Ee});var n=r(1048),i=r(57622),o=r(6065),s=r.n(o),a=r(39216),u=r.n(a),c=r(52001),l=r(81818),h=r(78918),f=r(56115),d=r(57251),p=r(59499),g=r.n(p),m=r(96396),y=r(30113),b=r(72896);const v=i.ev.utils.randomPrivateKey,w=()=>{const e=i.ev.utils.randomPrivateKey(),t=E(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},E=i.ev.getPublicKey;function A(e){try{return i.ev.ExtendedPoint.fromHex(e),!0}catch{return!1}}const S=(e,t)=>i.ev.sign(e,t.slice(0,32)),_=i.ev.verify,I=e=>n.Buffer.isBuffer(e)?e:e instanceof Uint8Array?n.Buffer.from(e.buffer,e.byteOffset,e.byteLength):n.Buffer.from(e);class N{constructor(e){Object.assign(this,e)}encode(){return n.Buffer.from((0,l.serialize)(P,this))}static decode(e){return(0,l.deserialize)(P,this,e)}static decodeUnchecked(e){return(0,l.deserializeUnchecked)(P,this,e)}}class k extends N{constructor(e){if(super(e),this.enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map(e=>{this.enum=e})}}const P=new Map;var T;const R=32,O=32;let C=1;class x extends N{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"==typeof e){const t=u().decode(e);if(t.length!=O)throw new Error("Invalid public key input");this._bn=new(s())(t)}else this._bn=new(s())(e);if(this._bn.byteLength()>O)throw new Error("Invalid public key input")}}static unique(){const e=new x(C);return C+=1,new x(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return u().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(n.Buffer);if(e.length===O)return e;const t=n.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const i=n.Buffer.concat([e.toBuffer(),n.Buffer.from(t),r.toBuffer()]),o=(0,c.sc)(i);return new x(o)}static createProgramAddressSync(e,t){let r=n.Buffer.alloc(0);e.forEach(function(e){if(e.length>R)throw new TypeError("Max seed length exceeded");r=n.Buffer.concat([r,I(e)])}),r=n.Buffer.concat([r,t.toBuffer(),n.Buffer.from("ProgramDerivedAddress")]);const i=(0,c.sc)(r);if(A(i))throw new Error("Invalid seeds, address must fall off the curve");return new x(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,i=255;for(;0!=i;){try{const o=e.concat(n.Buffer.from([i]));r=this.createProgramAddressSync(o,t)}catch(e){if(e instanceof TypeError)throw e;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return A(new x(e).toBytes())}}T=x,x.default=new T("11111111111111111111111111111111"),P.set(x,{kind:"struct",fields:[["_bn","u256"]]});class U{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=I(e);if(64!==e.length)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=I(v()),this._publicKey=I(E(this._secretKey))}get publicKey(){return new x(this._publicKey)}get secretKey(){return n.Buffer.concat([this._secretKey,this._publicKey],64)}}const M=new x("BPFLoader1111111111111111111111111111111111"),L=1232,B=127,D=64;class F extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(F.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class j extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(j.prototype,"name",{value:"TransactionExpiredTimeoutError"});class G extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(G.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class W{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const t=new Map;this.keySegments().flat().forEach((e,r)=>{t.set(e.toBase58(),r)});const r=e=>{const r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map(e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map(e=>r(e.pubkey)),data:e.data}))}}const H=(e="publicKey")=>h.av(32,e),K=(e="signature")=>h.av(64,e),z=(e="string")=>{const t=h.w3([h.DH("length"),h.DH("lengthPadding"),h.av(h.cY(h.DH(),-8),"chars")],e),r=t.decode.bind(t),i=t.encode.bind(t),o=t;return o.decode=(e,t)=>r(e,t).chars.toString(),o.encode=(e,t,r)=>{const o={chars:n.Buffer.from(e,"utf8")};return i(o,t,r)},o.alloc=e=>h.DH().span+h.DH().span+n.Buffer.from(e,"utf8").length,o};function V(e,t){const r=e=>{if(e.span>=0)return e.span;if("function"==typeof e.alloc)return e.alloc(t[e.property]);if("count"in e&&"elementLayout"in e){const n=t[e.property];if(Array.isArray(n))return n.length*r(e.elementLayout)}else if("fields"in e)return V({layout:e},t[e.property]);return 0};let n=0;return e.layout.fields.forEach(e=>{n+=r(e)}),n}function q(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,!(128&n))break}return t}function J(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}function X(e,t){if(!e)throw new Error(t||"Assertion failed")}class Y{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,n=e=>{const t=e.toBase58();let n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);i.isSigner=!0,i.isWritable=!0;for(const t of e){n(t.programId).isInvoked=!0;for(const e of t.keys){const t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}}return new Y(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];X(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,e])=>e.isSigner&&e.isWritable),r=e.filter(([,e])=>e.isSigner&&!e.isWritable),n=e.filter(([,e])=>!e.isSigner&&e.isWritable),i=e.filter(([,e])=>!e.isSigner&&!e.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{X(t.length>0,"Expected at least one writable signer key");const[e]=t[0];X(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...t.map(([e])=>new x(e)),...r.map(([e])=>new x(e)),...n.map(([e])=>new x(e)),...i.map(([e])=>new x(e))]]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&e.isWritable),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&!e.isWritable);if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,n=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const t=new x(i),o=e.findIndex(e=>e.equals(t));o>=0&&(X(o<256,"Max lookup table index exceeded"),r.push(o),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}const Q="Reached end of buffer unexpectedly";function $(e){if(0===e.length)throw new Error(Q);return e.shift()}function Z(e,...t){const[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw new Error(Q);return e.splice(...t)}class ee{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(e=>new x(e)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:u().decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new W(this.staticAccountKeys)}static compile(e){const t=Y.compile(e.instructions,e.payerKey),[r,n]=t.getMessageComponents(),i=new W(n).compileInstructions(e.instructions).map(e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:u().encode(e.data)}));return new ee({header:r,accountKeys:n,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;return e>=this.header.numRequiredSignatures?e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];J(t,e);const r=this.instructions.map(e=>{const{accounts:t,programIdIndex:r}=e,i=Array.from(u().decode(e.data));let o=[];J(o,t.length);let s=[];return J(s,i.length),{programIdIndex:r,keyIndicesCount:n.Buffer.from(o),keyIndices:t,dataLength:n.Buffer.from(s),data:i}});let i=[];J(i,r.length);let o=n.Buffer.alloc(L);n.Buffer.from(i).copy(o);let s=i.length;r.forEach(e=>{const t=h.w3([h.u8("programIdIndex"),h.av(e.keyIndicesCount.length,"keyIndicesCount"),h.O6(h.u8("keyIndex"),e.keyIndices.length,"keyIndices"),h.av(e.dataLength.length,"dataLength"),h.O6(h.u8("userdatum"),e.data.length,"data")]).encode(e,o,s);s+=t}),o=o.slice(0,s);const a=h.w3([h.av(1,"numRequiredSignatures"),h.av(1,"numReadonlySignedAccounts"),h.av(1,"numReadonlyUnsignedAccounts"),h.av(t.length,"keyCount"),h.O6(H("key"),e,"keys"),H("recentBlockhash")]),c={numRequiredSignatures:n.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:n.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:n.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:n.Buffer.from(t),keys:this.accountKeys.map(e=>I(e.toBytes())),recentBlockhash:u().decode(this.recentBlockhash)};let l=n.Buffer.alloc(2048);const f=a.encode(c,l);return o.copy(l,f),l.slice(0,f+o.length)}static from(e){let t=[...e];const r=$(t);if(r!==(r&B))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=$(t),o=$(t),s=q(t);let a=[];for(let e=0;e<s;e++){const e=Z(t,0,O);a.push(new x(n.Buffer.from(e)))}const c=Z(t,0,O),l=q(t);let h=[];for(let e=0;e<l;e++){const e=$(t),r=Z(t,0,q(t)),i=Z(t,0,q(t)),o=u().encode(n.Buffer.from(i));h.push({programIdIndex:e,accounts:r,data:o})}const f={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:u().encode(n.Buffer.from(c)),accountKeys:a,instructions:h};return new ee(f)}}class te{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new W(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;return e>=r?e-r<this.addressTableLookups.reduce((e,t)=>e+t.writableIndexes.length,0):e>=this.header.numRequiredSignatures?e-t<r-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=e.find(e=>e.key.equals(r.accountKey));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const e of r.writableIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(n.state.addresses[e])}for(const e of r.readonlyIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(n.state.addresses[e])}}return t}static compile(e){const t=Y.compile(e.instructions,e.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const e of i){const i=t.extractTableLookup(e);if(void 0!==i){const[e,{writable:t,readonly:o}]=i;r.push(e),n.writable.push(...t),n.readonly.push(...o)}}const[o,s]=t.getMessageComponents(),a=new W(s,n).compileInstructions(e.instructions);return new te({header:o,staticAccountKeys:s,recentBlockhash:e.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){const e=Array();J(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();J(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();J(i,this.addressTableLookups.length);const o=h.w3([h.u8("prefix"),h.w3([h.u8("numRequiredSignatures"),h.u8("numReadonlySignedAccounts"),h.u8("numReadonlyUnsignedAccounts")],"header"),h.av(e.length,"staticAccountKeysLength"),h.O6(H(),this.staticAccountKeys.length,"staticAccountKeys"),H("recentBlockhash"),h.av(r.length,"instructionsLength"),h.av(t.length,"serializedInstructions"),h.av(i.length,"addressTableLookupsLength"),h.av(n.length,"serializedAddressTableLookups")]),s=new Uint8Array(L),a=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(e=>e.toBytes()),recentBlockhash:u().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},s);return s.slice(0,a)}serializeInstructions(){let e=0;const t=new Uint8Array(L);for(const r of this.compiledInstructions){const n=Array();J(n,r.accountKeyIndexes.length);const i=Array();J(i,r.data.length),e+=h.w3([h.u8("programIdIndex"),h.av(n.length,"encodedAccountKeyIndexesLength"),h.O6(h.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),h.av(i.length,"encodedDataLength"),h.av(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(L);for(const r of this.addressTableLookups){const n=Array();J(n,r.writableIndexes.length);const i=Array();J(i,r.readonlyIndexes.length),e+=h.w3([H("accountKey"),h.av(n.length,"encodedWritableIndexesLength"),h.O6(h.u8(),r.writableIndexes.length,"writableIndexes"),h.av(i.length,"encodedReadonlyIndexesLength"),h.O6(h.u8(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=$(t),n=r&B;X(r!==n,"Expected versioned message but received legacy message"),X(0===n,`Expected versioned message with version 0 but found version ${n}`);const i={numRequiredSignatures:$(t),numReadonlySignedAccounts:$(t),numReadonlyUnsignedAccounts:$(t)},o=[],s=q(t);for(let e=0;e<s;e++)o.push(new x(Z(t,0,O)));const a=u().encode(Z(t,0,O)),c=q(t),l=[];for(let e=0;e<c;e++){const e=$(t),r=Z(t,0,q(t)),n=q(t),i=new Uint8Array(Z(t,0,n));l.push({programIdIndex:e,accountKeyIndexes:r,data:i})}const h=q(t),f=[];for(let e=0;e<h;e++){const e=new x(Z(t,0,O)),r=Z(t,0,q(t)),n=Z(t,0,q(t));f.push({accountKey:e,writableIndexes:r,readonlyIndexes:n})}return new te({header:i,staticAccountKeys:o,recentBlockhash:a,compiledInstructions:l,addressTableLookups:f})}}const re={deserializeMessageVersion(e){const t=e[0],r=t&B;return r===t?"legacy":r},deserialize:e=>{const t=re.deserializeMessageVersion(e);if("legacy"===t)return ee.from(e);if(0===t)return te.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let ne=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({});const ie=n.Buffer.alloc(D).fill(0);class oe{constructor(e){this.keys=void 0,this.programId=void 0,this.data=n.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class se{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new oe(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw new Error(`Transaction instruction index ${e} has undefined program id`);const n=[],i=[];t.forEach(e=>{e.keys.forEach(e=>{i.push({...e})});const t=e.programId.toString();n.includes(t)||n.push(t)}),n.forEach(e=>{i.push({pubkey:new x(e),isSigner:!1,isWritable:!1})});const o=[];i.forEach(e=>{const t=e.pubkey.toString(),r=o.findIndex(e=>e.pubkey.toString()===t);r>-1?(o[r].isWritable=o[r].isWritable||e.isWritable,o[r].isSigner=o[r].isSigner||e.isSigner):o.push(e)}),o.sort(function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});const s=o.findIndex(e=>e.pubkey.equals(r));if(s>-1){const[e]=o.splice(s,1);e.isSigner=!0,e.isWritable=!0,o.unshift(e)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const e of this.signatures){const t=o.findIndex(t=>t.pubkey.equals(e.publicKey));if(!(t>-1))throw new Error(`unknown signer: ${e.publicKey.toString()}`);o[t].isSigner||(o[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,c=0,l=0;const h=[],f=[];o.forEach(({pubkey:e,isSigner:t,isWritable:r})=>{t?(h.push(e.toString()),a+=1,r||(c+=1)):(f.push(e.toString()),r||(l+=1))});const d=h.concat(f),p=t.map(e=>{const{data:t,programId:r}=e;return{programIdIndex:d.indexOf(r.toString()),accounts:e.keys.map(e=>d.indexOf(e.pubkey.toString())),data:u().encode(t)}});return p.forEach(e=>{X(e.programIdIndex>=0),e.accounts.forEach(e=>X(e>=0))}),new ee({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:l},accountKeys:d,recentBlockhash:e,instructions:p})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((e,r)=>t[r].equals(e.publicKey))||(this.signatures=t.map(e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter(e=>{const r=e.toString();return!t.has(r)&&(t.add(r),!0)}).map(e=>({signature:null,publicKey:e}))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map(e=>({signature:null,publicKey:e.publicKey}));const n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}const n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(e=>{const t=S(r,e.secretKey);this._addSignature(e.publicKey,I(t))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){X(64===t.length);const r=this.signatures.findIndex(t=>e.equals(t.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=n.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):_(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){const e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map(e=>e.toBase58()).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map(e=>e.toBase58()).join("`, `")}\`].`),new Error(t)}}return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];J(r,t.length);const i=r.length+64*t.length+e.length,o=n.Buffer.alloc(i);return X(t.length<256),n.Buffer.from(r).copy(o,0),t.forEach(({signature:e},t)=>{null!==e&&(X(64===e.length,"signature has invalid length"),n.Buffer.from(e).copy(o,r.length+64*t))}),e.copy(o,r.length+64*t.length),X(o.length<=L,`Transaction too large: ${o.length} > ${L}`),o}get keys(){return X(1===this.instructions.length),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return X(1===this.instructions.length),this.instructions[0].programId}get data(){return X(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=q(t);let i=[];for(let e=0;e<r;e++){const e=Z(t,0,D);i.push(u().encode(n.Buffer.from(e)))}return se.populate(ee.from(t),i)}static populate(e,t=[]){const r=new se;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((t,n)=>{const i={signature:t==u().encode(ie)?null:u().decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)}),e.instructions.forEach(t=>{const n=t.accounts.map(t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some(e=>e.publicKey.toString()===n.toString())||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}});r.instructions.push(new oe({keys:n,programId:e.accountKeys[t.programIdIndex],data:u().decode(t.data)}))}),r._message=e,r._json=r.toJSON(),r}}class ae{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:r,compiledInstructions:n,recentBlockhash:i}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:a}=r,u=o-s;X(u>0,"Message header is invalid");const c=e.staticAccountKeys.length-o-a;X(c>=0,"Message header is invalid");const l=e.getAccountKeys(t),h=l.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");const f=[];for(const e of n){const t=[];for(const n of e.accountKeyIndexes){const e=l.get(n);if(void 0===e)throw new Error(`Failed to find key for account key index ${n}`);let i;i=n<o?n<u:n<l.staticAccountKeys.length?n-o<c:n-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,t.push({pubkey:e,isSigner:n<r.numRequiredSignatures,isWritable:i})}const n=l.get(e.programIdIndex);if(void 0===n)throw new Error(`Failed to find program id for program id index ${e.programIdIndex}`);f.push(new oe({programId:n,data:I(e.data),keys:t}))}return new ae({payerKey:h,instructions:f,recentBlockhash:i})}compileToLegacyMessage(){return ee.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return te.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class ue{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)X(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(D));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();J(t,this.signatures.length);const r=h.w3([h.av(t.length,"encodedSignaturesLength"),h.O6(K(),this.signatures.length,"signatures"),h.av(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e];const r=[],n=q(t);for(let e=0;e<n;e++)r.push(new Uint8Array(Z(t,0,D)));const i=re.deserialize(new Uint8Array(t));return new ue(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of e){const e=r.findIndex(e=>e.equals(n.publicKey));X(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=S(t,n.secretKey)}}addSignature(e,t){X(64===t.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(t=>t.equals(e));X(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}const ce=new x("SysvarC1ock11111111111111111111111111111111"),le=new x("SysvarEpochSchedu1e111111111111111111111111"),he=new x("Sysvar1nstructions1111111111111111111111111"),fe=new x("SysvarRecentB1ockHashes11111111111111111111"),de=new x("SysvarRent111111111111111111111111111111111"),pe=new x("SysvarRewards111111111111111111111111111111"),ge=new x("SysvarS1otHashes111111111111111111111111111"),me=new x("SysvarS1otHistory11111111111111111111111111"),ye=new x("SysvarStakeHistory1111111111111111111111111");class be extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){const i=n?`Logs: \n${JSON.stringify(n.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let s;switch(e){case"send":s=`Transaction ${t} resulted in an error. \n${r}. `+i+o;break;case"simulate":s=`Simulation failed. \nMessage: ${r}. \n`+i+o;break;default:s=`Unknown action '${e}'`}super(s),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(e=>{if(e&&e.meta&&e.meta.logMessages){const r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const ve={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class we extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function Ee(e,t,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await e.sendTransaction(t,r,i);let s;if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)s=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){const{nonceInstruction:r}=t.nonceInfo,i=r.keys[0].pubkey;s=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:t.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else null!=n?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await e.confirmTransaction(o,n&&n.commitment)).value;if(s.err){if(null!=o)throw new be({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(s)})`});throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`)}return o}function Ae(e){return new Promise(t=>setTimeout(t,e))}function Se(e,t){const r=e.layout.span>=0?e.layout.span:V(e,t),i=n.Buffer.alloc(r),o=Object.assign({instruction:e.index},t);return e.layout.encode(o,i),i}function _e(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}const Ie=h.I0("lamportsPerSignature"),Ne=h.w3([h.DH("version"),h.DH("state"),H("authorizedPubkey"),H("nonce"),h.w3([Ie],"feeCalculator")]),ke=Ne.span;class Pe{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Ne.decode(I(e),0);return new Pe({authorizedPubkey:new x(t.authorizedPubkey),nonce:new x(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const Te=e=>{const t=(0,h.av)(8,e),{encode:r,decode:i}=(e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}))(t),o=t;return o.decode=(e,t)=>{const r=i(e,t);return(0,f.k5)(n.Buffer.from(r))},o.encode=(e,t,n)=>{const i=(0,f.Bq)(e,8);return r(i,t,n)},o};class Re{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(Oe))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a SystemInstruction");return r}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:r,programId:n}=_e(Oe.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new x(n)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=_e(Oe.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:r,programId:n}=_e(Oe.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new x(n)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=_e(Oe.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,space:n,programId:i}=_e(Oe.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new x(t),seed:r,space:n,programId:new x(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=_e(Oe.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new x(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,programId:n}=_e(Oe.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new x(t),seed:r,programId:new x(n)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:r,lamports:n,space:i,programId:o}=_e(Oe.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new x(t),seed:r,lamports:n,space:i,programId:new x(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=_e(Oe.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new x(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),_e(Oe.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=_e(Oe.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=_e(Oe.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new x(t)}}static checkProgramId(e){if(!e.equals(Ce.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Oe=Object.freeze({Create:{index:0,layout:h.w3([h.DH("instruction"),h.Wg("lamports"),h.Wg("space"),H("programId")])},Assign:{index:1,layout:h.w3([h.DH("instruction"),H("programId")])},Transfer:{index:2,layout:h.w3([h.DH("instruction"),Te("lamports")])},CreateWithSeed:{index:3,layout:h.w3([h.DH("instruction"),H("base"),z("seed"),h.Wg("lamports"),h.Wg("space"),H("programId")])},AdvanceNonceAccount:{index:4,layout:h.w3([h.DH("instruction")])},WithdrawNonceAccount:{index:5,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},InitializeNonceAccount:{index:6,layout:h.w3([h.DH("instruction"),H("authorized")])},AuthorizeNonceAccount:{index:7,layout:h.w3([h.DH("instruction"),H("authorized")])},Allocate:{index:8,layout:h.w3([h.DH("instruction"),h.Wg("space")])},AllocateWithSeed:{index:9,layout:h.w3([h.DH("instruction"),H("base"),z("seed"),h.Wg("space"),H("programId")])},AssignWithSeed:{index:10,layout:h.w3([h.DH("instruction"),H("base"),z("seed"),H("programId")])},TransferWithSeed:{index:11,layout:h.w3([h.DH("instruction"),Te("lamports"),z("seed"),H("programId")])},UpgradeNonceAccount:{index:12,layout:h.w3([h.DH("instruction")])}});class Ce{constructor(){}static createAccount(e){const t=Se(Oe.Create,{lamports:e.lamports,space:e.space,programId:I(e.programId.toBuffer())});return new oe({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;return"basePubkey"in e?(t=Se(Oe.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:I(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=Se(Oe.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]),new oe({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;return"basePubkey"in e?(t=Se(Oe.AssignWithSeed,{base:I(e.basePubkey.toBuffer()),seed:e.seed,programId:I(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Se(Oe.Assign,{programId:I(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new oe({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Se(Oe.CreateWithSeed,{base:I(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:I(e.programId.toBuffer())});let r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new oe({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){const t=new se;"basePubkey"in e&&"seed"in e?t.add(Ce.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ke,programId:this.programId})):t.add(Ce.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ke,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=Se(Oe.InitializeNonceAccount,{authorized:I(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:de,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new oe(r)}static nonceAdvance(e){const t=Se(Oe.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new oe(r)}static nonceWithdraw(e){const t=Se(Oe.WithdrawNonceAccount,{lamports:e.lamports});return new oe({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:de,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){const t=Se(Oe.AuthorizeNonceAccount,{authorized:I(e.newAuthorizedPubkey.toBuffer())});return new oe({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;return"basePubkey"in e?(t=Se(Oe.AllocateWithSeed,{base:I(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:I(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Se(Oe.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new oe({keys:r,programId:this.programId,data:t})}}Ce.programId=new x("11111111111111111111111111111111");const xe=L-300;class Ue{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Ue.chunkSize)+1+1)}static async load(e,t,r,i,o){{const n=await e.getMinimumBalanceForRentExemption(o.length),s=await e.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==s){if(s.executable)return console.error("Program load failed, account is already executable"),!1;s.data.length!==o.length&&(a=a||new se,a.add(Ce.allocate({accountPubkey:r.publicKey,space:o.length}))),s.owner.equals(i)||(a=a||new se,a.add(Ce.assign({accountPubkey:r.publicKey,programId:i}))),s.lamports<n&&(a=a||new se,a.add(Ce.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:n-s.lamports})))}else a=(new se).add(Ce.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:o.length,programId:i}));null!==a&&await Ee(e,a,[t,r],{commitment:"confirmed"})}const s=h.w3([h.DH("instruction"),h.DH("offset"),h.DH("bytesLength"),h.DH("bytesLengthPadding"),h.O6(h.u8("byte"),h.cY(h.DH(),-8),"bytes")]),a=Ue.chunkSize;let u=0,c=o,l=[];for(;c.length>0;){const o=c.slice(0,a),h=n.Buffer.alloc(a+16);s.encode({instruction:0,offset:u,bytes:o,bytesLength:0,bytesLengthPadding:0},h);const f=(new se).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:h});if(l.push(Ee(e,f,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await Ae(1e3/e)}u+=a,c=c.slice(a)}await Promise.all(l);{const o=h.w3([h.DH("instruction")]),s=n.Buffer.alloc(o.span);o.encode({instruction:1},s);const a=(new se).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:de,isSigner:!1,isWritable:!1}],programId:i,data:s}),u="processed",c=await e.sendTransaction(a,[t,r],{preflightCommitment:u}),{context:l,value:f}=await e.confirmTransaction({signature:c,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},u);if(f.err)throw new Error(`Transaction ${c} failed (${JSON.stringify(f)})`);for(;;){try{if(await e.getSlot({commitment:u})>l.slot)break}catch{}await new Promise(e=>setTimeout(e,Math.round(200)))}}return!0}}Ue.chunkSize=xe;const Me=new x("BPFLoader2111111111111111111111111111111111");class Le{static getMinNumSignatures(e){return Ue.getMinNumSignatures(e)}static load(e,t,r,n,i){return Ue.load(e,t,r,i,n)}}function Be(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var De,Fe;function je(){if(Fe)return De;Fe=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function r(n,i){var o,s,a,u,c,l,h;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(h=e.call(n))){for(a="[",s=n.length-1,o=0;o<s;o++)a+=r(n[o],!0)+",";return s>-1&&(a+=r(n[o],!0)),a+"]"}if("[object Object]"===h){for(s=(u=t(n).sort()).length,a="",o=0;o<s;)void 0!==(l=r(n[c=u[o]],!1))&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l),o++;return"{"+a+"}"}return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return De=function(e){var t=r(e,!1);if(void 0!==t)return""+t}}var Ge=Be(je());function We(e){let t=0;for(;e>1;)e/=2,t++;return t}class He{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const r=We(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,1+(t|=t>>32)))-We(32)-1;return[r,e-(this.getSlotsInEpoch(r)-32)]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}var t}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+We(32)):this.slotsPerEpoch}}var Ke=globalThis.fetch;class ze extends m.vE{constructor(e,t,r){super(e=>{const r=(0,m.kb)(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in r?r.socket:r,r},e,t,r),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}class Ve{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=function(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}(qe,e),r=e.length-56;X(r>=0,"lookup table is invalid"),X(r%32==0,"lookup table is invalid");const n=r/32,{addresses:i}=h.w3([h.O6(H(),n,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new x(t.authority[0]):void 0,addresses:i.map(e=>new x(e))}}}const qe={index:1,layout:h.w3([h.DH("typeIndex"),Te("deactivationSlot"),h.I0("lastExtendedSlot"),h.u8("lastExtendedStartIndex"),h.u8(),h.O6(H(),h.cY(h.u8(),-1),"authority")])},Je=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,Xe=(0,d.au)((0,d.KJ)(x),(0,d.Yj)(),e=>new x(e)),Ye=(0,d.PV)([(0,d.Yj)(),(0,d.eu)("base64")]),Qe=(0,d.au)((0,d.KJ)(n.Buffer),Ye,e=>n.Buffer.from(e[0],"base64")),$e=3e4;function Ze(e){let t,r;if("string"==typeof e)t=e;else if(e){const{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function et(e){return e.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function tt(e){return(0,d.KC)([(0,d.NW)({jsonrpc:(0,d.eu)("2.0"),id:(0,d.Yj)(),result:e}),(0,d.NW)({jsonrpc:(0,d.eu)("2.0"),id:(0,d.Yj)(),error:(0,d.NW)({code:(0,d.L5)(),message:(0,d.Yj)(),data:(0,d.lq)((0,d.bz)())})})])}const rt=tt((0,d.L5)());function nt(e){return(0,d.au)(tt(e),rt,t=>"error"in t?t:{...t,result:(0,d.vt)(t.result,e)})}function it(e){return nt((0,d.NW)({context:(0,d.NW)({slot:(0,d.ai)()}),value:e}))}function ot(e){return(0,d.NW)({context:(0,d.NW)({slot:(0,d.ai)()}),value:e})}function st(e,t){return 0===e?new te({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new x(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:u().decode(e.data)})),addressTableLookups:t.addressTableLookups}):new ee(t)}const at=(0,d.NW)({foundation:(0,d.ai)(),foundationTerm:(0,d.ai)(),initial:(0,d.ai)(),taper:(0,d.ai)(),terminal:(0,d.ai)()}),ut=nt((0,d.YO)((0,d.me)((0,d.NW)({epoch:(0,d.ai)(),effectiveSlot:(0,d.ai)(),amount:(0,d.ai)(),postBalance:(0,d.ai)(),commission:(0,d.lq)((0,d.me)((0,d.ai)()))})))),ct=(0,d.YO)((0,d.NW)({slot:(0,d.ai)(),prioritizationFee:(0,d.ai)()})),lt=(0,d.NW)({total:(0,d.ai)(),validator:(0,d.ai)(),foundation:(0,d.ai)(),epoch:(0,d.ai)()}),ht=(0,d.NW)({epoch:(0,d.ai)(),slotIndex:(0,d.ai)(),slotsInEpoch:(0,d.ai)(),absoluteSlot:(0,d.ai)(),blockHeight:(0,d.lq)((0,d.ai)()),transactionCount:(0,d.lq)((0,d.ai)())}),ft=(0,d.NW)({slotsPerEpoch:(0,d.ai)(),leaderScheduleSlotOffset:(0,d.ai)(),warmup:(0,d.zM)(),firstNormalEpoch:(0,d.ai)(),firstNormalSlot:(0,d.ai)()}),dt=(0,d.g1)((0,d.Yj)(),(0,d.YO)((0,d.ai)())),pt=(0,d.me)((0,d.KC)([(0,d.NW)({}),(0,d.Yj)()])),gt=(0,d.NW)({err:pt}),mt=(0,d.eu)("receivedSignature"),yt=(0,d.NW)({"solana-core":(0,d.Yj)(),"feature-set":(0,d.lq)((0,d.ai)())}),bt=(0,d.NW)({program:(0,d.Yj)(),programId:Xe,parsed:(0,d.L5)()}),vt=(0,d.NW)({programId:Xe,accounts:(0,d.YO)(Xe),data:(0,d.Yj)()}),wt=it((0,d.NW)({err:(0,d.me)((0,d.KC)([(0,d.NW)({}),(0,d.Yj)()])),logs:(0,d.me)((0,d.YO)((0,d.Yj)())),accounts:(0,d.lq)((0,d.me)((0,d.YO)((0,d.me)((0,d.NW)({executable:(0,d.zM)(),owner:(0,d.Yj)(),lamports:(0,d.ai)(),data:(0,d.YO)((0,d.Yj)()),rentEpoch:(0,d.lq)((0,d.ai)())}))))),unitsConsumed:(0,d.lq)((0,d.ai)()),returnData:(0,d.lq)((0,d.me)((0,d.NW)({programId:(0,d.Yj)(),data:(0,d.PV)([(0,d.Yj)(),(0,d.eu)("base64")])}))),innerInstructions:(0,d.lq)((0,d.me)((0,d.YO)((0,d.NW)({index:(0,d.ai)(),instructions:(0,d.YO)((0,d.KC)([bt,vt]))}))))})),Et=it((0,d.NW)({byIdentity:(0,d.g1)((0,d.Yj)(),(0,d.YO)((0,d.ai)())),range:(0,d.NW)({firstSlot:(0,d.ai)(),lastSlot:(0,d.ai)()})})),At=nt(at),St=nt(lt),_t=nt(ct),It=nt(ht),Nt=nt(ft),kt=nt(dt),Pt=nt((0,d.ai)()),Tt=it((0,d.NW)({total:(0,d.ai)(),circulating:(0,d.ai)(),nonCirculating:(0,d.ai)(),nonCirculatingAccounts:(0,d.YO)(Xe)})),Rt=(0,d.NW)({amount:(0,d.Yj)(),uiAmount:(0,d.me)((0,d.ai)()),decimals:(0,d.ai)(),uiAmountString:(0,d.lq)((0,d.Yj)())}),Ot=it((0,d.YO)((0,d.NW)({address:Xe,amount:(0,d.Yj)(),uiAmount:(0,d.me)((0,d.ai)()),decimals:(0,d.ai)(),uiAmountString:(0,d.lq)((0,d.Yj)())}))),Ct=it((0,d.YO)((0,d.NW)({pubkey:Xe,account:(0,d.NW)({executable:(0,d.zM)(),owner:Xe,lamports:(0,d.ai)(),data:Qe,rentEpoch:(0,d.ai)()})}))),xt=(0,d.NW)({program:(0,d.Yj)(),parsed:(0,d.L5)(),space:(0,d.ai)()}),Ut=it((0,d.YO)((0,d.NW)({pubkey:Xe,account:(0,d.NW)({executable:(0,d.zM)(),owner:Xe,lamports:(0,d.ai)(),data:xt,rentEpoch:(0,d.ai)()})}))),Mt=it((0,d.YO)((0,d.NW)({lamports:(0,d.ai)(),address:Xe}))),Lt=(0,d.NW)({executable:(0,d.zM)(),owner:Xe,lamports:(0,d.ai)(),data:Qe,rentEpoch:(0,d.ai)()}),Bt=(0,d.NW)({pubkey:Xe,account:Lt}),Dt=(0,d.au)((0,d.KC)([(0,d.KJ)(n.Buffer),xt]),(0,d.KC)([Ye,xt]),e=>Array.isArray(e)?(0,d.vt)(e,Qe):e),Ft=(0,d.NW)({executable:(0,d.zM)(),owner:Xe,lamports:(0,d.ai)(),data:Dt,rentEpoch:(0,d.ai)()}),jt=(0,d.NW)({pubkey:Xe,account:Ft}),Gt=(0,d.NW)({state:(0,d.KC)([(0,d.eu)("active"),(0,d.eu)("inactive"),(0,d.eu)("activating"),(0,d.eu)("deactivating")]),active:(0,d.ai)(),inactive:(0,d.ai)()}),Wt=nt((0,d.YO)((0,d.NW)({signature:(0,d.Yj)(),slot:(0,d.ai)(),err:pt,memo:(0,d.me)((0,d.Yj)()),blockTime:(0,d.lq)((0,d.me)((0,d.ai)()))}))),Ht=nt((0,d.YO)((0,d.NW)({signature:(0,d.Yj)(),slot:(0,d.ai)(),err:pt,memo:(0,d.me)((0,d.Yj)()),blockTime:(0,d.lq)((0,d.me)((0,d.ai)()))}))),Kt=(0,d.NW)({subscription:(0,d.ai)(),result:ot(Lt)}),zt=(0,d.NW)({pubkey:Xe,account:Lt}),Vt=(0,d.NW)({subscription:(0,d.ai)(),result:ot(zt)}),qt=(0,d.NW)({parent:(0,d.ai)(),slot:(0,d.ai)(),root:(0,d.ai)()}),Jt=(0,d.NW)({subscription:(0,d.ai)(),result:qt}),Xt=(0,d.KC)([(0,d.NW)({type:(0,d.KC)([(0,d.eu)("firstShredReceived"),(0,d.eu)("completed"),(0,d.eu)("optimisticConfirmation"),(0,d.eu)("root")]),slot:(0,d.ai)(),timestamp:(0,d.ai)()}),(0,d.NW)({type:(0,d.eu)("createdBank"),parent:(0,d.ai)(),slot:(0,d.ai)(),timestamp:(0,d.ai)()}),(0,d.NW)({type:(0,d.eu)("frozen"),slot:(0,d.ai)(),timestamp:(0,d.ai)(),stats:(0,d.NW)({numTransactionEntries:(0,d.ai)(),numSuccessfulTransactions:(0,d.ai)(),numFailedTransactions:(0,d.ai)(),maxTransactionsPerEntry:(0,d.ai)()})}),(0,d.NW)({type:(0,d.eu)("dead"),slot:(0,d.ai)(),timestamp:(0,d.ai)(),err:(0,d.Yj)()})]),Yt=(0,d.NW)({subscription:(0,d.ai)(),result:Xt}),Qt=(0,d.NW)({subscription:(0,d.ai)(),result:ot((0,d.KC)([gt,mt]))}),$t=(0,d.NW)({subscription:(0,d.ai)(),result:(0,d.ai)()}),Zt=(0,d.NW)({pubkey:(0,d.Yj)(),gossip:(0,d.me)((0,d.Yj)()),tpu:(0,d.me)((0,d.Yj)()),rpc:(0,d.me)((0,d.Yj)()),version:(0,d.me)((0,d.Yj)())}),er=(0,d.NW)({votePubkey:(0,d.Yj)(),nodePubkey:(0,d.Yj)(),activatedStake:(0,d.ai)(),epochVoteAccount:(0,d.zM)(),epochCredits:(0,d.YO)((0,d.PV)([(0,d.ai)(),(0,d.ai)(),(0,d.ai)()])),commission:(0,d.ai)(),lastVote:(0,d.ai)(),rootSlot:(0,d.me)((0,d.ai)())}),tr=nt((0,d.NW)({current:(0,d.YO)(er),delinquent:(0,d.YO)(er)})),rr=(0,d.KC)([(0,d.eu)("processed"),(0,d.eu)("confirmed"),(0,d.eu)("finalized")]),nr=(0,d.NW)({slot:(0,d.ai)(),confirmations:(0,d.me)((0,d.ai)()),err:pt,confirmationStatus:(0,d.lq)(rr)}),ir=it((0,d.YO)((0,d.me)(nr))),or=nt((0,d.ai)()),sr=(0,d.NW)({accountKey:Xe,writableIndexes:(0,d.YO)((0,d.ai)()),readonlyIndexes:(0,d.YO)((0,d.ai)())}),ar=(0,d.NW)({signatures:(0,d.YO)((0,d.Yj)()),message:(0,d.NW)({accountKeys:(0,d.YO)((0,d.Yj)()),header:(0,d.NW)({numRequiredSignatures:(0,d.ai)(),numReadonlySignedAccounts:(0,d.ai)(),numReadonlyUnsignedAccounts:(0,d.ai)()}),instructions:(0,d.YO)((0,d.NW)({accounts:(0,d.YO)((0,d.ai)()),data:(0,d.Yj)(),programIdIndex:(0,d.ai)()})),recentBlockhash:(0,d.Yj)(),addressTableLookups:(0,d.lq)((0,d.YO)(sr))})}),ur=(0,d.NW)({pubkey:Xe,signer:(0,d.zM)(),writable:(0,d.zM)(),source:(0,d.lq)((0,d.KC)([(0,d.eu)("transaction"),(0,d.eu)("lookupTable")]))}),cr=(0,d.NW)({accountKeys:(0,d.YO)(ur),signatures:(0,d.YO)((0,d.Yj)())}),lr=(0,d.NW)({parsed:(0,d.L5)(),program:(0,d.Yj)(),programId:Xe}),hr=(0,d.NW)({accounts:(0,d.YO)(Xe),data:(0,d.Yj)(),programId:Xe}),fr=(0,d.KC)([hr,lr]),dr=(0,d.KC)([(0,d.NW)({parsed:(0,d.L5)(),program:(0,d.Yj)(),programId:(0,d.Yj)()}),(0,d.NW)({accounts:(0,d.YO)((0,d.Yj)()),data:(0,d.Yj)(),programId:(0,d.Yj)()})]),pr=(0,d.au)(fr,dr,e=>"accounts"in e?(0,d.vt)(e,hr):(0,d.vt)(e,lr)),gr=(0,d.NW)({signatures:(0,d.YO)((0,d.Yj)()),message:(0,d.NW)({accountKeys:(0,d.YO)(ur),instructions:(0,d.YO)(pr),recentBlockhash:(0,d.Yj)(),addressTableLookups:(0,d.lq)((0,d.me)((0,d.YO)(sr)))})}),mr=(0,d.NW)({accountIndex:(0,d.ai)(),mint:(0,d.Yj)(),owner:(0,d.lq)((0,d.Yj)()),programId:(0,d.lq)((0,d.Yj)()),uiTokenAmount:Rt}),yr=(0,d.NW)({writable:(0,d.YO)(Xe),readonly:(0,d.YO)(Xe)}),br=(0,d.NW)({err:pt,fee:(0,d.ai)(),innerInstructions:(0,d.lq)((0,d.me)((0,d.YO)((0,d.NW)({index:(0,d.ai)(),instructions:(0,d.YO)((0,d.NW)({accounts:(0,d.YO)((0,d.ai)()),data:(0,d.Yj)(),programIdIndex:(0,d.ai)()}))})))),preBalances:(0,d.YO)((0,d.ai)()),postBalances:(0,d.YO)((0,d.ai)()),logMessages:(0,d.lq)((0,d.me)((0,d.YO)((0,d.Yj)()))),preTokenBalances:(0,d.lq)((0,d.me)((0,d.YO)(mr))),postTokenBalances:(0,d.lq)((0,d.me)((0,d.YO)(mr))),loadedAddresses:(0,d.lq)(yr),computeUnitsConsumed:(0,d.lq)((0,d.ai)())}),vr=(0,d.NW)({err:pt,fee:(0,d.ai)(),innerInstructions:(0,d.lq)((0,d.me)((0,d.YO)((0,d.NW)({index:(0,d.ai)(),instructions:(0,d.YO)(pr)})))),preBalances:(0,d.YO)((0,d.ai)()),postBalances:(0,d.YO)((0,d.ai)()),logMessages:(0,d.lq)((0,d.me)((0,d.YO)((0,d.Yj)()))),preTokenBalances:(0,d.lq)((0,d.me)((0,d.YO)(mr))),postTokenBalances:(0,d.lq)((0,d.me)((0,d.YO)(mr))),loadedAddresses:(0,d.lq)(yr),computeUnitsConsumed:(0,d.lq)((0,d.ai)())}),wr=(0,d.KC)([(0,d.eu)(0),(0,d.eu)("legacy")]),Er=(0,d.NW)({pubkey:(0,d.Yj)(),lamports:(0,d.ai)(),postBalance:(0,d.me)((0,d.ai)()),rewardType:(0,d.me)((0,d.Yj)()),commission:(0,d.lq)((0,d.me)((0,d.ai)()))}),Ar=nt((0,d.me)((0,d.NW)({blockhash:(0,d.Yj)(),previousBlockhash:(0,d.Yj)(),parentSlot:(0,d.ai)(),transactions:(0,d.YO)((0,d.NW)({transaction:ar,meta:(0,d.me)(br),version:(0,d.lq)(wr)})),rewards:(0,d.lq)((0,d.YO)(Er)),blockTime:(0,d.me)((0,d.ai)()),blockHeight:(0,d.me)((0,d.ai)())}))),Sr=nt((0,d.me)((0,d.NW)({blockhash:(0,d.Yj)(),previousBlockhash:(0,d.Yj)(),parentSlot:(0,d.ai)(),rewards:(0,d.lq)((0,d.YO)(Er)),blockTime:(0,d.me)((0,d.ai)()),blockHeight:(0,d.me)((0,d.ai)())}))),_r=nt((0,d.me)((0,d.NW)({blockhash:(0,d.Yj)(),previousBlockhash:(0,d.Yj)(),parentSlot:(0,d.ai)(),transactions:(0,d.YO)((0,d.NW)({transaction:cr,meta:(0,d.me)(br),version:(0,d.lq)(wr)})),rewards:(0,d.lq)((0,d.YO)(Er)),blockTime:(0,d.me)((0,d.ai)()),blockHeight:(0,d.me)((0,d.ai)())}))),Ir=nt((0,d.me)((0,d.NW)({blockhash:(0,d.Yj)(),previousBlockhash:(0,d.Yj)(),parentSlot:(0,d.ai)(),transactions:(0,d.YO)((0,d.NW)({transaction:gr,meta:(0,d.me)(vr),version:(0,d.lq)(wr)})),rewards:(0,d.lq)((0,d.YO)(Er)),blockTime:(0,d.me)((0,d.ai)()),blockHeight:(0,d.me)((0,d.ai)())}))),Nr=nt((0,d.me)((0,d.NW)({blockhash:(0,d.Yj)(),previousBlockhash:(0,d.Yj)(),parentSlot:(0,d.ai)(),transactions:(0,d.YO)((0,d.NW)({transaction:cr,meta:(0,d.me)(vr),version:(0,d.lq)(wr)})),rewards:(0,d.lq)((0,d.YO)(Er)),blockTime:(0,d.me)((0,d.ai)()),blockHeight:(0,d.me)((0,d.ai)())}))),kr=nt((0,d.me)((0,d.NW)({blockhash:(0,d.Yj)(),previousBlockhash:(0,d.Yj)(),parentSlot:(0,d.ai)(),rewards:(0,d.lq)((0,d.YO)(Er)),blockTime:(0,d.me)((0,d.ai)()),blockHeight:(0,d.me)((0,d.ai)())}))),Pr=nt((0,d.me)((0,d.NW)({blockhash:(0,d.Yj)(),previousBlockhash:(0,d.Yj)(),parentSlot:(0,d.ai)(),transactions:(0,d.YO)((0,d.NW)({transaction:ar,meta:(0,d.me)(br)})),rewards:(0,d.lq)((0,d.YO)(Er)),blockTime:(0,d.me)((0,d.ai)())}))),Tr=nt((0,d.me)((0,d.NW)({blockhash:(0,d.Yj)(),previousBlockhash:(0,d.Yj)(),parentSlot:(0,d.ai)(),signatures:(0,d.YO)((0,d.Yj)()),blockTime:(0,d.me)((0,d.ai)())}))),Rr=nt((0,d.me)((0,d.NW)({slot:(0,d.ai)(),meta:(0,d.me)(br),blockTime:(0,d.lq)((0,d.me)((0,d.ai)())),transaction:ar,version:(0,d.lq)(wr)}))),Or=nt((0,d.me)((0,d.NW)({slot:(0,d.ai)(),transaction:gr,meta:(0,d.me)(vr),blockTime:(0,d.lq)((0,d.me)((0,d.ai)())),version:(0,d.lq)(wr)}))),Cr=it((0,d.NW)({blockhash:(0,d.Yj)(),feeCalculator:(0,d.NW)({lamportsPerSignature:(0,d.ai)()})})),xr=it((0,d.NW)({blockhash:(0,d.Yj)(),lastValidBlockHeight:(0,d.ai)()})),Ur=it((0,d.zM)()),Mr=(0,d.NW)({slot:(0,d.ai)(),numTransactions:(0,d.ai)(),numSlots:(0,d.ai)(),samplePeriodSecs:(0,d.ai)()}),Lr=nt((0,d.YO)(Mr)),Br=it((0,d.me)((0,d.NW)({feeCalculator:(0,d.NW)({lamportsPerSignature:(0,d.ai)()})}))),Dr=nt((0,d.Yj)()),Fr=nt((0,d.Yj)()),jr=(0,d.NW)({err:pt,logs:(0,d.YO)((0,d.Yj)()),signature:(0,d.Yj)()}),Gr=(0,d.NW)({result:ot(jr),subscription:(0,d.ai)()}),Wr={"solana-client":"js/1.95.8"};class Hr{constructor(e,t){let r,n,i,o,s,a;var u;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const e={};return async t=>{const{commitment:r,config:n}=Ze(t),i=this._buildArgs([],r,void 0,n),o=Ge(i);return e[o]=e[o]??(async()=>{try{const e=await this._rpcRequest("getBlockHeight",i),t=(0,d.vt)(e,nt((0,d.ai)()));if("error"in t)throw new we(t.error,"failed to get block height information");return t.result}finally{delete e[o]}})(),await e[o]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,n=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,s=t.disableRetryOnRateLimit,a=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=r||function(e){const t=e.match(Je);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[r,n,i,o]=t,s=e.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${s}//${n}${null==a?"":`:${a+1}`}${o}`}(e),this._rpcClient=function(e,t,r,n,i,o){const s=r||Ke;let a;return null!=o&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(a=async(e,t)=>{const r=await new Promise((r,i)=>{try{n(e,t,(e,t)=>r([e,t]))}catch(e){i(e)}});return await s(...r)}),new(g())(async(r,n)=>{const o={method:"POST",body:r,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},Wr)};try{let t,r=5,u=500;for(;t=a?await a(e,o):await s(e,o),429===t.status&&!0!==i&&(r-=1,0!==r);)console.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${u}ms delay...`),await Ae(u),u*=2;const c=await t.text();t.ok?n(null,c):n(new Error(`${t.status} ${t.statusText}: ${c}`))}catch(e){e instanceof Error&&n(e)}},{})}(e,n,i,o,s,a),this._rpcRequest=(u=this._rpcClient,(e,t)=>new Promise((r,n)=>{u.request(e,t,(e,t)=>{e?n(e):r(t)})})),this._rpcBatchRequest=function(e){return t=>new Promise((r,n)=>{0===t.length&&r([]);const i=t.map(t=>e.request(t.methodName,t.args));e.request(i,(e,t)=>{e?n(e):r(t)})})}(this._rpcClient),this._rpcWebSocket=new ze(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:n}=Ze(t),i=this._buildArgs([e.toBase58()],r,void 0,n),o=await this._rpcRequest("getBalance",i),s=(0,d.vt)(o,it((0,d.ai)()));if("error"in s)throw new we(s.error,`failed to get balance for ${e.toBase58()}`);return s.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(e=>e.value).catch(t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=(0,d.vt)(t,nt((0,d.me)((0,d.ai)())));if("error"in r)throw new we(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=(0,d.vt)(e,nt((0,d.ai)()));if("error"in t)throw new we(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=(0,d.vt)(e,Pt);if("error"in t)throw new we(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),n=(0,d.vt)(r,Tt);if("error"in n)throw new we(n.error,"failed to get supply");return n.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenSupply",r),i=(0,d.vt)(n,it(Rt));if("error"in i)throw new we(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenAccountBalance",r),i=(0,d.vt)(n,it(Rt));if("error"in i)throw new we(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,r){const{commitment:n,config:i}=Ze(r);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const s=this._buildArgs(o,n,"base64",i),a=await this._rpcRequest("getTokenAccountsByOwner",s),u=(0,d.vt)(a,Ct);if("error"in u)throw new we(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),s=(0,d.vt)(o,Ut);if("error"in s)throw new we(s.error,`failed to get token accounts owned by account ${e.toBase58()}`);return s.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=await this._rpcRequest("getLargestAccounts",r),i=(0,d.vt)(n,Mt);if("error"in i)throw new we(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenLargestAccounts",r),i=(0,d.vt)(n,Ot);if("error"in i)throw new we(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:n}=Ze(t),i=this._buildArgs([e.toBase58()],r,"base64",n),o=await this._rpcRequest("getAccountInfo",i),s=(0,d.vt)(o,it((0,d.me)(Lt)));if("error"in s)throw new we(s.error,`failed to get info about account ${e.toBase58()}`);return s.result}async getParsedAccountInfo(e,t){const{commitment:r,config:n}=Ze(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=await this._rpcRequest("getAccountInfo",i),s=(0,d.vt)(o,it((0,d.me)(Ft)));if("error"in s)throw new we(s.error,`failed to get info about account ${e.toBase58()}`);return s.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(t){throw new Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:n}=Ze(t),i=e.map(e=>e.toBase58()),o=this._buildArgs([i],r,"jsonParsed",n),s=await this._rpcRequest("getMultipleAccounts",o),a=(0,d.vt)(s,it((0,d.YO)((0,d.me)(Ft))));if("error"in a)throw new we(a.error,`failed to get info for accounts ${i}`);return a.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:n}=Ze(t),i=e.map(e=>e.toBase58()),o=this._buildArgs([i],r,"base64",n),s=await this._rpcRequest("getMultipleAccounts",o),a=(0,d.vt)(s,it((0,d.YO)((0,d.me)(Lt))));if("error"in a)throw new we(a.error,`failed to get info for accounts ${i}`);return a.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:n,config:i}=Ze(t),o=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),s=await this._rpcRequest("getStakeActivation",o),a=(0,d.vt)(s,nt(Gt));if("error"in a)throw new we(a.error,`failed to get Stake Activation ${e.toBase58()}`);return a.result}async getProgramAccounts(e,t){const{commitment:r,config:n}=Ze(t),{encoding:i,...o}=n||{},s=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:et(o.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",s),u=(0,d.YO)(Bt),c=!0===o.withContext?(0,d.vt)(a,it(u)):(0,d.vt)(a,nt(u));if("error"in c)throw new we(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:n}=Ze(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=await this._rpcRequest("getProgramAccounts",i),s=(0,d.vt)(o,nt((0,d.YO)(jt)));if("error"in s)throw new we(s.error,`failed to get accounts owned by program ${e.toBase58()}`);return s.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{const t=e;if(t.abortSignal?.aborted)return Promise.reject(t.abortSignal.reason);r=t.signature}try{n=u().decode(r)}catch(e){throw new Error("signature must be base58 encoded: "+r)}return X(64===n.length,"signature has invalid length"),"string"==typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,i=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise((o,s)=>{try{r=this.onSignature(t,(e,t)=>{r=void 0;const n={context:t,value:e};o({__type:ne.PROCESSED,response:n})},e);const a=new Promise(e=>{null==r?e():n=this._onSubscriptionStateChange(r,t=>{"subscribed"===t&&e()})});(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(t);if(i)return;if(null==r)return;const{context:n,value:u}=r;if(null!=u)if(u?.err)s(u.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===u.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===u.confirmationStatus||"confirmed"===u.confirmationStatus)return}i=!0,o({__type:ne.PROCESSED,response:{context:n,value:u}})}})()}catch(e){s(e)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i=!1;const o=new Promise(t=>{const n=async()=>{try{return await this.getBlockHeight(e)}catch(e){return-1}};(async()=>{let e=await n();if(!i){for(;e<=r;){if(await Ae(1e3),i)return;if(e=await n(),i)return}t({__type:ne.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),u=this.getCancellationPromise(t);let c;try{const e=await Promise.race([u,a,o]);if(e.__type!==ne.PROCESSED)throw new F(n);c=e.response}finally{i=!0,s()}return c}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:o}}){let s=!1;const a=new Promise(t=>{let o=i,a=null;const u=async()=>{try{const{context:t,value:i}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return a=t.slot,i?.nonce}catch(e){return o}};(async()=>{if(o=await u(),!s)for(;;){if(i!==o)return void t({__type:ne.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await Ae(2e3),s)return;if(o=await u(),s)return}})()}),{abortConfirmation:u,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),l=this.getCancellationPromise(t);let h;try{const t=await Promise.race([l,c,a]);if(t.__type===ne.PROCESSED)h=t.response;else{let n;for(;;){const e=await this.getSignatureStatus(o);if(null==e)break;if(!(e.context.slot<(t.slotInWhichNonceDidAdvance??r))){n=e;break}await Ae(400)}if(!n?.value)throw new G(o);{const t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new G(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new G(o);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new G(o)}h={context:n.context,value:{err:n.value.err}}}}}finally{s=!0,u()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const n=new Promise(t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout(()=>t({__type:ne.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let s;try{const e=await Promise.race([o,n]);if(e.__type!==ne.PROCESSED)throw new j(t,e.timeoutMs/1e3);s=e.response}finally{clearTimeout(r),i()}return s}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=(0,d.vt)(e,nt((0,d.YO)(Zt)));if("error"in t)throw new we(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),n=(0,d.vt)(r,tr);if("error"in n)throw new we(n.error,"failed to get vote accounts");return n.result}async getSlot(e){const{commitment:t,config:r}=Ze(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getSlot",n),o=(0,d.vt)(i,nt((0,d.ai)()));if("error"in o)throw new we(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:r}=Ze(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getSlotLeader",n),o=(0,d.vt)(i,nt((0,d.Yj)()));if("error"in o)throw new we(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const r=[e,t],n=await this._rpcRequest("getSlotLeaders",r),i=(0,d.vt)(n,nt((0,d.YO)(Xe)));if("error"in i)throw new we(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:r,value:n}=await this.getSignatureStatuses([e],t);return X(1===n.length),{context:r,value:n[0]}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const n=await this._rpcRequest("getSignatureStatuses",r),i=(0,d.vt)(n,ir);if("error"in i)throw new we(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:r}=Ze(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getTransactionCount",n),o=(0,d.vt)(i,nt((0,d.ai)()));if("error"in o)throw new we(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),n=(0,d.vt)(r,At);if("error"in n)throw new we(n.error,"failed to get inflation");return n.result}async getInflationReward(e,t,r){const{commitment:n,config:i}=Ze(r),o=this._buildArgs([e.map(e=>e.toBase58())],n,void 0,{...i,epoch:null!=t?t:i?.epoch}),s=await this._rpcRequest("getInflationReward",o),a=(0,d.vt)(s,ut);if("error"in a)throw new we(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=(0,d.vt)(e,St);if("error"in t)throw new we(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=Ze(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getEpochInfo",n),o=(0,d.vt)(i,It);if("error"in o)throw new we(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=(0,d.vt)(e,Nt);if("error"in t)throw new we(t.error,"failed to get epoch schedule");const r=t.result;return new He(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=(0,d.vt)(e,kt);if("error"in t)throw new we(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=(0,d.vt)(n,or);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getRecentBlockhash",t),n=(0,d.vt)(r,Cr);if("error"in n)throw new we(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=(0,d.vt)(t,Lr);if("error"in r)throw new we(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=(0,d.vt)(n,Br);if("error"in i)throw new we(i.error,"failed to get fee calculator");const{context:o,value:s}=i.result;return{context:o,value:null!==s?s.feeCalculator:null}}async getFeeForMessage(e,t){const r=I(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=await this._rpcRequest("getFeeForMessage",n),o=(0,d.vt)(i,it((0,d.me)((0,d.ai)())));if("error"in o)throw new we(o.error,"failed to get fee for message");if(null===o.result)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(e=>e.toBase58()),r=t?.length?[t]:[],n=await this._rpcRequest("getRecentPrioritizationFees",r),i=(0,d.vt)(n,_t);if("error"in i)throw new we(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=Ze(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),o=(0,d.vt)(i,xr);if("error"in o)throw new we(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:r,config:n}=Ze(t),i=this._buildArgs([e],r,void 0,n),o=await this._rpcRequest("isBlockhashValid",i),s=(0,d.vt)(o,Ur);if("error"in s)throw new we(s.error,"failed to determine if the blockhash `"+e+"`is valid");return s.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=(0,d.vt)(e,nt(yt));if("error"in t)throw new we(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=(0,d.vt)(e,nt((0,d.Yj)()));if("error"in t)throw new we(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:n}=Ze(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=(0,d.vt)(o,_r);if("error"in e)throw e.error;return e.result}case"none":{const e=(0,d.vt)(o,Sr);if("error"in e)throw e.error;return e.result}default:{const e=(0,d.vt)(o,Ar);if("error"in e)throw e.error;const{result:t}=e;return t?{...t,transactions:t.transactions.map(({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:st(r,e.message)},version:r}))}:null}}}catch(e){throw new we(e,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:n}=Ze(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=(0,d.vt)(o,Nr);if("error"in e)throw e.error;return e.result}case"none":{const e=(0,d.vt)(o,kr);if("error"in e)throw e.error;return e.result}default:{const e=(0,d.vt)(o,Ir);if("error"in e)throw e.error;return e.result}}}catch(e){throw new we(e,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){const{commitment:n,...i}=e;r=n,t=i}const n=this._buildArgs([],r,"base64",t),i=await this._rpcRequest("getBlockProduction",n),o=(0,d.vt)(i,Et);if("error"in o)throw new we(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:r,config:n}=Ze(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=await this._rpcRequest("getTransaction",i),s=(0,d.vt)(o,Rr);if("error"in s)throw new we(s.error,"failed to get transaction");const a=s.result;return a?{...a,transaction:{...a.transaction,message:st(a.version,a.transaction.message)}}:a}async getParsedTransaction(e,t){const{commitment:r,config:n}=Ze(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=await this._rpcRequest("getTransaction",i),s=(0,d.vt)(o,Or);if("error"in s)throw new we(s.error,"failed to get transaction");return s.result}async getParsedTransactions(e,t){const{commitment:r,config:n}=Ze(t),i=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n)}));return(await this._rpcBatchRequest(i)).map(e=>{const t=(0,d.vt)(e,Or);if("error"in t)throw new we(t.error,"failed to get transactions");return t.result})}async getTransactions(e,t){const{commitment:r,config:n}=Ze(t),i=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,n)}));return(await this._rpcBatchRequest(i)).map(e=>{const t=(0,d.vt)(e,Rr);if("error"in t)throw new we(t.error,"failed to get transactions");const r=t.result;return r?{...r,transaction:{...r.transaction,message:st(r.version,r.transaction.message)}}:r})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=await this._rpcRequest("getConfirmedBlock",r),i=(0,d.vt)(n,Pr);if("error"in i)throw new we(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const s={...o,transactions:o.transactions.map(({transaction:e,meta:t})=>{const r=new ee(e.message);return{meta:t,transaction:{...e,message:r}}})};return{...s,transactions:s.transactions.map(({transaction:e,meta:t})=>({meta:t,transaction:se.populate(e.message,e.signatures)}))}}async getBlocks(e,t,r){const n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=await this._rpcRequest("getBlocks",n),o=(0,d.vt)(i,nt((0,d.YO)((0,d.ai)())));if("error"in o)throw new we(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=(0,d.vt)(n,Tr);if("error"in i)throw new we(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=(0,d.vt)(n,Tr);if("error"in i)throw new we(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=await this._rpcRequest("getConfirmedTransaction",r),i=(0,d.vt)(n,Rr);if("error"in i)throw new we(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const s=new ee(o.transaction.message),a=o.transaction.signatures;return{...o,transaction:se.populate(s,a)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=(0,d.vt)(n,Or);if("error"in i)throw new we(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const r=e.map(e=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(e=>{const t=(0,d.vt)(e,Or);if("error"in t)throw new we(t.error,"failed to get confirmed transactions");return t.result})}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0||t<i);)try{const e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let o=await this.getSlot("finalized");for(;!("before"in n||++r>o);)try{const e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}return(await this.getConfirmedSignaturesForAddress2(e,n)).map(e=>e.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),o=(0,d.vt)(i,Wt);if("error"in o)throw new we(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",n),o=(0,d.vt)(i,Ht);if("error"in o)throw new we(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=new Ve({key:e,state:Ve.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=Pe.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(e=>e.value).catch(t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),n=(0,d.vt)(r,Dr);if("error"in n)throw new we(n.error,`airdrop to ${e.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ae(100);const e=Date.now()-this._blockhashInfo.lastFetch>=$e;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let e=0;e<50;e++){const e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await Ae(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=Ze(e),n=this._buildArgs([],t,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),o=(0,d.vt)(i,it((0,d.ai)()));if("error"in o)throw new we(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,r){if("message"in e){const i=e.serialize(),o=n.Buffer.from(i).toString("base64");if(Array.isArray(t)||void 0!==r)throw new Error("Invalid arguments");const s=t||{};s.encoding="base64","commitment"in s||(s.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(s.innerInstructions=t.innerInstructions);const a=[o,s],u=await this._rpcRequest("simulateTransaction",a),c=(0,d.vt)(u,wt);if("error"in c)throw new Error("failed to simulate transaction: "+c.error.message);return c.result}let i;if(e instanceof se){let t=e;i=new se,i.feePayer=t.feePayer,i.instructions=e.instructions,i.nonceInfo=t.nonceInfo,i.signatures=t.signatures}else i=se.populate(e),i._message=i._json=void 0;if(void 0!==t&&!Array.isArray(t))throw new Error("Invalid arguments");const o=t;if(i.nonceInfo&&o)i.sign(...o);else{let e=this._disableBlockhashCaching;for(;;){const t=await this._blockhashWithExpiryBlockHeight(e);if(i.lastValidBlockHeight=t.lastValidBlockHeight,i.recentBlockhash=t.blockhash,!o)break;if(i.sign(...o),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}e=!0}}const s=i._compile(),a=s.serialize(),u=i._serialize(a).toString("base64"),c={encoding:"base64",commitment:this.commitment};if(r){const e=(Array.isArray(r)?r:s.nonProgramIds()).map(e=>e.toBase58());c.accounts={encoding:"base64",addresses:e}}o&&(c.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(c.innerInstructions=t.innerInstructions);const l=[u,c],h=await this._rpcRequest("simulateTransaction",l),f=(0,d.vt)(h,wt);if("error"in f){let e;if("data"in f.error&&(e=f.error.data.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(f.error.message,r)}throw new be({action:"simulate",signature:"",transactionMessage:f.error.message,logs:e})}return f.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");const n=t;if(e.nonceInfo)e.sign(...n);else{let t=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(t);if(e.lastValidBlockHeight=r.lastValidBlockHeight,e.recentBlockhash=r.blockhash,e.sign(...n),!e.signature)throw new Error("!signature");const i=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}t=!0}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){const r=I(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const o=[e,r],s=await this._rpcRequest("sendTransaction",o),a=(0,d.vt)(s,Fr);if("error"in a){let e;throw"data"in a.error&&(e=a.error.data.logs),new be({action:n?"send":"simulate",signature:"",transactionMessage:a.error.message,logs:e})}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,t])=>{this._setSubscription(e,{...t,state:"pending"})})):this._updateSubscriptions()}_setSubscription(e,t){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach(e=>{try{e(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};const n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async e=>{const r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});const t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(o){if(console.error(`Received ${o instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:o}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!t())return;return this._setSubscription(e,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach(e=>{try{e(...t)}catch(e){console.error(e)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=(0,d.vt)(e,Kt);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,n=Ge([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const t=this._subscriptionsByHash[n];X(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:n,config:i}=Ze(r),o=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=(0,d.vt)(e,Vt);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){const{commitment:i,config:o}=Ze(r),s=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(n?{filters:et(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=(0,d.vt)(e,Gr);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=(0,d.vt)(e,Jt);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=(0,d.vt)(e,Yt);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){const i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=(0,d.vt)(e,Qt);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch(e){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],n,void 0,i),s=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(s)}catch(e){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=(0,d.vt)(e,$t);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Kr{constructor(e){this._keypair=void 0,this._keypair=e??w()}static generate(){return new Kr(w())}static fromSecretKey(e,t){if(64!==e.byteLength)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const t=e.slice(0,32),n=E(t);for(let e=0;e<32;e++)if(r[e]!==n[e])throw new Error("provided secretKey is invalid")}return new Kr({publicKey:r,secretKey:e})}static fromSeed(e){const t=E(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new Kr({publicKey:t,secretKey:r})}get publicKey(){return new x(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const zr=Object.freeze({CreateLookupTable:{index:0,layout:h.w3([h.DH("instruction"),Te("recentSlot"),h.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:h.w3([h.DH("instruction")])},ExtendLookupTable:{index:2,layout:h.w3([h.DH("instruction"),Te(),h.O6(H(),h.cY(h.DH(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:h.w3([h.DH("instruction")])},CloseLookupTable:{index:4,layout:h.w3([h.DH("instruction")])}});class Vr{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(zr))if(n.index==t){r=e;break}if(!r)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return r}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=_e(zr.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=_e(zr.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(e=>new x(e))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(qr.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class qr{constructor(){}static createLookupTable(e){const[t,r]=x.findProgramAddressSync([e.authority.toBuffer(),(0,f.Bq)(BigInt(e.recentSlot),8)],this.programId),n=Se(zr.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),i=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Ce.programId,isSigner:!1,isWritable:!1}];return[new oe({programId:this.programId,keys:i,data:n}),t]}static freezeLookupTable(e){const t=Se(zr.FreezeLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new oe({programId:this.programId,keys:r,data:t})}static extendLookupTable(e){const t=Se(zr.ExtendLookupTable,{addresses:e.addresses.map(e=>e.toBytes())}),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&r.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Ce.programId,isSigner:!1,isWritable:!1}),new oe({programId:this.programId,keys:r,data:t})}static deactivateLookupTable(e){const t=Se(zr.DeactivateLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new oe({programId:this.programId,keys:r,data:t})}static closeLookupTable(e){const t=Se(zr.CloseLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new oe({programId:this.programId,keys:r,data:t})}}qr.programId=new x("AddressLookupTab1e1111111111111111111111111");class Jr{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.u8("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(Xr))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return r}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:r}=_e(Xr.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=_e(Xr.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=_e(Xr.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=_e(Xr.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Yr.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Xr=Object.freeze({RequestUnits:{index:0,layout:h.w3([h.u8("instruction"),h.DH("units"),h.DH("additionalFee")])},RequestHeapFrame:{index:1,layout:h.w3([h.u8("instruction"),h.DH("bytes")])},SetComputeUnitLimit:{index:2,layout:h.w3([h.u8("instruction"),h.DH("units")])},SetComputeUnitPrice:{index:3,layout:h.w3([h.u8("instruction"),Te("microLamports")])}});class Yr{constructor(){}static requestUnits(e){const t=Se(Xr.RequestUnits,e);return new oe({keys:[],programId:this.programId,data:t})}static requestHeapFrame(e){const t=Se(Xr.RequestHeapFrame,e);return new oe({keys:[],programId:this.programId,data:t})}static setComputeUnitLimit(e){const t=Se(Xr.SetComputeUnitLimit,e);return new oe({keys:[],programId:this.programId,data:t})}static setComputeUnitPrice(e){const t=Se(Xr.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new oe({keys:[],programId:this.programId,data:t})}}Yr.programId=new x("ComputeBudget111111111111111111111111111111");const Qr=h.w3([h.u8("numSignatures"),h.u8("padding"),h.NX("signatureOffset"),h.NX("signatureInstructionIndex"),h.NX("publicKeyOffset"),h.NX("publicKeyInstructionIndex"),h.NX("messageDataOffset"),h.NX("messageDataSize"),h.NX("messageInstructionIndex")]);class $r{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:i,instructionIndex:o}=e;X(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),X(64===i.length,`Signature must be 64 bytes but received ${i.length} bytes`);const s=Qr.span,a=s+t.length,u=a+i.length,c=n.Buffer.alloc(u+r.length),l=null==o?65535:o;return Qr.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:l,publicKeyOffset:s,publicKeyInstructionIndex:l,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:l},c),c.fill(t,s),c.fill(i,a),c.fill(r,u),new oe({keys:[],programId:$r.programId,data:c})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;X(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{const e=Kr.fromSecretKey(t),i=e.publicKey.toBytes(),o=S(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:o,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}$r.programId=new x("Ed25519SigVerify111111111111111111111111111"),b.bI.utils.isValidPrivateKey;const Zr=b.bI.getPublicKey,en=h.w3([h.u8("numSignatures"),h.NX("signatureOffset"),h.u8("signatureInstructionIndex"),h.NX("ethAddressOffset"),h.u8("ethAddressInstructionIndex"),h.NX("messageDataOffset"),h.NX("messageDataSize"),h.u8("messageInstructionIndex"),h.av(20,"ethAddress"),h.av(64,"signature"),h.u8("recoveryId")]);class tn{constructor(){}static publicKeyToEthAddress(e){X(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return n.Buffer.from((0,y.lY)(I(e))).slice(-20)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:o}=e;return tn.createInstructionWithEthAddress({ethAddress:tn.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:i,recoveryId:o,instructionIndex:s=0}=e;let a;a="string"==typeof t?t.startsWith("0x")?n.Buffer.from(t.substr(2),"hex"):n.Buffer.from(t,"hex"):t,X(20===a.length,`Address must be 20 bytes but received ${a.length} bytes`);const u=12+a.length,c=u+i.length+1,l=n.Buffer.alloc(en.span+r.length);return en.encode({numSignatures:1,signatureOffset:u,signatureInstructionIndex:s,ethAddressOffset:12,ethAddressInstructionIndex:s,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:s,signature:I(i),ethAddress:I(a),recoveryId:o},l),l.fill(I(r),en.span),new oe({keys:[],programId:tn.programId,data:l})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:i}=e;X(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{const e=I(t),o=Zr(e,!1).slice(1),s=n.Buffer.from((0,y.lY)(I(r))),[a,u]=((e,t)=>{const r=b.bI.sign(e,t);return[r.toCompactRawBytes(),r.recovery]})(s,e);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:a,recoveryId:u,instructionIndex:i})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}var rn;tn.programId=new x("KeccakSecp256k11111111111111111111111111111");const nn=new x("StakeConfig11111111111111111111111111111111");class on{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class sn{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}rn=sn,sn.default=new rn(0,0,x.default);class an{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(un))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a StakeInstruction");return r}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:r}=_e(un.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new on(new x(t.staker),new x(t.withdrawer)),lockup:new sn(r.unixTimestamp,r.epoch,new x(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),_e(un.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:r}=_e(un.Authorize,e.data),n={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new x(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(n.custodianPubkey=e.keys[3].pubkey),n}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=_e(un.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:n,authorityOwner:new x(i),newAuthorizedPubkey:new x(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=_e(un.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),_e(un.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=_e(un.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),_e(un.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(ln.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const un=Object.freeze({Initialize:{index:0,layout:h.w3([h.DH("instruction"),((e="authorized")=>h.w3([H("staker"),H("withdrawer")],e))(),((e="lockup")=>h.w3([h.Wg("unixTimestamp"),h.Wg("epoch"),H("custodian")],e))()])},Authorize:{index:1,layout:h.w3([h.DH("instruction"),H("newAuthorized"),h.DH("stakeAuthorizationType")])},Delegate:{index:2,layout:h.w3([h.DH("instruction")])},Split:{index:3,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},Withdraw:{index:4,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},Deactivate:{index:5,layout:h.w3([h.DH("instruction")])},Merge:{index:7,layout:h.w3([h.DH("instruction")])},AuthorizeWithSeed:{index:8,layout:h.w3([h.DH("instruction"),H("newAuthorized"),h.DH("stakeAuthorizationType"),z("authoritySeed"),H("authorityOwner")])}}),cn=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ln{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:n}=e,i=n||sn.default,o=Se(un.Initialize,{authorized:{staker:I(r.staker.toBuffer()),withdrawer:I(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:I(i.custodian.toBuffer())}}),s={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:de,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new oe(s)}static createAccountWithSeed(e){const t=new se;t.add(Ce.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){const t=new se;t.add(Ce.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=Se(un.Delegate);return(new se).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:ce,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:nn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:o}=e,s=Se(un.Authorize,{newAuthorized:I(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ce,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!0,isWritable:!1}),(new se).add({keys:a,programId:this.programId,data:s})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:s,custodianPubkey:a}=e,u=Se(un.AuthorizeWithSeed,{newAuthorized:I(o.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:n,authorityOwner:I(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:ce,isSigner:!1,isWritable:!1}];return a&&c.push({pubkey:a,isSigner:!0,isWritable:!1}),(new se).add({keys:c,programId:this.programId,data:u})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,o=Se(un.Split,{lamports:i});return new oe({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(e,t){const r=new se;return r.add(Ce.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:o,seed:s,lamports:a}=e,u=new se;return u.add(Ce.allocate({accountPubkey:i,basePubkey:o,seed:s,space:this.space,programId:this.programId})),t&&t>0&&u.add(Ce.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),u.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=Se(un.Merge);return(new se).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ce,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:o}=e,s=Se(un.Withdraw,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ce,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!0,isWritable:!1}),(new se).add({keys:a,programId:this.programId,data:s})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,n=Se(un.Deactivate);return(new se).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ce,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}ln.programId=new x("Stake11111111111111111111111111111111111111"),ln.space=200;class hn{constructor(e,t,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=n}}class fn{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(dn))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a VoteInstruction");return r}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=_e(dn.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new hn(new x(t.nodePubkey),new x(t.authorizedVoter),new x(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:r}=_e(dn.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new x(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=_e(dn.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new x(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new x(n),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=_e(dn.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(gn.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const dn=Object.freeze({InitializeAccount:{index:0,layout:h.w3([h.DH("instruction"),((e="voteInit")=>h.w3([H("nodePubkey"),H("authorizedVoter"),H("authorizedWithdrawer"),h.u8("commission")],e))()])},Authorize:{index:1,layout:h.w3([h.DH("instruction"),H("newAuthorized"),h.DH("voteAuthorizationType")])},Withdraw:{index:3,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},UpdateValidatorIdentity:{index:4,layout:h.w3([h.DH("instruction")])},AuthorizeWithSeed:{index:10,layout:h.w3([h.DH("instruction"),((e="voteAuthorizeWithSeedArgs")=>h.w3([h.DH("voteAuthorizationType"),H("currentAuthorityDerivedKeyOwnerPubkey"),z("currentAuthorityDerivedKeySeed"),H("newAuthorized")],e))()])}}),pn=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class gn{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=Se(dn.InitializeAccount,{voteInit:{nodePubkey:I(n.nodePubkey.toBuffer()),authorizedVoter:I(n.authorizedVoter.toBuffer()),authorizedWithdrawer:I(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:de,isSigner:!1,isWritable:!1},{pubkey:ce,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new oe(o)}static createAccount(e){const t=new se;return t.add(Ce.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,o=Se(dn.Authorize,{newAuthorized:I(n.toBuffer()),voteAuthorizationType:i.index}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ce,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new se).add({keys:s,programId:this.programId,data:o})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:s}=e,a=Se(dn.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:I(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:I(i.toBuffer()),voteAuthorizationType:o.index}}),u=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:ce,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new se).add({keys:u,programId:this.programId,data:a})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,o=Se(dn.Withdraw,{lamports:n}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new se).add({keys:s,programId:this.programId,data:o})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return gn.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=Se(dn.UpdateValidatorIdentity),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new se).add({keys:o,programId:this.programId,data:i})}}gn.programId=new x("Vote111111111111111111111111111111111111111"),gn.space=3762;const mn=new x("Va1idator1nfo111111111111111111111111111111"),yn=(0,d.NW)({name:(0,d.Yj)(),website:(0,d.lq)((0,d.Yj)()),details:(0,d.lq)((0,d.Yj)()),iconUrl:(0,d.lq)((0,d.Yj)()),keybaseUsername:(0,d.lq)((0,d.Yj)())});class bn{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(2!==q(t))return null;const r=[];for(let e=0;e<2;e++){const e=new x(Z(t,0,O)),n=1===$(t);r.push({publicKey:e,isSigner:n})}if(r[0].publicKey.equals(mn)&&r[1].isSigner){const e=z().decode(n.Buffer.from(t)),i=JSON.parse(e);return(0,d.vA)(i,yn),new bn(r[1].publicKey,i)}return null}}const vn=new x("Vote111111111111111111111111111111111111111"),wn=h.w3([H("nodePubkey"),H("authorizedWithdrawer"),h.u8("commission"),h.I0(),h.O6(h.w3([h.I0("slot"),h.DH("confirmationCount")]),h.cY(h.DH(),-8),"votes"),h.u8("rootSlotValid"),h.I0("rootSlot"),h.I0(),h.O6(h.w3([h.I0("epoch"),H("authorizedVoter")]),h.cY(h.DH(),-8),"authorizedVoters"),h.w3([h.O6(h.w3([H("authorizedPubkey"),h.I0("epochOfLastAuthorizedSwitch"),h.I0("targetEpoch")]),32,"buf"),h.I0("idx"),h.u8("isEmpty")],"priorVoters"),h.I0(),h.O6(h.w3([h.I0("epoch"),h.I0("credits"),h.I0("prevCredits")]),h.cY(h.DH(),-8),"epochCredits"),h.w3([h.I0("slot"),h.I0("timestamp")],"lastTimestamp")]);class En{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const t=wn.decode(I(e),4);let r=t.rootSlot;return t.rootSlotValid||(r=null),new En({nodePubkey:new x(t.nodePubkey),authorizedWithdrawer:new x(t.authorizedWithdrawer),commission:t.commission,votes:t.votes,rootSlot:r,authorizedVoters:t.authorizedVoters.map(An),priorVoters:_n(t.priorVoters),epochCredits:t.epochCredits,lastTimestamp:t.lastTimestamp})}}function An({authorizedVoter:e,epoch:t}){return{epoch:t,authorizedVoter:new x(e)}}function Sn({authorizedPubkey:e,epochOfLastAuthorizedSwitch:t,targetEpoch:r}){return{authorizedPubkey:new x(e),epochOfLastAuthorizedSwitch:t,targetEpoch:r}}function _n({buf:e,idx:t,isEmpty:r}){return r?[]:[...e.slice(t+1).map(Sn),...e.slice(0,t).map(Sn)]}const In={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Nn(e,t){const r=!1===t?"http":"https";if(!e)return In[r].devnet;const n=In[r][e];if(!n)throw new Error(`Unknown ${r} cluster: ${e}`);return n}async function kn(e,t,r,n){let i,o;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,o=n):o=r;const s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await e.sendRawTransaction(t,s),u=o&&o.commitment,c=i?e.confirmTransaction(i,u):e.confirmTransaction(a,u),l=(await c).value;if(l.err){if(null!=a)throw new be({action:s?.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(l)})`});throw new Error(`Raw transaction ${a} failed (${JSON.stringify(l)})`)}return a}const Pn=1e9},89239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thorchainDescribePath=function(e){const t={verbose:(0,n.addressNListToBIP32)(e),coin:"Rune",isKnown:!1};if(5!=e.length)return t;if(2147483692!=e[0])return t;if(e[1]!=2147483648+(0,n.slip44ByCoin)("Rune"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(0!==e[3]||0!==e[4])return t;const r=2147483647&e[2];return{verbose:`Thorchain Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Thorchain",isKnown:!0,isPrefork:!1}};const n=r(33612)},90189:(e,t,r)=>{"use strict";r.d(t,{v:()=>l});var n=r(61220),i=r(23842),o=r(29841),s=r(33862),a=r(34050),u=r(58701),c=r(19574),l=function(e){function t(r,n,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o.I;break;case 1:if(!r){s.destination=o.I;break}if("object"==typeof r){r instanceof t?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new h(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new h(s,r,n,i)}return s}return n.C6(t,e),t.prototype[a.D]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(s.y),h=function(e){function t(t,r,n,s){var a,u=e.call(this)||this;u._parentSubscriber=t;var c=u;return(0,i.T)(r)?a=r:r&&(a=r.next,n=r.error,s=r.complete,r!==o.I&&(c=Object.create(r),(0,i.T)(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=a,u._error=n,u._complete=s,u}return n.C6(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;u.$.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=u.$.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.T)(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;(0,c.T)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};u.$.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),u.$.useDeprecatedSynchronousErrorHandling)throw e;(0,c.T)(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!u.$.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return u.$.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):((0,c.T)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(l)},91057:(e,t,r)=>{"use strict";r.d(t,{V:()=>o});var n=r(86323),i=r(33862);function o(e,t){return new n.c(function(r){var n=new i.y,o=0;return n.add(t.schedule(function(){o!==e.length?(r.next(e[o++]),r.closed||n.add(this.schedule())):r.complete()})),n})}},91326:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(84008)),o=n(r(27294));function s(e,t){const r=e[t];if(void 0===r)throw new Error(`No input #${t}`);return r}function a(e,t){const r=e[t];if(void 0===r)throw new Error(`No output #${t}`);return r}function u(e,t,r,n){throw new Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function c(e){return(t,r)=>{for(const n of Object.keys(t)){const o=t[n],{canAdd:s,canAddToArray:a,check:c,expected:l}=i[e+"s"][n]||{};if(c)if(a){if(!Array.isArray(o)||r[n]&&!Array.isArray(r[n]))throw new Error(`Key type ${n} must be an array`);o.every(c)||u(e,n,l,o);const t=r[n]||[],i=new Set;if(!o.every(e=>a(t,e,i)))throw new Error("Can not add duplicate data to array");r[n]=t.concat(o)}else{if(c(o)||u(e,n,l,o),!s(r,o))throw new Error(`Can not add duplicate data to ${e}`);r[n]=o}}}}t.checkForInput=s,t.checkForOutput=a,t.checkHasKey=function(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter(t=>0===o.compare(t.key,e.key)).length)throw new Error(`Duplicate Key: ${o.toHex(e.key)}`)},t.getEnumLength=function(e){let t=0;return Object.keys(e).forEach(e=>{Number(isNaN(Number(e)))&&t++}),t},t.inputCheckUncleanFinalized=function(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){const e=!!t.redeemScript,n=!!t.witnessScript,i=!e||!!t.finalScriptSig,o=!n||!!t.finalScriptWitness,s=!!t.finalScriptSig||!!t.finalScriptWitness;r=i&&o&&s}if(!1===r)throw new Error(`Input #${e} has too much or too little data to clean`)},t.updateGlobal=c("global"),t.updateInput=c("input"),t.updateOutput=c("output"),t.addInputAttributes=function(e,r){const n=s(e,e.length-1);t.updateInput(r,n)},t.addOutputAttributes=function(e,r){const n=a(e,e.length-1);t.updateOutput(r,n)},t.defaultVersionSetter=function(e,t){if(!(t instanceof Uint8Array)||t.length<4)throw new Error("Set Version: Invalid Transaction");return o.writeUInt32(t,0,e,"LE"),t},t.defaultLocktimeSetter=function(e,t){if(!(t instanceof Uint8Array)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return o.writeUInt32(t,t.length-4,e,"LE"),t}},91661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(77496);t.encode=function(e){return{key:new Uint8Array([n.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}},94017:(e,t,r)=>{"use strict";r.r(t),r.d(t,{audit:()=>o,auditTime:()=>l,buffer:()=>h,bufferCount:()=>g,bufferTime:()=>w,bufferToggle:()=>R,bufferWhen:()=>x,catchError:()=>L,combineAll:()=>j,combineLatest:()=>H,concat:()=>z,concatAll:()=>V.K,concatMap:()=>J,concatMapTo:()=>X,count:()=>Y,debounce:()=>Z,debounceTime:()=>re,defaultIfEmpty:()=>se,delay:()=>he,delayWhen:()=>me,dematerialize:()=>Ee,distinct:()=>_e,distinctUntilChanged:()=>ke,distinctUntilKeyChanged:()=>Re,elementAt:()=>We,endWith:()=>Ke,every:()=>ze,exhaust:()=>Je,exhaustMap:()=>$e,expand:()=>tt,filter:()=>Ce.p,finalize:()=>it,find:()=>at,findIndex:()=>lt,first:()=>ft,flatMap:()=>q.qI,groupBy:()=>dt.$,ignoreElements:()=>pt,isEmpty:()=>yt,last:()=>St,map:()=>Qe.T,mapTo:()=>_t,materialize:()=>kt,max:()=>Mt,merge:()=>Bt,mergeAll:()=>Dt.U,mergeMap:()=>q.ZZ,mergeMapTo:()=>Ft,mergeScan:()=>jt,min:()=>Ht,multicast:()=>zt,observeOn:()=>qt.QE,onErrorResumeNext:()=>Jt,pairwise:()=>Qt,partition:()=>tr,pluck:()=>rr,publish:()=>ir,publishBehavior:()=>sr,publishLast:()=>ur,publishReplay:()=>lr,race:()=>fr,reduce:()=>Ut,refCount:()=>Ir.B,repeat:()=>dr,repeatWhen:()=>mr,retry:()=>vr,retryWhen:()=>Ar,sample:()=>Nr,sampleTime:()=>Tr,scan:()=>Rt,sequenceEqual:()=>xr,share:()=>Dr,shareReplay:()=>Fr,single:()=>jr,skip:()=>Hr,skipLast:()=>Vr,skipUntil:()=>Xr,skipWhile:()=>$r,startWith:()=>tn,subscribeOn:()=>sn,switchAll:()=>hn,switchMap:()=>un,switchMapTo:()=>fn,take:()=>Fe,takeLast:()=>wt,takeUntil:()=>dn,takeWhile:()=>mn,tap:()=>En,throttle:()=>In,throttleTime:()=>Pn,throwIfEmpty:()=>Ue,timeInterval:()=>xn,timeout:()=>jn,timeoutWith:()=>Ln,timestamp:()=>Gn,toArray:()=>Kn,window:()=>zn,windowCount:()=>Jn,windowTime:()=>Qn,windowToggle:()=>ii,windowWhen:()=>ai,withLatestFrom:()=>li,zip:()=>pi,zipAll:()=>gi});var n=r(61220),i=r(2683);function o(e){return function(t){return t.lift(new s(e))}}var s=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.durationSelector))},e}(),a=function(e){function t(t,r){var n=e.call(this,t)||this;return n.durationSelector=r,n.hasValue=!1,n}return n.C6(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=void 0;try{t=(0,this.durationSelector)(e)}catch(e){return this.destination.error(e)}var r=(0,i.tS)(t,new i.zA(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}},t.prototype.clearThrottle=function(){var e=this,t=e.value,r=e.hasValue,n=e.throttled;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),r&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(i.gn),u=r(21505),c=r(57572);function l(e,t){return void 0===t&&(t=u.b),o(function(){return(0,c.O)(e,t)})}function h(e){return function(t){return t.lift(new f(e))}}var f=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.closingNotifier))},e}(),d=function(e){function t(t,r){var n=e.call(this,t)||this;return n.buffer=[],n.add((0,i.tS)(r,new i.zA(n))),n}return n.C6(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},t}(i.gn),p=r(90189);function g(e,t){return void 0===t&&(t=null),function(r){return r.lift(new m(e,t))}}var m=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?b:y}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),y=function(e){function t(t,r){var n=e.call(this,t)||this;return n.bufferSize=r,n.buffer=[],n}return n.C6(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(p.v),b=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.bufferSize=r,i.startBufferEvery=n,i.buffers=[],i.count=0,i}return n.C6(t,e),t.prototype._next=function(e){var t=this,r=t.bufferSize,n=t.startBufferEvery,i=t.buffers,o=t.count;this.count++,o%n===0&&i.push([]);for(var s=i.length;s--;){var a=i[s];a.push(e),a.length===r&&(i.splice(s,1),this.destination.next(a))}},t.prototype._complete=function(){for(var t=this.buffers,r=this.destination;t.length>0;){var n=t.shift();n.length>0&&r.next(n)}e.prototype._complete.call(this)},t}(p.v),v=r(42637);function w(e){var t=arguments.length,r=u.b;(0,v.m)(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var n=null;t>=2&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),function(t){return t.lift(new E(e,n,i,r))}}var E=function(){function e(e,t,r,n){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new S(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),A=function(){return function(){this.buffer=[]}}(),S=function(e){function t(t,r,n,i,o){var s=e.call(this,t)||this;s.bufferTimeSpan=r,s.bufferCreationInterval=n,s.maxBufferSize=i,s.scheduler=o,s.contexts=[];var a=s.openContext();if(s.timespanOnly=null==n||n<0,s.timespanOnly){var u={subscriber:s,context:a,bufferTimeSpan:r};s.add(a.closeAction=o.schedule(_,r,u))}else{var c={subscriber:s,context:a},l={bufferTimeSpan:r,bufferCreationInterval:n,subscriber:s,scheduler:o};s.add(a.closeAction=o.schedule(N,r,c)),s.add(o.schedule(I,n,l))}return s}return n.C6(t,e),t.prototype._next=function(e){for(var t,r=this.contexts,n=r.length,i=0;i<n;i++){var o=r[i],s=o.buffer;s.push(e),s.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,r=this.destination;t.length>0;){var n=t.shift();r.next(n.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var r=this.bufferTimeSpan,n={subscriber:this,context:e,bufferTimeSpan:r};this.add(e.closeAction=this.scheduler.schedule(_,r,n))}},t.prototype.openContext=function(){var e=new A;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(p.v);function _(e){var t=e.subscriber,r=e.context;r&&t.closeContext(r),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function I(e){var t=e.bufferCreationInterval,r=e.bufferTimeSpan,n=e.subscriber,i=e.scheduler,o=n.openContext();n.closed||(n.add(o.closeAction=i.schedule(N,r,{subscriber:n,context:o})),this.schedule(e,t))}function N(e){var t=e.subscriber,r=e.context;t.closeContext(r)}var k=r(33862),P=r(41117),T=r(3490);function R(e,t){return function(r){return r.lift(new O(e,t))}}var O=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new C(e,this.openings,this.closingSelector))},e}(),C=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.closingSelector=n,i.contexts=[],i.add((0,P.F)(i,r)),i}return n.C6(t,e),t.prototype._next=function(e){for(var t=this.contexts,r=t.length,n=0;n<r;n++)t[n].buffer.push(e)},t.prototype._error=function(t){for(var r=this.contexts;r.length>0;){var n=r.shift();n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var r=t.shift();this.destination.next(r.buffer),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var r=e.buffer,n=e.subscription;this.destination.next(r),t.splice(t.indexOf(e),1),this.remove(n),n.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,r=new k.y,n={buffer:[],subscription:r};t.push(n);var i=(0,P.F)(this,e,n);!i||i.closed?this.closeBuffer(n):(i.context=n,this.add(i),r.add(i))},t}(T.E);function x(e){return function(t){return t.lift(new U(e))}}var U=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new M(e,this.closingSelector))},e}(),M=function(e){function t(t,r){var n=e.call(this,t)||this;return n.closingSelector=r,n.subscribing=!1,n.openBuffer(),n}return n.C6(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,r=this.buffer;this.buffer&&this.destination.next(r),this.buffer=[];try{t=(0,this.closingSelector)()}catch(e){return this.error(e)}e=new k.y,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add((0,i.tS)(t,new i.zA(this))),this.subscribing=!1},t}(i.gn);function L(e){return function(t){var r=new B(e),n=t.lift(r);return r.caught=n}}var B=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new D(e,this.selector,this.caught))},e}(),D=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.selector=r,i.caught=n,i}return n.C6(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var n=new i.zA(this);this.add(n);var o=(0,i.tS)(r,n);o!==n&&this.add(o)}},t}(i.gn),F=r(4439);function j(e){return function(t){return t.lift(new F.ZS(e))}}var G=r(81065),W=r(80125);function H(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&(0,G.c)(e[0])&&(e=e[0].slice()),function(t){return t.lift.call((0,W.H)([t].concat(e)),new F.ZS(r))}}var K=r(77041);function z(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(K.x.apply(void 0,[t].concat(e)))}}var V=r(99958),q=r(54863);function J(e,t){return(0,q.ZZ)(e,t,1)}function X(e,t){return J(function(){return e},t)}function Y(e){return function(t){return t.lift(new Q(e,t))}}var Q=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new $(e,this.predicate,this.source))},e}(),$=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.predicate=r,i.source=n,i.count=0,i.index=0,i}return n.C6(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(p.v);function Z(e){return function(t){return t.lift(new ee(e))}}var ee=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new te(e,this.durationSelector))},e}(),te=function(e){function t(t,r){var n=e.call(this,t)||this;return n.durationSelector=r,n.hasValue=!1,n}return n.C6(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var r=this.durationSubscription;this.value=e,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),(r=(0,i.tS)(t,new i.zA(this)))&&!r.closed&&this.add(this.durationSubscription=r)},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,r=this.durationSubscription;r&&(this.durationSubscription=void 0,r.unsubscribe(),this.remove(r)),this.value=void 0,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(i.gn);function re(e,t){return void 0===t&&(t=u.b),function(r){return r.lift(new ne(e,t))}}var ne=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new ie(e,this.dueTime,this.scheduler))},e}(),ie=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.dueTime=r,i.scheduler=n,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return n.C6(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(oe,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(p.v);function oe(e){e.debouncedNext()}function se(e){return void 0===e&&(e=null),function(t){return t.lift(new ae(e))}}var ae=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new ue(e,this.defaultValue))},e}(),ue=function(e){function t(t,r){var n=e.call(this,t)||this;return n.defaultValue=r,n.isEmpty=!0,n}return n.C6(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(p.v);function ce(e){return e instanceof Date&&!isNaN(+e)}var le=r(19376);function he(e,t){void 0===t&&(t=u.b);var r=ce(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new fe(r,t))}}var fe=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new de(e,this.delay,this.scheduler))},e}(),de=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.delay=r,i.scheduler=n,i.queue=[],i.active=!1,i.errored=!1,i}return n.C6(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,i=e.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var o=Math.max(0,r[0].time-n.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new pe(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(le.E.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(le.E.createComplete()),this.unsubscribe()},t}(p.v),pe=function(){return function(e,t){this.time=e,this.notification=t}}(),ge=r(86323);function me(e,t){return t?function(r){return new ve(r,t).lift(new ye(e))}:function(t){return t.lift(new ye(e))}}var ye=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new be(e,this.delayDurationSelector))},e}(),be=function(e){function t(t,r){var n=e.call(this,t)||this;return n.delayDurationSelector=r,n.completed=!1,n.delayNotifierSubscriptions=[],n.index=0,n}return n.C6(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){var t=this.index++;try{var r=this.delayDurationSelector(e,t);r&&this.tryDelay(r,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},t.prototype.tryDelay=function(e,t){var r=(0,P.F)(this,e,t);r&&!r.closed&&(this.destination.add(r),this.delayNotifierSubscriptions.push(r))},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(T.E),ve=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subscriptionDelay=r,n}return n.C6(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new we(e,this.source))},t}(ge.c),we=function(e){function t(t,r){var n=e.call(this)||this;return n.parent=t,n.source=r,n.sourceSubscribed=!1,n}return n.C6(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(p.v);function Ee(){return function(e){return e.lift(new Ae)}}var Ae=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Se(e))},e}(),Se=function(e){function t(t){return e.call(this,t)||this}return n.C6(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(p.v);function _e(e,t){return function(r){return r.lift(new Ie(e,t))}}var Ie=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new Ne(e,this.keySelector,this.flushes))},e}(),Ne=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.keySelector=r,o.values=new Set,n&&o.add((0,i.tS)(n,new i.zA(o))),o}return n.C6(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},t}(i.gn);function ke(e,t){return function(r){return r.lift(new Pe(e,t))}}var Pe=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new Te(e,this.compare,this.keySelector))},e}(),Te=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.keySelector=n,i.hasKey=!1,"function"==typeof r&&(i.compare=r),i}return n.C6(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var r=this.keySelector;t=r?r(e):e}catch(e){return this.destination.error(e)}var n=!1;if(this.hasKey)try{n=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))},t}(p.v);function Re(e,t){return ke(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}var Oe=r(44841),Ce=r(41975),xe=r(48671);function Ue(e){return void 0===e&&(e=Be),function(t){return t.lift(new Me(e))}}var Me=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new Le(e,this.errorFactory))},e}(),Le=function(e){function t(t,r){var n=e.call(this,t)||this;return n.errorFactory=r,n.hasValue=!1,n}return n.C6(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(p.v);function Be(){return new xe.G}var De=r(53200);function Fe(e){return function(t){return 0===e?(0,De.I)():t.lift(new je(e))}}var je=function(){function e(e){if(this.total=e,this.total<0)throw new Oe.k}return e.prototype.call=function(e,t){return t.subscribe(new Ge(e,this.total))},e}(),Ge=function(e){function t(t,r){var n=e.call(this,t)||this;return n.total=r,n.count=0,n}return n.C6(t,e),t.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},t}(p.v);function We(e,t){if(e<0)throw new Oe.k;var r=arguments.length>=2;return function(n){return n.pipe((0,Ce.p)(function(t,r){return r===e}),Fe(1),r?se(t):Ue(function(){return new Oe.k}))}}var He=r(15812);function Ke(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return(0,K.x)(t,He.of.apply(void 0,e))}}function ze(e,t){return function(r){return r.lift(new Ve(e,t,r))}}var Ve=function(){function e(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new qe(e,this.predicate,this.thisArg,this.source))},e}(),qe=function(e){function t(t,r,n,i){var o=e.call(this,t)||this;return o.predicate=r,o.thisArg=n,o.source=i,o.index=0,o.thisArg=n||o,o}return n.C6(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(p.v);function Je(){return function(e){return e.lift(new Xe)}}var Xe=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Ye(e))},e}(),Ye=function(e){function t(t){var r=e.call(this,t)||this;return r.hasCompleted=!1,r.hasSubscription=!1,r}return n.C6(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add((0,i.tS)(e,new i.zA(this))))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.gn),Qe=r(4679);function $e(e,t){return t?function(r){return r.pipe($e(function(r,n){return(0,W.H)(e(r,n)).pipe((0,Qe.T)(function(e,i){return t(r,e,n,i)}))}))}:function(t){return t.lift(new Ze(e))}}var Ze=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new et(e,this.project))},e}(),et=function(e){function t(t,r){var n=e.call(this,t)||this;return n.project=r,n.hasSubscription=!1,n.hasCompleted=!1,n.index=0,n}return n.C6(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new i.zA(this),r=this.destination;r.add(t);var n=(0,i.tS)(e,t);n!==t&&r.add(n)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.gn);function tt(e,t,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(n){return n.lift(new rt(e,t,r))}}var rt=function(){function e(e,t,r){this.project=e,this.concurrent=t,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new nt(e,this.project,this.concurrent,this.scheduler))},e}(),nt=function(e){function t(t,r,n,i){var o=e.call(this,t)||this;return o.project=r,o.concurrent=n,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return n.C6(t,e),t.dispatch=function(e){var t=e.subscriber,r=e.result,n=e.value,i=e.index;t.subscribeToProjection(r,n,i)},t.prototype._next=function(e){var r=this.destination;if(r.closed)this._complete();else{var n=this.index++;if(this.active<this.concurrent){r.next(e);try{var i=(0,this.project)(e,n);if(this.scheduler){var o={subscriber:this,result:i,value:e,index:n};this.destination.add(this.scheduler.schedule(t.dispatch,0,o))}else this.subscribeToProjection(i,e,n)}catch(e){r.error(e)}}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,r){this.active++,this.destination.add((0,i.tS)(e,new i.zA(this)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this._next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(i.gn);function it(e){return function(t){return t.lift(new ot(e))}}var ot=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new st(e,this.callback))},e}(),st=function(e){function t(t,r){var n=e.call(this,t)||this;return n.add(new k.y(r)),n}return n.C6(t,e),t}(p.v);function at(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(r){return r.lift(new ut(e,r,!1,t))}}var ut=function(){function e(e,t,r,n){this.predicate=e,this.source=t,this.yieldIndex=r,this.thisArg=n}return e.prototype.call=function(e,t){return t.subscribe(new ct(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),ct=function(e){function t(t,r,n,i,o){var s=e.call(this,t)||this;return s.predicate=r,s.source=n,s.yieldIndex=i,s.thisArg=o,s.index=0,s}return n.C6(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},t.prototype._next=function(e){var t=this.predicate,r=this.thisArg,n=this.index++;try{t.call(r||this,e,n,this.source)&&this.notifyComplete(this.yieldIndex?n:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(p.v);function lt(e,t){return function(r){return r.lift(new ut(e,r,!0,t))}}var ht=r(32984);function ft(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?(0,Ce.p)(function(t,r){return e(t,r,n)}):ht.D,Fe(1),r?se(t):Ue(function(){return new xe.G}))}}var dt=r(42223);function pt(){return function(e){return e.lift(new gt)}}var gt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new mt(e))},e}(),mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.C6(t,e),t.prototype._next=function(e){},t}(p.v);function yt(){return function(e){return e.lift(new bt)}}var bt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new vt(e))},e}(),vt=function(e){function t(t){return e.call(this,t)||this}return n.C6(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(p.v);function wt(e){return function(t){return 0===e?(0,De.I)():t.lift(new Et(e))}}var Et=function(){function e(e){if(this.total=e,this.total<0)throw new Oe.k}return e.prototype.call=function(e,t){return t.subscribe(new At(e,this.total))},e}(),At=function(e){function t(t,r){var n=e.call(this,t)||this;return n.total=r,n.ring=new Array,n.count=0,n}return n.C6(t,e),t.prototype._next=function(e){var t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var o=t++%r;e.next(n[o])}e.complete()},t}(p.v);function St(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?(0,Ce.p)(function(t,r){return e(t,r,n)}):ht.D,wt(1),r?se(t):Ue(function(){return new xe.G}))}}function _t(e){return function(t){return t.lift(new It(e))}}var It=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new Nt(e,this.value))},e}(),Nt=function(e){function t(t,r){var n=e.call(this,t)||this;return n.value=r,n}return n.C6(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(p.v);function kt(){return function(e){return e.lift(new Pt)}}var Pt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Tt(e))},e}(),Tt=function(e){function t(t){return e.call(this,t)||this}return n.C6(t,e),t.prototype._next=function(e){this.destination.next(le.E.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(le.E.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(le.E.createComplete()),e.complete()},t}(p.v);function Rt(e,t){var r=!1;return arguments.length>=2&&(r=!0),function(n){return n.lift(new Ot(e,t,r))}}var Ot=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new Ct(e,this.accumulator,this.seed,this.hasSeed))},e}(),Ct=function(e){function t(t,r,n,i){var o=e.call(this,t)||this;return o.accumulator=r,o._seed=n,o.hasSeed=i,o.index=0,o}return n.C6(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(p.v),xt=r(1674);function Ut(e,t){return arguments.length>=2?function(r){return(0,xt.F)(Rt(e,t),wt(1),se(t))(r)}:function(t){return(0,xt.F)(Rt(function(t,r,n){return e(t,r,n+1)}),wt(1))(t)}}function Mt(e){return Ut("function"==typeof e?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t})}var Lt=r(33465);function Bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(Lt.h.apply(void 0,[t].concat(e)))}}var Dt=r(84590);function Ft(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof t?(0,q.ZZ)(function(){return e},t,r):("number"==typeof t&&(r=t),(0,q.ZZ)(function(){return e},r))}function jt(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(n){return n.lift(new Gt(e,t,r))}}var Gt=function(){function e(e,t,r){this.accumulator=e,this.seed=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new Wt(e,this.accumulator,this.seed,this.concurrent))},e}(),Wt=function(e){function t(t,r,n,i){var o=e.call(this,t)||this;return o.accumulator=r,o.acc=n,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return n.C6(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,r=this.destination,n=void 0;try{n=(0,this.accumulator)(this.acc,e,t)}catch(e){return r.error(e)}this.active++,this._innerSub(n)}else this.buffer.push(e)},t.prototype._innerSub=function(e){var t=new i.zA(this),r=this.destination;r.add(t);var n=(0,i.tS)(e,t);n!==t&&r.add(n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e){var t=this.destination;this.acc=e,this.hasValue=!0,t.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(i.gn);function Ht(e){return Ut("function"==typeof e?function(t,r){return e(t,r)<0?t:r}:function(e,t){return e<t?e:t})}var Kt=r(98094);function zt(e,t){return function(r){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return r.lift(new Vt(n,t));var i=Object.create(r,Kt.f);return i.source=r,i.subjectFactory=n,i}}var Vt=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(e);return i.add(t.subscribe(n)),i},e}(),qt=r(3976);function Jt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&(0,G.c)(e[0])&&(e=e[0]),function(t){return t.lift(new Xt(e))}}var Xt=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new Yt(e,this.nextSources))},e}(),Yt=function(e){function t(t,r){var n=e.call(this,t)||this;return n.destination=t,n.nextSources=r,n}return n.C6(t,e),t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var t=new i.zA(this),r=this.destination;r.add(t);var n=(0,i.tS)(e,t);n!==t&&r.add(n)}else this.destination.complete()},t}(i.gn);function Qt(){return function(e){return e.lift(new $t)}}var $t=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Zt(e))},e}(),Zt=function(e){function t(t){var r=e.call(this,t)||this;return r.hasPrev=!1,r}return n.C6(t,e),t.prototype._next=function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)},t}(p.v),er=r(82781);function tr(e,t){return function(r){return[(0,Ce.p)(e,t)(r),(0,Ce.p)((0,er.A)(e,t))(r)]}}function rr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(t){return(0,Qe.T)(function(e,t){return function(r){for(var n=r,i=0;i<t;i++){var o=null!=n?n[e[i]]:void 0;if(void 0===o)return;n=o}return n}}(e,r))(t)}}var nr=r(46907);function ir(e){return e?zt(function(){return new nr.B7},e):zt(new nr.B7)}var or=r(15850);function sr(e){return function(t){return zt(new or.t(e))(t)}}var ar=r(61063);function ur(){return function(e){return zt(new ar.h)(e)}}var cr=r(40194);function lr(e,t,r,n){r&&"function"!=typeof r&&(n=r);var i="function"==typeof r?r:void 0,o=new cr.m(e,t,n);return function(e){return zt(function(){return o},i)(e)}}var hr=r(43304);function fr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return 1===e.length&&(0,G.c)(e[0])&&(e=e[0]),t.lift.call(hr.O4.apply(void 0,[t].concat(e)))}}function dr(e){return void 0===e&&(e=-1),function(t){return 0===e?(0,De.I)():e<0?t.lift(new pr(-1,t)):t.lift(new pr(e-1,t))}}var pr=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new gr(e,this.count,this.source))},e}(),gr=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.count=r,i.source=n,i}return n.C6(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,r=this.count;if(0===r)return e.prototype.complete.call(this);r>-1&&(this.count=r-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(p.v);function mr(e){return function(t){return t.lift(new yr(e))}}var yr=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new br(e,this.notifier,t))},e}(),br=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.notifier=r,i.source=n,i.sourceIsBeingSubscribedTo=!0,i}return n.C6(t,e),t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,e.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},t.prototype.subscribeToRetries=function(){var t;this.notifications=new nr.B7;try{t=(0,this.notifier)(this.notifications)}catch(t){return e.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=(0,i.tS)(t,new i.zA(this))},t}(i.gn);function vr(e){return void 0===e&&(e=-1),function(t){return t.lift(new wr(e,t))}}var wr=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new Er(e,this.count,this.source))},e}(),Er=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.count=r,i.source=n,i}return n.C6(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.source,n=this.count;if(0===n)return e.prototype.error.call(this,t);n>-1&&(this.count=n-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(p.v);function Ar(e){return function(t){return t.lift(new Sr(e,t))}}var Sr=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new _r(e,this.notifier,this.source))},e}(),_r=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.notifier=r,i.source=n,i}return n.C6(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.errors,n=this.retries,o=this.retriesSubscription;if(n)this.errors=void 0,this.retriesSubscription=void 0;else{r=new nr.B7;try{n=(0,this.notifier)(r)}catch(t){return e.prototype.error.call(this,t)}o=(0,i.tS)(n,new i.zA(this))}this._unsubscribeAndRecycle(),this.errors=r,this.retries=n,this.retriesSubscription=o,r.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(i.gn),Ir=r(64433);function Nr(e){return function(t){return t.lift(new kr(e))}}var kr=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new Pr(e),n=t.subscribe(r);return n.add((0,i.tS)(this.notifier,new i.zA(r))),n},e}(),Pr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasValue=!1,t}return n.C6(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(i.gn);function Tr(e,t){return void 0===t&&(t=u.b),function(r){return r.lift(new Rr(e,t))}}var Rr=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Or(e,this.period,this.scheduler))},e}(),Or=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.period=r,i.scheduler=n,i.hasValue=!1,i.add(n.schedule(Cr,r,{subscriber:i,period:r})),i}return n.C6(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(p.v);function Cr(e){var t=e.subscriber,r=e.period;t.notifyNext(),this.schedule(e,r)}function xr(e,t){return function(r){return r.lift(new Ur(e,t))}}var Ur=function(){function e(e,t){this.compareTo=e,this.comparator=t}return e.prototype.call=function(e,t){return t.subscribe(new Mr(e,this.compareTo,this.comparator))},e}(),Mr=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.compareTo=r,i.comparator=n,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(r.subscribe(new Lr(t,i))),i}return n.C6(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var e=this,t=e._a,r=e._b,n=e.comparator;t.length>0&&r.length>0;){var i=t.shift(),o=r.shift(),s=!1;try{s=n?n(i,o):i===o}catch(e){this.destination.error(e)}s||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t}(p.v),Lr=function(e){function t(t,r){var n=e.call(this,t)||this;return n.parent=r,n}return n.C6(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(p.v);function Br(){return new nr.B7}function Dr(){return function(e){return(0,Ir.B)()(zt(Br)(e))}}function Fr(e,t,r){var n;return n=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:r},function(e){return e.lift(function(e){var t,r,n=e.bufferSize,i=void 0===n?Number.POSITIVE_INFINITY:n,o=e.windowTime,s=void 0===o?Number.POSITIVE_INFINITY:o,a=e.refCount,u=e.scheduler,c=0,l=!1,h=!1;return function(e){var n;c++,!t||l?(l=!1,t=new cr.m(i,s,u),n=t.subscribe(this),r=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){h=!0,r=void 0,t.complete()}}),h&&(r=void 0)):n=t.subscribe(this),this.add(function(){c--,n.unsubscribe(),n=void 0,r&&!h&&a&&0===c&&(r.unsubscribe(),r=void 0,t=void 0)})}}(n))}}function jr(e){return function(t){return t.lift(new Gr(e,t))}}var Gr=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new Wr(e,this.predicate,this.source))},e}(),Wr=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.predicate=r,i.source=n,i.seenValue=!1,i.index=0,i}return n.C6(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new xe.G)},t}(p.v);function Hr(e){return function(t){return t.lift(new Kr(e))}}var Kr=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new zr(e,this.total))},e}(),zr=function(e){function t(t,r){var n=e.call(this,t)||this;return n.total=r,n.count=0,n}return n.C6(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(p.v);function Vr(e){return function(t){return t.lift(new qr(e))}}var qr=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new Oe.k}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new p.v(e)):t.subscribe(new Jr(e,this._skipCount))},e}(),Jr=function(e){function t(t,r){var n=e.call(this,t)||this;return n._skipCount=r,n._count=0,n._ring=new Array(r),n}return n.C6(t,e),t.prototype._next=function(e){var t=this._skipCount,r=this._count++;if(r<t)this._ring[r]=e;else{var n=r%t,i=this._ring,o=i[n];i[n]=e,this.destination.next(o)}},t}(p.v);function Xr(e){return function(t){return t.lift(new Yr(e))}}var Yr=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new Qr(e,this.notifier))},e}(),Qr=function(e){function t(t,r){var n=e.call(this,t)||this;n.hasValue=!1;var o=new i.zA(n);n.add(o),n.innerSubscription=o;var s=(0,i.tS)(r,o);return s!==o&&(n.add(s),n.innerSubscription=s),n}return n.C6(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(i.gn);function $r(e){return function(t){return t.lift(new Zr(e))}}var Zr=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new en(e,this.predicate))},e}(),en=function(e){function t(t,r){var n=e.call(this,t)||this;return n.predicate=r,n.skipping=!0,n.index=0,n}return n.C6(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(p.v);function tn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return(0,v.m)(r)?(e.pop(),function(t){return(0,K.x)(e,t,r)}):function(t){return(0,K.x)(e,t)}}var rn=r(61222),nn=r(95263),on=function(e){function t(t,r,n){void 0===r&&(r=0),void 0===n&&(n=rn.I);var i=e.call(this)||this;return i.source=t,i.delayTime=r,i.scheduler=n,(!(0,nn.k)(r)||r<0)&&(i.delayTime=0),n&&"function"==typeof n.schedule||(i.scheduler=rn.I),i}return n.C6(t,e),t.create=function(e,r,n){return void 0===r&&(r=0),void 0===n&&(n=rn.I),new t(e,r,n)},t.dispatch=function(e){var t=e.source,r=e.subscriber;return this.add(t.subscribe(r))},t.prototype._subscribe=function(e){var r=this.delayTime,n=this.source;return this.scheduler.schedule(t.dispatch,r,{source:n,subscriber:e})},t}(ge.c);function sn(e,t){return void 0===t&&(t=0),function(r){return r.lift(new an(e,t))}}var an=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new on(t,this.delay,this.scheduler).subscribe(e)},e}();function un(e,t){return"function"==typeof t?function(r){return r.pipe(un(function(r,n){return(0,W.H)(e(r,n)).pipe((0,Qe.T)(function(e,i){return t(r,e,n,i)}))}))}:function(t){return t.lift(new cn(e))}}var cn=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new ln(e,this.project))},e}(),ln=function(e){function t(t,r){var n=e.call(this,t)||this;return n.project=r,n.index=0,n}return n.C6(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var r=new i.zA(this),n=this.destination;n.add(r),this.innerSubscription=(0,i.tS)(e,r),this.innerSubscription!==r&&n.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(i.gn);function hn(){return un(ht.D)}function fn(e,t){return t?un(function(){return e},t):un(function(){return e})}function dn(e){return function(t){return t.lift(new pn(e))}}var pn=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new gn(e),n=(0,i.tS)(this.notifier,new i.zA(r));return n&&!r.seenValue?(r.add(n),t.subscribe(r)):r},e}(),gn=function(e){function t(t){var r=e.call(this,t)||this;return r.seenValue=!1,r}return n.C6(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(i.gn);function mn(e,t){return void 0===t&&(t=!1),function(r){return r.lift(new yn(e,t))}}var yn=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new bn(e,this.predicate,this.inclusive))},e}(),bn=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.predicate=r,i.inclusive=n,i.index=0,i}return n.C6(t,e),t.prototype._next=function(e){var t,r=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void r.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var r=this.destination;Boolean(t)?r.next(e):(this.inclusive&&r.next(e),r.complete())},t}(p.v),vn=r(46582),wn=r(23842);function En(e,t,r){return function(n){return n.lift(new An(e,t,r))}}var An=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new Sn(e,this.nextOrObserver,this.error,this.complete))},e}(),Sn=function(e){function t(t,r,n,i){var o=e.call(this,t)||this;return o._tapNext=vn.l,o._tapError=vn.l,o._tapComplete=vn.l,o._tapError=n||vn.l,o._tapComplete=i||vn.l,(0,wn.T)(r)?(o._context=o,o._tapNext=r):r&&(o._context=r,o._tapNext=r.next||vn.l,o._tapError=r.error||vn.l,o._tapComplete=r.complete||vn.l),o}return n.C6(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(p.v),_n={leading:!0,trailing:!1};function In(e,t){return void 0===t&&(t=_n),function(r){return r.lift(new Nn(e,!!t.leading,!!t.trailing))}}var Nn=function(){function e(e,t,r){this.durationSelector=e,this.leading=t,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new kn(e,this.durationSelector,this.leading,this.trailing))},e}(),kn=function(e){function t(t,r,n,i){var o=e.call(this,t)||this;return o.destination=t,o.durationSelector=r,o._leading=n,o._trailing=i,o._hasValue=!1,o}return n.C6(t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this._hasValue,t=this._sendValue;e&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){var t=this.tryDurationSelector(e);t&&this.add(this._throttled=(0,i.tS)(t,new i.zA(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(i.gn);function Pn(e,t,r){return void 0===t&&(t=u.b),void 0===r&&(r=_n),function(n){return n.lift(new Tn(e,t,r.leading,r.trailing))}}var Tn=function(){function e(e,t,r,n){this.duration=e,this.scheduler=t,this.leading=r,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new Rn(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),Rn=function(e){function t(t,r,n,i,o){var s=e.call(this,t)||this;return s.duration=r,s.scheduler=n,s.leading=i,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return n.C6(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(On,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(p.v);function On(e){e.subscriber.clearThrottle()}var Cn=r(26641);function xn(e){return void 0===e&&(e=u.b),function(t){return(0,Cn.v)(function(){return t.pipe(Rt(function(t,r){var n=t.current;return{value:r,current:e.now(),last:n}},{current:e.now(),value:void 0,last:void 0}),(0,Qe.T)(function(e){var t=e.current,r=e.last,n=e.value;return new Un(n,t-r)}))})}}var Un=function(){return function(e,t){this.value=e,this.interval=t}}(),Mn=r(39225);function Ln(e,t,r){return void 0===r&&(r=u.b),function(n){var i=ce(e),o=i?+e-r.now():Math.abs(e);return n.lift(new Bn(o,i,t,r))}}var Bn=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new Dn(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),Dn=function(e){function t(t,r,n,i,o){var s=e.call(this,t)||this;return s.absoluteTimeout=r,s.waitFor=n,s.withObservable=i,s.scheduler=o,s.scheduleTimeout(),s}return n.C6(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add((0,i.tS)(t,new i.zA(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(i.gn),Fn=r(39815);function jn(e,t){return void 0===t&&(t=u.b),Ln(e,(0,Fn.$)(new Mn.M),t)}function Gn(e){return void 0===e&&(e=u.b),(0,Qe.T)(function(t){return new Wn(t,e.now())})}var Wn=function(){return function(e,t){this.value=e,this.timestamp=t}}();function Hn(e,t,r){return 0===r?[t]:(e.push(t),e)}function Kn(){return Ut(Hn,[])}function zn(e){return function(t){return t.lift(new Vn(e))}}var Vn=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var r=new qn(e),n=t.subscribe(r);return n.closed||r.add((0,i.tS)(this.windowBoundaries,new i.zA(r))),n},e}(),qn=function(e){function t(t){var r=e.call(this,t)||this;return r.window=new nr.B7,t.next(r.window),r}return n.C6(t,e),t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,r=this.window=new nr.B7;t.next(r)},t}(i.gn);function Jn(e,t){return void 0===t&&(t=0),function(r){return r.lift(new Xn(e,t))}}var Xn=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new Yn(e,this.windowSize,this.startWindowEvery))},e}(),Yn=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.destination=t,i.windowSize=r,i.startWindowEvery=n,i.windows=[new nr.B7],i.count=0,t.next(i.windows[0]),i}return n.C6(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,i=this.windows,o=i.length,s=0;s<o&&!this.closed;s++)i[s].next(e);var a=this.count-n+1;if(a>=0&&a%t===0&&!this.closed&&i.shift().complete(),++this.count%t===0&&!this.closed){var u=new nr.B7;i.push(u),r.next(u)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(p.v);function Qn(e){var t=u.b,r=null,n=Number.POSITIVE_INFINITY;return(0,v.m)(arguments[3])&&(t=arguments[3]),(0,v.m)(arguments[2])?t=arguments[2]:(0,nn.k)(arguments[2])&&(n=Number(arguments[2])),(0,v.m)(arguments[1])?t=arguments[1]:(0,nn.k)(arguments[1])&&(r=Number(arguments[1])),function(i){return i.lift(new $n(e,r,n,t))}}var $n=function(){function e(e,t,r,n){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new ei(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),Zn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return n.C6(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(nr.B7),ei=function(e){function t(t,r,n,i,o){var s=e.call(this,t)||this;s.destination=t,s.windowTimeSpan=r,s.windowCreationInterval=n,s.maxWindowSize=i,s.scheduler=o,s.windows=[];var a=s.openWindow();if(null!==n&&n>=0){var u={subscriber:s,window:a,context:null},c={windowTimeSpan:r,windowCreationInterval:n,subscriber:s,scheduler:o};s.add(o.schedule(ni,r,u)),s.add(o.schedule(ri,n,c))}else{var l={subscriber:s,window:a,windowTimeSpan:r};s.add(o.schedule(ti,r,l))}return s}return n.C6(t,e),t.prototype._next=function(e){for(var t=this.windows,r=t.length,n=0;n<r;n++){var i=t[n];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new Zn;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(p.v);function ti(e){var t=e.subscriber,r=e.windowTimeSpan,n=e.window;n&&t.closeWindow(n),e.window=t.openWindow(),this.schedule(e,r)}function ri(e){var t=e.windowTimeSpan,r=e.subscriber,n=e.scheduler,i=e.windowCreationInterval,o=r.openWindow(),s=this,a={action:s,subscription:null},u={subscriber:r,window:o,context:a};a.subscription=n.schedule(ni,t,u),s.add(a.subscription),s.schedule(e,i)}function ni(e){var t=e.subscriber,r=e.window,n=e.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(r)}function ii(e,t){return function(r){return r.lift(new oi(e,t))}}var oi=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new si(e,this.openings,this.closingSelector))},e}(),si=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.openings=r,i.closingSelector=n,i.contexts=[],i.add(i.openSubscription=(0,P.F)(i,r,r)),i}return n.C6(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var r=t.length,n=0;n<r;n++)t[n].window.next(e)},t.prototype._error=function(t){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var o=r[i];o.window.error(t),o.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,n=-1;++n<r;){var i=t[n];i.window.complete(),i.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,r=-1;++r<t;){var n=e[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,r,n,i){if(e===this.openings){var o=void 0;try{o=(0,this.closingSelector)(t)}catch(e){return this.error(e)}var s=new nr.B7,a=new k.y,u={window:s,subscription:a};this.contexts.push(u);var c=(0,P.F)(this,o,u);c.closed?this.closeWindow(this.contexts.length-1):(c.context=u,a.add(c)),this.destination.next(s)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,r=t[e],n=r.window,i=r.subscription;t.splice(e,1),n.complete(),i.unsubscribe()}},t}(T.E);function ai(e){return function(t){return t.lift(new ui(e))}}var ui=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new ci(e,this.closingSelector))},e}(),ci=function(e){function t(t,r){var n=e.call(this,t)||this;return n.destination=t,n.closingSelector=r,n.openWindow(),n}return n.C6(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.openWindow(i)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var r,n=this.window=new nr.B7;this.destination.next(n);try{r=(0,this.closingSelector)()}catch(e){return this.destination.error(e),void this.window.error(e)}this.add(this.closingNotification=(0,P.F)(this,r))},t}(T.E);function li(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var r;"function"==typeof e[e.length-1]&&(r=e.pop());var n=e;return t.lift(new hi(n,r))}}var hi=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new fi(e,this.observables,this.project))},e}(),fi=function(e){function t(t,r,n){var i=e.call(this,t)||this;i.observables=r,i.project=n,i.toRespond=[];var o=r.length;i.values=new Array(o);for(var s=0;s<o;s++)i.toRespond.push(s);for(s=0;s<o;s++){var a=r[s];i.add((0,P.F)(i,a,void 0,s))}return i}return n.C6(t,e),t.prototype.notifyNext=function(e,t,r){this.values[r]=t;var n=this.toRespond;if(n.length>0){var i=n.indexOf(r);-1!==i&&n.splice(i,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(T.E),di=r(2014);function pi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(di.yU.apply(void 0,[t].concat(e)))}}function gi(e){return function(t){return t.lift(new di.ee(e))}}},94516:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mayachainDescribePath=function(e){const t={verbose:(0,n.addressNListToBIP32)(e),coin:"Mayachain",isKnown:!1};if(5!=e.length)return t;if(2147483692!=e[0])return t;if(e[1]!=2147483648+(0,n.slip44ByCoin)("Mayachain"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(0!==e[3]||0!==e[4])return t;const r=2147483647&e[2];return{verbose:`Mayachain Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Mayachain",isKnown:!0,isPrefork:!1}};const n=r(33612)},95160:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=t.p2wsh=t.p2wpkh=t.p2sh=t.p2pkh=t.p2pk=t.p2ms=t.embed=void 0;const n=r(73483);Object.defineProperty(t,"embed",{enumerable:!0,get:function(){return n.p2data}});const i=r(37894);Object.defineProperty(t,"p2ms",{enumerable:!0,get:function(){return i.p2ms}});const o=r(65469);Object.defineProperty(t,"p2pk",{enumerable:!0,get:function(){return o.p2pk}});const s=r(57239);Object.defineProperty(t,"p2pkh",{enumerable:!0,get:function(){return s.p2pkh}});const a=r(86139);Object.defineProperty(t,"p2sh",{enumerable:!0,get:function(){return a.p2sh}});const u=r(52090);Object.defineProperty(t,"p2wpkh",{enumerable:!0,get:function(){return u.p2wpkh}});const c=r(52164);Object.defineProperty(t,"p2wsh",{enumerable:!0,get:function(){return c.p2wsh}});const l=r(24864);Object.defineProperty(t,"p2tr",{enumerable:!0,get:function(){return l.p2tr}})},95263:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var n=r(81065);function i(e){return!(0,n.c)(e)&&e-parseFloat(e)+1>=0}},96304:(e,t,r)=>{var n,i=r(39907);!function(o){var s=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==o?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function c(e,t){var r="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(r+=" Event name: "+t+"."),void 0!==i&&i.emitWarning){var n=new Error(r);n.name="MaxListenersExceededWarning",n.emitter=this,n.count=e,i.emitWarning(n)}else console.error(r),console.trace&&console.trace()}function l(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}function h(e,t,r,n){if(!r)return[];var i,o,s,a,u,c,l,f=[],d=t.length,p=t[n],g=t[n+1];if(n===d&&r._listeners){if("function"==typeof r._listeners)return e&&e.push(r._listeners),[r];for(i=0,o=r._listeners.length;i<o;i++)e&&e.push(r._listeners[i]);return[r]}if("*"===p||"**"===p||r[p]){if("*"===p){for(s in r)"_listeners"!==s&&r.hasOwnProperty(s)&&(f=f.concat(h(e,t,r[s],n+1)));return f}if("**"===p){for(s in(l=n+1===d||n+2===d&&"*"===g)&&r._listeners&&(f=f.concat(h(e,t,r,d))),r)"_listeners"!==s&&r.hasOwnProperty(s)&&("*"===s||"**"===s?(r[s]._listeners&&!l&&(f=f.concat(h(e,t,r[s],d))),f=f.concat(h(e,t,r[s],n))):f=s===g?f.concat(h(e,t,r[s],n+2)):f.concat(h(e,t,r[s],n)));return f}f=f.concat(h(e,t,r[p],n+1))}if((a=r["*"])&&h(e,t,a,n+1),u=r["**"])if(n<d)for(s in u._listeners&&h(e,t,u,d),u)"_listeners"!==s&&u.hasOwnProperty(s)&&(s===g?h(e,t,u[s],n+2):s===p?h(e,t,u[s],n+1):((c={})[s]=u[s],h(e,t,{"**":c},n+1)));else u._listeners?h(e,t,u,d):u["*"]&&u["*"]._listeners&&h(e,t,u["*"],d);return f}function f(e,t){for(var r=0,n=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;r+1<n;r++)if("**"===e[r]&&"**"===e[r+1])return;for(var i=this.listenerTree,s=e.shift();s!==o;){if(i[s]||(i[s]={}),i=i[s],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,c.call(this,i._listeners.length,s))):i._listeners=t,!0;s=e.shift()}return!0}l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==o&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,r){return this._many(e,1,t,r),this},l.prototype.many=function(e,t,r){return this._many(e,t,r,!1)},l.prototype.prependMany=function(e,t,r){return this._many(e,t,r,!0)},l.prototype._many=function(e,t,r,n){var i=this;if("function"!=typeof r)throw new Error("many only accepts instances of Function");function o(){return 0===--t&&i.off(e,o),r.apply(this,arguments)}return o._origin=r,this._on(e,o,n),i},l.prototype.emit=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,r,n,i,o,s=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),s>3)for(t=new Array(s),i=0;i<s;i++)t[i]=arguments[i];for(n=0,r=o.length;n<r;n++)switch(this.event=e,s){case 1:o[n].call(this,e);break;case 2:o[n].call(this,e,arguments[1]);break;case 3:o[n].call(this,e,arguments[1],arguments[2]);break;default:o[n].apply(this,t)}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();h.call(this,o,u,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,s){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),i=1;i<s;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(s>3)for(t=new Array(s-1),i=1;i<s;i++)t[i-1]=arguments[i];for(n=0,r=o.length;n<r;n++)switch(this.event=e,s){case 1:o[n].call(this);break;case 2:o[n].call(this,arguments[1]);break;case 3:o[n].call(this,arguments[1],arguments[2]);break;default:o[n].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,r,n,i,o,s=[],u=arguments.length;if(this._all){if(u>3)for(t=new Array(u),i=1;i<u;i++)t[i]=arguments[i];for(n=0,r=this._all.length;n<r;n++)switch(this.event=e,u){case 1:s.push(this._all[n].call(this,e));break;case 2:s.push(this._all[n].call(this,e,arguments[1]));break;case 3:s.push(this._all[n].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[n].apply(this,t))}}if(this.wildcard){o=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();h.call(this,o,c,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,u){case 1:s.push(o.call(this));break;case 2:s.push(o.call(this,arguments[1]));break;case 3:s.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(u-1),i=1;i<u;i++)t[i-1]=arguments[i];s.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),u>3)for(t=new Array(u-1),i=1;i<u;i++)t[i-1]=arguments[i];for(n=0,r=o.length;n<r;n++)switch(this.event=e,u){case 1:s.push(o[n].call(this));break;case 2:s.push(o[n].call(this,arguments[1]));break;case 3:s.push(o[n].call(this,arguments[1],arguments[2]));break;default:s.push(o[n].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,r){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||a.call(this),this._newListener&&this.emit("newListener",e,t),this.wildcard?(f.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,n=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();n=h.call(this,null,i,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],n.push({_listeners:r})}for(var a=0;a<n.length;a++){var u=n[a];if(r=u._listeners,s(r)){for(var c=-1,l=0,f=r.length;l<f;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){c=l;break}if(c<0)continue;return this.wildcard?u._listeners.splice(c,1):this._events[e].splice(c,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete u._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(t!==o){var r=Object.keys(t);for(var n in r){var i=r[n],s=t[i];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&e(t[i]),0===Object.keys(s).length&&delete t[i])}}}(this.listenerTree),this},l.prototype.offAny=function(e){var t,r=0,n=0;if(e&&this._all&&this._all.length>0){for(r=0,n=(t=this._all).length;r<n;r++)if(e===t[r])return t.splice(r,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(r=0,n=t.length;r<n;r++)this.emit("removeListenerAny",t[r]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(e===o)return!this._events||a.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),r=h.call(this,null,t,this.listenerTree,0),n=0;n<r.length;n++)r[n]._listeners=null;else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return h.call(this,t,r,this.listenerTree,0),t}return this._events||a.call(this),this._events[e]||(this._events[e]=[]),s(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},(n=function(){return l}.call(t,r,t,e))===o||(e.exports=n)}()},96988:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;const a=o(r(96304));class u extends a.EventEmitter2{constructor(e){super(),this.keyring=e}connect(){return s(this,void 0,void 0,function*(){})}disconnect(){return s(this,void 0,void 0,function*(){})}}t.Transport=u},97356:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isP2TR=t.isP2SHScript=t.isP2WSHScript=t.isP2WPKH=t.isP2PKH=t.isP2PK=t.isP2MS=void 0,t.witnessStackToScriptWitness=function(e){let t=new Uint8Array(0);function r(e){const r=t.length,n=s.encodingLength(e);t=h.concat([t,new Uint8Array(n)]),s.encode(e,t,r)}function n(e){r(e.length),function(e){t=h.concat([t,e])}(e)}return r((i=e).length),i.forEach(n),t;var i},t.pubkeyPositionInScript=d,t.pubkeyInScript=function(e,t){return-1!==d(e,t)},t.checkInputForSig=function(e,t){return function(e){let t=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=function(e){const t=e.finalScriptSig&&a.decompile(e.finalScriptSig)||[],r=e.finalScriptWitness&&a.decompile(e.finalScriptWitness)||[];return t.concat(r).filter(e=>e instanceof Uint8Array&&a.isCanonicalScriptSignature(e)).map(e=>({signature:e}))}(e)}else t=e.partialSig;return t.map(e=>e.signature)}(e).some(e=>p(e,a.signature.decode,t))},t.signatureBlocksAction=p;const s=o(r(7170)),a=o(r(52421)),u=r(62060),c=r(43807),l=o(r(95160)),h=o(r(27294));function f(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}function d(e,t){const r=(0,c.hash160)(e),n=e.slice(1,33),i=a.decompile(t);if(null===i)throw new Error("Unknown script error");return i.findIndex(t=>"number"!=typeof t&&(0===h.compare(e,t)||0===h.compare(r,t)||0===h.compare(n,t)))}function p(e,t,r){const{hashType:n}=t(e),i=[];switch(n&u.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&n){case u.Transaction.SIGHASH_ALL:break;case u.Transaction.SIGHASH_SINGLE:case u.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}return-1===i.indexOf(r)}t.isP2MS=f(l.p2ms),t.isP2PK=f(l.p2pk),t.isP2PKH=f(l.p2pkh),t.isP2WPKH=f(l.p2wpkh),t.isP2WSHScript=f(l.p2wsh),t.isP2SHScript=f(l.p2sh),t.isP2TR=f(l.p2tr)},98094:(e,t,r)=>{"use strict";r.d(t,{G:()=>u,f:()=>c});var n=r(61220),i=r(46907),o=r(86323),s=r(33862),a=r(64433),u=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return n.C6(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.y).add(this.source.subscribe(new l(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.y.EMPTY)),e},t.prototype.refCount=function(){return(0,a.B)()(this)},t}(o.c),c=function(){var e=u.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),l=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return n.C6(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.PJ)},98764:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ETHTransactionType=void 0,t.describeETHPath=function(e){const t={verbose:(0,i.addressNListToBIP32)(e),coin:"Ethereum",isKnown:!1};if(5!==e.length)return t;if(2147483692!==e[0])return t;if(e[1]!==2147483648+(0,i.slip44ByCoin)("Ethereum"))return t;if((2147483648&e[2])>>>0!=2147483648)return t;if(0!==e[3])return t;if(0!==e[4])return t;const r=2147483647&e[2];return{verbose:`Ethereum Account #${r}`,accountIdx:r,wholeAccount:!0,coin:"Ethereum",isKnown:!0,isPrefork:!1}},t.buildMessage=function(e){const t="string"!=typeof e||n.ethers.utils.isHexString(e)?n.ethers.utils.arrayify(e):n.ethers.utils.toUtf8Bytes(e);return n.ethers.utils.concat([n.ethers.utils.toUtf8Bytes("Ethereum Signed Message:\n"),n.ethers.utils.toUtf8Bytes(String(t.length)),t])};const n=r(71955),i=r(33612);var o;!function(e){e[e.ETH_TX_TYPE_LEGACY=0]="ETH_TX_TYPE_LEGACY",e[e.ETH_TX_TYPE_EIP_2930=1]="ETH_TX_TYPE_EIP_2930",e[e.ETH_TX_TYPE_EIP_1559=2]="ETH_TX_TYPE_EIP_1559"}(o||(t.ETHTransactionType=o={}))},99206:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){const t=c.readUInt8(e,e.length-1);if(!(0,a.isDefinedHashType)(t))throw new Error("Invalid hashType "+t);const r=s.decode(e.subarray(0,-1)),n=d(r.r),i=d(r.s);return{signature:c.concat([n,i]),hashType:t}},t.encode=function(e,t){if(u.parse(u.object({signature:(0,l.NBufferSchemaFactory)(64),hashType:l.UInt8Schema}),{signature:e,hashType:t}),!(0,a.isDefinedHashType)(t))throw new Error("Invalid hashType "+t);const r=new Uint8Array(1);c.writeUInt8(r,0,t);const n=f(e.slice(0,32)),i=f(e.slice(32,64));return c.concat([s.encode(n,i),r])};const s=o(r(55441)),a=r(52421),u=o(r(86466)),c=o(r(27294)),l=r(22343),h=new Uint8Array(1);function f(e){let t=0;for(;0===e[t];)++t;return t===e.length?h:128&(e=e.slice(t))[0]?c.concat([h,e]):e}function d(e){0===e[0]&&(e=e.slice(1));const t=new Uint8Array(32),r=Math.max(0,32-e.length);return t.set(e,r),t}},99676:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Keyring=void 0;const a=o(r(96304));class u extends a.EventEmitter2{constructor(){super({wildcard:!0}),this.wallets={},this.aliases={}}add(e,t){const r=t||(new Date).toString();return!this.wallets[r]&&(this.wallets[r]=e,e.transport&&this.decorateEvents(r,e.transport),!0)}addAlias(e,t){this.aliases[t]=e}getAlias(e){const t=Object.keys(this.aliases),r=Object.values(this.aliases).indexOf(e);return-1!==r?t[r]:e}exec(e,...t){return s(this,void 0,void 0,function*(){return Promise.all(Object.values(this.wallets).map(r=>{const n=r[e];if("function"!=typeof n)throw new Error(`can't exec non-existent method ${e}`);return n.call(r,...t)})).then(e=>e.reduce((e,t,r)=>(e[Object.keys(this.wallets)[r]]=t,e),{}))})}get(e){return e&&this.aliases[e]&&this.wallets[this.aliases[e]]?this.wallets[this.aliases[e]]:e&&this.wallets[e]?this.wallets[e]:Object.keys(this.wallets).length&&!e?Object.values(this.wallets)[0]:null}remove(e){return s(this,void 0,void 0,function*(){const t=this.get(e);if(t)try{yield t.disconnect()}catch(e){console.error(e)}finally{const t=this.aliases[e];t?(delete this.aliases[e],delete this.wallets[t]):delete this.wallets[e]}})}removeAll(){return s(this,void 0,void 0,function*(){yield Promise.all(Object.keys(this.wallets).map(this.remove.bind(this))),this.aliases={}})}disconnectAll(){return s(this,void 0,void 0,function*(){const e=Object.values(this.wallets);for(let t=0;t<e.length;t++)yield e[t].disconnect()})}decorateEvents(e,t){const r=this.get(e);if(!r)return;const n=r.getVendor();t.onAny((t,...r)=>this.emit([n,e,"string"==typeof t?t:t.join(";")],[e,...r]))}}t.Keyring=u},99958:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(84590);function i(){return(0,n.U)(1)}}}]);