"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_sub_connect=("undefined"!=typeof self?self:this).webpackChunk_subwallet_sub_connect||[]).push([[7848],{34642:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BASE_URL=void 0,t.DEFAULT_BASE_URL="https://safe-client.safe.global"},32537:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEndpoint=t.deleteEndpoint=t.putEndpoint=t.postEndpoint=void 0;const s=n(88555);function i(e,t,n,i){return`${e}${(0,s.insertParams)(t,n)}${(0,s.stringifyQuery)(i)}`}t.postEndpoint=function(e,t,n){const a=i(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,s.fetchData)(a,"POST",null==n?void 0:n.body,null==n?void 0:n.headers,null==n?void 0:n.credentials)},t.putEndpoint=function(e,t,n){const a=i(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,s.fetchData)(a,"PUT",null==n?void 0:n.body,null==n?void 0:n.headers,null==n?void 0:n.credentials)},t.deleteEndpoint=function(e,t,n){const a=i(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,s.fetchData)(a,"DELETE",null==n?void 0:n.body,null==n?void 0:n.headers,null==n?void 0:n.credentials)},t.getEndpoint=function(e,t,n,a){if(a)return(0,s.getData)(a,void 0,null==n?void 0:n.credentials);const r=i(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,s.getData)(r,null==n?void 0:n.headers,null==n?void 0:n.credentials)}},8442:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.verifyAuth=t.getAuthNonce=t.getContract=t.getSafeOverviews=t.unsubscribeAll=t.unsubscribeSingle=t.registerRecoveryModule=t.deleteRegisteredEmail=t.getRegisteredEmail=t.verifyEmail=t.resendEmailVerificationCode=t.changeEmail=t.registerEmail=t.unregisterDevice=t.unregisterSafe=t.registerDevice=t.getDelegates=t.confirmSafeMessage=t.proposeSafeMessage=t.getSafeMessage=t.getSafeMessages=t.getDecodedData=t.getMasterCopies=t.getSafeApps=t.getChainConfig=t.getChainsConfig=t.getConfirmationView=t.proposeTransaction=t.getNonces=t.postSafeGasEstimation=t.deleteTransaction=t.getTransactionDetails=t.getTransactionQueue=t.getTransactionHistory=t.getCollectiblesPage=t.getCollectibles=t.getAllOwnedSafes=t.getOwnedSafes=t.getFiatCurrencies=t.getBalances=t.getMultisigTransactions=t.getModuleTransactions=t.getIncomingTransfers=t.getSafeInfo=t.getRelayCount=t.relayTransaction=t.setBaseUrl=void 0;const a=n(32537),r=n(34642);i(n(49256),t),i(n(60160),t),i(n(12551),t),i(n(11524),t),i(n(72963),t),i(n(78884),t),i(n(88251),t),i(n(63396),t),i(n(99916),t),i(n(7501),t);let o=r.DEFAULT_BASE_URL;t.setBaseUrl=e=>{o=e},t.relayTransaction=function(e,t){return(0,a.postEndpoint)(o,"/v1/chains/{chainId}/relay",{path:{chainId:e},body:t})},t.getRelayCount=function(e,t){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:e,address:t}})},t.getSafeInfo=function(e,t){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:e,address:t}})},t.getIncomingTransfers=function(e,t,n,s){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:e,address:t},query:n},s)},t.getModuleTransactions=function(e,t,n,s){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:e,address:t},query:n},s)},t.getMultisigTransactions=function(e,t,n,s){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:e,address:t},query:n},s)},t.getBalances=function(e,t,n="usd",s={}){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:e,address:t,currency:n},query:s})},t.getFiatCurrencies=function(){return(0,a.getEndpoint)(o,"/v1/balances/supported-fiat-codes")},t.getOwnedSafes=function(e,t){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:e,address:t}})},t.getAllOwnedSafes=function(e){return(0,a.getEndpoint)(o,"/v1/owners/{address}/safes",{path:{address:e}})},t.getCollectibles=function(e,t,n={}){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:e,address:t},query:n})},t.getCollectiblesPage=function(e,t,n={},s){return(0,a.getEndpoint)(o,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:e,address:t},query:n},s)},t.getTransactionHistory=function(e,t,n={},s){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:e,safe_address:t},query:n},s)},t.getTransactionQueue=function(e,t,n={},s){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:e,safe_address:t},query:n},s)},t.getTransactionDetails=function(e,t){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:e,transactionId:t}})},t.deleteTransaction=function(e,t,n){return(0,a.deleteEndpoint)(o,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:e,safeTxHash:t},body:{signature:n}})},t.postSafeGasEstimation=function(e,t,n){return(0,a.postEndpoint)(o,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:e,safe_address:t},body:n})},t.getNonces=function(e,t){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:e,safe_address:t}})},t.proposeTransaction=function(e,t,n){return(0,a.postEndpoint)(o,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:e,safe_address:t},body:n})},t.getConfirmationView=function(e,t,n,s){return(0,a.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:e,safe_address:t},body:{data:n,to:s}})},t.getChainsConfig=function(e){return(0,a.getEndpoint)(o,"/v1/chains",{query:e})},t.getChainConfig=function(e){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}",{path:{chainId:e}})},t.getSafeApps=function(e,t={}){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safe-apps",{path:{chainId:e},query:t})},t.getMasterCopies=function(e){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:e}})},t.getDecodedData=function(e,t,n){return(0,a.postEndpoint)(o,"/v1/chains/{chainId}/data-decoder",{path:{chainId:e},body:{data:t,to:n}})},t.getSafeMessages=function(e,t,n){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:e,safe_address:t},query:{}},n)},t.getSafeMessage=function(e,t){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:e,message_hash:t}})},t.proposeSafeMessage=function(e,t,n){return(0,a.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:e,safe_address:t},body:n})},t.confirmSafeMessage=function(e,t,n){return(0,a.postEndpoint)(o,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:e,message_hash:t},body:n})},t.getDelegates=function(e,t={}){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/delegates",{path:{chainId:e},query:t})},t.registerDevice=function(e){return(0,a.postEndpoint)(o,"/v1/register/notifications",{body:e})},t.unregisterSafe=function(e,t,n){return(0,a.deleteEndpoint)(o,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:e,safe_address:t,uuid:n}})},t.unregisterDevice=function(e,t){return(0,a.deleteEndpoint)(o,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:e,uuid:t}})},t.registerEmail=function(e,t,n,s){return(0,a.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:e,safe_address:t},body:n,headers:s})},t.changeEmail=function(e,t,n,s,i){return(0,a.putEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:e,safe_address:t,signer:n},body:s,headers:i})},t.resendEmailVerificationCode=function(e,t,n){return(0,a.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:e,safe_address:t,signer:n},body:""})},t.verifyEmail=function(e,t,n,s){return(0,a.putEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:e,safe_address:t,signer:n},body:s})},t.getRegisteredEmail=function(e,t,n,s){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:e,safe_address:t,signer:n},headers:s})},t.deleteRegisteredEmail=function(e,t,n,s){return(0,a.deleteEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:e,safe_address:t,signer:n},headers:s})},t.registerRecoveryModule=function(e,t,n){return(0,a.postEndpoint)(o,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:e,safe_address:t},body:n})},t.unsubscribeSingle=function(e){return(0,a.deleteEndpoint)(o,"/v1/subscriptions",{query:e})},t.unsubscribeAll=function(e){return(0,a.deleteEndpoint)(o,"/v1/subscriptions/all",{query:e})},t.getSafeOverviews=function(e,t){return(0,a.getEndpoint)(o,"/v1/safes",{query:Object.assign(Object.assign({},t),{safes:e.join(",")})})},t.getContract=function(e,t){return(0,a.getEndpoint)(o,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:e,contractAddress:t}})},t.getAuthNonce=function(){return(0,a.getEndpoint)(o,"/v1/auth/nonce",{credentials:"include"})},t.verifyAuth=function(e){return(0,a.postEndpoint)(o,"/v1/auth/verify",{body:e,credentials:"include"})}},11524:(e,t)=>{var n,s,i;Object.defineProperty(t,"__esModule",{value:!0}),t.FEATURES=t.GAS_PRICE_TYPE=t.RPC_AUTHENTICATION=void 0,(i=t.RPC_AUTHENTICATION||(t.RPC_AUTHENTICATION={})).API_KEY_PATH="API_KEY_PATH",i.NO_AUTHENTICATION="NO_AUTHENTICATION",i.UNKNOWN="UNKNOWN",(s=t.GAS_PRICE_TYPE||(t.GAS_PRICE_TYPE={})).ORACLE="ORACLE",s.FIXED="FIXED",s.FIXED_1559="FIXED1559",s.UNKNOWN="UNKNOWN",(n=t.FEATURES||(t.FEATURES={})).ERC721="ERC721",n.SAFE_APPS="SAFE_APPS",n.CONTRACT_INTERACTION="CONTRACT_INTERACTION",n.DOMAIN_LOOKUP="DOMAIN_LOOKUP",n.SPENDING_LIMIT="SPENDING_LIMIT",n.EIP1559="EIP1559",n.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",n.TX_SIMULATION="TX_SIMULATION",n.EIP1271="EIP1271"},72963:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TokenType=void 0,(n=t.TokenType||(t.TokenType={})).ERC20="ERC20",n.ERC721="ERC721",n.NATIVE_TOKEN="NATIVE_TOKEN"},88251:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmationViewTypes=void 0,(n=t.ConfirmationViewTypes||(t.ConfirmationViewTypes={})).COW_SWAP_ORDER="COW_SWAP_ORDER",n.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER"},78884:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},99916:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceType=void 0,(n=t.DeviceType||(t.DeviceType={})).ANDROID="ANDROID",n.IOS="IOS",n.WEB="WEB"},7501:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},60160:(e,t)=>{var n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.SafeAppSocialPlatforms=t.SafeAppFeatures=t.SafeAppAccessPolicyTypes=void 0,(s=t.SafeAppAccessPolicyTypes||(t.SafeAppAccessPolicyTypes={})).NoRestrictions="NO_RESTRICTIONS",s.DomainAllowlist="DOMAIN_ALLOWLIST",(t.SafeAppFeatures||(t.SafeAppFeatures={})).BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS",(n=t.SafeAppSocialPlatforms||(t.SafeAppSocialPlatforms={})).TWITTER="TWITTER",n.GITHUB="GITHUB",n.DISCORD="DISCORD"},49256:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationVersionState=void 0,(n=t.ImplementationVersionState||(t.ImplementationVersionState={})).UP_TO_DATE="UP_TO_DATE",n.OUTDATED="OUTDATED",n.UNKNOWN="UNKNOWN"},63396:(e,t)=>{var n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.SafeMessageStatus=t.SafeMessageListItemType=void 0,(s=t.SafeMessageListItemType||(t.SafeMessageListItemType={})).DATE_LABEL="DATE_LABEL",s.MESSAGE="MESSAGE",(n=t.SafeMessageStatus||(t.SafeMessageStatus={})).NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",n.CONFIRMED="CONFIRMED"},12551:(e,t)=>{var n,s,i,a,r,o,c,u,d,l,f,p;Object.defineProperty(t,"__esModule",{value:!0}),t.LabelValue=t.StartTimeValue=t.DurationType=t.DetailedExecutionInfoType=t.TransactionListItemType=t.ConflictType=t.TransactionInfoType=t.SettingsInfoType=t.TransactionTokenType=t.TransferDirection=t.TransactionStatus=t.Operation=void 0,(p=t.Operation||(t.Operation={}))[p.CALL=0]="CALL",p[p.DELEGATE=1]="DELEGATE",(f=t.TransactionStatus||(t.TransactionStatus={})).AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",f.AWAITING_EXECUTION="AWAITING_EXECUTION",f.CANCELLED="CANCELLED",f.FAILED="FAILED",f.SUCCESS="SUCCESS",(l=t.TransferDirection||(t.TransferDirection={})).INCOMING="INCOMING",l.OUTGOING="OUTGOING",l.UNKNOWN="UNKNOWN",(d=t.TransactionTokenType||(t.TransactionTokenType={})).ERC20="ERC20",d.ERC721="ERC721",d.NATIVE_COIN="NATIVE_COIN",(u=t.SettingsInfoType||(t.SettingsInfoType={})).SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",u.ADD_OWNER="ADD_OWNER",u.REMOVE_OWNER="REMOVE_OWNER",u.SWAP_OWNER="SWAP_OWNER",u.CHANGE_THRESHOLD="CHANGE_THRESHOLD",u.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",u.ENABLE_MODULE="ENABLE_MODULE",u.DISABLE_MODULE="DISABLE_MODULE",u.SET_GUARD="SET_GUARD",u.DELETE_GUARD="DELETE_GUARD",(c=t.TransactionInfoType||(t.TransactionInfoType={})).TRANSFER="Transfer",c.SETTINGS_CHANGE="SettingsChange",c.CUSTOM="Custom",c.CREATION="Creation",c.SWAP_ORDER="SwapOrder",c.TWAP_ORDER="TwapOrder",(o=t.ConflictType||(t.ConflictType={})).NONE="None",o.HAS_NEXT="HasNext",o.END="End",(r=t.TransactionListItemType||(t.TransactionListItemType={})).TRANSACTION="TRANSACTION",r.LABEL="LABEL",r.CONFLICT_HEADER="CONFLICT_HEADER",r.DATE_LABEL="DATE_LABEL",(a=t.DetailedExecutionInfoType||(t.DetailedExecutionInfoType={})).MULTISIG="MULTISIG",a.MODULE="MODULE",(i=t.DurationType||(t.DurationType={})).AUTO="AUTO",i.LIMIT_DURATION="LIMIT_DURATION",(s=t.StartTimeValue||(t.StartTimeValue={})).AT_MINING_TIME="AT_MINING_TIME",s.AT_EPOCH="AT_EPOCH",(n=t.LabelValue||(t.LabelValue={})).Queued="Queued",n.Next="Next"},88555:function(e,t){var n=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,a){function r(e){try{c(s.next(e))}catch(e){a(e)}}function o(e){try{c(s.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.fetchData=t.stringifyQuery=t.insertParams=void 0;function s(e){return n(this,void 0,void 0,(function*(){let t;try{t=204===e.status?{}:yield e.json()}catch(t){if(e.headers&&"0"!==e.headers.get("content-length"))throw new Error(`Invalid response content: ${e.statusText}`)}if(!e.ok){const s="object"==typeof(n=t)&&null!==n&&"code"in n&&"message"in n?`${t.code}: ${t.message}`:e.statusText;throw new Error(s)}var n;return t}))}t.insertParams=function(e,t){return t?Object.keys(t).reduce(((e,n)=>function(e,t,n){return e.replace(new RegExp(`\\{${t}\\}`,"g"),n)}(e,n,String(t[n]))),e):e},t.stringifyQuery=function(e){if(!e)return"";const t=new URLSearchParams;Object.keys(e).forEach((n=>{null!=e[n]&&t.append(n,String(e[n]))}));const n=t.toString();return n?`?${n}`:""},t.fetchData=function(e,t,i,a,r){return n(this,void 0,void 0,(function*(){const n=Object.assign({"Content-Type":"application/json"},a),o={method:null!=t?t:"POST",headers:n};return r&&(o.credentials=r),null!=i&&(o.body="string"==typeof i?i:JSON.stringify(i)),s(yield fetch(e,o))}))},t.getData=function(e,t,i){return n(this,void 0,void 0,(function*(){const n={method:"GET"};return t&&(n.headers=Object.assign(Object.assign({},t),{"Content-Type":"application/json"})),i&&(n.credentials=i),s(yield fetch(e,n))}))}},37848:(e,t,n)=>{n.d(t,{default:()=>nt});const s=e=>e.toString(16).padStart(2,"0");class i{}var a,r;i.makeRequest=(e,t)=>({id:"undefined"!=typeof window?(e=>{const t=new Uint8Array(5);return window.crypto.getRandomValues(t),Array.from(t,s).join("")})():(new Date).getTime().toString(36),method:e,params:t,env:{sdkVersion:"9.1.0"}}),i.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t}),i.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n}),function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"}(a||(a={})),function(e){e.requestAddressBook="requestAddressBook"}(r||(r={}));const o=class{constructor(e=null,t=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer="undefined"==typeof window,this.isValidMessage=({origin:e,data:t,source:n})=>{const s=!t,i=!this.isServer&&n===window.parent,a=void 0!==t.version&&parseInt(t.version.split(".")[0]),r="number"==typeof a&&a>=1;let o=!0;return Array.isArray(this.allowedOrigins)&&(o=void 0!==this.allowedOrigins.find((t=>t.test(e)))),!s&&i&&r&&o},this.logIncomingMessage=e=>{console.info(`Safe Apps SDK v1: A message was received from origin ${e.origin}. `,e.data)},this.onParentMessage=e=>{this.isValidMessage(e)&&(this.debugMode&&this.logIncomingMessage(e),this.handleIncomingMessage(e.data))},this.handleIncomingMessage=e=>{const{id:t}=e,n=this.callbacks.get(t);n&&(n(e),this.callbacks.delete(t))},this.send=(e,t)=>{const n=i.makeRequest(e,t);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(n,"*"),new Promise(((e,t)=>{this.callbacks.set(n.id,(n=>{n.success?e(n):t(new Error(n.error))}))}))},this.allowedOrigins=e,this.debugMode=t,this.isServer||window.addEventListener("message",this.onParentMessage)}},c=e=>"object"==typeof e&&null!=e&&"domain"in e&&"types"in e&&"message"in e;n(8442);class u{constructor(e){this.communicator=e}async getBySafeTxHash(e){if(!e)throw new Error("Invalid safeTxHash");return(await this.communicator.send(a.getTxBySafeTxHash,{safeTxHash:e})).data}async signMessage(e){const t={message:e};return(await this.communicator.send(a.signMessage,t)).data}async signTypedMessage(e){if(!c(e))throw new Error("Invalid typed data");return(await this.communicator.send(a.signTypedMessage,{typedData:e})).data}async send({txs:e,params:t}){if(!e||!e.length)throw new Error("No transactions were passed");const n={txs:e,params:t};return(await this.communicator.send(a.sendTransactions,n)).data}}const d="eth_call",l={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class f{constructor(e){this.communicator=e,this.call=this.buildRequest({call:d,formatters:[null,l.defaultBlockParam]}),this.getBalance=this.buildRequest({call:"eth_getBalance",formatters:[null,l.defaultBlockParam]}),this.getCode=this.buildRequest({call:"eth_getCode",formatters:[null,l.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:"eth_getStorageAt",formatters:[null,l.blockNumberToHex,l.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:"eth_getLogs"}),this.getBlockByHash=this.buildRequest({call:"eth_getBlockByHash",formatters:[null,l.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:"eth_getBlockByNumber",formatters:[l.blockNumberToHex,l.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:"eth_getTransactionByHash"}),this.getTransactionReceipt=this.buildRequest({call:"eth_getTransactionReceipt"}),this.getTransactionCount=this.buildRequest({call:"eth_getTransactionCount",formatters:[null,l.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:"eth_gasPrice"}),this.getEstimateGas=e=>this.buildRequest({call:"eth_estimateGas"})([e]),this.setSafeSettings=this.buildRequest({call:"safe_setSettings"})}buildRequest(e){const{call:t,formatters:n}=e;return async e=>{n&&Array.isArray(e)&&n.forEach(((t,n)=>{t&&(e[n]=t(e[n]))}));const s={call:t,params:e||[]};return(await this.communicator.send(a.rpcCall,s)).data}}}function p(e){return"string"==typeof e[0]?h(e):function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let s=0;for(const t of e)n.set(t,s),s+=t.length;return n}(e)}function h(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}function g(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new P(e.type);return`${e.name}(${y(e.inputs,{includeName:t})})`}function y(e,{includeName:t=!1}={}){return e?e.map((e=>function(e,{includeName:t}){return e.type.startsWith("tuple")?`(${y(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t}))).join(t?", ":","):""}function m(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}function b(e){return m(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}class E extends Error{constructor(e,t={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"viem@2.16.3"});const n=t.cause instanceof E?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof E&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: ${t.docsBaseUrl??"https://viem.sh"}${s}${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=s,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return I(this,e)}}function I(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e?I(e.cause,t):t?null:e}class v extends E{constructor({expectedLength:e,givenLength:t,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class T extends E{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${b(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class A extends E{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class w extends E{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class O extends E{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${g(e.abiItem)}\`, and`,`\`${t.type}\` in \`${g(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItemAmbiguityError"})}}class S extends E{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class _ extends E{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class N extends E{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class P extends E{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}class C extends E{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}class M extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}set(e,t){return super.set(e,t),this.maxSize&&this.size>this.maxSize&&this.delete(this.keys().next().value),this}}class x extends E{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class D extends E{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function $(e,{dir:t,size:n=32}={}){return"string"==typeof e?R(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new D({size:e.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const a="right"===t;s[a?i:n-i-1]=e[a?i:e.length-i-1]}return s}(e,{dir:t,size:n})}function R(e,{dir:t,size:n=32}={}){if(null===n)return e;const s=e.replace("0x","");if(s.length>2*n)throw new D({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s["right"===t?"padEnd":"padStart"](2*n,"0")}`}class L extends E{constructor({max:e,min:t,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${8*s}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class B extends E{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function U(e,{size:t}){if(b(e)>t)throw new B({givenSize:b(e),maxSize:t})}const z=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function j(e,t={}){return"number"==typeof e||"bigint"==typeof e?q(e,t):"string"==typeof e?G(e,t):"boolean"==typeof e?k(e,t):H(e,t)}function k(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?(U(n,{size:t.size}),$(n,{size:t.size})):n}function H(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=z[e[t]];const s=`0x${n}`;return"number"==typeof t.size?(U(s,{size:t.size}),$(s,{dir:"right",size:t.size})):s}function q(e,t={}){const{signed:n,size:s}=t,i=BigInt(e);let a;s?a=n?(1n<<8n*BigInt(s)-1n)-1n:2n**(8n*BigInt(s))-1n:"number"==typeof e&&(a=BigInt(Number.MAX_SAFE_INTEGER));const r="bigint"==typeof a&&n?-a-1n:0;if(a&&i>a||i<r){const t="bigint"==typeof e?"n":"";throw new L({max:a?`${a}${t}`:void 0,min:`${r}${t}`,signed:n,size:s,value:`${e}${t}`})}const o=`0x${(n&&i<0?(1n<<BigInt(8*s))+BigInt(i):i).toString(16)}`;return s?$(o,{size:s}):o}const F=new TextEncoder;function G(e,t={}){return H(F.encode(e),t)}const W=new TextEncoder;function V(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){return Q(q(e,t))}(e,t):"boolean"==typeof e?function(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),"number"==typeof t.size?(U(n,{size:t.size}),$(n,{size:t.size})):n}(e,t):m(e)?Q(e,t):Y(e,t)}const K={zero:48,nine:57,A:65,F:70,a:97,f:102};function X(e){return e>=K.zero&&e<=K.nine?e-K.zero:e>=K.A&&e<=K.F?e-(K.A-10):e>=K.a&&e<=K.f?e-(K.a-10):void 0}function Q(e,t={}){let n=e;t.size&&(U(n,{size:t.size}),n=$(n,{dir:"right",size:t.size}));let s=n.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,a=new Uint8Array(i);for(let e=0,t=0;e<i;e++){const n=X(s.charCodeAt(t++)),i=X(s.charCodeAt(t++));if(void 0===n||void 0===i)throw new E(`Invalid byte sequence ("${s[t-2]}${s[t-1]}" in "${s}").`);a[e]=16*n+i}return a}function Y(e,t={}){const n=W.encode(e);return"number"==typeof t.size?(U(n,{size:t.size}),$(n,{dir:"right",size:t.size})):n}function J(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Z(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function ee(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const te=BigInt(2**32-1),ne=BigInt(32);function se(e,t=!1){return t?{h:Number(e&te),l:Number(e>>ne&te)}:{h:0|Number(e>>ne&te),l:0|Number(e&te)}}function ie(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:r}=se(e[i],t);[n[i],s[i]]=[a,r]}return[n,s]}if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function ae(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!(e instanceof Uint8Array))throw new Error("expected Uint8Array, got "+typeof e);return e}class re{clone(){return this._cloneInto()}}const[oe,ce,ue]=[[],[],[]],de=BigInt(0),le=BigInt(1),fe=BigInt(2),pe=BigInt(7),he=BigInt(256),ge=BigInt(113);for(let e=0,t=le,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],oe.push(2*(5*s+n)),ce.push((e+1)*(e+2)/2%64);let i=de;for(let e=0;e<7;e++)t=(t<<le^(t>>pe)*ge)%he,t&fe&&(i^=le<<(le<<BigInt(e))-le);ue.push(i)}const[ye,me]=ie(ue,!0),be=(e,t,n)=>n>32?((e,t,n)=>t<<n-32|e>>>64-n)(e,t,n):((e,t,n)=>e<<n|t>>>32-n)(e,t,n),Ee=(e,t,n)=>n>32?((e,t,n)=>e<<n-32|t>>>64-n)(e,t,n):((e,t,n)=>t<<n|e>>>32-n)(e,t,n);class Ie extends re{constructor(e,t,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,J(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,i=(t+2)%10,a=n[i],r=n[i+1],o=be(a,r,1)^n[s],c=Ee(a,r,1)^n[s+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],i=e[3];for(let n=0;n<24;n++){const s=ce[n],a=be(t,i,s),r=Ee(t,i,s),o=oe[n];t=e[o],i=e[o+1],e[o]=a,e[o+1]=r}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)n[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~n[(s+2)%10]&n[(s+4)%10]}e[0]^=ye[s],e[1]^=me[s]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ee(this);const{blockLen:t,state:n}=this,s=(e=ae(e)).length;for(let i=0;i<s;){const a=Math.min(t-this.pos,s-i);for(let t=0;t<a;t++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,128&t&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ee(this,!1),Z(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return J(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(function(e,t){Z(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new Ie(t,n,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const ve=((e,t,n)=>function(e){const t=t=>e().update(ae(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}((()=>new Ie(t,e,n))))(1,136,32);function Te(e,t){const n=t||"hex",s=ve(m(e,{strict:!1})?V(e):e);return"bytes"===n?s:j(s)}const Ae=new M(8192);const we=/^0x[a-fA-F0-9]{40}$/,Oe=new M(8192);function Se(e,t){const{strict:n=!0}=t??{},s=`${e}.${n}`;if(Oe.has(s))return Oe.get(s);const i=!(!we.test(e)||e.toLowerCase()!==e&&n&&function(e,t){if(Ae.has(`${e}.${t}`))return Ae.get(`${e}.${t}`);const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),s=Te(Y(n),"bytes"),i=(t?n.substring(`${t}0x`.length):n).split("");for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&i[e]&&(i[e]=i[e].toUpperCase()),(15&s[e>>1])>=8&&i[e+1]&&(i[e+1]=i[e+1].toUpperCase());const a=`0x${i.join("")}`;return Ae.set(`${e}.${t}`,a),a}(e)!==e);return Oe.set(s,i),i}function _e(e,t,n,{strict:s}={}){return m(e,{strict:!1})?function(e,t,n,{strict:s}={}){Ne(e,t);const i=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;return s&&Pe(i,t,n),i}(e,t,n,{strict:s}):function(e,t,n,{strict:s}={}){Ne(e,t);const i=e.slice(t,n);return s&&Pe(i,t,n),i}(e,t,n,{strict:s})}function Ne(e,t){if("number"==typeof t&&t>0&&t>b(e)-1)throw new x({offset:t,position:"start",size:b(e)})}function Pe(e,t,n){if("number"==typeof t&&"number"==typeof n&&b(e)!==n-t)throw new x({offset:n,position:"end",size:b(e)})}function Ce(e,t){if(e.length!==t.length)throw new A({expectedLength:e.length,givenLength:t.length});const n=function({params:e,values:t}){const n=[];for(let s=0;s<e.length;s++)n.push(Me({param:e[s],value:t[s]}));return n}({params:e,values:t}),s=xe(n);return 0===s.length?"0x":s}function Me({param:e,value:t}){const n=function(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}(e.type);if(n){const[s,i]=n;return function(e,{length:t,param:n}){const s=null===t;if(!Array.isArray(e))throw new N(e);if(!s&&e.length!==t)throw new v({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let i=!1;const a=[];for(let t=0;t<e.length;t++){const s=Me({param:n,value:e[t]});s.dynamic&&(i=!0),a.push(s)}if(s||i){const e=xe(a);if(s){const t=q(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?p([t,e]):t}}if(i)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:p(a.map((({encoded:e})=>e)))}}(t,{length:s,param:{...e,type:i}})}if("tuple"===e.type)return function(e,{param:t}){let n=!1;const s=[];for(let i=0;i<t.components.length;i++){const a=t.components[i],r=Me({param:a,value:e[Array.isArray(e)?i:a.name]});s.push(r),r.dynamic&&(n=!0)}return{dynamic:n,encoded:n?xe(s):p(s.map((({encoded:e})=>e)))}}(t,{param:e});if("address"===e.type)return function(e){if(!Se(e))throw new C({address:e});return{dynamic:!1,encoded:R(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){if("boolean"!=typeof e)throw new E(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:R(k(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return function(e,{signed:t}){return{dynamic:!1,encoded:q(e,{size:32,signed:t})}}(t,{signed:e.type.startsWith("int")});if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,n]=t.type.split("bytes"),s=b(e);if(!n){let t=e;return s%32!=0&&(t=R(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:p([R(q(s,{size:32})),t])}}if(s!==Number.parseInt(n))throw new T({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:R(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=G(e),n=Math.ceil(b(t)/32),s=[];for(let e=0;e<n;e++)s.push(R(_e(t,32*e,32*(e+1)),{dir:"right"}));return{dynamic:!0,encoded:p([R(q(b(t),{size:32})),...s])}}(t);throw new _(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function xe(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:s,encoded:i}=e[n];t+=s?32:b(i)}const n=[],s=[];let i=0;for(let a=0;a<e.length;a++){const{dynamic:r,encoded:o}=e[a];r?(n.push(q(t+i,{size:32})),s.push(o),i+=b(o)):n.push(o)}return p([...n,...s])}const De=/^tuple(?<array>(\[(\d*)\])*)$/;function $e(e){let t=e.type;if(De.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++)t+=$e(e.components[s]),s<n-1&&(t+=", ");const s=function(e,t){const n=e.exec(t);return n?.groups}(De,e.type);return t+=`)${s?.array??""}`,$e({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Re(e){let t="";const n=e.length;for(let s=0;s<n;s++)t+=$e(e[s]),s!==n-1&&(t+=", ");return t}function Le(e){return s=function(e){let t=!0,n="",s=0,i="",a=!1;for(let r=0;r<e.length;r++){const o=e[r];if(["(",")",","].includes(o)&&(t=!0),"("===o&&s++,")"===o&&s--,t)if(0!==s)" "!==o?(i+=o,n+=o):","!==e[r-1]&&","!==n&&",("!==n&&(n="",t=!1);else if(" "===o&&["event","function",""].includes(i))i="";else if(i+=o,")"===o){a=!0;break}}if(!a)throw new E("Unable to normalize signature.");return i}("string"==typeof(t=e)?t:"function"===(n=t).type?`function ${n.name}(${Re(n.inputs)})${n.stateMutability&&"nonpayable"!==n.stateMutability?` ${n.stateMutability}`:""}${n.outputs.length?` returns (${Re(n.outputs)})`:""}`:"event"===n.type?`event ${n.name}(${Re(n.inputs)})`:"error"===n.type?`error ${n.name}(${Re(n.inputs)})`:"constructor"===n.type?`constructor(${Re(n.inputs)})${"payable"===n.stateMutability?" payable":""}`:"fallback"===n.type?"fallback()":"receive() external payable"),Te(V(s));var t,n,s}const Be=e=>_e(Le(e),0,4),Ue=Le;function ze(e,t){const n=typeof e,s=t.type;switch(s){case"address":return Se(e,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===s&&"components"in t?Object.values(t.components).every(((t,n)=>ze(Object.values(e)[n],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(s)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(s)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(s)&&Array.isArray(e)&&e.every((e=>ze(e,{...t,type:s.replace(/(\[[0-9]{0,}\])$/,"")})))}}function je(e,t,n){for(const s in e){const i=e[s],a=t[s];if("tuple"===i.type&&"tuple"===a.type&&"components"in i&&"components"in a)return je(i.components,a.components,n[s]);const r=[i.type,a.type];if(r.includes("address")&&r.includes("bytes20")||(r.includes("address")&&r.includes("string")||r.includes("address")&&r.includes("bytes"))&&Se(n[s],{strict:!1}))return r}}const ke="/docs/contract/encodeFunctionData";function He(e){const{args:t}=e,{abi:n,functionName:s}=1===e.abi.length&&e.functionName?.startsWith("0x")?e:function(e){const{abi:t,args:n,functionName:s}=e;let i=t[0];if(s){const e=function(e){const{abi:t,args:n=[],name:s}=e,i=m(s,{strict:!1}),a=t.filter((e=>i?"function"===e.type?Be(e)===s:"event"===e.type&&Ue(e)===s:"name"in e&&e.name===s));if(0===a.length)return;if(1===a.length)return a[0];let r;for(const e of a)if("inputs"in e)if(n&&0!==n.length){if(e.inputs&&0!==e.inputs.length&&e.inputs.length===n.length&&n.every(((t,n)=>{const s="inputs"in e&&e.inputs[n];return!!s&&ze(t,s)}))){if(r&&"inputs"in r&&r.inputs){const t=je(e.inputs,r.inputs,n);if(t)throw new O({abiItem:e,type:t[0]},{abiItem:r,type:t[1]})}r=e}}else if(!e.inputs||0===e.inputs.length)return e;return r||a[0]}({abi:t,args:n,name:s});if(!e)throw new w(s,{docsPath:ke});i=e}if("function"!==i.type)throw new w(void 0,{docsPath:ke});return{abi:[i],functionName:Be(g(i))}}(e),i=n[0];return h([s,("inputs"in i&&i.inputs?Ce(i.inputs,t??[]):void 0)??"0x"])}const qe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Fe=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ge({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function We({data:e,primaryType:t,types:n}){return Te(Ve({data:e,primaryType:t,types:n}))}function Ve({data:e,primaryType:t,types:n}){const s=[{type:"bytes32"}],i=[Ke({primaryType:t,types:n})];for(const a of n[t]){const[t,r]=Qe({types:n,name:a.name,type:a.type,value:e[a.name]});s.push(t),i.push(r)}return Ce(s,i)}function Ke({primaryType:e,types:t}){const n=j(function({primaryType:e,types:t}){let n="";const s=Xe({primaryType:e,types:t});s.delete(e);const i=[e,...Array.from(s).sort()];for(const e of i)n+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`;return n}({primaryType:e,types:t}));return Te(n)}function Xe({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u),i=s?.[0];if(n.has(i)||void 0===t[i])return n;n.add(i);for(const e of t[i])Xe({primaryType:e.type,types:t},n);return n}function Qe({types:e,name:t,type:n,value:s}){if(void 0!==e[n])return[{type:"bytes32"},Te(Ve({data:s,primaryType:n,types:e}))];if("bytes"===n)return[{type:"bytes32"},Te(s="0x"+((s.length%2?"0":"")+s.slice(2)))];if("string"===n)return[{type:"bytes32"},Te(j(s))];if(n.lastIndexOf("]")===n.length-1){const i=n.slice(0,n.lastIndexOf("[")),a=s.map((n=>Qe({name:t,type:i,types:e,value:n})));return[{type:"bytes32"},Te(Ce(a.map((([e])=>e)),a.map((([,e])=>e))))]}return[{type:n},s]}const Ye=4001;class Je extends Error{constructor(e,t,n){super(e),this.code=t,this.data=n,Object.setPrototypeOf(this,Je.prototype)}}class Ze{constructor(e){this.communicator=e}async getPermissions(){return(await this.communicator.send(a.wallet_getPermissions,void 0)).data}async requestPermissions(e){if(!this.isPermissionRequestValid(e))throw new Je("Permissions request is invalid",Ye);try{return(await this.communicator.send(a.wallet_requestPermissions,e)).data}catch{throw new Je("Permissions rejected",Ye)}}isPermissionRequestValid(e){return e.every((e=>"object"==typeof e&&Object.keys(e).every((e=>!!Object.values(r).includes(e)))))}}const et=(e,t)=>t.some((t=>t.parentCapability===e));class tt{constructor(e){this.communicator=e}async getChainInfo(){return(await this.communicator.send(a.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(a.getSafeInfo,void 0)).data}async experimental_getBalances({currency:e="usd"}={}){return(await this.communicator.send(a.getSafeBalances,{currency:e})).data}async check1271Signature(e,t="0x"){const n=await this.getInfo(),s=He({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,t]}),i={call:d,params:[{to:n.safeAddress,data:s},"latest"]};try{return"0x1626ba7e"===(await this.communicator.send(a.rpcCall,i)).data.slice(0,10).toLowerCase()}catch(e){return!1}}async check1271SignatureBytes(e,t="0x"){const n=await this.getInfo(),s=He({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,t]}),i={call:d,params:[{to:n.safeAddress,data:s},"latest"]};try{return"0x20c13b0b"===(await this.communicator.send(a.rpcCall,i)).data.slice(0,10).toLowerCase()}catch(e){return!1}}calculateMessageHash(e){return function(e,t){return Te(function(e){const t="string"==typeof e?G(e):"string"==typeof e.raw?e.raw:H(e.raw);return p([G(`Ethereum Signed Message:\n${b(t)}`),t])}(e),t)}(e)}calculateTypedMessageHash(e){const t="object"==typeof e.domain.chainId?e.domain.chainId.toNumber():Number(e.domain.chainId);let n=e.primaryType;if(!n){const t=Object.values(e.types),s=Object.keys(e.types).filter((e=>t.every((t=>t.every((({type:t})=>t.replace("[","").replace("]","")!==e))))));if(0===s.length||s.length>1)throw new Error("Please specify primaryType");n=s[0]}return function(e){const{domain:t={},message:n,primaryType:s}=e,i={EIP712Domain:Ge({domain:t}),...e.types};!function(e){const{domain:t,message:n,primaryType:s,types:i}=e,a=(e,t)=>{for(const n of e){const{name:e,type:s}=n,r=t[e],o=s.match(Fe);if(o&&("number"==typeof r||"bigint"==typeof r)){const[e,t,n]=o;q(r,{signed:"int"===t,size:Number.parseInt(n)/8})}if("address"===s&&"string"==typeof r&&!Se(r))throw new C({address:r});const c=s.match(qe);if(c){const[e,t]=c;if(t&&b(r)!==Number.parseInt(t))throw new S({expectedSize:Number.parseInt(t),givenSize:b(r)})}const u=i[s];u&&a(u,r)}};i.EIP712Domain&&t&&a(i.EIP712Domain,t),"EIP712Domain"!==s&&a(i[s],n)}({domain:t,message:n,primaryType:s,types:i});const a=["0x1901"];return t&&a.push(function({domain:e,types:t}){return We({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:i})),"EIP712Domain"!==s&&a.push(We({data:n,primaryType:s,types:i})),Te(p(a))}({message:e.message,domain:{...e.domain,chainId:t,verifyingContract:e.domain.verifyingContract,salt:e.domain.salt},types:e.types,primaryType:n})}async getOffChainSignature(e){return(await this.communicator.send(a.getOffChainSignature,e)).data}async isMessageSigned(e,t="0x"){let n;if("string"==typeof e&&(n=async()=>{const n=this.calculateMessageHash(e);return await this.isMessageHashSigned(n,t)}),c(e)&&(n=async()=>{const n=this.calculateTypedMessageHash(e);return await this.isMessageHashSigned(n,t)}),n)return await n();throw new Error("Invalid message type")}async isMessageHashSigned(e,t="0x"){const n=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const s of n)if(await s(e,t))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(a.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(a.requestAddressBook,void 0)).data}}!function(e,t,n,s){var i,a=arguments.length,r=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);a>3&&r&&Object.defineProperty(t,n,r)}([(e,t,n)=>{const s=n.value;return n.value=async function(){const e=new Ze(this.communicator);let n=await e.getPermissions();if(et(t,n)||(n=await e.requestPermissions([{[t]:{}}])),!et(t,n))throw new Je("Permissions rejected",Ye);return s.apply(this)},n}],tt.prototype,"requestAddressBook",null);const nt=class{constructor(e={}){const{allowedDomains:t=null,debug:n=!1}=e;this.communicator=new o(t,n),this.eth=new f(this.communicator),this.txs=new u(this.communicator),this.safe=new tt(this.communicator),this.wallet=new Ze(this.communicator)}}}}]);